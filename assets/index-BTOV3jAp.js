const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-CjrjtHvb.js","assets/vendor-BVRMx2jP.js"])))=>i.map(i=>d[i]);
var Z5=Object.defineProperty;var K_=t=>{throw TypeError(t)};var e3=(t,e,r)=>e in t?Z5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var G_=(t,e,r)=>e3(t,typeof e!="symbol"?e+"":e,r),yp=(t,e,r)=>e.has(t)||K_("Cannot "+r);var z=(t,e,r)=>(yp(t,e,"read from private field"),r?r.call(t):e.get(t)),Te=(t,e,r)=>e.has(t)?K_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),ge=(t,e,r,n)=>(yp(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),Qe=(t,e,r)=>(yp(t,e,"access private method"),r);var Ju=(t,e,r,n)=>({set _(a){ge(t,e,a,r)},get _(){return z(t,e,n)}});import{c as kx,a as Kn,u as cr,j as i,B as t3,P as it,V as AC,b as Fs,d as Nn,e as Sl,f as je,R as r3,g as Nx,h as TC,i as DC,k as lc,A as Cm,D as Ex,C as Cx,S as PC,l as n3,m as Ax,n as xu,o as MC,p as Bs,O as wu,q as _u,r as Am,T as ju,s as Su,t as Tx,v as Dx,w as Px,x as Mx,y as OC,F as RC,z as $C,E as IC,G as LC,I as a3,H as FC,J as BC,K as s3,L as qC,M as i3,N as UC,Q as zC,U as o3,W as l3,X as HC,Y as c3,Z as d3,_ as WC,$ as KC,a0 as u3,a1 as h3,a2 as f3,a3 as Mo,a4 as m3,a5 as g3,a6 as p3,a7 as v3,a8 as y3,a9 as b3,aa as GC,ab as x3,ac as w3}from"./ui-CYPdcnyM.js";import{a as Ri,r as x,R as $,b as VC,g as _3,c as _r,d as jt,$ as Ox}from"./vendor-BVRMx2jP.js";import{u as QC,a as cc,O as j3,b as S3,R as Rx,c as vt,d as ku,B as k3}from"./router-BzuD5bQK.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var $x,V_=Ri;$x=V_.createRoot,V_.hydrateRoot;const N3=1,E3=1e6;let bp=0;function C3(){return bp=(bp+1)%Number.MAX_SAFE_INTEGER,bp.toString()}const xp=new Map,Q_=t=>{if(xp.has(t))return;const e=setTimeout(()=>{xp.delete(t),od({type:"REMOVE_TOAST",toastId:t})},E3);xp.set(t,e)},A3=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,N3)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Q_(r):t.toasts.forEach(n=>{Q_(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Ih=[];let Lh={toasts:[]};function od(t){Lh=A3(Lh,t),Ih.forEach(e=>{e(Lh)})}function nt({...t}){const e=C3(),r=a=>od({type:"UPDATE_TOAST",toast:{...a,id:e}}),n=()=>od({type:"DISMISS_TOAST",toastId:e});return od({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:a=>{a||n()}}}),{id:e,dismiss:n,update:r}}function Ce(){const[t,e]=x.useState(Lh);return x.useEffect(()=>(Ih.push(e),()=>{const r=Ih.indexOf(e);r>-1&&Ih.splice(r,1)}),[t]),{...t,toast:nt,dismiss:r=>od({type:"DISMISS_TOAST",toastId:r})}}var Ix="ToastProvider",[Lx,T3,D3]=kx("Toast"),[JC,kAe]=Kn("Toast",[D3]),[P3,Tm]=JC(Ix),YC=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:s=50,children:o}=t,[l,c]=x.useState(null),[d,u]=x.useState(0),h=x.useRef(!1),f=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Ix}\`. Expected non-empty \`string\`.`),i.jsx(Lx.Provider,{scope:e,children:i.jsx(P3,{scope:e,label:r,duration:n,swipeDirection:a,swipeThreshold:s,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:x.useCallback(()=>u(m=>m+1),[]),onToastRemove:x.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};YC.displayName=Ix;var XC="ToastViewport",M3=["F8"],zv="toast.viewportPause",Hv="toast.viewportResume",ZC=x.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=M3,label:a="Notifications ({hotkey})",...s}=t,o=Tm(XC,r),l=T3(r),c=x.useRef(null),d=x.useRef(null),u=x.useRef(null),h=x.useRef(null),f=cr(e,h,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;x.useEffect(()=>{const g=y=>{var w;n.length!==0&&n.every(j=>y[j]||y.code===j)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),x.useEffect(()=>{const g=c.current,y=h.current;if(v&&g&&y){const b=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(zv);y.dispatchEvent(S),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(Hv);y.dispatchEvent(S),o.isClosePausedRef.current=!1}},j=S=>{!g.contains(S.relatedTarget)&&w()},_=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",b),g.addEventListener("focusout",j),g.addEventListener("pointermove",b),g.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",b),g.removeEventListener("focusout",j),g.removeEventListener("pointermove",b),g.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[v,o.isClosePausedRef]);const p=x.useCallback(({tabbingDirection:g})=>{const b=l().map(w=>{const j=w.ref.current,_=[j,...K3(j)];return g==="forwards"?_:_.reverse()});return(g==="forwards"?b.reverse():b).flat()},[l]);return x.useEffect(()=>{const g=h.current;if(g){const y=b=>{var _,S,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const k=document.activeElement,E=b.shiftKey;if(b.target===g&&E){(_=d.current)==null||_.focus();return}const D=p({tabbingDirection:E?"backwards":"forwards"}),A=D.findIndex(C=>C===k);wp(D.slice(A+1))?b.preventDefault():E?(S=d.current)==null||S.focus():(N=u.current)==null||N.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[l,p]),i.jsxs(t3,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&i.jsx(Wv,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});wp(g)}}),i.jsx(Lx.Slot,{scope:r,children:i.jsx(it.ol,{tabIndex:-1,...s,ref:f})}),v&&i.jsx(Wv,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});wp(g)}})]})});ZC.displayName=XC;var eA="ToastFocusProxy",Wv=x.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=t,s=Tm(eA,r);return i.jsx(AC,{"aria-hidden":!0,tabIndex:0,...a,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=s.viewport)!=null&&d.contains(l))&&n()}})});Wv.displayName=eA;var Dm="Toast",O3="toast.swipeStart",R3="toast.swipeMove",$3="toast.swipeCancel",I3="toast.swipeEnd",tA=x.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:s,...o}=t,[l=!0,c]=Fs({prop:n,defaultProp:a,onChange:s});return i.jsx(Nn,{present:r||l,children:i.jsx(B3,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Sl(t.onPause),onResume:Sl(t.onResume),onSwipeStart:je(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:je(t.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:je(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:je(t.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});tA.displayName=Dm;var[L3,F3]=JC(Dm,{onClose(){}}),B3=x.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:s,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=t,p=Tm(Dm,r),[g,y]=x.useState(null),b=cr(e,C=>y(C)),w=x.useRef(null),j=x.useRef(null),_=a||p.duration,S=x.useRef(0),N=x.useRef(_),k=x.useRef(0),{onToastAdd:E,onToastRemove:P}=p,T=Sl(()=>{var R;(g==null?void 0:g.contains(document.activeElement))&&((R=p.viewport)==null||R.focus()),o()}),D=x.useCallback(C=>{!C||C===1/0||(window.clearTimeout(k.current),S.current=new Date().getTime(),k.current=window.setTimeout(T,C))},[T]);x.useEffect(()=>{const C=p.viewport;if(C){const R=()=>{D(N.current),d==null||d()},L=()=>{const M=new Date().getTime()-S.current;N.current=N.current-M,window.clearTimeout(k.current),c==null||c()};return C.addEventListener(zv,L),C.addEventListener(Hv,R),()=>{C.removeEventListener(zv,L),C.removeEventListener(Hv,R)}}},[p.viewport,_,c,d,D]),x.useEffect(()=>{s&&!p.isClosePausedRef.current&&D(_)},[s,_,p.isClosePausedRef,D]),x.useEffect(()=>(E(),()=>P()),[E,P]);const A=x.useMemo(()=>g?lA(g):null,[g]);return p.viewport?i.jsxs(i.Fragment,{children:[A&&i.jsx(q3,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),i.jsx(L3,{scope:r,onClose:T,children:Ri.createPortal(i.jsx(Lx.ItemSlot,{scope:r,children:i.jsx(r3,{asChild:!0,onEscapeKeyDown:je(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||T(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(it.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:je(t.onKeyDown,C=>{C.key==="Escape"&&(l==null||l(C.nativeEvent),C.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:je(t.onPointerDown,C=>{C.button===0&&(w.current={x:C.clientX,y:C.clientY})}),onPointerMove:je(t.onPointerMove,C=>{if(!w.current)return;const R=C.clientX-w.current.x,L=C.clientY-w.current.y,M=!!j.current,I=["left","right"].includes(p.swipeDirection),B=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,H=I?B(0,R):0,q=I?0:B(0,L),O=C.pointerType==="touch"?10:2,F={x:H,y:q},G={originalEvent:C,delta:F};M?(j.current=F,Yu(R3,h,G,{discrete:!1})):J_(F,p.swipeDirection,O)?(j.current=F,Yu(O3,u,G,{discrete:!1}),C.target.setPointerCapture(C.pointerId)):(Math.abs(R)>O||Math.abs(L)>O)&&(w.current=null)}),onPointerUp:je(t.onPointerUp,C=>{const R=j.current,L=C.target;if(L.hasPointerCapture(C.pointerId)&&L.releasePointerCapture(C.pointerId),j.current=null,w.current=null,R){const M=C.currentTarget,I={originalEvent:C,delta:R};J_(R,p.swipeDirection,p.swipeThreshold)?Yu(I3,m,I,{discrete:!0}):Yu($3,f,I,{discrete:!0}),M.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),q3=t=>{const{__scopeToast:e,children:r,...n}=t,a=Tm(Dm,e),[s,o]=x.useState(!1),[l,c]=x.useState(!1);return H3(()=>o(!0)),x.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:i.jsx(Nx,{asChild:!0,children:i.jsx(AC,{...n,children:s&&i.jsxs(i.Fragment,{children:[a.label," ",r]})})})},U3="ToastTitle",rA=x.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return i.jsx(it.div,{...n,ref:e})});rA.displayName=U3;var z3="ToastDescription",nA=x.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return i.jsx(it.div,{...n,ref:e})});nA.displayName=z3;var aA="ToastAction",sA=x.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?i.jsx(oA,{altText:r,asChild:!0,children:i.jsx(Fx,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${aA}\`. Expected non-empty \`string\`.`),null)});sA.displayName=aA;var iA="ToastClose",Fx=x.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,a=F3(iA,r);return i.jsx(oA,{asChild:!0,children:i.jsx(it.button,{type:"button",...n,ref:e,onClick:je(t.onClick,a.onClose)})})});Fx.displayName=iA;var oA=x.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...a}=t;return i.jsx(it.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:e})});function lA(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),W3(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",s=n.dataset.radixToastAnnounceExclude==="";if(!a)if(s){const o=n.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...lA(n))}}),e}function Yu(t,e,r,{discrete:n}){const a=r.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?DC(a,s):a.dispatchEvent(s)}var J_=(t,e,r=0)=>{const n=Math.abs(t.x),a=Math.abs(t.y),s=n>a;return e==="left"||e==="right"?s&&n>r:!s&&a>r};function H3(t=()=>{}){const e=Sl(t);TC(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function W3(t){return t.nodeType===t.ELEMENT_NODE}function K3(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function wp(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var G3=YC,cA=ZC,dA=tA,uA=rA,hA=nA,fA=sA,mA=Fx;function gA(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(r=gA(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Ge(){for(var t,e,r=0,n="",a=arguments.length;r<a;r++)(t=arguments[r])&&(e=gA(t))&&(n&&(n+=" "),n+=e);return n}const Y_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,X_=Ge,no=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return X_(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:s}=e,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],h=s==null?void 0:s[d];if(u===null)return null;const f=Y_(u)||Y_(h);return a[d][f]}),l=r&&Object.entries(r).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(v=>{let[p,g]=v;return Array.isArray(g)?g.includes({...s,...l}[p]):{...s,...l}[p]===g})?[...d,h,f]:d},[]);return X_(t,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pA=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:o,...l},c)=>x.createElement("svg",{ref:c,...Q3,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:pA("lucide",a),...l},[...o.map(([d,u])=>x.createElement(d,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=(t,e)=>{const r=x.forwardRef(({className:n,...a},s)=>x.createElement(J3,{ref:s,iconNode:e,className:pA(`lucide-${V3(t)}`,n),...a}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=fe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=fe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z_=fe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=fe("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=fe("BookUser",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=fe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=fe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=fe("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=fe("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=fe("CalendarX",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=fe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=fe("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=fe("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=fe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=fe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=fe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=fe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=fe("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=fe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=fe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=fe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=fe("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=fe("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=fe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=fe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=fe("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=fe("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=fe("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wA=fe("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _A=fe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=fe("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=fe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=fe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=fe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=fe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=fe("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=fe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=fe("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=fe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=fe("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kA=fe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=fe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=fe("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=fe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=fe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=fe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=fe("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=fe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=fe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=fe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=fe("School",[["path",{d:"M14 22v-4a2 2 0 1 0-4 0v4",key:"hhkicm"}],["path",{d:"m18 10 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-7.382a1 1 0 0 1 .553-.894L6 10",key:"1xqip1"}],["path",{d:"M18 5v17",key:"1sw6gf"}],["path",{d:"m4 6 7.106-3.553a2 2 0 0 1 1.788 0L20 6",key:"9d2mlk"}],["path",{d:"M6 5v17",key:"1xfsm0"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=fe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=fe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=fe("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=fe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=fe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=fe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=fe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=fe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=fe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=fe("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=fe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=fe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Gx="-",_L=t=>{const e=SL(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:o=>{const l=o.split(Gx);return l[0]===""&&l.length!==1&&l.shift(),CA(l,e)||jL(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},CA=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),a=n?CA(t.slice(1),n):void 0;if(a)return a;if(e.validators.length===0)return;const s=t.join(Gx);return(o=e.validators.find(({validator:l})=>l(s)))==null?void 0:o.classGroupId},nj=/^\[(.+)\]$/,jL=t=>{if(nj.test(t)){const e=nj.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},SL=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return NL(Object.entries(t.classGroups),r).forEach(([s,o])=>{Qv(o,n,s,e)}),n},Qv=(t,e,r,n)=>{t.forEach(a=>{if(typeof a=="string"){const s=a===""?e:aj(e,a);s.classGroupId=r;return}if(typeof a=="function"){if(kL(a)){Qv(a(n),e,r,n);return}e.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([s,o])=>{Qv(o,aj(e,s),r,n)})})},aj=(t,e)=>{let r=t;return e.split(Gx).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},kL=t=>t.isThemeGetter,NL=(t,e)=>e?t.map(([r,n])=>{const a=n.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,l])=>[e+o,l])):s);return[r,a]}):t,EL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const a=(s,o)=>{r.set(s,o),e++,e>t&&(e=0,n=r,r=new Map)};return{get(s){let o=r.get(s);if(o!==void 0)return o;if((o=n.get(s))!==void 0)return a(s,o),o},set(s,o){r.has(s)?r.set(s,o):a(s,o)}}},AA="!",CL=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,a=e[0],s=e.length,o=l=>{const c=[];let d=0,u=0,h;for(let g=0;g<l.length;g++){let y=l[g];if(d===0){if(y===a&&(n||l.slice(g,g+s)===e)){c.push(l.slice(u,g)),u=g+s;continue}if(y==="/"){h=g;continue}}y==="["?d++:y==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(AA),v=m?f.substring(1):f,p=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:p}};return r?l=>r({className:l,parseClassName:o}):o},AL=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},TL=t=>({cache:EL(t.cacheSize),parseClassName:CL(t),..._L(t)}),DL=/\s+/,PL=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=e,s=[],o=t.trim().split(DL);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=r(d);let v=!!m,p=n(v?f.substring(0,m):f);if(!p){if(!v){l=d+(l.length>0?" "+l:l);continue}if(p=n(f),!p){l=d+(l.length>0?" "+l:l);continue}v=!1}const g=AL(u).join(":"),y=h?g+AA:g,b=y+p;if(s.includes(b))continue;s.push(b);const w=a(p,v);for(let j=0;j<w.length;++j){const _=w[j];s.push(y+_)}l=d+(l.length>0?" "+l:l)}return l};function ML(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=TA(e))&&(n&&(n+=" "),n+=r);return n}const TA=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=TA(t[n]))&&(r&&(r+=" "),r+=e);return r};function OL(t,...e){let r,n,a,s=o;function o(c){const d=e.reduce((u,h)=>h(u),t());return r=TL(d),n=r.cache.get,a=r.cache.set,s=l,l(c)}function l(c){const d=n(c);if(d)return d;const u=PL(c,r);return a(c,u),u}return function(){return s(ML.apply(null,arguments))}}const $t=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},DA=/^\[(?:([a-z-]+):)?(.+)\]$/i,RL=/^\d+\/\d+$/,$L=new Set(["px","full","screen"]),IL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,BL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,qL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,pa=t=>Jo(t)||$L.has(t)||RL.test(t),Ya=t=>uc(t,"length",QL),Jo=t=>!!t&&!Number.isNaN(Number(t)),_p=t=>uc(t,"number",Jo),Rc=t=>!!t&&Number.isInteger(Number(t)),UL=t=>t.endsWith("%")&&Jo(t.slice(0,-1)),We=t=>DA.test(t),Xa=t=>IL.test(t),zL=new Set(["length","size","percentage"]),HL=t=>uc(t,zL,PA),WL=t=>uc(t,"position",PA),KL=new Set(["image","url"]),GL=t=>uc(t,KL,YL),VL=t=>uc(t,"",JL),$c=()=>!0,uc=(t,e,r)=>{const n=DA.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},QL=t=>LL.test(t)&&!FL.test(t),PA=()=>!1,JL=t=>BL.test(t),YL=t=>qL.test(t),XL=()=>{const t=$t("colors"),e=$t("spacing"),r=$t("blur"),n=$t("brightness"),a=$t("borderColor"),s=$t("borderRadius"),o=$t("borderSpacing"),l=$t("borderWidth"),c=$t("contrast"),d=$t("grayscale"),u=$t("hueRotate"),h=$t("invert"),f=$t("gap"),m=$t("gradientColorStops"),v=$t("gradientColorStopPositions"),p=$t("inset"),g=$t("margin"),y=$t("opacity"),b=$t("padding"),w=$t("saturate"),j=$t("scale"),_=$t("sepia"),S=$t("skew"),N=$t("space"),k=$t("translate"),E=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",We,e],D=()=>[We,e],A=()=>["",pa,Ya],C=()=>["auto",Jo,We],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],L=()=>["solid","dashed","dotted","double","none"],M=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],B=()=>["","0",We],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Jo,We];return{cacheSize:500,separator:":",theme:{colors:[$c],spacing:[pa,Ya],blur:["none","",Xa,We],brightness:q(),borderColor:[t],borderRadius:["none","","full",Xa,We],borderSpacing:D(),borderWidth:A(),contrast:q(),grayscale:B(),hueRotate:q(),invert:B(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[UL,Ya],inset:T(),margin:T(),opacity:q(),padding:D(),saturate:q(),scale:q(),sepia:B(),skew:q(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",We]}],container:["container"],columns:[{columns:[Xa]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),We]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rc,We]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",We]}],grow:[{grow:B()}],shrink:[{shrink:B()}],order:[{order:["first","last","none",Rc,We]}],"grid-cols":[{"grid-cols":[$c]}],"col-start-end":[{col:["auto",{span:["full",Rc,We]},We]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[$c]}],"row-start-end":[{row:["auto",{span:[Rc,We]},We]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",We]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",We]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",We,e]}],"min-w":[{"min-w":[We,e,"min","max","fit"]}],"max-w":[{"max-w":[We,e,"none","full","min","max","fit","prose",{screen:[Xa]},Xa]}],h:[{h:[We,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[We,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[We,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[We,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Xa,Ya]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_p]}],"font-family":[{font:[$c]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",We]}],"line-clamp":[{"line-clamp":["none",Jo,_p]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",pa,We]}],"list-image":[{"list-image":["none",We]}],"list-style-type":[{list:["none","disc","decimal",We]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...L(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",pa,Ya]}],"underline-offset":[{"underline-offset":["auto",pa,We]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",We]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",We]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),WL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",HL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...L(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:L()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...L()]}],"outline-offset":[{"outline-offset":[pa,We]}],"outline-w":[{outline:[pa,Ya]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[pa,Ya]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Xa,VL]}],"shadow-color":[{shadow:[$c]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...M(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":M()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Xa,We]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",We]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",We]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",We]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[j]}],"scale-x":[{"scale-x":[j]}],"scale-y":[{"scale-y":[j]}],rotate:[{rotate:[Rc,We]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",We]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",We]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",We]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[pa,Ya,_p]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ZL=OL(XL);function se(...t){return ZL(Ge(t))}const eF=G3,MA=x.forwardRef(({className:t,...e},r)=>i.jsx(cA,{ref:r,className:se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));MA.displayName=cA.displayName;const tF=no("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),OA=x.forwardRef(({className:t,variant:e,...r},n)=>i.jsx(dA,{ref:n,className:se(tF({variant:e}),t),...r}));OA.displayName=dA.displayName;const rF=x.forwardRef(({className:t,...e},r)=>i.jsx(fA,{ref:r,className:se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));rF.displayName=fA.displayName;const RA=x.forwardRef(({className:t,...e},r)=>i.jsx(mA,{ref:r,className:se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(Ds,{className:"h-4 w-4"})}));RA.displayName=mA.displayName;const $A=x.forwardRef(({className:t,...e},r)=>i.jsx(uA,{ref:r,className:se("text-sm font-semibold",t),...e}));$A.displayName=uA.displayName;const IA=x.forwardRef(({className:t,...e},r)=>i.jsx(hA,{ref:r,className:se("text-sm opacity-90",t),...e}));IA.displayName=hA.displayName;function Vx(){const{toasts:t}=Ce();return i.jsxs(eF,{children:[t.map(function({id:e,title:r,description:n,action:a,...s}){return i.jsxs(OA,{...s,children:[i.jsxs("div",{className:"grid gap-1",children:[r&&i.jsx($A,{children:r}),n&&i.jsx(IA,{children:n})]}),a,i.jsx(RA,{})]},e)}),i.jsx(MA,{})]})}var Zh=["light","dark"],Qx="(prefers-color-scheme: dark)",nF=typeof window>"u",Jx=x.createContext(void 0),aF={setTheme:t=>{},themes:[]},LA=()=>{var t;return(t=x.useContext(Jx))!=null?t:aF},sF=t=>x.useContext(Jx)?t.children:x.createElement(oF,{...t}),iF=["light","dark"],oF=({forcedTheme:t,disableTransitionOnChange:e=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:a="theme",themes:s=iF,defaultTheme:o=r?"system":"light",attribute:l="data-theme",value:c,children:d,nonce:u})=>{let[h,f]=x.useState(()=>sj(a,o)),[m,v]=x.useState(()=>sj(a)),p=c?Object.values(c):s,g=x.useCallback(j=>{let _=j;if(!_)return;j==="system"&&r&&(_=ij());let S=c?c[_]:_,N=e?cF():null,k=document.documentElement;if(l==="class"?(k.classList.remove(...p),S&&k.classList.add(S)):S?k.setAttribute(l,S):k.removeAttribute(l),n){let E=Zh.includes(o)?o:null,P=Zh.includes(_)?_:E;k.style.colorScheme=P}N==null||N()},[]),y=x.useCallback(j=>{let _=typeof j=="function"?j(j):j;f(_);try{localStorage.setItem(a,_)}catch{}},[t]),b=x.useCallback(j=>{let _=ij(j);v(_),h==="system"&&r&&!t&&g("system")},[h,t]);x.useEffect(()=>{let j=window.matchMedia(Qx);return j.addListener(b),b(j),()=>j.removeListener(b)},[b]),x.useEffect(()=>{let j=_=>{if(_.key!==a)return;let S=_.newValue||o;y(S)};return window.addEventListener("storage",j),()=>window.removeEventListener("storage",j)},[y]),x.useEffect(()=>{g(t??h)},[t,h]);let w=x.useMemo(()=>({theme:h,setTheme:y,forcedTheme:t,resolvedTheme:h==="system"?m:h,themes:r?[...s,"system"]:s,systemTheme:r?m:void 0}),[h,y,t,m,r,s]);return x.createElement(Jx.Provider,{value:w},x.createElement(lF,{forcedTheme:t,disableTransitionOnChange:e,enableSystem:r,enableColorScheme:n,storageKey:a,themes:s,defaultTheme:o,attribute:l,value:c,children:d,attrs:p,nonce:u}),d)},lF=x.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:s,value:o,attrs:l,nonce:c})=>{let d=s==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,h=a?Zh.includes(s)&&s?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${s}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,p=!1,g=!0)=>{let y=o?o[v]:v,b=p?v+"|| ''":`'${y}'`,w="";return a&&g&&!p&&Zh.includes(v)&&(w+=`d.style.colorScheme = '${v}';`),r==="class"?p||y?w+=`c.add(${b})`:w+="null":y&&(w+=`d[s](n,${b})`),w},m=t?`!function(){${u}${f(t)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${d})){var t='${Qx}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${d?"":"else{"+f(s,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(s,!1,!1)};}${h}}catch(t){}}();`;return x.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})}),sj=(t,e)=>{if(nF)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||e},cF=()=>{let t=document.createElement("style");return t.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},ij=t=>(t||(t=window.matchMedia(Qx)),t.matches?"dark":"light"),dF=t=>{switch(t){case"success":return fF;case"info":return gF;case"warning":return mF;case"error":return pF;default:return null}},uF=Array(12).fill(0),hF=({visible:t})=>$.createElement("div",{className:"sonner-loading-wrapper","data-visible":t},$.createElement("div",{className:"sonner-spinner"},uF.map((e,r)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),fF=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),mF=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),gF=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pF=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),vF=()=>{let[t,e]=$.useState(document.hidden);return $.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},Jv=1,yF=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,a=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Jv++,s=this.toasts.find(l=>l.id===a),o=t.dismissible===void 0?!0:t.dismissible;return s?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...t,id:a,title:r}),{...l,...t,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=t=>(t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),a=r!==void 0;return n.then(async s=>{if(xF(s)&&!s.ok){a=!1;let o=typeof e.error=="function"?await e.error(`HTTP error! status: ${s.status}`):e.error,l=typeof e.description=="function"?await e.description(`HTTP error! status: ${s.status}`):e.description;this.create({id:r,type:"error",message:o,description:l})}else if(e.success!==void 0){a=!1;let o=typeof e.success=="function"?await e.success(s):e.success,l=typeof e.description=="function"?await e.description(s):e.description;this.create({id:r,type:"success",message:o,description:l})}}).catch(async s=>{if(e.error!==void 0){a=!1;let o=typeof e.error=="function"?await e.error(s):e.error,l=typeof e.description=="function"?await e.description(s):e.description;this.create({id:r,type:"error",message:o,description:l})}}).finally(()=>{var s;a&&(this.dismiss(r),r=void 0),(s=e.finally)==null||s.call(e)}),r},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||Jv++;return this.create({jsx:t(r),id:r,...e}),r},this.subscribers=[],this.toasts=[]}},an=new yF,bF=(t,e)=>{let r=(e==null?void 0:e.id)||Jv++;return an.addToast({title:t,...e,id:r}),r},xF=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",wF=bF,_F=()=>an.toasts,yn=Object.assign(wF,{success:an.success,info:an.info,warning:an.warning,error:an.error,custom:an.custom,message:an.message,promise:an.promise,dismiss:an.dismiss,loading:an.loading},{getHistory:_F});function jF(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}jF(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999}:where([data-sonner-toaster][data-x-position="right"]){right:max(var(--offset),env(safe-area-inset-right))}:where([data-sonner-toaster][data-x-position="left"]){left:max(var(--offset),env(safe-area-inset-left))}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:max(var(--offset),env(safe-area-inset-top))}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:max(var(--offset),env(safe-area-inset-bottom))}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;background:var(--gray1);color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:0;right:0;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount, 0px));transition:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation:swipe-out .2s ease-out forwards}@keyframes swipe-out{0%{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount)));opacity:1}to{transform:translateY(calc(var(--lift) * var(--offset) + var(--swipe-amount) + var(--lift) * -100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;--mobile-offset: 16px;right:var(--mobile-offset);left:var(--mobile-offset);width:100%}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset)}[data-sonner-toaster][data-y-position=bottom]{bottom:20px}[data-sonner-toaster][data-y-position=top]{top:20px}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset);right:var(--mobile-offset);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Xu(t){return t.label!==void 0}var SF=3,kF="32px",NF=4e3,EF=356,CF=14,AF=20,TF=200;function DF(...t){return t.filter(Boolean).join(" ")}var PF=t=>{var e,r,n,a,s,o,l,c,d,u;let{invert:h,toast:f,unstyled:m,interacting:v,setHeights:p,visibleToasts:g,heights:y,index:b,toasts:w,expanded:j,removeToast:_,defaultRichColors:S,closeButton:N,style:k,cancelButtonStyle:E,actionButtonStyle:P,className:T="",descriptionClassName:D="",duration:A,position:C,gap:R,loadingIcon:L,expandByDefault:M,classNames:I,icons:B,closeButtonAriaLabel:H="Close toast",pauseWhenPageIsHidden:q,cn:O}=t,[F,G]=$.useState(!1),[Y,Z]=$.useState(!1),[le,V]=$.useState(!1),[Q,ce]=$.useState(!1),[xe,ae]=$.useState(0),[ee,J]=$.useState(0),re=$.useRef(null),ue=$.useRef(null),pe=b===0,ve=b+1<=g,ke=f.type,ot=f.dismissible!==!1,dt=f.className||"",we=f.descriptionClassName||"",ze=$.useMemo(()=>y.findIndex(He=>He.toastId===f.id)||0,[y,f.id]),Ie=$.useMemo(()=>{var He;return(He=f.closeButton)!=null?He:N},[f.closeButton,N]),gr=$.useMemo(()=>f.duration||A||NF,[f.duration,A]),Tn=$.useRef(0),fn=$.useRef(0),Qa=$.useRef(0),Dn=$.useRef(null),[zt,Ot]=C.split("-"),Dr=$.useMemo(()=>y.reduce((He,Rt,Nt)=>Nt>=ze?He:He+Rt.height,0),[y,ze]),Fr=vF(),Oc=f.invert||h,xo=ke==="loading";fn.current=$.useMemo(()=>ze*R+Dr,[ze,Dr]),$.useEffect(()=>{G(!0)},[]),$.useLayoutEffect(()=>{if(!F)return;let He=ue.current,Rt=He.style.height;He.style.height="auto";let Nt=He.getBoundingClientRect().height;He.style.height=Rt,J(Nt),p(Vn=>Vn.find(Qn=>Qn.toastId===f.id)?Vn.map(Qn=>Qn.toastId===f.id?{...Qn,height:Nt}:Qn):[{toastId:f.id,height:Nt,position:f.position},...Vn])},[F,f.title,f.description,p,f.id]);let Ja=$.useCallback(()=>{Z(!0),ae(fn.current),p(He=>He.filter(Rt=>Rt.toastId!==f.id)),setTimeout(()=>{_(f)},TF)},[f,_,p,fn]);$.useEffect(()=>{if(f.promise&&ke==="loading"||f.duration===1/0||f.type==="loading")return;let He,Rt=gr;return j||v||q&&Fr?(()=>{if(Qa.current<Tn.current){let Nt=new Date().getTime()-Tn.current;Rt=Rt-Nt}Qa.current=new Date().getTime()})():Rt!==1/0&&(Tn.current=new Date().getTime(),He=setTimeout(()=>{var Nt;(Nt=f.onAutoClose)==null||Nt.call(f,f),Ja()},Rt)),()=>clearTimeout(He)},[j,v,M,f,gr,Ja,f.promise,ke,q,Fr]),$.useEffect(()=>{let He=ue.current;if(He){let Rt=He.getBoundingClientRect().height;return J(Rt),p(Nt=>[{toastId:f.id,height:Rt,position:f.position},...Nt]),()=>p(Nt=>Nt.filter(Vn=>Vn.toastId!==f.id))}},[p,f.id]),$.useEffect(()=>{f.delete&&Ja()},[Ja,f.delete]);function Y5(){return B!=null&&B.loading?$.createElement("div",{className:"sonner-loader","data-visible":ke==="loading"},B.loading):L?$.createElement("div",{className:"sonner-loader","data-visible":ke==="loading"},L):$.createElement(hF,{visible:ke==="loading"})}return $.createElement("li",{"aria-live":f.important?"assertive":"polite","aria-atomic":"true",role:"status",tabIndex:0,ref:ue,className:O(T,dt,I==null?void 0:I.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,I==null?void 0:I.default,I==null?void 0:I[ke],(r=f==null?void 0:f.classNames)==null?void 0:r[ke]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:S,"data-styled":!(f.jsx||f.unstyled||m),"data-mounted":F,"data-promise":!!f.promise,"data-removed":Y,"data-visible":ve,"data-y-position":zt,"data-x-position":Ot,"data-index":b,"data-front":pe,"data-swiping":le,"data-dismissible":ot,"data-type":ke,"data-invert":Oc,"data-swipe-out":Q,"data-expanded":!!(j||M&&F),style:{"--index":b,"--toasts-before":b,"--z-index":w.length-b,"--offset":`${Y?xe:fn.current}px`,"--initial-height":M?"auto":`${ee}px`,...k,...f.style},onPointerDown:He=>{xo||!ot||(re.current=new Date,ae(fn.current),He.target.setPointerCapture(He.pointerId),He.target.tagName!=="BUTTON"&&(V(!0),Dn.current={x:He.clientX,y:He.clientY}))},onPointerUp:()=>{var He,Rt,Nt,Vn;if(Q||!ot)return;Dn.current=null;let Qn=Number(((He=ue.current)==null?void 0:He.style.getPropertyValue("--swipe-amount").replace("px",""))||0),Qu=new Date().getTime()-((Rt=re.current)==null?void 0:Rt.getTime()),X5=Math.abs(Qn)/Qu;if(Math.abs(Qn)>=AF||X5>.11){ae(fn.current),(Nt=f.onDismiss)==null||Nt.call(f,f),Ja(),ce(!0);return}(Vn=ue.current)==null||Vn.style.setProperty("--swipe-amount","0px"),V(!1)},onPointerMove:He=>{var Rt;if(!Dn.current||!ot)return;let Nt=He.clientY-Dn.current.y,Vn=He.clientX-Dn.current.x,Qn=(zt==="top"?Math.min:Math.max)(0,Nt),Qu=He.pointerType==="touch"?10:2;Math.abs(Qn)>Qu?(Rt=ue.current)==null||Rt.style.setProperty("--swipe-amount",`${Nt}px`):Math.abs(Vn)>Qu&&(Dn.current=null)}},Ie&&!f.jsx?$.createElement("button",{"aria-label":H,"data-disabled":xo,"data-close-button":!0,onClick:xo||!ot?()=>{}:()=>{var He;Ja(),(He=f.onDismiss)==null||He.call(f,f)},className:O(I==null?void 0:I.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))):null,f.jsx||$.isValidElement(f.title)?f.jsx||f.title:$.createElement($.Fragment,null,ke||f.icon||f.promise?$.createElement("div",{"data-icon":"",className:O(I==null?void 0:I.icon,(s=f==null?void 0:f.classNames)==null?void 0:s.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Y5():null,f.type!=="loading"?f.icon||(B==null?void 0:B[ke])||dF(ke):null):null,$.createElement("div",{"data-content":"",className:O(I==null?void 0:I.content,(o=f==null?void 0:f.classNames)==null?void 0:o.content)},$.createElement("div",{"data-title":"",className:O(I==null?void 0:I.title,(l=f==null?void 0:f.classNames)==null?void 0:l.title)},f.title),f.description?$.createElement("div",{"data-description":"",className:O(D,we,I==null?void 0:I.description,(c=f==null?void 0:f.classNames)==null?void 0:c.description)},f.description):null),$.isValidElement(f.cancel)?f.cancel:f.cancel&&Xu(f.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||E,onClick:He=>{var Rt,Nt;Xu(f.cancel)&&ot&&((Nt=(Rt=f.cancel).onClick)==null||Nt.call(Rt,He),Ja())},className:O(I==null?void 0:I.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,$.isValidElement(f.action)?f.action:f.action&&Xu(f.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||P,onClick:He=>{var Rt,Nt;Xu(f.action)&&(He.defaultPrevented||((Nt=(Rt=f.action).onClick)==null||Nt.call(Rt,He),Ja()))},className:O(I==null?void 0:I.actionButton,(u=f==null?void 0:f.classNames)==null?void 0:u.actionButton)},f.action.label):null))};function oj(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}var MF=t=>{let{invert:e,position:r="bottom-right",hotkey:n=["altKey","KeyT"],expand:a,closeButton:s,className:o,offset:l,theme:c="light",richColors:d,duration:u,style:h,visibleToasts:f=SF,toastOptions:m,dir:v=oj(),gap:p=CF,loadingIcon:g,icons:y,containerAriaLabel:b="Notifications",pauseWhenPageIsHidden:w,cn:j=DF}=t,[_,S]=$.useState([]),N=$.useMemo(()=>Array.from(new Set([r].concat(_.filter(q=>q.position).map(q=>q.position)))),[_,r]),[k,E]=$.useState([]),[P,T]=$.useState(!1),[D,A]=$.useState(!1),[C,R]=$.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=$.useRef(null),M=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=$.useRef(null),B=$.useRef(!1),H=$.useCallback(q=>{var O;(O=_.find(F=>F.id===q.id))!=null&&O.delete||an.dismiss(q.id),S(F=>F.filter(({id:G})=>G!==q.id))},[_]);return $.useEffect(()=>an.subscribe(q=>{if(q.dismiss){S(O=>O.map(F=>F.id===q.id?{...F,delete:!0}:F));return}setTimeout(()=>{VC.flushSync(()=>{S(O=>{let F=O.findIndex(G=>G.id===q.id);return F!==-1?[...O.slice(0,F),{...O[F],...q},...O.slice(F+1)]:[q,...O]})})})}),[]),$.useEffect(()=>{if(c!=="system"){R(c);return}c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",({matches:q})=>{R(q?"dark":"light")})},[c]),$.useEffect(()=>{_.length<=1&&T(!1)},[_]),$.useEffect(()=>{let q=O=>{var F,G;n.every(Y=>O[Y]||O.code===Y)&&(T(!0),(F=L.current)==null||F.focus()),O.code==="Escape"&&(document.activeElement===L.current||(G=L.current)!=null&&G.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[n]),$.useEffect(()=>{if(L.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,B.current=!1)}},[L.current]),_.length?$.createElement("section",{"aria-label":`${b} ${M}`,tabIndex:-1},N.map((q,O)=>{var F;let[G,Y]=q.split("-");return $.createElement("ol",{key:q,dir:v==="auto"?oj():v,tabIndex:-1,ref:L,className:o,"data-sonner-toaster":!0,"data-theme":C,"data-y-position":G,"data-x-position":Y,style:{"--front-toast-height":`${((F=k[0])==null?void 0:F.height)||0}px`,"--offset":typeof l=="number"?`${l}px`:l||kF,"--width":`${EF}px`,"--gap":`${p}px`,...h},onBlur:Z=>{B.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(B.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||B.current||(B.current=!0,I.current=Z.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{D||T(!1)},onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||A(!0)},onPointerUp:()=>A(!1)},_.filter(Z=>!Z.position&&O===0||Z.position===q).map((Z,le)=>{var V,Q;return $.createElement(PF,{key:Z.id,icons:y,index:le,toast:Z,defaultRichColors:d,duration:(V=m==null?void 0:m.duration)!=null?V:u,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:e,visibleToasts:f,closeButton:(Q=m==null?void 0:m.closeButton)!=null?Q:s,interacting:D,position:q,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,removeToast:H,toasts:_.filter(ce=>ce.position==Z.position),heights:k.filter(ce=>ce.position==Z.position),setHeights:E,expandByDefault:a,gap:p,loadingIcon:g,expanded:P,pauseWhenPageIsHidden:w,cn:j})}))})):null};const OF=({...t})=>{const{theme:e="system"}=LA();return i.jsx(MF,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var[Im,NAe]=Kn("Tooltip",[lc]),Lm=lc(),FA="TooltipProvider",RF=700,Yv="tooltip.open",[$F,Yx]=Im(FA),BA=t=>{const{__scopeTooltip:e,delayDuration:r=RF,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:s}=t,[o,l]=x.useState(!0),c=x.useRef(!1),d=x.useRef(0);return x.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),i.jsx($F,{scope:e,isOpenDelayed:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(d.current),l(!1)},[]),onClose:x.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:c,onPointerInTransitChange:x.useCallback(u=>{c.current=u},[]),disableHoverableContent:a,children:s})};BA.displayName=FA;var Fm="Tooltip",[IF,Bm]=Im(Fm),qA=t=>{const{__scopeTooltip:e,children:r,open:n,defaultOpen:a=!1,onOpenChange:s,disableHoverableContent:o,delayDuration:l}=t,c=Yx(Fm,t.__scopeTooltip),d=Lm(e),[u,h]=x.useState(null),f=xu(),m=x.useRef(0),v=o??c.disableHoverableContent,p=l??c.delayDuration,g=x.useRef(!1),[y=!1,b]=Fs({prop:n,defaultProp:a,onChange:N=>{N?(c.onOpen(),document.dispatchEvent(new CustomEvent(Yv))):c.onClose(),s==null||s(N)}}),w=x.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),j=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,g.current=!1,b(!0)},[b]),_=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),S=x.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{g.current=!0,b(!0),m.current=0},p)},[p,b]);return x.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),i.jsx(MC,{...d,children:i.jsx(IF,{scope:e,contentId:f,open:y,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:x.useCallback(()=>{c.isOpenDelayed?S():j()},[c.isOpenDelayed,S,j]),onTriggerLeave:x.useCallback(()=>{v?_():(window.clearTimeout(m.current),m.current=0)},[_,v]),onOpen:j,onClose:_,disableHoverableContent:v,children:r})})};qA.displayName=Fm;var Xv="TooltipTrigger",UA=x.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,a=Bm(Xv,r),s=Yx(Xv,r),o=Lm(r),l=x.useRef(null),c=cr(e,l,a.onTriggerChange),d=x.useRef(!1),u=x.useRef(!1),h=x.useCallback(()=>d.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(Cm,{asChild:!0,...o,children:i.jsx(it.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:je(t.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:je(t.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:je(t.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:je(t.onFocus,()=>{d.current||a.onOpen()}),onBlur:je(t.onBlur,a.onClose),onClick:je(t.onClick,a.onClose)})})});UA.displayName=Xv;var LF="TooltipPortal",[EAe,FF]=Im(LF,{forceMount:void 0}),El="TooltipContent",zA=x.forwardRef((t,e)=>{const r=FF(El,t.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...s}=t,o=Bm(El,t.__scopeTooltip);return i.jsx(Nn,{present:n||o.open,children:o.disableHoverableContent?i.jsx(HA,{side:a,...s,ref:e}):i.jsx(BF,{side:a,...s,ref:e})})}),BF=x.forwardRef((t,e)=>{const r=Bm(El,t.__scopeTooltip),n=Yx(El,t.__scopeTooltip),a=x.useRef(null),s=cr(e,a),[o,l]=x.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:h}=n,f=x.useCallback(()=>{l(null),h(!1)},[h]),m=x.useCallback((v,p)=>{const g=v.currentTarget,y={x:v.clientX,y:v.clientY},b=HF(y,g.getBoundingClientRect()),w=WF(y,b),j=KF(p.getBoundingClientRect()),_=VF([...w,...j]);l(_),h(!0)},[h]);return x.useEffect(()=>()=>f(),[f]),x.useEffect(()=>{if(c&&u){const v=g=>m(g,u),p=g=>m(g,c);return c.addEventListener("pointerleave",v),u.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),u.removeEventListener("pointerleave",p)}}},[c,u,m,f]),x.useEffect(()=>{if(o){const v=p=>{const g=p.target,y={x:p.clientX,y:p.clientY},b=(c==null?void 0:c.contains(g))||(u==null?void 0:u.contains(g)),w=!GF(y,o);b?f():w&&(f(),d())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,u,o,d,f]),i.jsx(HA,{...t,ref:s})}),[qF,UF]=Im(Fm,{isInside:!1}),HA=x.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:s,onPointerDownOutside:o,...l}=t,c=Bm(El,r),d=Lm(r),{onClose:u}=c;return x.useEffect(()=>(document.addEventListener(Yv,u),()=>document.removeEventListener(Yv,u)),[u]),x.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),i.jsx(Ex,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:i.jsxs(Cx,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(PC,{children:n}),i.jsx(qF,{scope:r,isInside:!0,children:i.jsx(n3,{id:c.contentId,role:"tooltip",children:a||n})})]})})});zA.displayName=El;var WA="TooltipArrow",zF=x.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,a=Lm(r);return UF(WA,r).isInside?null:i.jsx(Ax,{...a,...n,ref:e})});zF.displayName=WA;function HF(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),a=Math.abs(e.right-t.x),s=Math.abs(e.left-t.x);switch(Math.min(r,n,a,s)){case s:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function WF(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function KF(t){const{top:e,right:r,bottom:n,left:a}=t;return[{x:a,y:e},{x:r,y:e},{x:r,y:n},{x:a,y:n}]}function GF(t,e){const{x:r,y:n}=t;let a=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s].x,c=e[s].y,d=e[o].x,u=e[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function VF(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),QF(e)}function QF(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const a=t[n];for(;e.length>=2;){const s=e[e.length-1],o=e[e.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))e.pop();else break}e.push(a)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const a=t[n];for(;r.length>=2;){const s=r[r.length-1],o=r[r.length-2];if((s.x-o.x)*(a.y-o.y)>=(s.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var JF=BA,YF=qA,XF=UA,KA=zA;const GA=JF,ZF=YF,e6=XF,VA=x.forwardRef(({className:t,sideOffset:e=4,...r},n)=>i.jsx(KA,{ref:n,sideOffset:e,className:se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));VA.displayName=KA.displayName;var hc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Li=typeof window>"u"||"Deno"in globalThis;function bn(){}function t6(t,e){return typeof t=="function"?t(e):t}function Zv(t){return typeof t=="number"&&t>=0&&t!==1/0}function QA(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Yo(t,e){return typeof t=="function"?t(e):t}function $n(t,e){return typeof t=="function"?t(e):t}function lj(t,e){const{type:r="all",exact:n,fetchStatus:a,predicate:s,queryKey:o,stale:l}=t;if(o){if(n){if(e.queryHash!==Xx(o,e.options))return!1}else if(!bd(e.queryKey,o))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||a&&a!==e.state.fetchStatus||s&&!s(e))}function cj(t,e){const{exact:r,status:n,predicate:a,mutationKey:s}=t;if(s){if(!e.options.mutationKey)return!1;if(r){if(Fi(e.options.mutationKey)!==Fi(s))return!1}else if(!bd(e.options.mutationKey,s))return!1}return!(n&&e.state.status!==n||a&&!a(e))}function Xx(t,e){return((e==null?void 0:e.queryKeyHashFn)||Fi)(t)}function Fi(t){return JSON.stringify(t,(e,r)=>ey(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function bd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!bd(t[r],e[r])):!1}function JA(t,e){if(t===e)return t;const r=dj(t)&&dj(e);if(r||ey(t)&&ey(e)){const n=r?t:Object.keys(t),a=n.length,s=r?e:Object.keys(e),o=s.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:s[d];(!r&&n.includes(u)||r)&&t[u]===void 0&&e[u]===void 0?(l[u]=void 0,c++):(l[u]=JA(t[u],e[u]),l[u]===t[u]&&t[u]!==void 0&&c++)}return a===o&&c===a?t:l}return e}function ef(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}function dj(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function ey(t){if(!uj(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!uj(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function uj(t){return Object.prototype.toString.call(t)==="[object Object]"}function r6(t){return new Promise(e=>{setTimeout(e,t)})}function ty(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?JA(t,e):e}function n6(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function a6(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Zx=Symbol();function YA(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Zx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var bi,ds,ul,bC,s6=(bC=class extends hc{constructor(){super();Te(this,bi);Te(this,ds);Te(this,ul);ge(this,ul,e=>{if(!Li&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){z(this,ds)||this.setEventListener(z(this,ul))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,ds))==null||e.call(this),ge(this,ds,void 0))}setEventListener(e){var r;ge(this,ul,e),(r=z(this,ds))==null||r.call(this),ge(this,ds,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){z(this,bi)!==e&&(ge(this,bi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof z(this,bi)=="boolean"?z(this,bi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},bi=new WeakMap,ds=new WeakMap,ul=new WeakMap,bC),e0=new s6,hl,us,fl,xC,i6=(xC=class extends hc{constructor(){super();Te(this,hl,!0);Te(this,us);Te(this,fl);ge(this,fl,e=>{if(!Li&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){z(this,us)||this.setEventListener(z(this,fl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,us))==null||e.call(this),ge(this,us,void 0))}setEventListener(e){var r;ge(this,fl,e),(r=z(this,us))==null||r.call(this),ge(this,us,e(this.setOnline.bind(this)))}setOnline(e){z(this,hl)!==e&&(ge(this,hl,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return z(this,hl)}},hl=new WeakMap,us=new WeakMap,fl=new WeakMap,xC),tf=new i6;function ry(){let t,e;const r=new Promise((a,s)=>{t=a,e=s});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),t(a)},r.reject=a=>{n({status:"rejected",reason:a}),e(a)},r}function o6(t){return Math.min(1e3*2**t,3e4)}function XA(t){return(t??"online")==="online"?tf.isOnline():!0}var ZA=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function jp(t){return t instanceof ZA}function eT(t){let e=!1,r=0,n=!1,a;const s=ry(),o=p=>{var g;n||(f(new ZA(p)),(g=t.abort)==null||g.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>e0.isFocused()&&(t.networkMode==="always"||tf.isOnline())&&t.canRun(),u=()=>XA(t.networkMode)&&t.canRun(),h=p=>{var g;n||(n=!0,(g=t.onSuccess)==null||g.call(t,p),a==null||a(),s.resolve(p))},f=p=>{var g;n||(n=!0,(g=t.onError)==null||g.call(t,p),a==null||a(),s.reject(p))},m=()=>new Promise(p=>{var g;a=y=>{(n||d())&&p(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var p;a=void 0,n||(p=t.onContinue)==null||p.call(t)}),v=()=>{if(n)return;let p;const g=r===0?t.initialPromise:void 0;try{p=g??t.fn()}catch(y){p=Promise.reject(y)}Promise.resolve(p).then(h).catch(y=>{var S;if(n)return;const b=t.retry??(Li?0:3),w=t.retryDelay??o6,j=typeof w=="function"?w(r,y):w,_=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,y);if(e||!_){f(y);return}r++,(S=t.onFail)==null||S.call(t,r,y),r6(j).then(()=>d()?void 0:m()).then(()=>{e?f(y):v()})})};return{promise:s,cancel:o,continue:()=>(a==null||a(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?v():m().then(v),s)}}function l6(){let t=[],e=0,r=l=>{l()},n=l=>{l()},a=l=>setTimeout(l,0);const s=l=>{e?t.push(l):a(()=>{r(l)})},o=()=>{const l=t;t=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{s(()=>{l(...c)})},schedule:s,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var er=l6(),xi,wC,tT=(wC=class{constructor(){Te(this,xi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Zv(this.gcTime)&&ge(this,xi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Li?1/0:5*60*1e3))}clearGcTimeout(){z(this,xi)&&(clearTimeout(z(this,xi)),ge(this,xi,void 0))}},xi=new WeakMap,wC),ml,gl,vn,pr,pu,wi,Mn,ba,_C,c6=(_C=class extends tT{constructor(e){super();Te(this,Mn);Te(this,ml);Te(this,gl);Te(this,vn);Te(this,pr);Te(this,pu);Te(this,wi);ge(this,wi,!1),ge(this,pu,e.defaultOptions),this.setOptions(e.options),this.observers=[],ge(this,vn,e.cache),this.queryKey=e.queryKey,this.queryHash=e.queryHash,ge(this,ml,d6(this.options)),this.state=e.state??z(this,ml),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=z(this,pr))==null?void 0:e.promise}setOptions(e){this.options={...z(this,pu),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,vn).remove(this)}setData(e,r){const n=ty(this.state.data,e,this.options);return Qe(this,Mn,ba).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){Qe(this,Mn,ba).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,a;const r=(n=z(this,pr))==null?void 0:n.promise;return(a=z(this,pr))==null||a.cancel(e),r?r.then(bn).catch(bn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,ml))}isActive(){return this.observers.some(e=>$n(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Zx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!QA(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=z(this,pr))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=z(this,pr))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),z(this,vn).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(z(this,pr)&&(z(this,wi)?z(this,pr).cancel({revert:!0}):z(this,pr).cancelRetry()),this.scheduleGc()),z(this,vn).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Qe(this,Mn,ba).call(this,{type:"invalidate"})}fetch(e,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,pr))return z(this,pr).continueRetry(),z(this,pr).promise}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const n=new AbortController,a=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(ge(this,wi,!0),n.signal)})},s=()=>{const h=YA(this.options,r),f={queryKey:this.queryKey,meta:this.meta};return a(f),ge(this,wi,!1),this.options.persister?this.options.persister(h,f,this):h(f)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),ge(this,gl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&Qe(this,Mn,ba).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var f,m,v,p;jp(h)&&h.silent||Qe(this,Mn,ba).call(this,{type:"error",error:h}),jp(h)||((m=(f=z(this,vn).config).onError)==null||m.call(f,h,this),(p=(v=z(this,vn).config).onSettled)==null||p.call(v,this.state.data,h,this)),this.scheduleGc()};return ge(this,pr,eT({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:h=>{var f,m,v,p;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(g){l(g);return}(m=(f=z(this,vn).config).onSuccess)==null||m.call(f,h,this),(p=(v=z(this,vn).config).onSettled)==null||p.call(v,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,f)=>{Qe(this,Mn,ba).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{Qe(this,Mn,ba).call(this,{type:"pause"})},onContinue:()=>{Qe(this,Mn,ba).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),z(this,pr).start()}},ml=new WeakMap,gl=new WeakMap,vn=new WeakMap,pr=new WeakMap,pu=new WeakMap,wi=new WeakMap,Mn=new WeakSet,ba=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...rT(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return jp(a)&&a.revert&&z(this,gl)?{...z(this,gl),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),er.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),z(this,vn).notify({query:this,type:"updated",action:e})})},_C);function rT(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XA(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function d6(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yn,jC,u6=(jC=class extends hc{constructor(e={}){super();Te(this,Yn);this.config=e,ge(this,Yn,new Map)}build(e,r,n){const a=r.queryKey,s=r.queryHash??Xx(a,r);let o=this.get(s);return o||(o=new c6({cache:this,queryKey:a,queryHash:s,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(a)}),this.add(o)),o}add(e){z(this,Yn).has(e.queryHash)||(z(this,Yn).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=z(this,Yn).get(e.queryHash);r&&(e.destroy(),r===e&&z(this,Yn).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,Yn).get(e)}getAll(){return[...z(this,Yn).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>lj(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>lj(e,n)):r}notify(e){er.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){er.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){er.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yn=new WeakMap,jC),Xn,Pr,_i,Zn,es,SC,h6=(SC=class extends tT{constructor(e){super();Te(this,Zn);Te(this,Xn);Te(this,Pr);Te(this,_i);this.mutationId=e.mutationId,ge(this,Pr,e.mutationCache),ge(this,Xn,[]),this.state=e.state||nT(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){z(this,Xn).includes(e)||(z(this,Xn).push(e),this.clearGcTimeout(),z(this,Pr).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){ge(this,Xn,z(this,Xn).filter(r=>r!==e)),this.scheduleGc(),z(this,Pr).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){z(this,Xn).length||(this.state.status==="pending"?this.scheduleGc():z(this,Pr).remove(this))}continue(){var e;return((e=z(this,_i))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,s,o,l,c,d,u,h,f,m,v,p,g,y,b,w,j,_,S,N;ge(this,_i,eT({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,E)=>{Qe(this,Zn,es).call(this,{type:"failed",failureCount:k,error:E})},onPause:()=>{Qe(this,Zn,es).call(this,{type:"pause"})},onContinue:()=>{Qe(this,Zn,es).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,Pr).canRun(this)}));const r=this.state.status==="pending",n=!z(this,_i).canStart();try{if(!r){Qe(this,Zn,es).call(this,{type:"pending",variables:e,isPaused:n}),await((s=(a=z(this,Pr).config).onMutate)==null?void 0:s.call(a,e,this));const E=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,e));E!==this.state.context&&Qe(this,Zn,es).call(this,{type:"pending",context:E,variables:e,isPaused:n})}const k=await z(this,_i).start();return await((d=(c=z(this,Pr).config).onSuccess)==null?void 0:d.call(c,k,e,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,k,e,this.state.context)),await((m=(f=z(this,Pr).config).onSettled)==null?void 0:m.call(f,k,null,this.state.variables,this.state.context,this)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,k,null,e,this.state.context)),Qe(this,Zn,es).call(this,{type:"success",data:k}),k}catch(k){try{throw await((y=(g=z(this,Pr).config).onError)==null?void 0:y.call(g,k,e,this.state.context,this)),await((w=(b=this.options).onError)==null?void 0:w.call(b,k,e,this.state.context)),await((_=(j=z(this,Pr).config).onSettled)==null?void 0:_.call(j,void 0,k,this.state.variables,this.state.context,this)),await((N=(S=this.options).onSettled)==null?void 0:N.call(S,void 0,k,e,this.state.context)),k}finally{Qe(this,Zn,es).call(this,{type:"error",error:k})}}finally{z(this,Pr).runNext(this)}}},Xn=new WeakMap,Pr=new WeakMap,_i=new WeakMap,Zn=new WeakSet,es=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),er.batch(()=>{z(this,Xn).forEach(n=>{n.onMutationUpdate(e)}),z(this,Pr).notify({mutation:this,type:"updated",action:e})})},SC);function nT(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nn,vu,kC,f6=(kC=class extends hc{constructor(e={}){super();Te(this,nn);Te(this,vu);this.config=e,ge(this,nn,new Map),ge(this,vu,Date.now())}build(e,r,n){const a=new h6({mutationCache:this,mutationId:++Ju(this,vu)._,options:e.defaultMutationOptions(r),state:n});return this.add(a),a}add(e){const r=Zu(e),n=z(this,nn).get(r)??[];n.push(e),z(this,nn).set(r,n),this.notify({type:"added",mutation:e})}remove(e){var n;const r=Zu(e);if(z(this,nn).has(r)){const a=(n=z(this,nn).get(r))==null?void 0:n.filter(s=>s!==e);a&&(a.length===0?z(this,nn).delete(r):z(this,nn).set(r,a))}this.notify({type:"removed",mutation:e})}canRun(e){var n;const r=(n=z(this,nn).get(Zu(e)))==null?void 0:n.find(a=>a.state.status==="pending");return!r||r===e}runNext(e){var n;const r=(n=z(this,nn).get(Zu(e)))==null?void 0:n.find(a=>a!==e&&a.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}clear(){er.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...z(this,nn).values()].flat()}find(e){const r={exact:!0,...e};return this.getAll().find(n=>cj(r,n))}findAll(e={}){return this.getAll().filter(r=>cj(e,r))}notify(e){er.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return er.batch(()=>Promise.all(e.map(r=>r.continue().catch(bn))))}},nn=new WeakMap,vu=new WeakMap,kC);function Zu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function hj(t){return{onFetch:(e,r)=>{var u,h,f,m,v;const n=e.options,a=(f=(h=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,s=((m=e.state.data)==null?void 0:m.pages)||[],o=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let p=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?p=!0:e.signal.addEventListener("abort",()=>{p=!0}),e.signal)})},y=YA(e.options,e.fetchOptions),b=async(w,j,_)=>{if(p)return Promise.reject();if(j==null&&w.pages.length)return Promise.resolve(w);const S={queryKey:e.queryKey,pageParam:j,direction:_?"backward":"forward",meta:e.options.meta};g(S);const N=await y(S),{maxPages:k}=e.options,E=_?a6:n6;return{pages:E(w.pages,N,k),pageParams:E(w.pageParams,j,k)}};if(a&&s.length){const w=a==="backward",j=w?m6:fj,_={pages:s,pageParams:o},S=j(n,_);l=await b(_,S,w)}else{const w=t??s.length;do{const j=c===0?o[0]??n.initialPageParam:fj(n,l);if(c>0&&j==null)break;l=await b(l,j),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var p,g;return(g=(p=e.options).persister)==null?void 0:g.call(p,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=d}}}function fj(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function m6(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var Ht,hs,fs,pl,vl,ms,yl,bl,NC,g6=(NC=class{constructor(t={}){Te(this,Ht);Te(this,hs);Te(this,fs);Te(this,pl);Te(this,vl);Te(this,ms);Te(this,yl);Te(this,bl);ge(this,Ht,t.queryCache||new u6),ge(this,hs,t.mutationCache||new f6),ge(this,fs,t.defaultOptions||{}),ge(this,pl,new Map),ge(this,vl,new Map),ge(this,ms,0)}mount(){Ju(this,ms)._++,z(this,ms)===1&&(ge(this,yl,e0.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Ht).onFocus())})),ge(this,bl,tf.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,Ht).onOnline())})))}unmount(){var t,e;Ju(this,ms)._--,z(this,ms)===0&&((t=z(this,yl))==null||t.call(this),ge(this,yl,void 0),(e=z(this,bl))==null||e.call(this),ge(this,bl,void 0))}isFetching(t){return z(this,Ht).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,hs).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=z(this,Ht).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const r=this.defaultQueryOptions(t),n=z(this,Ht).build(this,r);return t.revalidateIfStale&&n.isStaleByTime(Yo(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(e)}}getQueriesData(t){return z(this,Ht).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),a=z(this,Ht).get(n.queryHash),s=a==null?void 0:a.state.data,o=t6(e,s);if(o!==void 0)return z(this,Ht).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(t,e,r){return er.batch(()=>z(this,Ht).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=z(this,Ht).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=z(this,Ht);er.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=z(this,Ht),n={type:"active",...t};return er.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(n,e)))}cancelQueries(t={},e={}){const r={revert:!0,...e},n=er.batch(()=>z(this,Ht).findAll(t).map(a=>a.cancel(r)));return Promise.all(n).then(bn).catch(bn)}invalidateQueries(t={},e={}){return er.batch(()=>{if(z(this,Ht).findAll(t).forEach(n=>{n.invalidate()}),t.refetchType==="none")return Promise.resolve();const r={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(r,e)})}refetchQueries(t={},e){const r={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},n=er.batch(()=>z(this,Ht).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let s=a.fetch(void 0,r);return r.throwOnError||(s=s.catch(bn)),a.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(bn)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=z(this,Ht).build(this,e);return r.isStaleByTime(Yo(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(bn).catch(bn)}fetchInfiniteQuery(t){return t.behavior=hj(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(bn).catch(bn)}ensureInfiniteQueryData(t){return t.behavior=hj(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return tf.isOnline()?z(this,hs).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,Ht)}getMutationCache(){return z(this,hs)}getDefaultOptions(){return z(this,fs)}setDefaultOptions(t){ge(this,fs,t)}setQueryDefaults(t,e){z(this,pl).set(Fi(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,pl).values()];let r={};return e.forEach(n=>{bd(t,n.queryKey)&&(r={...r,...n.defaultOptions})}),r}setMutationDefaults(t,e){z(this,vl).set(Fi(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,vl).values()];let r={};return e.forEach(n=>{bd(t,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,fs).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Xx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Zx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,fs).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,Ht).clear(),z(this,hs).clear()}},Ht=new WeakMap,hs=new WeakMap,fs=new WeakMap,pl=new WeakMap,vl=new WeakMap,ms=new WeakMap,yl=new WeakMap,bl=new WeakMap,NC),Ur,at,yu,Mr,ji,xl,gs,ea,bu,wl,_l,Si,ki,ps,jl,ht,Xc,ny,ay,sy,iy,oy,ly,cy,aT,EC,p6=(EC=class extends hc{constructor(e,r){super();Te(this,ht);Te(this,Ur);Te(this,at);Te(this,yu);Te(this,Mr);Te(this,ji);Te(this,xl);Te(this,gs);Te(this,ea);Te(this,bu);Te(this,wl);Te(this,_l);Te(this,Si);Te(this,ki);Te(this,ps);Te(this,jl,new Set);this.options=r,ge(this,Ur,e),ge(this,ea,null),ge(this,gs,ry()),this.options.experimental_prefetchInRender||z(this,gs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(z(this,at).addObserver(this),mj(z(this,at),this.options)?Qe(this,ht,Xc).call(this):this.updateResult(),Qe(this,ht,iy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dy(z(this,at),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dy(z(this,at),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Qe(this,ht,oy).call(this),Qe(this,ht,ly).call(this),z(this,at).removeObserver(this)}setOptions(e,r){const n=this.options,a=z(this,at);if(this.options=z(this,Ur).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof $n(this.options.enabled,z(this,at))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Qe(this,ht,cy).call(this),z(this,at).setOptions(this.options),n._defaulted&&!ef(this.options,n)&&z(this,Ur).getQueryCache().notify({type:"observerOptionsUpdated",query:z(this,at),observer:this});const s=this.hasListeners();s&&gj(z(this,at),a,this.options,n)&&Qe(this,ht,Xc).call(this),this.updateResult(r),s&&(z(this,at)!==a||$n(this.options.enabled,z(this,at))!==$n(n.enabled,z(this,at))||Yo(this.options.staleTime,z(this,at))!==Yo(n.staleTime,z(this,at)))&&Qe(this,ht,ny).call(this);const o=Qe(this,ht,ay).call(this);s&&(z(this,at)!==a||$n(this.options.enabled,z(this,at))!==$n(n.enabled,z(this,at))||o!==z(this,ps))&&Qe(this,ht,sy).call(this,o)}getOptimisticResult(e){const r=z(this,Ur).getQueryCache().build(z(this,Ur),e),n=this.createResult(r,e);return y6(this,n)&&(ge(this,Mr,n),ge(this,xl,this.options),ge(this,ji,z(this,at).state)),n}getCurrentResult(){return z(this,Mr)}trackResult(e,r){const n={};return Object.keys(e).forEach(a=>{Object.defineProperty(n,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),r==null||r(a),e[a])})}),n}trackProp(e){z(this,jl).add(e)}getCurrentQuery(){return z(this,at)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const r=z(this,Ur).defaultQueryOptions(e),n=z(this,Ur).getQueryCache().build(z(this,Ur),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(e){return Qe(this,ht,Xc).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),z(this,Mr)))}createResult(e,r){var k;const n=z(this,at),a=this.options,s=z(this,Mr),o=z(this,ji),l=z(this,xl),d=e!==n?e.state:z(this,yu),{state:u}=e;let h={...u},f=!1,m;if(r._optimisticResults){const E=this.hasListeners(),P=!E&&mj(e,r),T=E&&gj(e,n,r,a);(P||T)&&(h={...h,...rT(u.data,e.options)}),r._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:g}=h;if(r.select&&h.data!==void 0)if(s&&h.data===(o==null?void 0:o.data)&&r.select===z(this,bu))m=z(this,wl);else try{ge(this,bu,r.select),m=r.select(h.data),m=ty(s==null?void 0:s.data,m,r),ge(this,wl,m),ge(this,ea,null)}catch(E){ge(this,ea,E)}else m=h.data;if(r.placeholderData!==void 0&&m===void 0&&g==="pending"){let E;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData))E=s.data;else if(E=typeof r.placeholderData=="function"?r.placeholderData((k=z(this,_l))==null?void 0:k.state.data,z(this,_l)):r.placeholderData,r.select&&E!==void 0)try{E=r.select(E),ge(this,ea,null)}catch(P){ge(this,ea,P)}E!==void 0&&(g="success",m=ty(s==null?void 0:s.data,E,r),f=!0)}z(this,ea)&&(v=z(this,ea),m=z(this,wl),p=Date.now(),g="error");const y=h.fetchStatus==="fetching",b=g==="pending",w=g==="error",j=b&&y,_=m!==void 0,N={status:g,fetchStatus:h.fetchStatus,isPending:b,isSuccess:g==="success",isError:w,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:w&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:w&&_,isStale:t0(e,r),refetch:this.refetch,promise:z(this,gs)};if(this.options.experimental_prefetchInRender){const E=D=>{N.status==="error"?D.reject(N.error):N.data!==void 0&&D.resolve(N.data)},P=()=>{const D=ge(this,gs,N.promise=ry());E(D)},T=z(this,gs);switch(T.status){case"pending":e.queryHash===n.queryHash&&E(T);break;case"fulfilled":(N.status==="error"||N.data!==T.value)&&P();break;case"rejected":(N.status!=="error"||N.error!==T.reason)&&P();break}}return N}updateResult(e){const r=z(this,Mr),n=this.createResult(z(this,at),this.options);if(ge(this,ji,z(this,at).state),ge(this,xl,this.options),z(this,ji).data!==void 0&&ge(this,_l,z(this,at)),ef(n,r))return;ge(this,Mr,n);const a={},s=()=>{if(!r)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!z(this,jl).size)return!0;const c=new Set(l??z(this,jl));return this.options.throwOnError&&c.add("error"),Object.keys(z(this,Mr)).some(d=>{const u=d;return z(this,Mr)[u]!==r[u]&&c.has(u)})};(e==null?void 0:e.listeners)!==!1&&s()&&(a.listeners=!0),Qe(this,ht,aT).call(this,{...a,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Qe(this,ht,iy).call(this)}},Ur=new WeakMap,at=new WeakMap,yu=new WeakMap,Mr=new WeakMap,ji=new WeakMap,xl=new WeakMap,gs=new WeakMap,ea=new WeakMap,bu=new WeakMap,wl=new WeakMap,_l=new WeakMap,Si=new WeakMap,ki=new WeakMap,ps=new WeakMap,jl=new WeakMap,ht=new WeakSet,Xc=function(e){Qe(this,ht,cy).call(this);let r=z(this,at).fetch(this.options,e);return e!=null&&e.throwOnError||(r=r.catch(bn)),r},ny=function(){Qe(this,ht,oy).call(this);const e=Yo(this.options.staleTime,z(this,at));if(Li||z(this,Mr).isStale||!Zv(e))return;const n=QA(z(this,Mr).dataUpdatedAt,e)+1;ge(this,Si,setTimeout(()=>{z(this,Mr).isStale||this.updateResult()},n))},ay=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(z(this,at)):this.options.refetchInterval)??!1},sy=function(e){Qe(this,ht,ly).call(this),ge(this,ps,e),!(Li||$n(this.options.enabled,z(this,at))===!1||!Zv(z(this,ps))||z(this,ps)===0)&&ge(this,ki,setInterval(()=>{(this.options.refetchIntervalInBackground||e0.isFocused())&&Qe(this,ht,Xc).call(this)},z(this,ps)))},iy=function(){Qe(this,ht,ny).call(this),Qe(this,ht,sy).call(this,Qe(this,ht,ay).call(this))},oy=function(){z(this,Si)&&(clearTimeout(z(this,Si)),ge(this,Si,void 0))},ly=function(){z(this,ki)&&(clearInterval(z(this,ki)),ge(this,ki,void 0))},cy=function(){const e=z(this,Ur).getQueryCache().build(z(this,Ur),this.options);if(e===z(this,at))return;const r=z(this,at);ge(this,at,e),ge(this,yu,e.state),this.hasListeners()&&(r==null||r.removeObserver(this),e.addObserver(this))},aT=function(e){er.batch(()=>{e.listeners&&this.listeners.forEach(r=>{r(z(this,Mr))}),z(this,Ur).getQueryCache().notify({query:z(this,at),type:"observerResultsUpdated"})})},EC);function v6(t,e){return $n(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function mj(t,e){return v6(t,e)||t.state.data!==void 0&&dy(t,e,e.refetchOnMount)}function dy(t,e,r){if($n(e.enabled,t)!==!1){const n=typeof r=="function"?r(t):r;return n==="always"||n!==!1&&t0(t,e)}return!1}function gj(t,e,r,n){return(t!==e||$n(n.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&t0(t,r)}function t0(t,e){return $n(e.enabled,t)!==!1&&t.isStaleByTime(Yo(e.staleTime,t))}function y6(t,e){return!ef(t.getCurrentResult(),e)}var vs,ys,zr,_a,Ma,Bh,uy,CC,b6=(CC=class extends hc{constructor(r,n){super();Te(this,Ma);Te(this,vs);Te(this,ys);Te(this,zr);Te(this,_a);ge(this,vs,r),this.setOptions(n),this.bindMethods(),Qe(this,Ma,Bh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const n=this.options;this.options=z(this,vs).defaultMutationOptions(r),ef(this.options,n)||z(this,vs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:z(this,zr),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Fi(n.mutationKey)!==Fi(this.options.mutationKey)?this.reset():((a=z(this,zr))==null?void 0:a.state.status)==="pending"&&z(this,zr).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=z(this,zr))==null||r.removeObserver(this)}onMutationUpdate(r){Qe(this,Ma,Bh).call(this),Qe(this,Ma,uy).call(this,r)}getCurrentResult(){return z(this,ys)}reset(){var r;(r=z(this,zr))==null||r.removeObserver(this),ge(this,zr,void 0),Qe(this,Ma,Bh).call(this),Qe(this,Ma,uy).call(this)}mutate(r,n){var a;return ge(this,_a,n),(a=z(this,zr))==null||a.removeObserver(this),ge(this,zr,z(this,vs).getMutationCache().build(z(this,vs),this.options)),z(this,zr).addObserver(this),z(this,zr).execute(r)}},vs=new WeakMap,ys=new WeakMap,zr=new WeakMap,_a=new WeakMap,Ma=new WeakSet,Bh=function(){var n;const r=((n=z(this,zr))==null?void 0:n.state)??nT();ge(this,ys,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},uy=function(r){er.batch(()=>{var n,a,s,o,l,c,d,u;if(z(this,_a)&&this.hasListeners()){const h=z(this,ys).variables,f=z(this,ys).context;(r==null?void 0:r.type)==="success"?((a=(n=z(this,_a)).onSuccess)==null||a.call(n,r.data,h,f),(o=(s=z(this,_a)).onSettled)==null||o.call(s,r.data,null,h,f)):(r==null?void 0:r.type)==="error"&&((c=(l=z(this,_a)).onError)==null||c.call(l,r.error,h,f),(u=(d=z(this,_a)).onSettled)==null||u.call(d,void 0,r.error,h,f))}this.listeners.forEach(h=>{h(z(this,ys))})})},CC),sT=x.createContext(void 0),Ne=t=>{const e=x.useContext(sT);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},x6=({client:t,children:e})=>(x.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(sT.Provider,{value:t,children:e})),iT=x.createContext(!1),w6=()=>x.useContext(iT);iT.Provider;function _6(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var j6=x.createContext(_6()),S6=()=>x.useContext(j6);function oT(t,e){return typeof t=="function"?t(...e):!!t}function lT(){}var k6=(t,e)=>{(t.suspense||t.throwOnError)&&(e.isReset()||(t.retryOnMount=!1))},N6=t=>{x.useEffect(()=>{t.clearReset()},[t])},E6=({result:t,errorResetBoundary:e,throwOnError:r,query:n})=>t.isError&&!e.isReset()&&!t.isFetching&&n&&oT(r,[t.error,n]),C6=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},A6=(t,e)=>t.isLoading&&t.isFetching&&!e,T6=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,pj=(t,e,r)=>e.fetchOptimistic(t).catch(()=>{r.clearReset()});function D6(t,e,r){var u,h,f,m,v;const n=Ne(),a=w6(),s=S6(),o=n.defaultQueryOptions(t);(h=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=a?"isRestoring":"optimistic",C6(o),k6(o,s),N6(s);const l=!n.getQueryCache().get(o.queryHash),[c]=x.useState(()=>new e(n,o)),d=c.getOptimisticResult(o);if(x.useSyncExternalStore(x.useCallback(p=>{const g=a?()=>{}:c.subscribe(er.batchCalls(p));return c.updateResult(),g},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),x.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),T6(o,d))throw pj(o,c,s);if(E6({result:d,errorResetBoundary:s,throwOnError:o.throwOnError,query:n.getQueryCache().get(o.queryHash)}))throw d.error;if((m=(f=n.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,o,d),o.experimental_prefetchInRender&&!Li&&A6(d,a)){const p=l?pj(o,c,s):(v=n.getQueryCache().get(o.queryHash))==null?void 0:v.promise;p==null||p.catch(lT).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function Ye(t,e){return D6(t,p6)}function Se(t,e){const r=Ne(),[n]=x.useState(()=>new b6(r,t));x.useEffect(()=>{n.setOptions(t)},[n,t]);const a=x.useSyncExternalStore(x.useCallback(o=>n.subscribe(er.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),s=x.useCallback((o,l)=>{n.mutate(o,l).catch(lT)},[n]);if(a.error&&oT(n.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:s,mutateAsync:a.mutate}}const P6="modulepreload",M6=function(t){return"/"+t},vj={},Bi=function(e,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=M6(c),c in vj)return;vj[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":P6,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})},O6=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Bi(async()=>{const{default:n}=await Promise.resolve().then(()=>fc);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class r0 extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class R6 extends r0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class $6 extends r0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class I6 extends r0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hy;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(hy||(hy={}));var L6=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class F6{constructor(e,{headers:r={},customFetch:n,region:a=hy.Any}={}){this.url=e,this.headers=r,this.region=a,this.fetch=O6(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return L6(this,void 0,void 0,function*(){try{const{headers:a,method:s,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(v=>{throw new R6(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new $6(u);if(!u.ok)throw new I6(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(a){return{data:null,error:a}}})}}var Kr={},n0={},qm={},Nu={},Um={},zm={},B6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cl=B6();const q6=Cl.fetch,cT=Cl.fetch.bind(Cl),dT=Cl.Headers,U6=Cl.Request,z6=Cl.Response,fc=Object.freeze(Object.defineProperty({__proto__:null,Headers:dT,Request:U6,Response:z6,default:cT,fetch:q6},Symbol.toStringTag,{value:"Module"})),H6=_3(fc);var Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});let W6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Hm.default=W6;var uT=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(zm,"__esModule",{value:!0});const K6=uT(H6),G6=uT(Hm);let V6=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=K6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,l,c;let d=null,u=null,h=null,f=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=y:u=JSON.parse(y))}const p=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");p&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const p=await s.text();try{d=JSON.parse(p),Array.isArray(d)&&s.status===404&&(u=[],d=null,f=200,m="OK")}catch{s.status===404&&p===""?(f=204,m="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new G6.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(a=a.catch(s=>{var o,l,c;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(l=s==null?void 0:s.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=s==null?void 0:s.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,r)}returns(){return this}overrideTypes(){return this}};zm.default=V6;var Q6=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Um,"__esModule",{value:!0});const J6=Q6(zm);let Y6=class extends J6.default{select(e){let r=!1;const n=(e??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:s=a}={}){const o=s?`${s}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:a=n}={}){const s=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:s=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,s?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Um.default=Y6;var X6=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Nu,"__esModule",{value:!0});const Z6=X6(Um);let eB=class extends Z6.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:a}={}){let s="";a==="plain"?s="pl":a==="phrase"?s="ph":a==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Nu.default=eB;var tB=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qm,"__esModule",{value:!0});const Ic=tB(Nu);let rB=class{constructor(e,{headers:r={},schema:n,fetch:a}){this.url=e,this.headers=r,this.schema=n,this.fetch=a}select(e,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!s?"":(l==='"'&&(s=!s),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ic.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const a="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ic.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:s=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),s||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ic.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new Ic.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ic.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};qm.default=rB;var Wm={},Km={};Object.defineProperty(Km,"__esModule",{value:!0});Km.version=void 0;Km.version="0.0.0-automated";Object.defineProperty(Wm,"__esModule",{value:!0});Wm.DEFAULT_HEADERS=void 0;const nB=Km;Wm.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${nB.version}`};var hT=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n0,"__esModule",{value:!0});const aB=hT(qm),sB=hT(Nu),iB=Wm;let oB=class fT{constructor(e,{headers:r={},schema:n,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},iB.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(e){const r=new URL(`${this.url}/${e}`);return new aB.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new fT(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:a=!1,count:s}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=r);const d=Object.assign({},this.headers);return s&&(d.Prefer=`count=${s}`),new sB.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};n0.default=oB;var mc=_r&&_r.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.PostgrestError=Kr.PostgrestBuilder=Kr.PostgrestTransformBuilder=Kr.PostgrestFilterBuilder=Kr.PostgrestQueryBuilder=Kr.PostgrestClient=void 0;const mT=mc(n0);Kr.PostgrestClient=mT.default;const gT=mc(qm);Kr.PostgrestQueryBuilder=gT.default;const pT=mc(Nu);Kr.PostgrestFilterBuilder=pT.default;const vT=mc(Um);Kr.PostgrestTransformBuilder=vT.default;const yT=mc(zm);Kr.PostgrestBuilder=yT.default;const bT=mc(Hm);Kr.PostgrestError=bT.default;var lB=Kr.default={PostgrestClient:mT.default,PostgrestQueryBuilder:gT.default,PostgrestFilterBuilder:pT.default,PostgrestTransformBuilder:vT.default,PostgrestBuilder:yT.default,PostgrestError:bT.default};const{PostgrestClient:cB,PostgrestQueryBuilder:OAe,PostgrestFilterBuilder:RAe,PostgrestTransformBuilder:$Ae,PostgrestBuilder:IAe,PostgrestError:LAe}=lB,dB="2.11.2",uB={"X-Client-Info":`realtime-js/${dB}`},hB="1.0.0",xT=1e4,fB=1e3;var Xo;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Xo||(Xo={}));var tn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(tn||(tn={}));var On;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(On||(On={}));var fy;(function(t){t.websocket="websocket"})(fy||(fy={}));var li;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(li||(li={}));class mB{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const a=r.getUint8(1),s=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+a));o=o+a;const c=n.decode(e.slice(o,o+s));o=o+s;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class wT{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Et;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Et||(Et={}));const yj=(t,e,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=gB(o,t,e,a),s),{})},gB=(t,e,r,n)=>{const a=e.find(l=>l.name===t),s=a==null?void 0:a.type,o=r[t];return s&&!n.includes(s)?_T(s,o):my(o)},_T=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return bB(e,r)}switch(t){case Et.bool:return pB(e);case Et.float4:case Et.float8:case Et.int2:case Et.int4:case Et.int8:case Et.numeric:case Et.oid:return vB(e);case Et.json:case Et.jsonb:return yB(e);case Et.timestamp:return xB(e);case Et.abstime:case Et.date:case Et.daterange:case Et.int4range:case Et.int8range:case Et.money:case Et.reltime:case Et.text:case Et.time:case Et.timestamptz:case Et.timetz:case Et.tsrange:case Et.tstzrange:return my(e);default:return my(e)}},my=t=>t,pB=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},vB=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},yB=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},bB=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let s;const o=t.slice(1,r);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(l=>_T(e,l))}return t},xB=t=>typeof t=="string"?t.replace(" ","T"):t,jT=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Sp{constructor(e,r,n={},a=xT){this.channel=e,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var bj;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(bj||(bj={}));class ld{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ld.syncState(this.state,a,s,o),this.pendingDiffs.forEach(c=>{this.state=ld.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:s,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=ld.syncDiff(this.state,a,s,o),l())}),this.onJoin((a,s,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:s,newPresences:o})}),this.onLeave((a,s,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,a){const s=this.cloneDeep(e),o=this.transformState(r),l={},c={};return this.map(s,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=s[d];if(h){const f=u.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),v=u.filter(g=>m.indexOf(g.presence_ref)<0),p=h.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(l[d]=v),p.length>0&&(c[d]=p)}else l[d]=u}),this.syncDiff(s,{joins:l,leaves:c},n,a)}static syncDiff(e,r,n,a){const{joins:s,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(s,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,a(l,d,c),d.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const a=e[n];return"metas"in a?r[n]=a.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):r[n]=a,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var xj;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(xj||(xj={}));var wj;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wj||(wj={}));var xa;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(xa||(xa={}));class a0{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Sp(this,On.join,this.params,this.timeout),this.rejoinTimer=new wT(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(On.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new ld(this),this.broadcastEndpointURL=jT(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(xa.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(xa.CLOSED));const c={},d={broadcast:s,presence:o,postgres_changes:(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&a!==void 0?a:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(xa.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let p=0;p<m;p++){const g=f[p],{filter:{event:y,schema:b,table:w,filter:j}}=g,_=u&&u[p];if(_&&_.event===y&&_.schema===b&&_.table===w&&_.filter===j)v.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),e==null||e(xa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(xa.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(xa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(xa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,a;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=d.body)===null||a===void 0?void 0:a.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,l,c;const d=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&s("ok"),d.receive("ok",()=>s("ok")),d.receive("error",()=>s("error")),d.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(On.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const a=new Sp(this,On.leave,{},e);a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const a=new AbortController,s=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(s),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Sp(this,e,r,n);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var a,s;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=On;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var v,p,g;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(p=m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var v,p,g,y,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const j=m.id,_=(v=m.filter)===null||v===void 0?void 0:v.event;return j&&((p=r.ids)===null||p===void 0?void 0:p.includes(j))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const j=(b=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:p,table:g,commit_timestamp:y,type:b,errors:w}=v;f=Object.assign(Object.assign({},{schema:p,table:g,commit_timestamp:y,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const a=e.toLocaleLowerCase(),s={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(s):this.bindings[a]=[s],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(a=>{var s;return!(((s=a.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&a0.isEqual(a.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(On.close,{},e)}_onError(e){this._on(On.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=yj(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=yj(e.columns,e.old_record)),r}}const wB=()=>{},_B=typeof WebSocket<"u",jB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class SB{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=uB,this.params={},this.timeout=xT,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=wB,this.conn=null,this.sendBuffer=[],this.serializer=new mB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...l)=>Bi(async()=>{const{default:c}=await Promise.resolve().then(()=>fc);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${fy.websocket}`,this.httpEndpoint=jT(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const a=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(s,o)=>o(JSON.stringify(s)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new wT(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(_B){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new kB(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Bi(async()=>{const{default:e}=await import("./browser-CjrjtHvb.js").then(r=>r.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:hB}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Xo.connecting:return li.Connecting;case Xo.open:return li.Open;case Xo.closing:return li.Closing;default:return li.Closed}}isConnected(){return this.connectionState()===li.Open}channel(e,r={config:{}}){const n=new a0(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:a,ref:s}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${s})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(a=>{r&&a.updateJoinPayload({access_token:r}),a.joinedOnce&&a._isJoined()&&a._push(On.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(fB,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:a,payload:s,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${a} ${o&&"("+o+")"||""}`,s),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(a,s,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(On.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${e}${n}${a}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([jB],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class kB{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Xo.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class s0 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function sr(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class NB extends s0{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class gy extends s0{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var EB=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const ST=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Bi(async()=>{const{default:n}=await Promise.resolve().then(()=>fc);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},CB=()=>EB(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bi(()=>Promise.resolve().then(()=>fc),void 0)).Response:Response}),py=t=>{if(Array.isArray(t))return t.map(r=>py(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[a]=py(n)}),e};var ao=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const kp=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),AB=(t,e,r)=>ao(void 0,void 0,void 0,function*(){const n=yield CB();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(a=>{e(new NB(kp(a),t.status||500))}).catch(a=>{e(new gy(kp(a),a))}):e(new gy(kp(t),t))}),TB=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(a.body=JSON.stringify(n)),Object.assign(Object.assign({},a),r))};function Eu(t,e,r,n,a,s){return ao(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,TB(e,n,a,s)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>AB(c,l,n))})})}function rf(t,e,r,n){return ao(this,void 0,void 0,function*(){return Eu(t,"GET",e,r,n)})}function as(t,e,r,n,a){return ao(this,void 0,void 0,function*(){return Eu(t,"POST",e,n,a,r)})}function DB(t,e,r,n,a){return ao(this,void 0,void 0,function*(){return Eu(t,"PUT",e,n,a,r)})}function PB(t,e,r,n){return ao(this,void 0,void 0,function*(){return Eu(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function kT(t,e,r,n,a){return ao(this,void 0,void 0,function*(){return Eu(t,"DELETE",e,n,a,r)})}var Br=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const MB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_j={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class OB{constructor(e,r={},n,a){this.url=e,this.headers=r,this.bucketId=n,this.fetch=ST(a)}uploadOrUpdate(e,r,n,a){return Br(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},_j),a);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const d=this._removeEmptyFolders(r),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(sr(s))return{data:null,error:s};throw s}})}upload(e,r,n){return Br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,a){return Br(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const d=Object.assign({upsert:_j.upsert},a),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(sr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return Br(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const s=yield as(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+s.url),l=o.searchParams.get("token");if(!l)throw new s0("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}update(e,r,n){return Br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Br(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}copy(e,r,n){return Br(this,void 0,void 0,function*(){try{return{data:{path:(yield as(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}createSignedUrl(e,r,n){return Br(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),s=yield as(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}createSignedUrls(e,r,n){return Br(this,void 0,void 0,function*(){try{const a=yield as(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}download(e,r){return Br(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=s?`?${s}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield rf(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(sr(l))return{data:null,error:l};throw l}})}info(e){return Br(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield rf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:py(n),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}exists(e){return Br(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield PB(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(sr(n)&&n instanceof gy){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),a=[],s=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";s!==""&&a.push(s);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let d=a.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Br(this,void 0,void 0,function*(){try{return{data:yield kT(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}list(e,r,n){return Br(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},MB),r),{prefix:e||""});return{data:yield as(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(sr(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const RB="2.7.1",$B={"X-Client-Info":`storage-js/${RB}`};var wo=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class IB{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},$B),r),this.fetch=ST(n)}listBuckets(){return wo(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(sr(e))return{data:null,error:e};throw e}})}getBucket(e){return wo(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return wo(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return wo(this,void 0,void 0,function*(){try{return{data:yield DB(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(sr(n))return{data:null,error:n};throw n}})}emptyBucket(e){return wo(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}deleteBucket(e){return wo(this,void 0,void 0,function*(){try{return{data:yield kT(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(sr(r))return{data:null,error:r};throw r}})}}class LB extends IB{constructor(e,r={},n){super(e,r,n)}from(e){return new OB(this.url,this.headers,e,this.fetch)}}const FB="2.49.8";let Zc="";typeof Deno<"u"?Zc="deno":typeof document<"u"?Zc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zc="react-native":Zc="node";const BB={"X-Client-Info":`supabase-js-${Zc}/${FB}`},qB={headers:BB},UB={schema:"public"},zB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HB={};var WB=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const KB=t=>{let e;return t?e=t:typeof fetch>"u"?e=cT:e=fetch,(...r)=>e(...r)},GB=()=>typeof Headers>"u"?dT:Headers,VB=(t,e,r)=>{const n=KB(r),a=GB();return(s,o)=>WB(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new a(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(s,Object.assign(Object.assign({},o),{headers:d}))})};var QB=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function JB(t){return t.endsWith("/")?t:t+"/"}function YB(t,e){var r,n;const{db:a,auth:s,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},d),s),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>QB(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const NT="2.69.1",Oo=30*1e3,vy=3,Np=vy*Oo,XB="http://localhost:9999",ZB="supabase.auth.token",eq={"X-Client-Info":`gotrue-js/${NT}`},yy="X-Supabase-Api-Version",ET={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tq=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rq=6e5;class i0 extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ke(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class nq extends i0{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function aq(t){return Ke(t)&&t.name==="AuthApiError"}class CT extends i0{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class qs extends i0{constructor(e,r,n,a){super(e,n,a),this.name=r,this.status=n}}class ts extends qs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function sq(t){return Ke(t)&&t.name==="AuthSessionMissingError"}class Ep extends qs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class eh extends qs{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class th extends qs{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function iq(t){return Ke(t)&&t.name==="AuthImplicitGrantRedirectError"}class jj extends qs{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class by extends qs{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Cp(t){return Ke(t)&&t.name==="AuthRetryableFetchError"}class Sj extends qs{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class cd extends qs{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Nj=` 	
\r=`.split(""),oq=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Nj.length;e+=1)t[Nj[e].charCodeAt(0)]=-2;for(let e=0;e<kj.length;e+=1)t[kj[e].charCodeAt(0)]=e;return t})();function AT(t,e,r){const n=oq[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ej(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},s=o=>{dq(o,n,r)};for(let o=0;o<t.length;o+=1)AT(t.charCodeAt(o),a,s);return e.join("")}function lq(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function cq(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}lq(n,e)}}function dq(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function uq(t){const e=[],r={queue:0,queuedBits:0},n=a=>{e.push(a)};for(let a=0;a<t.length;a+=1)AT(t.charCodeAt(a),r,n);return new Uint8Array(e)}function hq(t){const e=[];return cq(t,r=>e.push(r)),new Uint8Array(e)}function fq(t){return Math.round(Date.now()/1e3)+t}function mq(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Jn=()=>typeof window<"u"&&typeof document<"u",Js={tested:!1,writable:!1},dd=()=>{if(!Jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Js.tested)return Js.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Js.tested=!0,Js.writable=!0}catch{Js.tested=!0,Js.writable=!1}return Js.writable};function gq(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,s)=>{e[s]=a})}catch{}return r.searchParams.forEach((n,a)=>{e[a]=n}),e}const TT=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Bi(async()=>{const{default:n}=await Promise.resolve().then(()=>fc);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},pq=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",DT=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},rh=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},nh=async(t,e)=>{await t.removeItem(e)};class Gm{constructor(){this.promise=new Gm.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}Gm.promiseConstructor=Promise;function Ap(t){const e=t.split(".");if(e.length!==3)throw new cd("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!tq.test(e[n]))throw new cd("JWT not in base64url format");return{header:JSON.parse(Ej(e[0])),payload:JSON.parse(Ej(e[1])),signature:uq(e[2]),raw:{header:e[0],payload:e[1]}}}async function vq(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function yq(t,e){return new Promise((n,a)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){n(o);return}}catch(o){if(!e(s,o)){a(o);return}}})()})}function bq(t){return("0"+t.toString(16)).substr(-2)}function xq(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let s=0;s<56;s++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(e),Array.from(e,bq).join("")}async function wq(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(s=>String.fromCharCode(s)).join("")}async function _q(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await wq(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _o(t,e,r=!1){const n=xq();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await DT(t,`${e}-code-verifier`,a);const s=await _q(n);return[s,n===s?"plain":"s256"]}const jq=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sq(t){const e=t.headers.get(yy);if(!e||!e.match(jq))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function kq(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Nq(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Eq=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};const ti=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Cq=[502,503,504];async function Cj(t){var e;if(!pq(t))throw new by(ti(t),0);if(Cq.includes(t.status))throw new by(ti(t),t.status);let r;try{r=await t.json()}catch(s){throw new CT(ti(s),s)}let n;const a=Sq(t);if(a&&a.getTime()>=ET["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Sj(ti(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new ts}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Sj(ti(r),t.status,r.weak_password.reasons);throw new nq(ti(r),t.status||500,n)}const Aq=(t,e,r,n)=>{const a={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function rt(t,e,r,n){var a;const s=Object.assign({},n==null?void 0:n.headers);s[yy]||(s[yy]=ET["2024-01-01"].name),n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Tq(t,e,r+l,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Tq(t,e,r,n,a,s){const o=Aq(e,n,a,s);let l;try{l=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new by(ti(c),0)}if(l.ok||await Cj(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Cj(c)}}function rs(t){var e;let r=null;Oq(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=fq(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Aj(t){const e=rs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function os(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Dq(t){return{data:t,error:null}}function Pq(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s}=t,o=Eq(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:a,verification_type:s},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function Mq(t){return t}function Oq(t){return t.access_token&&t.refresh_token&&t.expires_in}var Rq=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r};class $q{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=TT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await rt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await rt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:os})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Rq(e,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await rt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Pq,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ke(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await rt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:os})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,a,s,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await rt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(s=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&s!==void 0?s:""},xform:Mq});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);d[`${g}Page`]=p}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(Ke(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){try{return await rt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:os})}catch(r){if(Ke(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await rt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:os})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await rt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:os})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await rt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await rt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}}const Iq={getItem:t=>dd()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{dd()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{dd()&&globalThis.localStorage.removeItem(t)}};function Tj(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Lq(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const jo={debug:!!(globalThis&&dd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class PT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fq extends PT{}async function Bq(t,e,r){jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),jo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,a.name);try{return await r()}finally{jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,a.name)}}else{if(e===0)throw jo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Fq(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(jo.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Lq();const qq={url:XB,storageKey:ZB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eq,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Dj(t,e,r){return await r()}class xd{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xd.nextInstanceID,xd.nextInstanceID+=1,this.instanceID>0&&Jn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},qq),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new $q({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=TT(a.fetch),this.lock=a.lock||Dj,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Jn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Bq:this.lock=Dj,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:dd()?this.storage=Iq:(this.memoryStorage={},this.storage=Tj(this.memoryStorage)):(this.memoryStorage={},this.storage=Tj(this.memoryStorage)),Jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${NT}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=gq(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Jn()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:s}=await this._getSessionFromURL(r,n);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),iq(s)){const c=(e=s.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ke(r)?{error:r}:{error:new CT("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,a;try{const s=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:rs}),{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var r,n,a;try{let s;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await _o(this.storage,this.storageKey)),s=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:rs})}else if("phone"in e){const{phone:u,password:h,options:f}=e;s=await rt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:rs})}else throw new eh("You must provide either an email or phone number and a password");const{data:o,error:l}=s;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(Ke(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let r;if("email"in e){const{email:s,password:o,options:l}=e;r=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Aj})}else if("phone"in e){const{phone:s,password:o,options:l}=e;r=await rt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Aj})}else throw new eh("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ep}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,a,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await rh(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:s,error:o}=await rt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:rs});if(await nh(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Ep}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:a??null}),error:o})}catch(s){if(Ke(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:r,provider:n,token:a,access_token:s,nonce:o}=e,l=await rt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:rs}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ep}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,a,s,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await _o(this.storage,this.storageKey));const{error:h}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await rt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new eh("You must provide either an email or phone number.")}catch(l){if(Ke(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let a,s;"options"in e&&(a=(r=e.options)===null||r===void 0?void 0:r.redirectTo,s=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await rt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:a,xform:rs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(Ke(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var r,n,a;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await _o(this.storage,this.storageKey)),await rt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Dq})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new ts;const{error:a}=await rt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Ke(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:a,options:s}=e,{error:o}=await rt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:a,options:s}=e,{data:o,error:l}=await rt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new eh("You must provide either an email or phone number and a type")}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await rh(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Np:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:a,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:os}):await this._useSession(async r=>{var n,a,s;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ts}:await rt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&s!==void 0?s:void 0,xform:os})})}catch(r){if(Ke(r))return sq(r)&&(await this._removeSession(),await nh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:a,error:s}=n;if(s)throw s;if(!a.session)throw new ts;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await _o(this.storage,this.storageKey));const{data:d,error:u}=await rt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:os});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Ke(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ts;const r=Date.now()/1e3;let n=r,a=!0,s=null;const{payload:o}=Ap(e.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};s=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;s={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(r){if(Ke(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new ts;const{session:a,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ke(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!Jn())throw new th("No browser detected.");if(e.error||e.error_description||e.error_code)throw new th(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new th("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new jj("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:s,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!s||!l||!o||!d)throw new th("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:p,error:g}=await this._getUser(s);if(g)throw g;const y={provider_token:n,provider_refresh_token:a,access_token:s,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:e.type},error:null}}catch(n){if(Ke(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await rh(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return{error:s};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(aq(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await nh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=mq(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,a;try{const{data:{session:s},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await _o(this.storage,this.storageKey,!0));try{return await rt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(Ke(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:a}=await this._useSession(async s=>{var o,l,c,d,u;const{data:h,error:f}=s;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await rt(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(a)throw a;return Jn()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ke(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,a;const{data:s,error:o}=r;if(o)throw o;return await rt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(n=s.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await yq(async a=>(a>0&&await vq(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await rt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:rs})),(a,s)=>{const o=200*Math.pow(2,a);return s&&Cp(s)&&Date.now()+o-n<Oo})}catch(n){if(this._debug(r,"error",n),Ke(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),Jn()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await rh(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Np;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Np}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:s}=await this._callRefreshToken(n.refresh_token);s&&(console.error(s),Cp(s)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new ts;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Gm;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ts;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const l={session:s.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(s){if(this._debug(a,"error",s),Ke(s)){const o={session:null,error:s};return Cp(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(s),s}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,r,n=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(c){s.push(c)}});if(await Promise.all(o),s.length>0){for(let l=0;l<s.length;l+=1)console.error(s[l]);throw s[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await DT(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await nh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Jn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-e)/Oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Oo}ms, refresh threshold is ${vy} ticks`),a<=vy&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof PT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Jn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[s,o]=await _o(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const s=new URLSearchParams(n.queryParams);a.push(s.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?{data:null,error:s}:await rt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,a;const{data:s,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await rt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;if(s)return{data:null,error:s};const{data:o,error:l}=await rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:s}=r;return s?{data:null,error:s}:await rt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ke(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:a},error:s}=e;if(s)return{data:null,error:s};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ap(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+rq>Date.now()))return n;const{data:a,error:s}=await rt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!a.keys||a.keys.length===0)throw new cd("JWKS is empty");if(this.jwks=a,this.jwks_cached_at=Date.now(),n=a.keys.find(o=>o.kid===e),!n)throw new cd("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};n=m.session.access_token}const{header:a,payload:s,signature:o,raw:{header:l,payload:c}}=Ap(n);if(kq(s.exp),!a.kid||a.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:s,header:a,signature:o},error:null}}const d=Nq(a.alg),u=await this.fetchJwk(a.kid,r),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,hq(`${l}.${c}`)))throw new cd("Invalid JWT signature");return{data:{claims:s,header:a,signature:o},error:null}}catch(n){if(Ke(n))return{data:null,error:n};throw n}}}xd.nextInstanceID=0;const Uq=xd;class zq extends Uq{constructor(e){super(e)}}var Hq=function(t,e,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?s(u.value):a(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Wq{constructor(e,r,n){var a,s,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=JB(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:UB,realtime:HB,auth:Object.assign(Object.assign({},zB),{storageKey:d}),global:qB},h=YB(n??{},u);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=VB(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new cB(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new F6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new LB(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Hq(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:s,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zq({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:s,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new SB(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Kq=(t,e,r)=>new Wq(t,e,r),Gq="https://tksnfarlivfrulbdkrid.supabase.co",Vq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRrc25mYXJsaXZmcnVsYmRrcmlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzMTk1ODMsImV4cCI6MjA2Mzg5NTU4M30._LvaFvjYLVEk-omqPi0z3N2MogtFsvmerVxtFwRE6vE",W=Kq(Gq,Vq,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),MT=x.createContext(void 0),tt=()=>{const t=x.useContext(MT);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},Qq=({children:t})=>{const[e,r]=x.useState(null),[n,a]=x.useState(null),[s,o]=x.useState(null),[l,c]=x.useState(!0);x.useEffect(()=>{const{data:{subscription:h}}=W.auth.onAuthStateChange(async(f,m)=>{a(m),r((m==null?void 0:m.user)??null),m!=null&&m.user?setTimeout(async()=>{try{const{data:v}=await W.from("profiles").select("*").eq("id",m.user.id).single();o(v)}catch(v){console.error("Error fetching profile:",v)}finally{c(!1)}},0):(o(null),c(!1))});return W.auth.getSession().then(({data:{session:f}})=>{a(f),r((f==null?void 0:f.user)??null),f!=null&&f.user?setTimeout(async()=>{try{const{data:m}=await W.from("profiles").select("*").eq("id",f.user.id).single();o(m)}catch(m){console.error("Error fetching profile:",m)}finally{c(!1)}},0):c(!1)}),()=>h.unsubscribe()},[]);const u={user:e,session:n,profile:s,loading:l,signOut:async()=>{await W.auth.signOut()}};return i.jsx(MT.Provider,{value:u,children:t})},Jq=no("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ps=x.forwardRef(({className:t,variant:e,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:se(Jq({variant:e}),t),...r}));Ps.displayName="Alert";const Yq=x.forwardRef(({className:t,...e},r)=>i.jsx("h5",{ref:r,className:se("mb-1 font-medium leading-none tracking-tight",t),...e}));Yq.displayName="AlertTitle";const Ms=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:se("text-sm [&_p]:leading-relaxed",t),...e}));Ms.displayName="AlertDescription";const wd=no("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),K=x.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...a},s)=>{const o=n?Bs:"button";return i.jsx(o,{className:se(wd({variant:e,size:r,className:t})),ref:s,...a})});K.displayName="Button";class Xq extends x.Component{constructor(r){super(r);G_(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){console.error(" ERROR BOUNDARY CAUGHT ERROR:",{error:r.message,stack:r.stack,componentStack:n.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}),this.setState({error:r,errorInfo:n})}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsx("div",{className:"max-w-md w-full",children:i.jsxs(Ps,{className:"border-red-200 bg-red-50",children:[i.jsx(Ii,{className:"h-4 w-4 text-red-600"}),i.jsx(Ms,{className:"text-red-800",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Terjadi Kesalahan"}),i.jsx("p",{className:"text-sm",children:"Aplikasi mengalami kesalahan yang tidak terduga. Silakan coba muat ulang halaman."})]}),!1,i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(K,{onClick:this.handleReload,size:"sm",className:"flex items-center gap-2",children:[i.jsx(NA,{className:"h-3 w-3"}),"Muat Ulang"]}),i.jsx(K,{variant:"outline",size:"sm",onClick:()=>window.history.back(),children:"Kembali"})]})]})})]})})}):this.props.children}}const Tp=768;function Zq(){const[t,e]=x.useState(void 0);return x.useEffect(()=>{const r=window.matchMedia(`(max-width: ${Tp-1}px)`),n=()=>{e(window.innerWidth<Tp)};return r.addEventListener("change",n),e(window.innerWidth<Tp),()=>r.removeEventListener("change",n)},[]),!!t}const me=x.forwardRef(({className:t,type:e,...r},n)=>i.jsx("input",{type:e,className:se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));me.displayName="Input";var e8="Separator",Pj="horizontal",t8=["horizontal","vertical"],OT=x.forwardRef((t,e)=>{const{decorative:r,orientation:n=Pj,...a}=t,s=r8(n)?n:Pj,l=r?{role:"none"}:{"aria-orientation":s==="vertical"?s:void 0,role:"separator"};return i.jsx(it.div,{"data-orientation":s,...l,...a,ref:e})});OT.displayName=e8;function r8(t){return t8.includes(t)}var RT=OT;const $T=x.forwardRef(({className:t,orientation:e="horizontal",decorative:r=!0,...n},a)=>i.jsx(RT,{ref:a,decorative:r,orientation:e,className:se("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...n}));$T.displayName=RT.displayName;const n8=Tx,a8=Dx,IT=x.forwardRef(({className:t,...e},r)=>i.jsx(wu,{className:se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));IT.displayName=wu.displayName;const s8=no("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),LT=x.forwardRef(({side:t="right",className:e,children:r,...n},a)=>i.jsxs(a8,{children:[i.jsx(IT,{}),i.jsxs(_u,{ref:a,className:se(s8({side:t}),e),...n,children:[r,i.jsxs(Am,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(Ds,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));LT.displayName=_u.displayName;const i8=x.forwardRef(({className:t,...e},r)=>i.jsx(ju,{ref:r,className:se("text-lg font-semibold text-foreground",t),...e}));i8.displayName=ju.displayName;const o8=x.forwardRef(({className:t,...e},r)=>i.jsx(Su,{ref:r,className:se("text-sm text-muted-foreground",t),...e}));o8.displayName=Su.displayName;function Mj({className:t,...e}){return i.jsx("div",{className:se("animate-pulse rounded-md bg-muted",t),...e})}const l8="sidebar:state",c8=60*60*24*7,d8="16rem",u8="18rem",h8="3rem",f8="b",FT=x.createContext(null);function Vm(){const t=x.useContext(FT);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const o0=x.forwardRef(({defaultOpen:t=!0,open:e,onOpenChange:r,className:n,style:a,children:s,...o},l)=>{const c=Zq(),[d,u]=x.useState(!1),[h,f]=x.useState(t),m=e??h,v=x.useCallback(b=>{const w=typeof b=="function"?b(m):b;r?r(w):f(w),document.cookie=`${l8}=${w}; path=/; max-age=${c8}`},[r,m]),p=x.useCallback(()=>c?u(b=>!b):v(b=>!b),[c,v,u]);x.useEffect(()=>{const b=w=>{w.key===f8&&(w.metaKey||w.ctrlKey)&&(w.preventDefault(),p())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[p]);const g=m?"expanded":"collapsed",y=x.useMemo(()=>({state:g,open:m,setOpen:v,isMobile:c,openMobile:d,setOpenMobile:u,toggleSidebar:p}),[g,m,v,c,d,u,p]);return i.jsx(FT.Provider,{value:y,children:i.jsx(GA,{delayDuration:0,children:i.jsx("div",{style:{"--sidebar-width":d8,"--sidebar-width-icon":h8,...a},className:se("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",n),ref:l,...o,children:s})})})});o0.displayName="SidebarProvider";const BT=x.forwardRef(({side:t="left",variant:e="sidebar",collapsible:r="offcanvas",className:n,children:a,...s},o)=>{const{isMobile:l,state:c,openMobile:d,setOpenMobile:u}=Vm();return r==="none"?i.jsx("div",{className:se("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",n),ref:o,...s,children:a}):l?i.jsx(n8,{open:d,onOpenChange:u,...s,children:i.jsx(LT,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":u8},side:t,children:i.jsx("div",{className:"flex h-full w-full flex-col",children:a})})}):i.jsxs("div",{ref:o,className:"group peer hidden md:block text-sidebar-foreground","data-state":c,"data-collapsible":c==="collapsed"?r:"","data-variant":e,"data-side":t,children:[i.jsx("div",{className:se("duration-200 relative h-svh w-[--sidebar-width] bg-transparent transition-[width] ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),i.jsx("div",{className:se("duration-200 fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",n),...s,children:i.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:a})})]})});BT.displayName="Sidebar";const l0=x.forwardRef(({className:t,onClick:e,...r},n)=>{const{toggleSidebar:a}=Vm();return i.jsxs(K,{ref:n,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:se("h-7 w-7",t),onClick:s=>{e==null||e(s),a()},...r,children:[i.jsx(gL,{}),i.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});l0.displayName="SidebarTrigger";const m8=x.forwardRef(({className:t,...e},r)=>{const{toggleSidebar:n}=Vm();return i.jsx("button",{ref:r,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:n,title:"Toggle Sidebar",className:se("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...e})});m8.displayName="SidebarRail";const c0=x.forwardRef(({className:t,...e},r)=>i.jsx("main",{ref:r,className:se("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...e}));c0.displayName="SidebarInset";const g8=x.forwardRef(({className:t,...e},r)=>i.jsx(me,{ref:r,"data-sidebar":"input",className:se("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...e}));g8.displayName="SidebarInput";const qT=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,"data-sidebar":"header",className:se("flex flex-col gap-2 p-2",t),...e}));qT.displayName="SidebarHeader";const UT=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,"data-sidebar":"footer",className:se("flex flex-col gap-2 p-2",t),...e}));UT.displayName="SidebarFooter";const p8=x.forwardRef(({className:t,...e},r)=>i.jsx($T,{ref:r,"data-sidebar":"separator",className:se("mx-2 w-auto bg-sidebar-border",t),...e}));p8.displayName="SidebarSeparator";const zT=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,"data-sidebar":"content",className:se("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e}));zT.displayName="SidebarContent";const ed=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,"data-sidebar":"group",className:se("relative flex w-full min-w-0 flex-col p-2",t),...e}));ed.displayName="SidebarGroup";const qh=x.forwardRef(({className:t,asChild:e=!1,...r},n)=>{const a=e?Bs:"div";return i.jsx(a,{ref:n,"data-sidebar":"group-label",className:se("duration-200 flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...r})});qh.displayName="SidebarGroupLabel";const v8=x.forwardRef(({className:t,asChild:e=!1,...r},n)=>{const a=e?Bs:"button";return i.jsx(a,{ref:n,"data-sidebar":"group-action",className:se("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...r})});v8.displayName="SidebarGroupAction";const td=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,"data-sidebar":"group-content",className:se("w-full text-sm",t),...e}));td.displayName="SidebarGroupContent";const rd=x.forwardRef(({className:t,...e},r)=>i.jsx("ul",{ref:r,"data-sidebar":"menu",className:se("flex w-full min-w-0 flex-col gap-1",t),...e}));rd.displayName="SidebarMenu";const Ro=x.forwardRef(({className:t,...e},r)=>i.jsx("li",{ref:r,"data-sidebar":"menu-item",className:se("group/menu-item relative",t),...e}));Ro.displayName="SidebarMenuItem";const y8=no("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),$o=x.forwardRef(({asChild:t=!1,isActive:e=!1,variant:r="default",size:n="default",tooltip:a,className:s,...o},l)=>{const c=t?Bs:"button",{isMobile:d,state:u}=Vm(),h=i.jsx(c,{ref:l,"data-sidebar":"menu-button","data-size":n,"data-active":e,className:se(y8({variant:r,size:n}),s),...o});return a?(typeof a=="string"&&(a={children:a}),i.jsxs(ZF,{children:[i.jsx(e6,{asChild:!0,children:h}),i.jsx(VA,{side:"right",align:"center",hidden:u!=="collapsed"||d,...a})]})):h});$o.displayName="SidebarMenuButton";const b8=x.forwardRef(({className:t,asChild:e=!1,showOnHover:r=!1,...n},a)=>{const s=e?Bs:"button";return i.jsx(s,{ref:a,"data-sidebar":"menu-action",className:se("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",r&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...n})});b8.displayName="SidebarMenuAction";const x8=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,"data-sidebar":"menu-badge",className:se("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...e}));x8.displayName="SidebarMenuBadge";const w8=x.forwardRef(({className:t,showIcon:e=!1,...r},n)=>{const a=x.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return i.jsxs("div",{ref:n,"data-sidebar":"menu-skeleton",className:se("rounded-md h-8 flex gap-2 px-2 items-center",t),...r,children:[e&&i.jsx(Mj,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),i.jsx(Mj,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":a}})]})});w8.displayName="SidebarMenuSkeleton";const _8=x.forwardRef(({className:t,...e},r)=>i.jsx("ul",{ref:r,"data-sidebar":"menu-sub",className:se("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...e}));_8.displayName="SidebarMenuSub";const j8=x.forwardRef(({...t},e)=>i.jsx("li",{ref:e,...t}));j8.displayName="SidebarMenuSubItem";const S8=x.forwardRef(({asChild:t=!1,size:e="md",isActive:r,className:n,...a},s)=>{const o=t?Bs:"a";return i.jsx(o,{ref:s,"data-sidebar":"menu-sub-button","data-size":e,"data-active":r,className:se("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",e==="sm"&&"text-xs",e==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",n),...a})});S8.displayName="SidebarMenuSubButton";var d0="Collapsible",[k8,FAe]=Kn(d0),[N8,u0]=k8(d0),HT=x.forwardRef((t,e)=>{const{__scopeCollapsible:r,open:n,defaultOpen:a,disabled:s,onOpenChange:o,...l}=t,[c=!1,d]=Fs({prop:n,defaultProp:a,onChange:o});return i.jsx(N8,{scope:r,disabled:s,contentId:xu(),open:c,onOpenToggle:x.useCallback(()=>d(u=>!u),[d]),children:i.jsx(it.div,{"data-state":f0(c),"data-disabled":s?"":void 0,...l,ref:e})})});HT.displayName=d0;var WT="CollapsibleTrigger",KT=x.forwardRef((t,e)=>{const{__scopeCollapsible:r,...n}=t,a=u0(WT,r);return i.jsx(it.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":f0(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...n,ref:e,onClick:je(t.onClick,a.onOpenToggle)})});KT.displayName=WT;var h0="CollapsibleContent",GT=x.forwardRef((t,e)=>{const{forceMount:r,...n}=t,a=u0(h0,t.__scopeCollapsible);return i.jsx(Nn,{present:r||a.open,children:({present:s})=>i.jsx(E8,{...n,ref:e,present:s})})});GT.displayName=h0;var E8=x.forwardRef((t,e)=>{const{__scopeCollapsible:r,present:n,children:a,...s}=t,o=u0(h0,r),[l,c]=x.useState(n),d=x.useRef(null),u=cr(e,d),h=x.useRef(0),f=h.current,m=x.useRef(0),v=m.current,p=o.open||l,g=x.useRef(p),y=x.useRef();return x.useEffect(()=>{const b=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(b)},[]),TC(()=>{const b=d.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();h.current=w.height,m.current=w.width,g.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),c(n)}},[o.open,n]),i.jsx(it.div,{"data-state":f0(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!p,...s,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...t.style},children:p&&a})});function f0(t){return t?"open":"closed"}var C8=HT;const qi=C8,Al=KT,Ui=GT,VT=({activeItem:t,onItemChange:e})=>{var j;const{profile:r}=tt(),n=t.startsWith("schedules"),[a,s]=x.useState(n),o=t.startsWith("events"),[l,c]=x.useState(o);x.useEffect(()=>{console.log(" AppSidebar useEffect - activeItem:",t,"isScheduleActive:",n),n&&s(!0),o&&c(!0)},[n,o,t]);const d=_=>(r==null?void 0:r.role)==="superadmin"?!0:(r==null?void 0:r.role)&&_.includes(r.role),u=[{id:"dashboard",title:"Dashboard",icon:qx,onClick:()=>e("dashboard")}],h=[{id:"classes",title:"Kelas",icon:Mm,onClick:()=>e("classes"),permissions:["superadmin","kepsek","kesiswaan","kurikulum"]},{id:"teachers",title:"Guru",icon:tr,onClick:()=>e("teachers"),permissions:["superadmin","kepsek","kurikulum"]},{id:"subjects",title:"Mata Pelajaran",icon:Kt,onClick:()=>e("subjects"),permissions:["superadmin","kepsek","kesiswaan","kurikulum"]},{id:"time-sessions",title:"Sesi dan Waktu",icon:Gt,onClick:()=>e("time-sessions"),permissions:["superadmin","kepsek","kesiswaan","kurikulum"]}],f=[{id:"schedules",title:"Jadwal",icon:Ve,onClick:()=>e("schedules"),permissions:["superadmin","kepsek","kesiswaan","kurikulum","guru"]},{id:"schedules-overview",title:"Overview",icon:Ni,onClick:()=>e("schedules-overview"),permissions:["superadmin","kepsek","kesiswaan","kurikulum","guru"]},{id:"schedules-sync",title:"Sinkronisasi Kalender",icon:uL,onClick:()=>e("schedules-sync"),permissions:["superadmin","kepsek","kesiswaan","kurikulum"]},{id:"schedules-print",title:"Print",icon:Nl,onClick:()=>e("schedules-print"),permissions:["superadmin","kepsek","kesiswaan","kurikulum","guru"]}],m=[{id:"events",title:"Kalender Event",icon:cn,onClick:()=>e("events"),permissions:["superadmin","kepsek","kesiswaan","kurikulum","guru"]},{id:"events-print",title:"Print Kaldik",icon:Nl,onClick:()=>e("events-print"),permissions:["superadmin","kepsek","kesiswaan","kurikulum","guru"]},{id:"events-share",title:"Share Event",icon:Wx,onClick:()=>e("events-share"),permissions:["superadmin","kepsek","kesiswaan","kurikulum"]}],v=[{id:"general-settings",title:"Pengaturan Umum",icon:$m,onClick:()=>e("general-settings"),permissions:["superadmin","kepsek"]},{id:"school-info",title:"Info Sekolah",icon:js,onClick:()=>e("school-info"),permissions:["superadmin","kepsek"]}],p=h.filter(_=>d(_.permissions)),g=f.filter(_=>d(_.permissions)),y=m.filter(_=>d(_.permissions)),b=v.filter(_=>d(_.permissions)),w=g.length>0||y.length>0;return i.jsxs(BT,{className:"bg-sidebar border-sidebar-border",children:[i.jsxs(qT,{className:"p-6 bg-sidebar-accent",children:[i.jsxs("div",{className:"text-2xl font-bold text-sidebar-foreground tracking-tight",children:["Indo",i.jsx("span",{className:"text-lime-400",children:"Jadwal"})]}),i.jsxs("div",{className:"text-sm text-sidebar-accent-foreground mt-2",children:[r==null?void 0:r.full_name,"  ",i.jsx("span",{className:"text-lime-400 font-semibold",children:(j=r==null?void 0:r.role)==null?void 0:j.toUpperCase()})]}),(r==null?void 0:r.school_id)&&i.jsx("div",{className:"text-xs text-lime-400 mt-1",children:"Sekolah Demo IndoJadwal"})]}),i.jsxs(zT,{className:"bg-sidebar-accent",children:[i.jsx(ed,{children:i.jsx(td,{children:i.jsx(rd,{children:u.map(_=>i.jsx(Ro,{children:i.jsxs($o,{onClick:_.onClick,isActive:t===_.id,className:"text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent data-[active=true]:bg-lime-400 data-[active=true]:text-gray-900",children:[i.jsx(_.icon,{className:"h-5 w-5"}),i.jsx("span",{children:_.title})]})},_.id))})})}),p.length>0&&i.jsxs(ed,{children:[i.jsx(qh,{className:"text-sidebar-accent-foreground text-xs uppercase tracking-wider",children:"Master Data"}),i.jsx(td,{children:i.jsx(rd,{children:p.map(_=>i.jsx(Ro,{children:i.jsxs($o,{onClick:_.onClick,isActive:t===_.id,className:"text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent data-[active=true]:bg-lime-400 data-[active=true]:text-gray-900",children:[i.jsx(_.icon,{className:"h-5 w-5"}),i.jsx("span",{children:_.title})]})},_.id))})})]}),w&&i.jsxs(ed,{children:[i.jsx(qh,{className:"text-sidebar-accent-foreground text-xs uppercase tracking-wider",children:"Manajemen Jadwal"}),i.jsx(td,{children:i.jsxs(rd,{children:[i.jsx(qi,{open:a||n,onOpenChange:s,children:i.jsxs(Ro,{children:[i.jsx(Al,{asChild:!0,children:i.jsxs($o,{isActive:t.startsWith("schedules"),className:"text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent data-[active=true]:bg-lime-400 data-[active=true]:text-gray-900",children:[i.jsx(Ve,{className:"h-5 w-5"}),i.jsx("span",{children:"Jadwal"}),i.jsx(Fn,{className:`h-4 w-4 ml-auto transition-transform duration-200 ${a?"rotate-180":""}`})]})}),i.jsx(Ui,{children:i.jsx("div",{className:"ml-4 space-y-1",children:g.map(_=>i.jsxs("div",{onClick:()=>{console.log(" Schedule submenu clicked:",{itemId:_.id,itemTitle:_.title,currentActiveItem:t,currentPath:window.location.pathname,isScheduleExpanded:a}),e(_.id)},className:`flex h-7 items-center gap-2 rounded-md px-2 cursor-pointer transition-all duration-200 ${t===_.id?"bg-lime-400 text-gray-900":"text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent"}`,children:[i.jsx(_.icon,{className:`h-4 w-4 ${t===_.id?"text-gray-900":"text-sidebar-foreground"}`}),i.jsx("span",{children:_.title})]},_.id))})})]})}),i.jsx(qi,{open:l,onOpenChange:c,children:i.jsxs(Ro,{children:[i.jsx(Al,{asChild:!0,children:i.jsxs($o,{isActive:o,className:"w-full text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-foreground",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(cn,{className:"h-5 w-5"}),i.jsx("span",{children:"Event"})]}),i.jsx(Fn,{className:`h-4 w-4 transition-transform ${l?"rotate-180":""}`})]})}),i.jsx(Ui,{children:i.jsx("div",{className:"ml-4 space-y-1",children:y.map(_=>i.jsxs("div",{onClick:()=>e(_.id),className:`flex h-7 items-center gap-2 rounded-md px-2 cursor-pointer transition-all duration-200 ${t===_.id?"bg-lime-400 text-gray-900":"text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent"}`,children:[i.jsx(_.icon,{className:`h-4 w-4 ${t===_.id?"text-gray-900":"text-sidebar-foreground"}`}),i.jsx("span",{children:_.title})]},_.id))})})]})})]})})]}),b.length>0&&i.jsxs(ed,{children:[i.jsx(qh,{className:"text-sidebar-accent-foreground text-xs uppercase tracking-wider",children:"Pengaturan"}),i.jsx(td,{children:i.jsx(rd,{children:b.map(_=>i.jsx(Ro,{children:i.jsxs($o,{onClick:_.onClick,isActive:t===_.id,className:"text-sidebar-foreground hover:text-sidebar-foreground hover:bg-sidebar-accent data-[active=true]:bg-lime-400 data-[active=true]:text-gray-900",children:[i.jsx(_.icon,{className:"h-5 w-5"}),i.jsx("span",{children:_.title})]})},_.id))})})]})]}),i.jsx(UT,{className:"p-4 bg-sidebar-accent",children:i.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-sidebar/50 rounded-lg",children:[i.jsx("div",{className:"w-8 h-8 bg-lime-400 rounded-full flex items-center justify-center",children:i.jsx(Ss,{className:"h-4 w-4 text-gray-900"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-sidebar-foreground truncate",children:r==null?void 0:r.full_name}),i.jsx("div",{className:"text-xs text-lime-400 capitalize font-semibold",children:r==null?void 0:r.role})]})]})})]})};function A8(t,e=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:f,children:m,...v}=h,p=(f==null?void 0:f[t][c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(p.Provider,{value:g,children:m})}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=x.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return d.displayName=s+"Provider",[d,u]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,T8(a,...e)]}function T8(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(s)[`__scope${d}`];return{...l,...h}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var Dp="rovingFocusGroup.onEntryFocus",D8={bubbles:!1,cancelable:!0},Qm="RovingFocusGroup",[xy,QT,P8]=kx(Qm),[M8,gc]=A8(Qm,[P8]),[O8,R8]=M8(Qm),JT=x.forwardRef((t,e)=>i.jsx(xy.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(xy.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx($8,{...t,ref:e})})}));JT.displayName=Qm;var $8=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=t,f=x.useRef(null),m=cr(e,f),v=Px(s),[p=null,g]=Fs({prop:o,defaultProp:l,onChange:c}),[y,b]=x.useState(!1),w=Sl(d),j=QT(r),_=x.useRef(!1),[S,N]=x.useState(0);return x.useEffect(()=>{const k=f.current;if(k)return k.addEventListener(Dp,w),()=>k.removeEventListener(Dp,w)},[w]),i.jsx(O8,{scope:r,orientation:n,dir:v,loop:a,currentTabStopId:p,onItemFocus:x.useCallback(k=>g(k),[g]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>N(k=>k+1),[]),onFocusableItemRemove:x.useCallback(()=>N(k=>k-1),[]),children:i.jsx(it.div,{tabIndex:y||S===0?-1:0,"data-orientation":n,...h,ref:m,style:{outline:"none",...t.style},onMouseDown:je(t.onMouseDown,()=>{_.current=!0}),onFocus:je(t.onFocus,k=>{const E=!_.current;if(k.target===k.currentTarget&&E&&!y){const P=new CustomEvent(Dp,D8);if(k.currentTarget.dispatchEvent(P),!P.defaultPrevented){const T=j().filter(L=>L.focusable),D=T.find(L=>L.active),A=T.find(L=>L.id===p),R=[D,A,...T].filter(Boolean).map(L=>L.ref.current);ZT(R,u)}}_.current=!1}),onBlur:je(t.onBlur,()=>b(!1))})})}),YT="RovingFocusGroupItem",XT=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:s,...o}=t,l=xu(),c=s||l,d=R8(YT,r),u=d.currentTabStopId===c,h=QT(r),{onFocusableItemAdd:f,onFocusableItemRemove:m}=d;return x.useEffect(()=>{if(n)return f(),()=>m()},[n,f,m]),i.jsx(xy.ItemSlot,{scope:r,id:c,focusable:n,active:a,children:i.jsx(it.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:je(t.onMouseDown,v=>{n?d.onItemFocus(c):v.preventDefault()}),onFocus:je(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:je(t.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const p=F8(v,d.orientation,d.dir);if(p!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=h().filter(b=>b.focusable).map(b=>b.ref.current);if(p==="last")y.reverse();else if(p==="prev"||p==="next"){p==="prev"&&y.reverse();const b=y.indexOf(v.currentTarget);y=d.loop?B8(y,b+1):y.slice(b+1)}setTimeout(()=>ZT(y))}})})})});XT.displayName=YT;var I8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function L8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function F8(t,e,r){const n=L8(t.key,r);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return I8[n]}function ZT(t,e=!1){const r=document.activeElement;for(const n of t)if(n===r||(n.focus({preventScroll:e}),document.activeElement!==r))return}function B8(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var m0=JT,g0=XT,wy=["Enter"," "],q8=["ArrowDown","PageUp","Home"],eD=["ArrowUp","PageDown","End"],U8=[...q8,...eD],z8={ltr:[...wy,"ArrowRight"],rtl:[...wy,"ArrowLeft"]},H8={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Jm="Menu",[_d,W8,K8]=kx(Jm),[so,tD]=Kn(Jm,[K8,lc,gc]),p0=lc(),rD=gc(),[BAe,io]=so(Jm),[qAe,Cu]=so(Jm),G8="MenuAnchor",v0=x.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,a=p0(r);return i.jsx(Cm,{...a,...n,ref:e})});v0.displayName=G8;var y0="MenuPortal",[V8,nD]=so(y0,{forceMount:void 0}),aD=t=>{const{__scopeMenu:e,forceMount:r,children:n,container:a}=t,s=io(y0,e);return i.jsx(V8,{scope:e,forceMount:r,children:i.jsx(Nn,{present:r||s.open,children:i.jsx(Nx,{asChild:!0,container:a,children:n})})})};aD.displayName=y0;var jn="MenuContent",[Q8,b0]=so(jn),sD=x.forwardRef((t,e)=>{const r=nD(jn,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,s=io(jn,t.__scopeMenu),o=Cu(jn,t.__scopeMenu);return i.jsx(_d.Provider,{scope:t.__scopeMenu,children:i.jsx(Nn,{present:n||s.open,children:i.jsx(_d.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(J8,{...a,ref:e}):i.jsx(Y8,{...a,ref:e})})})})}),J8=x.forwardRef((t,e)=>{const r=io(jn,t.__scopeMenu),n=x.useRef(null),a=cr(e,n);return x.useEffect(()=>{const s=n.current;if(s)return Mx(s)},[]),i.jsx(x0,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:je(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Y8=x.forwardRef((t,e)=>{const r=io(jn,t.__scopeMenu);return i.jsx(x0,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),x0=x.forwardRef((t,e)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...p}=t,g=io(jn,r),y=Cu(jn,r),b=p0(r),w=rD(r),j=W8(r),[_,S]=x.useState(null),N=x.useRef(null),k=cr(e,N,g.onContentChange),E=x.useRef(0),P=x.useRef(""),T=x.useRef(0),D=x.useRef(null),A=x.useRef("right"),C=x.useRef(0),R=v?IC:x.Fragment,L=v?{as:Bs,allowPinchZoom:!0}:void 0,M=B=>{var le,V;const H=P.current+B,q=j().filter(Q=>!Q.disabled),O=document.activeElement,F=(le=q.find(Q=>Q.ref.current===O))==null?void 0:le.textValue,G=q.map(Q=>Q.textValue),Y=cU(G,H,F),Z=(V=q.find(Q=>Q.textValue===Y))==null?void 0:V.ref.current;(function Q(ce){P.current=ce,window.clearTimeout(E.current),ce!==""&&(E.current=window.setTimeout(()=>Q(""),1e3))})(H),Z&&setTimeout(()=>Z.focus())};x.useEffect(()=>()=>window.clearTimeout(E.current),[]),OC();const I=x.useCallback(B=>{var q,O;return A.current===((q=D.current)==null?void 0:q.side)&&uU(B,(O=D.current)==null?void 0:O.area)},[]);return i.jsx(Q8,{scope:r,searchRef:P,onItemEnter:x.useCallback(B=>{I(B)&&B.preventDefault()},[I]),onItemLeave:x.useCallback(B=>{var H;I(B)||((H=N.current)==null||H.focus(),S(null))},[I]),onTriggerLeave:x.useCallback(B=>{I(B)&&B.preventDefault()},[I]),pointerGraceTimerRef:T,onPointerGraceIntentChange:x.useCallback(B=>{D.current=B},[]),children:i.jsx(R,{...L,children:i.jsx(RC,{asChild:!0,trapped:a,onMountAutoFocus:je(s,B=>{var H;B.preventDefault(),(H=N.current)==null||H.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(Ex,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:i.jsx(m0,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:n,currentTabStopId:_,onCurrentTabStopIdChange:S,onEntryFocus:je(c,B=>{y.isUsingKeyboardRef.current||B.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Cx,{role:"menu","aria-orientation":"vertical","data-state":wD(g.open),"data-radix-menu-content":"",dir:y.dir,...b,...p,ref:k,style:{outline:"none",...p.style},onKeyDown:je(p.onKeyDown,B=>{const q=B.target.closest("[data-radix-menu-content]")===B.currentTarget,O=B.ctrlKey||B.altKey||B.metaKey,F=B.key.length===1;q&&(B.key==="Tab"&&B.preventDefault(),!O&&F&&M(B.key));const G=N.current;if(B.target!==G||!U8.includes(B.key))return;B.preventDefault();const Z=j().filter(le=>!le.disabled).map(le=>le.ref.current);eD.includes(B.key)&&Z.reverse(),oU(Z)}),onBlur:je(t.onBlur,B=>{B.currentTarget.contains(B.target)||(window.clearTimeout(E.current),P.current="")}),onPointerMove:je(t.onPointerMove,jd(B=>{const H=B.target,q=C.current!==B.clientX;if(B.currentTarget.contains(H)&&q){const O=B.clientX>C.current?"right":"left";A.current=O,C.current=B.clientX}}))})})})})})})});sD.displayName=jn;var X8="MenuGroup",w0=x.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(it.div,{role:"group",...n,ref:e})});w0.displayName=X8;var Z8="MenuLabel",iD=x.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(it.div,{...n,ref:e})});iD.displayName=Z8;var nf="MenuItem",Oj="menu.itemSelect",Ym=x.forwardRef((t,e)=>{const{disabled:r=!1,onSelect:n,...a}=t,s=x.useRef(null),o=Cu(nf,t.__scopeMenu),l=b0(nf,t.__scopeMenu),c=cr(e,s),d=x.useRef(!1),u=()=>{const h=s.current;if(!r&&h){const f=new CustomEvent(Oj,{bubbles:!0,cancelable:!0});h.addEventListener(Oj,m=>n==null?void 0:n(m),{once:!0}),DC(h,f),f.defaultPrevented?d.current=!1:o.onClose()}};return i.jsx(oD,{...a,ref:c,disabled:r,onClick:je(t.onClick,u),onPointerDown:h=>{var f;(f=t.onPointerDown)==null||f.call(t,h),d.current=!0},onPointerUp:je(t.onPointerUp,h=>{var f;d.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:je(t.onKeyDown,h=>{const f=l.searchRef.current!=="";r||f&&h.key===" "||wy.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Ym.displayName=nf;var oD=x.forwardRef((t,e)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...s}=t,o=b0(nf,r),l=rD(r),c=x.useRef(null),d=cr(e,c),[u,h]=x.useState(!1),[f,m]=x.useState("");return x.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[s.children]),i.jsx(_d.ItemSlot,{scope:r,disabled:n,textValue:a??f,children:i.jsx(g0,{asChild:!0,...l,focusable:!n,children:i.jsx(it.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...s,ref:d,onPointerMove:je(t.onPointerMove,jd(v=>{n?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:je(t.onPointerLeave,jd(v=>o.onItemLeave(v))),onFocus:je(t.onFocus,()=>h(!0)),onBlur:je(t.onBlur,()=>h(!1))})})})}),eU="MenuCheckboxItem",lD=x.forwardRef((t,e)=>{const{checked:r=!1,onCheckedChange:n,...a}=t;return i.jsx(fD,{scope:t.__scopeMenu,checked:r,children:i.jsx(Ym,{role:"menuitemcheckbox","aria-checked":af(r)?"mixed":r,...a,ref:e,"data-state":j0(r),onSelect:je(a.onSelect,()=>n==null?void 0:n(af(r)?!0:!r),{checkForDefaultPrevented:!1})})})});lD.displayName=eU;var cD="MenuRadioGroup",[tU,rU]=so(cD,{value:void 0,onValueChange:()=>{}}),dD=x.forwardRef((t,e)=>{const{value:r,onValueChange:n,...a}=t,s=Sl(n);return i.jsx(tU,{scope:t.__scopeMenu,value:r,onValueChange:s,children:i.jsx(w0,{...a,ref:e})})});dD.displayName=cD;var uD="MenuRadioItem",hD=x.forwardRef((t,e)=>{const{value:r,...n}=t,a=rU(uD,t.__scopeMenu),s=r===a.value;return i.jsx(fD,{scope:t.__scopeMenu,checked:s,children:i.jsx(Ym,{role:"menuitemradio","aria-checked":s,...n,ref:e,"data-state":j0(s),onSelect:je(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});hD.displayName=uD;var _0="MenuItemIndicator",[fD,nU]=so(_0,{checked:!1}),mD=x.forwardRef((t,e)=>{const{__scopeMenu:r,forceMount:n,...a}=t,s=nU(_0,r);return i.jsx(Nn,{present:n||af(s.checked)||s.checked===!0,children:i.jsx(it.span,{...a,ref:e,"data-state":j0(s.checked)})})});mD.displayName=_0;var aU="MenuSeparator",gD=x.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t;return i.jsx(it.div,{role:"separator","aria-orientation":"horizontal",...n,ref:e})});gD.displayName=aU;var sU="MenuArrow",pD=x.forwardRef((t,e)=>{const{__scopeMenu:r,...n}=t,a=p0(r);return i.jsx(Ax,{...a,...n,ref:e})});pD.displayName=sU;var iU="MenuSub",[UAe,vD]=so(iU),nd="MenuSubTrigger",yD=x.forwardRef((t,e)=>{const r=io(nd,t.__scopeMenu),n=Cu(nd,t.__scopeMenu),a=vD(nd,t.__scopeMenu),s=b0(nd,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=s,d={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(v0,{asChild:!0,...d,children:i.jsx(oD,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":wD(r.open),...t,ref:$C(e,a.onTriggerChange),onClick:h=>{var f;(f=t.onClick)==null||f.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:je(t.onPointerMove,jd(h=>{s.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!r.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),u()},100))})),onPointerLeave:je(t.onPointerLeave,jd(h=>{var m,v;u();const f=(m=r.content)==null?void 0:m.getBoundingClientRect();if(f){const p=(v=r.content)==null?void 0:v.dataset.side,g=p==="right",y=g?-5:5,b=f[g?"left":"right"],w=f[g?"right":"left"];s.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:b,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:b,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(h),h.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:je(t.onKeyDown,h=>{var m;const f=s.searchRef.current!=="";t.disabled||f&&h.key===" "||z8[n.dir].includes(h.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),h.preventDefault())})})})});yD.displayName=nd;var bD="MenuSubContent",xD=x.forwardRef((t,e)=>{const r=nD(jn,t.__scopeMenu),{forceMount:n=r.forceMount,...a}=t,s=io(jn,t.__scopeMenu),o=Cu(jn,t.__scopeMenu),l=vD(bD,t.__scopeMenu),c=x.useRef(null),d=cr(e,c);return i.jsx(_d.Provider,{scope:t.__scopeMenu,children:i.jsx(Nn,{present:n||s.open,children:i.jsx(_d.Slot,{scope:t.__scopeMenu,children:i.jsx(x0,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:je(t.onFocusOutside,u=>{u.target!==l.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:je(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:je(t.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),f=H8[o.dir].includes(u.key);h&&f&&(s.onOpenChange(!1),(m=l.trigger)==null||m.focus(),u.preventDefault())})})})})})});xD.displayName=bD;function wD(t){return t?"open":"closed"}function af(t){return t==="indeterminate"}function j0(t){return af(t)?"indeterminate":t?"checked":"unchecked"}function oU(t){const e=document.activeElement;for(const r of t)if(r===e||(r.focus(),document.activeElement!==e))return}function lU(t,e){return t.map((r,n)=>t[(e+n)%t.length])}function cU(t,e,r){const a=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,s=r?t.indexOf(r):-1;let o=lU(t,Math.max(s,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function dU(t,e){const{x:r,y:n}=t;let a=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const l=e[s].x,c=e[s].y,d=e[o].x,u=e[o].y;c>n!=u>n&&r<(d-l)*(n-c)/(u-c)+l&&(a=!a)}return a}function uU(t,e){if(!e)return!1;const r={x:t.clientX,y:t.clientY};return dU(r,e)}function jd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var hU=v0,fU=aD,mU=sD,gU=w0,pU=iD,vU=Ym,yU=lD,bU=dD,xU=hD,wU=mD,_U=gD,jU=pD,SU=yD,kU=xD,_D="DropdownMenu",[NU,zAe]=Kn(_D,[tD]),Yr=tD(),[HAe,jD]=NU(_D),SD="DropdownMenuTrigger",EU=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=t,s=jD(SD,r),o=Yr(r);return i.jsx(hU,{asChild:!0,...o,children:i.jsx(it.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:$C(e,s.triggerRef),onPointerDown:je(t.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(s.onOpenToggle(),s.open||l.preventDefault())}),onKeyDown:je(t.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&s.onOpenToggle(),l.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});EU.displayName=SD;var CU="DropdownMenuPortal",kD=t=>{const{__scopeDropdownMenu:e,...r}=t,n=Yr(e);return i.jsx(fU,{...n,...r})};kD.displayName=CU;var ND="DropdownMenuContent",ED=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=jD(ND,r),s=Yr(r),o=x.useRef(!1);return i.jsx(mU,{id:a.contentId,"aria-labelledby":a.triggerId,...s,...n,ref:e,onCloseAutoFocus:je(t.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:je(t.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!a.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ED.displayName=ND;var AU="DropdownMenuGroup",TU=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(gU,{...a,...n,ref:e})});TU.displayName=AU;var DU="DropdownMenuLabel",CD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(pU,{...a,...n,ref:e})});CD.displayName=DU;var PU="DropdownMenuItem",AD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(vU,{...a,...n,ref:e})});AD.displayName=PU;var MU="DropdownMenuCheckboxItem",TD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(yU,{...a,...n,ref:e})});TD.displayName=MU;var OU="DropdownMenuRadioGroup",RU=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(bU,{...a,...n,ref:e})});RU.displayName=OU;var $U="DropdownMenuRadioItem",DD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(xU,{...a,...n,ref:e})});DD.displayName=$U;var IU="DropdownMenuItemIndicator",PD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(wU,{...a,...n,ref:e})});PD.displayName=IU;var LU="DropdownMenuSeparator",MD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(_U,{...a,...n,ref:e})});MD.displayName=LU;var FU="DropdownMenuArrow",BU=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(jU,{...a,...n,ref:e})});BU.displayName=FU;var qU="DropdownMenuSubTrigger",OD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(SU,{...a,...n,ref:e})});OD.displayName=qU;var UU="DropdownMenuSubContent",RD=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:r,...n}=t,a=Yr(r);return i.jsx(kU,{...a,...n,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});RD.displayName=UU;var zU=kD,$D=ED,ID=CD,LD=AD,FD=TD,BD=DD,qD=PD,UD=MD,zD=OD,HD=RD;const HU=x.forwardRef(({className:t,inset:e,children:r,...n},a)=>i.jsxs(zD,{ref:a,className:se("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...n,children:[r,i.jsx(Oa,{className:"ml-auto h-4 w-4"})]}));HU.displayName=zD.displayName;const WU=x.forwardRef(({className:t,...e},r)=>i.jsx(HD,{ref:r,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));WU.displayName=HD.displayName;const KU=x.forwardRef(({className:t,sideOffset:e=4,...r},n)=>i.jsx(zU,{children:i.jsx($D,{ref:n,sideOffset:e,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));KU.displayName=$D.displayName;const GU=x.forwardRef(({className:t,inset:e,...r},n)=>i.jsx(LD,{ref:n,className:se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...r}));GU.displayName=LD.displayName;const VU=x.forwardRef(({className:t,children:e,checked:r,...n},a)=>i.jsxs(FD,{ref:a,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(qD,{children:i.jsx(Pm,{className:"h-4 w-4"})})}),e]}));VU.displayName=FD.displayName;const QU=x.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(BD,{ref:n,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(qD,{children:i.jsx(xA,{className:"h-2 w-2 fill-current"})})}),e]}));QU.displayName=BD.displayName;const JU=x.forwardRef(({className:t,inset:e,...r},n)=>i.jsx(ID,{ref:n,className:se("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...r}));JU.displayName=ID.displayName;const YU=x.forwardRef(({className:t,...e},r)=>i.jsx(UD,{ref:r,className:se("-mx-1 my-1 h-px bg-muted",t),...e}));YU.displayName=UD.displayName;function WD(){const{setTheme:t,theme:e}=LA(),r=()=>{t(e==="dark"?"light":"dark")};return i.jsxs(K,{variant:"outline",size:"icon",onClick:r,className:"relative h-9 w-9 border-border bg-background hover:bg-accent hover:text-accent-foreground transition-all duration-200",children:[i.jsx(yL,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),i.jsx(mL,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),i.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}const XU=t=>t.startsWith("/schedules")?{title:"Jadwal",Icon:Ve}:t.startsWith("/events")?{title:"Event",Icon:cn}:t.startsWith("/classes")?{title:"Kelas",Icon:X3}:t.startsWith("/teachers")?{title:"Guru",Icon:tr}:t.startsWith("/subjects")?{title:"Mata Pelajaran",Icon:eL}:t.startsWith("/time-sessions")?{title:"Sesi Waktu",Icon:Gt}:t.startsWith("/settings")?{title:"Pengaturan Umum",Icon:$m}:t.startsWith("/school-info")?{title:"Info Sekolah",Icon:jA}:{title:"Dashboard",Icon:bA},ZU=t=>t==="/schedules/overview"?"schedules-overview":t==="/schedules/sync"?"schedules-sync":t==="/schedules/print"?"schedules-print":t.startsWith("/schedules")?"schedules":t==="/events/print"?"events-print":t==="/events/share"?"events-share":t.startsWith("/events")?"events":t.startsWith("/classes")?"classes":t.startsWith("/teachers")?"teachers":t.startsWith("/subjects")?"subjects":t.startsWith("/time-sessions")?"time-sessions":t.startsWith("/settings")?"general-settings":t.startsWith("/school-info")?"school-info":"dashboard",ez=()=>{const t=QC(),e=cc(),{profile:r,signOut:n}=tt(),a=d=>{const u={dashboard:"/",classes:"/classes",teachers:"/teachers",subjects:"/subjects","time-sessions":"/time-sessions",schedules:"/schedules","schedules-overview":"/schedules/overview","schedules-sync":"/schedules/sync","schedules-print":"/schedules/print",events:"/events","events-print":"/events/print","events-share":"/events/share","general-settings":"/settings","school-info":"/school-info"};console.log(" MainLayout handleItemChange:",{item:d,mappedPath:u[d],currentPath:t.pathname}),e(u[d]||"/")},{title:s,Icon:o}=XU(t.pathname),l=ZU(t.pathname),c=async()=>{try{await n(),e("/")}catch(d){console.error("Error during logout:",d)}};return i.jsx(o0,{children:i.jsxs("div",{className:"flex h-screen w-full bg-background",children:[i.jsx(VT,{activeItem:l,onItemChange:a}),i.jsxs(c0,{className:"flex-1 min-w-0",children:[i.jsxs("header",{className:"flex h-16 shrink-0 items-center gap-2 bg-background border-b border-border px-4",children:[i.jsx(l0,{className:"text-foreground hover:text-foreground/80"}),i.jsxs("div",{className:"flex items-center space-x-2 text-xl font-semibold text-foreground ml-4 flex-1",children:[i.jsx(o,{className:"h-6 w-6 text-primary"}),i.jsx("span",{children:s})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:(r==null?void 0:r.full_name)||"User"})]}),i.jsx(WD,{}),i.jsxs(K,{variant:"outline",size:"sm",onClick:c,className:"flex items-center gap-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:[i.jsx(SA,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]}),i.jsx("main",{className:"flex-1 overflow-auto bg-background w-full",children:i.jsx("div",{className:"w-full h-full",children:i.jsx(j3,{})})})]})]})})},ie=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:se("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ie.displayName="Card";const _e=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:se("flex flex-col space-y-1.5 p-6",t),...e}));_e.displayName="CardHeader";const Ee=x.forwardRef(({className:t,...e},r)=>i.jsx("h3",{ref:r,className:se("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ee.displayName="CardTitle";const Hr=x.forwardRef(({className:t,...e},r)=>i.jsx("p",{ref:r,className:se("text-sm text-muted-foreground",t),...e}));Hr.displayName="CardDescription";const oe=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:se("p-6 pt-0",t),...e}));oe.displayName="CardContent";const tz=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{ref:r,className:se("flex items-center p-6 pt-0",t),...e}));tz.displayName="CardFooter";function rz(t,e=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:f,children:m,...v}=h,p=(f==null?void 0:f[t][c])||l,g=x.useMemo(()=>v,Object.values(v));return i.jsx(p.Provider,{value:g,children:m})}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=x.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return d.displayName=s+"Provider",[d,u]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,nz(a,...e)]}function nz(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(s)[`__scope${d}`];return{...l,...h}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}var S0="Progress",k0=100,[az,WAe]=rz(S0),[sz,iz]=az(S0),KD=x.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:s=oz,...o}=t;(a||a===0)&&!Rj(a)&&console.error(lz(`${a}`,"Progress"));const l=Rj(a)?a:k0;n!==null&&!$j(n,l)&&console.error(cz(`${n}`,"Progress"));const c=$j(n,l)?n:null,d=sf(c)?s(c,l):void 0;return i.jsx(sz,{scope:r,value:c,max:l,children:i.jsx(it.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":sf(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":QD(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});KD.displayName=S0;var GD="ProgressIndicator",VD=x.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,a=iz(GD,r);return i.jsx(it.div,{"data-state":QD(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:e})});VD.displayName=GD;function oz(t,e){return`${Math.round(t/e*100)}%`}function QD(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function sf(t){return typeof t=="number"}function Rj(t){return sf(t)&&!isNaN(t)&&t>0}function $j(t,e){return sf(t)&&!isNaN(t)&&t<=e&&t>=0}function lz(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${k0}\`.`}function cz(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${k0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var JD=KD,dz=VD;const N0=x.forwardRef(({className:t,value:e,indicatorClassName:r,...n},a)=>i.jsx(JD,{ref:a,className:se("relative h-4 w-full overflow-hidden rounded-full bg-gray-700/50",t),...n,children:i.jsx(dz,{className:se("h-full w-full flex-1 bg-green-500 transition-all",r),style:{transform:`translateX(-${100-(e||0)}%)`}})}));N0.displayName=JD.displayName;const uz=no("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function st({className:t,variant:e,...r}){return i.jsx("div",{className:se(uz({variant:e}),t),...r})}const Re=c3,$e=d3,De=x.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(LC,{ref:n,className:se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,i.jsx(a3,{asChild:!0,children:i.jsx(Fn,{className:"h-4 w-4 opacity-50"})})]}));De.displayName=LC.displayName;const YD=x.forwardRef(({className:t,...e},r)=>i.jsx(FC,{ref:r,className:se("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Ei,{className:"h-4 w-4"})}));YD.displayName=FC.displayName;const XD=x.forwardRef(({className:t,...e},r)=>i.jsx(BC,{ref:r,className:se("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Fn,{className:"h-4 w-4"})}));XD.displayName=BC.displayName;const Pe=x.forwardRef(({className:t,children:e,position:r="popper",...n},a)=>i.jsx(s3,{children:i.jsxs(qC,{ref:a,className:se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[i.jsx(YD,{}),i.jsx(i3,{className:se("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(XD,{})]})}));Pe.displayName=qC.displayName;const hz=x.forwardRef(({className:t,...e},r)=>i.jsx(UC,{ref:r,className:se("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));hz.displayName=UC.displayName;const he=x.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(zC,{ref:n,className:se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(o3,{children:i.jsx(Pm,{className:"h-4 w-4"})})}),i.jsx(l3,{children:e})]}));he.displayName=zC.displayName;const fz=x.forwardRef(({className:t,...e},r)=>i.jsx(HC,{ref:r,className:se("-mx-1 my-1 h-px bg-muted",t),...e}));fz.displayName=HC.displayName;function Xe(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Jr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function yr(t,e){const r=Xe(t);return isNaN(e)?Jr(t,NaN):(e&&r.setDate(r.getDate()+e),r)}function zn(t,e){const r=Xe(t);if(isNaN(e))return Jr(t,NaN);if(!e)return r;const n=r.getDate(),a=Jr(t,r.getTime());a.setMonth(r.getMonth()+e+1,0);const s=a.getDate();return n>=s?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const E0=6048e5,mz=864e5,ZD=6e4,e2=36e5;let gz={};function Au(){return gz}function Cr(t,e){var l,c,d,u;const r=Au(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Xe(t),s=a.getDay(),o=(s<n?7:0)+s-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function zi(t){return Cr(t,{weekStartsOn:1})}function t2(t){const e=Xe(t),r=e.getFullYear(),n=Jr(t,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=zi(n),s=Jr(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=zi(s);return e.getTime()>=a.getTime()?r+1:e.getTime()>=o.getTime()?r:r-1}function la(t){const e=Xe(t);return e.setHours(0,0,0,0),e}function of(t){const e=Xe(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function aa(t,e){const r=la(t),n=la(e),a=+r-of(r),s=+n-of(n);return Math.round((a-s)/mz)}function pz(t){const e=t2(t),r=Jr(t,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),zi(r)}function Tl(t,e){const r=e*7;return yr(t,r)}function vz(t,e){return zn(t,e*12)}function yz(t){let e;return t.forEach(function(r){const n=Xe(r);(e===void 0||e<n||isNaN(Number(n)))&&(e=n)}),e||new Date(NaN)}function bz(t){let e;return t.forEach(r=>{const n=Xe(r);(!e||e>n||isNaN(+n))&&(e=n)}),e||new Date(NaN)}function xz(t){return Jr(t,Date.now())}function rr(t,e){const r=la(t),n=la(e);return+r==+n}function C0(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function wz(t){if(!C0(t)&&typeof t!="number")return!1;const e=Xe(t);return!isNaN(Number(e))}function Sd(t,e){const r=Xe(t),n=Xe(e),a=r.getFullYear()-n.getFullYear(),s=r.getMonth()-n.getMonth();return a*12+s}function _z(t,e,r){const n=Cr(t,r),a=Cr(e,r),s=+n-of(n),o=+a-of(a);return Math.round((s-o)/E0)}function Ua(t){const e=Xe(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(23,59,59,999),e}function Hn(t,e){const r=Xe(t.start),n=Xe(t.end);let a=+r>+n;const s=a?+r:+n,o=a?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=s;)c.push(Xe(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function Qt(t){const e=Xe(t);return e.setDate(1),e.setHours(0,0,0,0),e}function r2(t){const e=Xe(t),r=Jr(t,0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}function oo(t,e){var l,c,d,u;const r=Au(),n=(e==null?void 0:e.weekStartsOn)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Xe(t),s=a.getDay(),o=(s<n?-7:0)+6-(s-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function n2(t){return oo(t,{weekStartsOn:1})}const jz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Sz=(t,e,r)=>{let n;const a=jz[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Zo(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const kz={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Nz={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ez={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Cz={date:Zo({formats:kz,defaultWidth:"full"}),time:Zo({formats:Nz,defaultWidth:"full"}),dateTime:Zo({formats:Ez,defaultWidth:"full"})},Az={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Tz=(t,e,r,n)=>Az[t];function ra(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=r!=null&&r.width?String(r.width):t.defaultWidth;a=t.values[l]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return a[s]}}const Dz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Pz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Mz={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Oz={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Rz={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$z={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Iz=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Lz={ordinalNumber:Iz,era:ra({values:Dz,defaultWidth:"wide"}),quarter:ra({values:Pz,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ra({values:Mz,defaultWidth:"wide"}),day:ra({values:Oz,defaultWidth:"wide"}),dayPeriod:ra({values:Rz,defaultWidth:"wide",formattingValues:$z,defaultFormattingWidth:"wide"})};function na(t){return(e,r={})=>{const n=r.width,a=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],s=e.match(a);if(!s)return null;const o=s[0],l=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Bz(l,h=>h.test(o)):Fz(l,h=>h.test(o));let d;d=t.valueCallback?t.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=e.slice(o.length);return{value:d,rest:u}}}function Fz(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Bz(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function a2(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const a=n[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=e.slice(a.length);return{value:o,rest:l}}}const qz=/^(\d+)(th|st|nd|rd)?/i,Uz=/\d+/i,zz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Hz={any:[/^b/i,/^(a|c)/i]},Wz={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kz={any:[/1/i,/2/i,/3/i,/4/i]},Gz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Vz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Qz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Jz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Yz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Xz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zz={ordinalNumber:a2({matchPattern:qz,parsePattern:Uz,valueCallback:t=>parseInt(t,10)}),era:na({matchPatterns:zz,defaultMatchWidth:"wide",parsePatterns:Hz,defaultParseWidth:"any"}),quarter:na({matchPatterns:Wz,defaultMatchWidth:"wide",parsePatterns:Kz,defaultParseWidth:"any",valueCallback:t=>t+1}),month:na({matchPatterns:Gz,defaultMatchWidth:"wide",parsePatterns:Vz,defaultParseWidth:"any"}),day:na({matchPatterns:Qz,defaultMatchWidth:"wide",parsePatterns:Jz,defaultParseWidth:"any"}),dayPeriod:na({matchPatterns:Yz,defaultMatchWidth:"any",parsePatterns:Xz,defaultParseWidth:"any"})},s2={code:"en-US",formatDistance:Sz,formatLong:Cz,formatRelative:Tz,localize:Lz,match:Zz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eH(t){const e=Xe(t);return aa(e,r2(e))+1}function i2(t){const e=Xe(t),r=+zi(e)-+pz(e);return Math.round(r/E0)+1}function o2(t,e){var u,h,f,m;const r=Xe(t),n=r.getFullYear(),a=Au(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=Jr(t,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=Cr(o,e),c=Jr(t,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const d=Cr(c,e);return r.getTime()>=l.getTime()?n+1:r.getTime()>=d.getTime()?n:n-1}function tH(t,e){var l,c,d,u;const r=Au(),n=(e==null?void 0:e.firstWeekContainsDate)??((c=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=o2(t,e),s=Jr(t,0);return s.setFullYear(a,0,n),s.setHours(0,0,0,0),Cr(s,e)}function l2(t,e){const r=Xe(t),n=+Cr(r,e)-+tH(r,e);return Math.round(n/E0)+1}function mt(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const Za={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return mt(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):mt(r+1,2)},d(t,e){return mt(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return mt(t.getHours()%12||12,e.length)},H(t,e){return mt(t.getHours(),e.length)},m(t,e){return mt(t.getMinutes(),e.length)},s(t,e){return mt(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return mt(a,e.length)}},So={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ij={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Za.y(t,e)},Y:function(t,e,r,n){const a=o2(t,n),s=a>0?a:1-a;if(e==="YY"){const o=s%100;return mt(o,2)}return e==="Yo"?r.ordinalNumber(s,{unit:"year"}):mt(s,e.length)},R:function(t,e){const r=t2(t);return mt(r,e.length)},u:function(t,e){const r=t.getFullYear();return mt(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return mt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return mt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return Za.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return mt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const a=l2(t,n);return e==="wo"?r.ordinalNumber(a,{unit:"week"}):mt(a,e.length)},I:function(t,e,r){const n=i2(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):mt(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):Za.d(t,e)},D:function(t,e,r){const n=eH(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):mt(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return mt(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const a=t.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return mt(s,e.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),a=n===0?7:n;switch(e){case"i":return String(a);case"ii":return mt(a,e.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const a=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let a;switch(n===12?a=So.noon:n===0?a=So.midnight:a=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let a;switch(n>=17?a=So.evening:n>=12?a=So.afternoon:n>=4?a=So.morning:a=So.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Za.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):Za.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):mt(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):mt(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):Za.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):Za.s(t,e)},S:function(t,e){return Za.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Fj(n);case"XXXX":case"XX":return ri(n);case"XXXXX":case"XXX":default:return ri(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return Fj(n);case"xxxx":case"xx":return ri(n);case"xxxxx":case"xxx":default:return ri(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Lj(n,":");case"OOOO":default:return"GMT"+ri(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Lj(n,":");case"zzzz":default:return"GMT"+ri(n,":")}},t:function(t,e,r){const n=Math.trunc(t.getTime()/1e3);return mt(n,e.length)},T:function(t,e,r){const n=t.getTime();return mt(n,e.length)}};function Lj(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=Math.trunc(n/60),s=n%60;return s===0?r+String(a):r+String(a)+e+mt(s,2)}function Fj(t,e){return t%60===0?(t>0?"-":"+")+mt(Math.abs(t)/60,2):ri(t,e)}function ri(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),a=mt(Math.trunc(n/60),2),s=mt(n%60,2);return r+a+e+s}const Bj=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},c2=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},rH=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Bj(t,e);let s;switch(n){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",Bj(n,e)).replace("{{time}}",c2(a,e))},nH={p:c2,P:rH},aH=/^D+$/,sH=/^Y+$/,iH=["D","DD","YY","YYYY"];function oH(t){return aH.test(t)}function lH(t){return sH.test(t)}function cH(t,e,r){const n=dH(t,e,r);if(console.warn(n),iH.includes(t))throw new RangeError(n)}function dH(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const uH=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fH=/^'([^]*?)'?$/,mH=/''/g,gH=/[a-zA-Z]/;function be(t,e,r){var u,h,f,m,v,p,g,y;const n=Au(),a=(r==null?void 0:r.locale)??n.locale??s2,s=(r==null?void 0:r.firstWeekContainsDate)??((h=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((y=(g=n.locale)==null?void 0:g.options)==null?void 0:y.weekStartsOn)??0,l=Xe(t);if(!wz(l))throw new RangeError("Invalid time value");let c=e.match(hH).map(b=>{const w=b[0];if(w==="p"||w==="P"){const j=nH[w];return j(b,a.formatLong)}return b}).join("").match(uH).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:pH(b)};if(Ij[w])return{isToken:!0,value:b};if(w.match(gH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:s,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&lH(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&oH(w))&&cH(w,e,String(t));const j=Ij[w[0]];return j(l,w,a.localize,d)}).join("")}function pH(t){const e=t.match(fH);return e?e[1].replace(mH,"'"):t}function ks(t){return Xe(t).getDay()}function vH(t){const e=Xe(t),r=e.getFullYear(),n=e.getMonth(),a=Jr(t,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function yH(t){return Math.trunc(+Xe(t)/1e3)}function bH(t){const e=Xe(t),r=e.getMonth();return e.setFullYear(e.getFullYear(),r+1,0),e.setHours(0,0,0,0),e}function xH(t,e){return _z(bH(t),Qt(t),e)+1}function _y(t,e){const r=Xe(t),n=Xe(e);return r.getTime()>n.getTime()}function d2(t,e){const r=Xe(t),n=Xe(e);return+r<+n}function Ca(t,e){const r=Xe(t),n=Xe(e);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function wH(t,e){const r=Xe(t),n=Xe(e);return r.getFullYear()===n.getFullYear()}function _H(t){return rr(t,xz(t))}function Xm(t,e){const r=+Xe(t),[n,a]=[+Xe(e.start),+Xe(e.end)].sort((s,o)=>s-o);return r>=n&&r<=a}function Pp(t,e){return yr(t,-e)}function hr(t,e){const n=NH(t);let a;if(n.date){const c=EH(n.date,2);a=CH(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const s=a.getTime();let o=0,l;if(n.time&&(o=AH(n.time),isNaN(o)))return new Date(NaN);if(n.timezone){if(l=TH(n.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(s+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(s+o+l)}const ah={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},jH=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,SH=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,kH=/^([+-])(\d{2})(?::?(\d{2}))?$/;function NH(t){const e={},r=t.split(ah.dateTimeDelimiter);let n;if(r.length>2)return e;if(/:/.test(r[0])?n=r[0]:(e.date=r[0],n=r[1],ah.timeZoneDelimiter.test(e.date)&&(e.date=t.split(ah.timeZoneDelimiter)[0],n=t.substr(e.date.length,t.length))),n){const a=ah.timezone.exec(n);a?(e.time=n.replace(a[1],""),e.timezone=a[1]):e.time=n}return e}function EH(t,e){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=t.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,s=n[2]?parseInt(n[2]):null;return{year:s===null?a:s*100,restDateString:t.slice((n[1]||n[2]).length)}}function CH(t,e){if(e===null)return new Date(NaN);const r=t.match(jH);if(!r)return new Date(NaN);const n=!!r[4],a=Lc(r[1]),s=Lc(r[2])-1,o=Lc(r[3]),l=Lc(r[4]),c=Lc(r[5])-1;if(n)return RH(e,l,c)?DH(e,l,c):new Date(NaN);{const d=new Date(0);return!MH(e,s,o)||!OH(e,a)?new Date(NaN):(d.setUTCFullYear(e,s,Math.max(a,o)),d)}}function Lc(t){return t?parseInt(t):1}function AH(t){const e=t.match(SH);if(!e)return NaN;const r=Mp(e[1]),n=Mp(e[2]),a=Mp(e[3]);return $H(r,n,a)?r*e2+n*ZD+a*1e3:NaN}function Mp(t){return t&&parseFloat(t.replace(",","."))||0}function TH(t){if(t==="Z")return 0;const e=t.match(kH);if(!e)return 0;const r=e[1]==="+"?-1:1,n=parseInt(e[2]),a=e[3]&&parseInt(e[3])||0;return IH(n,a)?r*(n*e2+a*ZD):NaN}function DH(t,e,r){const n=new Date(0);n.setUTCFullYear(t,0,4);const a=n.getUTCDay()||7,s=(e-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+s),n}const PH=[31,null,31,30,31,30,31,31,30,31,30,31];function u2(t){return t%400===0||t%4===0&&t%100!==0}function MH(t,e,r){return e>=0&&e<=11&&r>=1&&r<=(PH[e]||(u2(t)?29:28))}function OH(t,e){return e>=1&&e<=(u2(t)?366:365)}function RH(t,e,r){return e>=1&&e<=53&&r>=0&&r<=6}function $H(t,e,r){return t===24?e===0&&r===0:r>=0&&r<60&&e>=0&&e<60&&t>=0&&t<25}function IH(t,e){return e>=0&&e<=59}function Op(t,e){const r=Xe(t),n=r.getFullYear(),a=r.getDate(),s=Jr(t,0);s.setFullYear(n,e,15),s.setHours(0,0,0,0);const o=vH(s);return r.setMonth(e,Math.min(a,o)),r}function qj(t,e){const r=Xe(t);return isNaN(+r)?Jr(t,NaN):(r.setFullYear(e),r)}const LH={lessThanXSeconds:{one:"kurang dari 1 detik",other:"kurang dari {{count}} detik"},xSeconds:{one:"1 detik",other:"{{count}} detik"},halfAMinute:"setengah menit",lessThanXMinutes:{one:"kurang dari 1 menit",other:"kurang dari {{count}} menit"},xMinutes:{one:"1 menit",other:"{{count}} menit"},aboutXHours:{one:"sekitar 1 jam",other:"sekitar {{count}} jam"},xHours:{one:"1 jam",other:"{{count}} jam"},xDays:{one:"1 hari",other:"{{count}} hari"},aboutXWeeks:{one:"sekitar 1 minggu",other:"sekitar {{count}} minggu"},xWeeks:{one:"1 minggu",other:"{{count}} minggu"},aboutXMonths:{one:"sekitar 1 bulan",other:"sekitar {{count}} bulan"},xMonths:{one:"1 bulan",other:"{{count}} bulan"},aboutXYears:{one:"sekitar 1 tahun",other:"sekitar {{count}} tahun"},xYears:{one:"1 tahun",other:"{{count}} tahun"},overXYears:{one:"lebih dari 1 tahun",other:"lebih dari {{count}} tahun"},almostXYears:{one:"hampir 1 tahun",other:"hampir {{count}} tahun"}},FH=(t,e,r)=>{let n;const a=LH[t];return typeof a=="string"?n=a:e===1?n=a.one:n=a.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dalam waktu "+n:n+" yang lalu":n},BH={full:"EEEE, d MMMM yyyy",long:"d MMMM yyyy",medium:"d MMM yyyy",short:"d/M/yyyy"},qH={full:"HH.mm.ss",long:"HH.mm.ss",medium:"HH.mm",short:"HH.mm"},UH={full:"{{date}} 'pukul' {{time}}",long:"{{date}} 'pukul' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zH={date:Zo({formats:BH,defaultWidth:"full"}),time:Zo({formats:qH,defaultWidth:"full"}),dateTime:Zo({formats:UH,defaultWidth:"full"})},HH={lastWeek:"eeee 'lalu pukul' p",yesterday:"'Kemarin pukul' p",today:"'Hari ini pukul' p",tomorrow:"'Besok pukul' p",nextWeek:"eeee 'pukul' p",other:"P"},WH=(t,e,r,n)=>HH[t],KH={narrow:["SM","M"],abbreviated:["SM","M"],wide:["Sebelum Masehi","Masehi"]},GH={narrow:["1","2","3","4"],abbreviated:["K1","K2","K3","K4"],wide:["Kuartal ke-1","Kuartal ke-2","Kuartal ke-3","Kuartal ke-4"]},VH={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Agt","Sep","Okt","Nov","Des"],wide:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"]},QH={narrow:["M","S","S","R","K","J","S"],short:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],abbreviated:["Min","Sen","Sel","Rab","Kam","Jum","Sab"],wide:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"]},JH={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},YH={narrow:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},abbreviated:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"},wide:{am:"AM",pm:"PM",midnight:"tengah malam",noon:"tengah hari",morning:"pagi",afternoon:"siang",evening:"sore",night:"malam"}},XH=(t,e)=>"ke-"+Number(t),ZH={ordinalNumber:XH,era:ra({values:KH,defaultWidth:"wide"}),quarter:ra({values:GH,defaultWidth:"wide",argumentCallback:t=>t-1}),month:ra({values:VH,defaultWidth:"wide"}),day:ra({values:QH,defaultWidth:"wide"}),dayPeriod:ra({values:JH,defaultWidth:"wide",formattingValues:YH,defaultFormattingWidth:"wide"})},eW=/^ke-(\d+)?/i,tW=/\d+/i,rW={narrow:/^(sm|m)/i,abbreviated:/^(s\.?\s?m\.?|s\.?\s?e\.?\s?u\.?|m\.?|e\.?\s?u\.?)/i,wide:/^(sebelum masehi|sebelum era umum|masehi|era umum)/i},nW={any:[/^s/i,/^(m|e)/i]},aW={narrow:/^[1234]/i,abbreviated:/^K-?\s[1234]/i,wide:/^Kuartal ke-?\s?[1234]/i},sW={any:[/1/i,/2/i,/3/i,/4/i]},iW={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|mei|jun|jul|agt|sep|okt|nov|des)/i,wide:/^(januari|februari|maret|april|mei|juni|juli|agustus|september|oktober|november|desember)/i},oW={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^ma/i,/^ap/i,/^me/i,/^jun/i,/^jul/i,/^ag/i,/^s/i,/^o/i,/^n/i,/^d/i]},lW={narrow:/^[srkjm]/i,short:/^(min|sen|sel|rab|kam|jum|sab)/i,abbreviated:/^(min|sen|sel|rab|kam|jum|sab)/i,wide:/^(minggu|senin|selasa|rabu|kamis|jumat|sabtu)/i},cW={narrow:[/^m/i,/^s/i,/^s/i,/^r/i,/^k/i,/^j/i,/^s/i],any:[/^m/i,/^sen/i,/^sel/i,/^r/i,/^k/i,/^j/i,/^sa/i]},dW={narrow:/^(a|p|tengah m|tengah h|(di(\swaktu)?) (pagi|siang|sore|malam))/i,any:/^([ap]\.?\s?m\.?|tengah malam|tengah hari|(di(\swaktu)?) (pagi|siang|sore|malam))/i},uW={any:{am:/^a/i,pm:/^pm/i,midnight:/^tengah m/i,noon:/^tengah h/i,morning:/pagi/i,afternoon:/siang/i,evening:/sore/i,night:/malam/i}},hW={ordinalNumber:a2({matchPattern:eW,parsePattern:tW,valueCallback:t=>parseInt(t,10)}),era:na({matchPatterns:rW,defaultMatchWidth:"wide",parsePatterns:nW,defaultParseWidth:"any"}),quarter:na({matchPatterns:aW,defaultMatchWidth:"wide",parsePatterns:sW,defaultParseWidth:"any",valueCallback:t=>t+1}),month:na({matchPatterns:iW,defaultMatchWidth:"wide",parsePatterns:oW,defaultParseWidth:"any"}),day:na({matchPatterns:lW,defaultMatchWidth:"wide",parsePatterns:cW,defaultParseWidth:"any"}),dayPeriod:na({matchPatterns:dW,defaultMatchWidth:"any",parsePatterns:uW,defaultParseWidth:"any"})},bt={code:"id",formatDistance:FH,formatLong:zH,formatRelative:WH,localize:ZH,match:hW,options:{weekStartsOn:1,firstWeekContainsDate:1}};var fW=Array.isArray,Xr=fW,mW=typeof _r=="object"&&_r&&_r.Object===Object&&_r,h2=mW,gW=h2,pW=typeof self=="object"&&self&&self.Object===Object&&self,vW=gW||pW||Function("return this")(),ha=vW,yW=ha,bW=yW.Symbol,Tu=bW,Uj=Tu,f2=Object.prototype,xW=f2.hasOwnProperty,wW=f2.toString,Fc=Uj?Uj.toStringTag:void 0;function _W(t){var e=xW.call(t,Fc),r=t[Fc];try{t[Fc]=void 0;var n=!0}catch{}var a=wW.call(t);return n&&(e?t[Fc]=r:delete t[Fc]),a}var jW=_W,SW=Object.prototype,kW=SW.toString;function NW(t){return kW.call(t)}var EW=NW,zj=Tu,CW=jW,AW=EW,TW="[object Null]",DW="[object Undefined]",Hj=zj?zj.toStringTag:void 0;function PW(t){return t==null?t===void 0?DW:TW:Hj&&Hj in Object(t)?CW(t):AW(t)}var za=PW;function MW(t){return t!=null&&typeof t=="object"}var Ha=MW,OW=za,RW=Ha,$W="[object Symbol]";function IW(t){return typeof t=="symbol"||RW(t)&&OW(t)==$W}var pc=IW,LW=Xr,FW=pc,BW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qW=/^\w*$/;function UW(t,e){if(LW(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||FW(t)?!0:qW.test(t)||!BW.test(t)||e!=null&&t in Object(e)}var A0=UW;function zW(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Us=zW;const vc=jt(Us);var HW=za,WW=Us,KW="[object AsyncFunction]",GW="[object Function]",VW="[object GeneratorFunction]",QW="[object Proxy]";function JW(t){if(!WW(t))return!1;var e=HW(t);return e==GW||e==VW||e==KW||e==QW}var T0=JW;const Ue=jt(T0);var YW=ha,XW=YW["__core-js_shared__"],ZW=XW,Rp=ZW,Wj=function(){var t=/[^.]+$/.exec(Rp&&Rp.keys&&Rp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function eK(t){return!!Wj&&Wj in t}var tK=eK,rK=Function.prototype,nK=rK.toString;function aK(t){if(t!=null){try{return nK.call(t)}catch{}try{return t+""}catch{}}return""}var m2=aK,sK=T0,iK=tK,oK=Us,lK=m2,cK=/[\\^$.*+?()[\]{}|]/g,dK=/^\[object .+?Constructor\]$/,uK=Function.prototype,hK=Object.prototype,fK=uK.toString,mK=hK.hasOwnProperty,gK=RegExp("^"+fK.call(mK).replace(cK,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pK(t){if(!oK(t)||iK(t))return!1;var e=sK(t)?gK:dK;return e.test(lK(t))}var vK=pK;function yK(t,e){return t==null?void 0:t[e]}var bK=yK,xK=vK,wK=bK;function _K(t,e){var r=wK(t,e);return xK(r)?r:void 0}var lo=_K,jK=lo,SK=jK(Object,"create"),Zm=SK,Kj=Zm;function kK(){this.__data__=Kj?Kj(null):{},this.size=0}var NK=kK;function EK(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var CK=EK,AK=Zm,TK="__lodash_hash_undefined__",DK=Object.prototype,PK=DK.hasOwnProperty;function MK(t){var e=this.__data__;if(AK){var r=e[t];return r===TK?void 0:r}return PK.call(e,t)?e[t]:void 0}var OK=MK,RK=Zm,$K=Object.prototype,IK=$K.hasOwnProperty;function LK(t){var e=this.__data__;return RK?e[t]!==void 0:IK.call(e,t)}var FK=LK,BK=Zm,qK="__lodash_hash_undefined__";function UK(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=BK&&e===void 0?qK:e,this}var zK=UK,HK=NK,WK=CK,KK=OK,GK=FK,VK=zK;function yc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}yc.prototype.clear=HK;yc.prototype.delete=WK;yc.prototype.get=KK;yc.prototype.has=GK;yc.prototype.set=VK;var QK=yc;function JK(){this.__data__=[],this.size=0}var YK=JK;function XK(t,e){return t===e||t!==t&&e!==e}var D0=XK,ZK=D0;function e7(t,e){for(var r=t.length;r--;)if(ZK(t[r][0],e))return r;return-1}var eg=e7,t7=eg,r7=Array.prototype,n7=r7.splice;function a7(t){var e=this.__data__,r=t7(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():n7.call(e,r,1),--this.size,!0}var s7=a7,i7=eg;function o7(t){var e=this.__data__,r=i7(e,t);return r<0?void 0:e[r][1]}var l7=o7,c7=eg;function d7(t){return c7(this.__data__,t)>-1}var u7=d7,h7=eg;function f7(t,e){var r=this.__data__,n=h7(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var m7=f7,g7=YK,p7=s7,v7=l7,y7=u7,b7=m7;function bc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}bc.prototype.clear=g7;bc.prototype.delete=p7;bc.prototype.get=v7;bc.prototype.has=y7;bc.prototype.set=b7;var tg=bc,x7=lo,w7=ha,_7=x7(w7,"Map"),P0=_7,Gj=QK,j7=tg,S7=P0;function k7(){this.size=0,this.__data__={hash:new Gj,map:new(S7||j7),string:new Gj}}var N7=k7;function E7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var C7=E7,A7=C7;function T7(t,e){var r=t.__data__;return A7(e)?r[typeof e=="string"?"string":"hash"]:r.map}var rg=T7,D7=rg;function P7(t){var e=D7(this,t).delete(t);return this.size-=e?1:0,e}var M7=P7,O7=rg;function R7(t){return O7(this,t).get(t)}var $7=R7,I7=rg;function L7(t){return I7(this,t).has(t)}var F7=L7,B7=rg;function q7(t,e){var r=B7(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var U7=q7,z7=N7,H7=M7,W7=$7,K7=F7,G7=U7;function xc(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}xc.prototype.clear=z7;xc.prototype.delete=H7;xc.prototype.get=W7;xc.prototype.has=K7;xc.prototype.set=G7;var M0=xc,g2=M0,V7="Expected a function";function O0(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(V7);var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=t.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(O0.Cache||g2),r}O0.Cache=g2;var p2=O0;const Q7=jt(p2);var J7=p2,Y7=500;function X7(t){var e=J7(t,function(n){return r.size===Y7&&r.clear(),n}),r=e.cache;return e}var Z7=X7,eG=Z7,tG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rG=/\\(\\)?/g,nG=eG(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(tG,function(r,n,a,s){e.push(a?s.replace(rG,"$1"):n||r)}),e}),aG=nG;function sG(t,e){for(var r=-1,n=t==null?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a}var R0=sG,Vj=Tu,iG=R0,oG=Xr,lG=pc,cG=1/0,Qj=Vj?Vj.prototype:void 0,Jj=Qj?Qj.toString:void 0;function v2(t){if(typeof t=="string")return t;if(oG(t))return iG(t,v2)+"";if(lG(t))return Jj?Jj.call(t):"";var e=t+"";return e=="0"&&1/t==-cG?"-0":e}var dG=v2,uG=dG;function hG(t){return t==null?"":uG(t)}var y2=hG,fG=Xr,mG=A0,gG=aG,pG=y2;function vG(t,e){return fG(t)?t:mG(t,e)?[t]:gG(pG(t))}var b2=vG,yG=pc,bG=1/0;function xG(t){if(typeof t=="string"||yG(t))return t;var e=t+"";return e=="0"&&1/t==-bG?"-0":e}var ng=xG,wG=b2,_G=ng;function jG(t,e){e=wG(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[_G(e[r++])];return r&&r==n?t:void 0}var $0=jG,SG=$0;function kG(t,e,r){var n=t==null?void 0:SG(t,e);return n===void 0?r:n}var x2=kG;const dn=jt(x2);function NG(t){return t==null}var EG=NG;const Ze=jt(EG);var CG=za,AG=Xr,TG=Ha,DG="[object String]";function PG(t){return typeof t=="string"||!AG(t)&&TG(t)&&CG(t)==DG}var MG=PG;const Hi=jt(MG);var w2={exports:{}},pt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I0=Symbol.for("react.element"),L0=Symbol.for("react.portal"),ag=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),og=Symbol.for("react.provider"),lg=Symbol.for("react.context"),OG=Symbol.for("react.server_context"),cg=Symbol.for("react.forward_ref"),dg=Symbol.for("react.suspense"),ug=Symbol.for("react.suspense_list"),hg=Symbol.for("react.memo"),fg=Symbol.for("react.lazy"),RG=Symbol.for("react.offscreen"),_2;_2=Symbol.for("react.module.reference");function En(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case I0:switch(t=t.type,t){case ag:case ig:case sg:case dg:case ug:return t;default:switch(t=t&&t.$$typeof,t){case OG:case lg:case cg:case fg:case hg:case og:return t;default:return e}}case L0:return e}}}pt.ContextConsumer=lg;pt.ContextProvider=og;pt.Element=I0;pt.ForwardRef=cg;pt.Fragment=ag;pt.Lazy=fg;pt.Memo=hg;pt.Portal=L0;pt.Profiler=ig;pt.StrictMode=sg;pt.Suspense=dg;pt.SuspenseList=ug;pt.isAsyncMode=function(){return!1};pt.isConcurrentMode=function(){return!1};pt.isContextConsumer=function(t){return En(t)===lg};pt.isContextProvider=function(t){return En(t)===og};pt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===I0};pt.isForwardRef=function(t){return En(t)===cg};pt.isFragment=function(t){return En(t)===ag};pt.isLazy=function(t){return En(t)===fg};pt.isMemo=function(t){return En(t)===hg};pt.isPortal=function(t){return En(t)===L0};pt.isProfiler=function(t){return En(t)===ig};pt.isStrictMode=function(t){return En(t)===sg};pt.isSuspense=function(t){return En(t)===dg};pt.isSuspenseList=function(t){return En(t)===ug};pt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ag||t===ig||t===sg||t===dg||t===ug||t===RG||typeof t=="object"&&t!==null&&(t.$$typeof===fg||t.$$typeof===hg||t.$$typeof===og||t.$$typeof===lg||t.$$typeof===cg||t.$$typeof===_2||t.getModuleId!==void 0)};pt.typeOf=En;w2.exports=pt;var $G=w2.exports,IG=za,LG=Ha,FG="[object Number]";function BG(t){return typeof t=="number"||LG(t)&&IG(t)==FG}var j2=BG;const qG=jt(j2);var UG=j2;function zG(t){return UG(t)&&t!=+t}var HG=zG;const Du=jt(HG);var Or=function(e){return e===0?0:e>0?1:-1},mi=function(e){return Hi(e)&&e.indexOf("%")===e.length-1},de=function(e){return qG(e)&&!Du(e)},WG=function(e){return Ze(e)},nr=function(e){return de(e)||Hi(e)},KG=0,Pu=function(e){var r=++KG;return"".concat(e||"").concat(r)},Rr=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(e)&&!Hi(e))return n;var s;if(mi(e)){var o=e.indexOf("%");s=r*parseFloat(e.slice(0,o))/100}else s=+e;return Du(s)&&(s=n),a&&s>r&&(s=r),s},ls=function(e){if(!e)return null;var r=Object.keys(e);return r&&r.length?e[r[0]]:null},GG=function(e){if(!Array.isArray(e))return!1;for(var r=e.length,n={},a=0;a<r;a++)if(!n[e[a]])n[e[a]]=!0;else return!0;return!1},ss=function(e,r){return de(e)&&de(r)?function(n){return e+n*(r-e)}:function(){return r}};function jy(t,e,r){return!t||!t.length?null:t.find(function(n){return n&&(typeof e=="function"?e(n):dn(n,e))===r})}var VG=function(e,r){return de(e)&&de(r)?e-r:Hi(e)&&Hi(r)?e.localeCompare(r):e instanceof Date&&r instanceof Date?e.getTime()-r.getTime():String(e).localeCompare(String(r))};function el(t,e){for(var r in t)if({}.hasOwnProperty.call(t,r)&&(!{}.hasOwnProperty.call(e,r)||t[r]!==e[r]))return!1;for(var n in e)if({}.hasOwnProperty.call(e,n)&&!{}.hasOwnProperty.call(t,n))return!1;return!0}function Sy(t){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sy(t)}var QG=["viewBox","children"],JG=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Yj=["points","pathLength"],$p={svg:QG,polygon:Yj,polyline:Yj},F0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],lf=function(e,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(x.isValidElement(e)&&(n=e.props),!vc(n))return null;var a={};return Object.keys(n).forEach(function(s){F0.includes(s)&&(a[s]=r||function(o){return n[s](n,o)})}),a},YG=function(e,r,n){return function(a){return e(r,n,a),null}},Wi=function(e,r,n){if(!vc(e)||Sy(e)!=="object")return null;var a=null;return Object.keys(e).forEach(function(s){var o=e[s];F0.includes(s)&&typeof o=="function"&&(a||(a={}),a[s]=YG(o,r,n))}),a},XG=["children"],ZG=["children"];function Xj(t,e){if(t==null)return{};var r=e9(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function e9(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Zj={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Aa=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},e1=null,Ip=null,B0=function t(e){if(e===e1&&Array.isArray(Ip))return Ip;var r=[];return x.Children.forEach(e,function(n){Ze(n)||($G.isFragment(n)?r=r.concat(t(n.props.children)):r.push(n))}),Ip=r,e1=e,r};function Sn(t,e){var r=[],n=[];return Array.isArray(e)?n=e.map(function(a){return Aa(a)}):n=[Aa(e)],B0(t).forEach(function(a){var s=dn(a,"type.displayName")||dn(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}function sn(t,e){var r=Sn(t,e);return r&&r[0]}var t1=function(e){if(!e||!e.props)return!1;var r=e.props,n=r.width,a=r.height;return!(!de(n)||n<=0||!de(a)||a<=0)},t9=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],r9=function(e){return e&&e.type&&Hi(e.type)&&t9.indexOf(e.type)>=0},n9=function(e,r,n,a){var s,o=(s=$p==null?void 0:$p[a])!==null&&s!==void 0?s:[];return r.startsWith("data-")||!Ue(e)&&(a&&o.includes(r)||JG.includes(r))||n&&F0.includes(r)},Be=function(e,r,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var a=e;if(x.isValidElement(e)&&(a=e.props),!vc(a))return null;var s={};return Object.keys(a).forEach(function(o){var l;n9((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=a[o])}),s},ky=function t(e,r){if(e===r)return!0;var n=x.Children.count(e);if(n!==x.Children.count(r))return!1;if(n===0)return!0;if(n===1)return r1(Array.isArray(e)?e[0]:e,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var s=e[a],o=r[a];if(Array.isArray(s)||Array.isArray(o)){if(!t(s,o))return!1}else if(!r1(s,o))return!1}return!0},r1=function(e,r){if(Ze(e)&&Ze(r))return!0;if(!Ze(e)&&!Ze(r)){var n=e.props||{},a=n.children,s=Xj(n,XG),o=r.props||{},l=o.children,c=Xj(o,ZG);return a&&l?el(s,c)&&ky(a,l):!a&&!l?el(s,c):!1}return!1},n1=function(e,r){var n=[],a={};return B0(e).forEach(function(s,o){if(r9(s))n.push(s);else if(s){var l=Aa(s.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var h=d(s,l,o);n.push(h),a[l]=!0}}}),n},a9=function(e){var r=e&&e.type;return r&&Zj[r]?Zj[r]:null},s9=function(e,r){return B0(r).indexOf(e)},i9=["children","width","height","viewBox","className","style","title","desc"];function Ny(){return Ny=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ny.apply(this,arguments)}function o9(t,e){if(t==null)return{};var r=l9(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function l9(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Ey(t){var e=t.children,r=t.width,n=t.height,a=t.viewBox,s=t.className,o=t.style,l=t.title,c=t.desc,d=o9(t,i9),u=a||{width:r,height:n,x:0,y:0},h=Ge("recharts-surface",s);return $.createElement("svg",Ny({},Be(d,!0,"svg"),{className:h,width:r,height:n,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),$.createElement("title",null,l),$.createElement("desc",null,c),e)}var c9=["children","className"];function Cy(){return Cy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Cy.apply(this,arguments)}function d9(t,e){if(t==null)return{};var r=u9(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function u9(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var gt=$.forwardRef(function(t,e){var r=t.children,n=t.className,a=d9(t,c9),s=Ge("recharts-layer",n);return $.createElement("g",Cy({className:s},Be(a,!0),{ref:e}),r)}),Bn=function(e,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function h9(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),r=r>a?a:r,r<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(a);++n<a;)s[n]=t[n+e];return s}var f9=h9,m9=f9;function g9(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:m9(t,e,r)}var p9=g9,v9="\\ud800-\\udfff",y9="\\u0300-\\u036f",b9="\\ufe20-\\ufe2f",x9="\\u20d0-\\u20ff",w9=y9+b9+x9,_9="\\ufe0e\\ufe0f",j9="\\u200d",S9=RegExp("["+j9+v9+w9+_9+"]");function k9(t){return S9.test(t)}var S2=k9;function N9(t){return t.split("")}var E9=N9,k2="\\ud800-\\udfff",C9="\\u0300-\\u036f",A9="\\ufe20-\\ufe2f",T9="\\u20d0-\\u20ff",D9=C9+A9+T9,P9="\\ufe0e\\ufe0f",M9="["+k2+"]",Ay="["+D9+"]",Ty="\\ud83c[\\udffb-\\udfff]",O9="(?:"+Ay+"|"+Ty+")",N2="[^"+k2+"]",E2="(?:\\ud83c[\\udde6-\\uddff]){2}",C2="[\\ud800-\\udbff][\\udc00-\\udfff]",R9="\\u200d",A2=O9+"?",T2="["+P9+"]?",$9="(?:"+R9+"(?:"+[N2,E2,C2].join("|")+")"+T2+A2+")*",I9=T2+A2+$9,L9="(?:"+[N2+Ay+"?",Ay,E2,C2,M9].join("|")+")",F9=RegExp(Ty+"(?="+Ty+")|"+L9+I9,"g");function B9(t){return t.match(F9)||[]}var q9=B9,U9=E9,z9=S2,H9=q9;function W9(t){return z9(t)?H9(t):U9(t)}var K9=W9,G9=p9,V9=S2,Q9=K9,J9=y2;function Y9(t){return function(e){e=J9(e);var r=V9(e)?Q9(e):void 0,n=r?r[0]:e.charAt(0),a=r?G9(r,1).join(""):e.slice(1);return n[t]()+a}}var X9=Y9,Z9=X9,eV=Z9("toUpperCase"),tV=eV;const mg=jt(tV);function At(t){return function(){return t}}const D2=Math.cos,cf=Math.sin,Gn=Math.sqrt,df=Math.PI,gg=2*df,Dy=Math.PI,Py=2*Dy,ni=1e-6,rV=Py-ni;function P2(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function nV(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return P2;const r=10**e;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class aV{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?P2:nV(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,a){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(e,r,n,a,s,o){this._append`C${+e},${+r},${+n},${+a},${this._x1=+s},${this._y1=+o}`}arcTo(e,r,n,a,s){if(e=+e,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-e,d=a-r,u=o-e,h=l-r,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>ni)if(!(Math.abs(h*c-d*u)>ni)||!s)this._append`L${this._x1=e},${this._y1=r}`;else{let m=n-o,v=a-l,p=c*c+d*d,g=m*m+v*v,y=Math.sqrt(p),b=Math.sqrt(f),w=s*Math.tan((Dy-Math.acos((p+f-g)/(2*y*b)))/2),j=w/b,_=w/y;Math.abs(j-1)>ni&&this._append`L${e+j*u},${r+j*h}`,this._append`A${s},${s},0,0,${+(h*m>u*v)},${this._x1=e+_*c},${this._y1=r+_*d}`}}arc(e,r,n,a,s,o){if(e=+e,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),d=e+l,u=r+c,h=1^o,f=o?a-s:s-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>ni||Math.abs(this._y1-u)>ni)&&this._append`L${d},${u}`,n&&(f<0&&(f=f%Py+Py),f>rV?this._append`A${n},${n},0,1,${h},${e-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:f>ni&&this._append`A${n},${n},0,${+(f>=Dy)},${h},${this._x1=e+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(e,r,n,a){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function q0(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new aV(e)}function U0(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function M2(t){this._context=t}M2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function pg(t){return new M2(t)}function O2(t){return t[0]}function R2(t){return t[1]}function $2(t,e){var r=At(!0),n=null,a=pg,s=null,o=q0(l);t=typeof t=="function"?t:t===void 0?O2:At(t),e=typeof e=="function"?e:e===void 0?R2:At(e);function l(c){var d,u=(c=U0(c)).length,h,f=!1,m;for(n==null&&(s=a(m=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,d,c),+e(h,d,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:At(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:At(+c),l):e},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:At(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),l):n},l}function sh(t,e,r){var n=null,a=At(!0),s=null,o=pg,l=null,c=q0(d);t=typeof t=="function"?t:t===void 0?O2:At(+t),e=typeof e=="function"?e:At(e===void 0?0:+e),r=typeof r=="function"?r:r===void 0?R2:At(+r);function d(h){var f,m,v,p=(h=U0(h)).length,g,y=!1,b,w=new Array(p),j=new Array(p);for(s==null&&(l=o(b=c())),f=0;f<=p;++f){if(!(f<p&&a(g=h[f],f,h))===y)if(y=!y)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(w[v],j[v]);l.lineEnd(),l.areaEnd()}y&&(w[f]=+t(g,f,h),j[f]=+e(g,f,h),l.point(n?+n(g,f,h):w[f],r?+r(g,f,h):j[f]))}if(b)return l=null,b+""||null}function u(){return $2().defined(a).curve(o).context(s)}return d.x=function(h){return arguments.length?(t=typeof h=="function"?h:At(+h),n=null,d):t},d.x0=function(h){return arguments.length?(t=typeof h=="function"?h:At(+h),d):t},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:At(+h),d):n},d.y=function(h){return arguments.length?(e=typeof h=="function"?h:At(+h),r=null,d):e},d.y0=function(h){return arguments.length?(e=typeof h=="function"?h:At(+h),d):e},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:At(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(t).y(e)},d.lineY1=function(){return u().x(t).y(r)},d.lineX1=function(){return u().x(n).y(e)},d.defined=function(h){return arguments.length?(a=typeof h=="function"?h:At(!!h),d):a},d.curve=function(h){return arguments.length?(o=h,s!=null&&(l=o(s)),d):o},d.context=function(h){return arguments.length?(h==null?s=l=null:l=o(s=h),d):s},d}class I2{constructor(e,r){this._context=e,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,r){switch(e=+e,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,r,e,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,e,this._y0,e,r);break}}this._x0=e,this._y0=r}}function sV(t){return new I2(t,!0)}function iV(t){return new I2(t,!1)}const z0={draw(t,e){const r=Gn(e/df);t.moveTo(r,0),t.arc(0,0,r,0,gg)}},oV={draw(t,e){const r=Gn(e/5)/2;t.moveTo(-3*r,-r),t.lineTo(-r,-r),t.lineTo(-r,-3*r),t.lineTo(r,-3*r),t.lineTo(r,-r),t.lineTo(3*r,-r),t.lineTo(3*r,r),t.lineTo(r,r),t.lineTo(r,3*r),t.lineTo(-r,3*r),t.lineTo(-r,r),t.lineTo(-3*r,r),t.closePath()}},L2=Gn(1/3),lV=L2*2,cV={draw(t,e){const r=Gn(e/lV),n=r*L2;t.moveTo(0,-r),t.lineTo(n,0),t.lineTo(0,r),t.lineTo(-n,0),t.closePath()}},dV={draw(t,e){const r=Gn(e),n=-r/2;t.rect(n,n,r,r)}},uV=.8908130915292852,F2=cf(df/10)/cf(7*df/10),hV=cf(gg/10)*F2,fV=-D2(gg/10)*F2,mV={draw(t,e){const r=Gn(e*uV),n=hV*r,a=fV*r;t.moveTo(0,-r),t.lineTo(n,a);for(let s=1;s<5;++s){const o=gg*s/5,l=D2(o),c=cf(o);t.lineTo(c*r,-l*r),t.lineTo(l*n-c*a,c*n+l*a)}t.closePath()}},Lp=Gn(3),gV={draw(t,e){const r=-Gn(e/(Lp*3));t.moveTo(0,r*2),t.lineTo(-Lp*r,-r),t.lineTo(Lp*r,-r),t.closePath()}},mn=-.5,gn=Gn(3)/2,My=1/Gn(12),pV=(My/2+1)*3,vV={draw(t,e){const r=Gn(e/pV),n=r/2,a=r*My,s=n,o=r*My+r,l=-s,c=o;t.moveTo(n,a),t.lineTo(s,o),t.lineTo(l,c),t.lineTo(mn*n-gn*a,gn*n+mn*a),t.lineTo(mn*s-gn*o,gn*s+mn*o),t.lineTo(mn*l-gn*c,gn*l+mn*c),t.lineTo(mn*n+gn*a,mn*a-gn*n),t.lineTo(mn*s+gn*o,mn*o-gn*s),t.lineTo(mn*l+gn*c,mn*c-gn*l),t.closePath()}};function yV(t,e){let r=null,n=q0(a);t=typeof t=="function"?t:At(t||z0),e=typeof e=="function"?e:At(e===void 0?64:+e);function a(){let s;if(r||(r=s=n()),t.apply(this,arguments).draw(r,+e.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(t=typeof s=="function"?s:At(s),a):t},a.size=function(s){return arguments.length?(e=typeof s=="function"?s:At(+s),a):e},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function uf(){}function hf(t,e,r){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+r)/6)}function B2(t){this._context=t}B2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function bV(t){return new B2(t)}function q2(t){this._context=t}q2.prototype={areaStart:uf,areaEnd:uf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function xV(t){return new q2(t)}function U2(t){this._context=t}U2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:hf(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function wV(t){return new U2(t)}function z2(t){this._context=t}z2.prototype={areaStart:uf,areaEnd:uf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function _V(t){return new z2(t)}function a1(t){return t<0?-1:1}function s1(t,e,r){var n=t._x1-t._x0,a=e-t._x1,s=(t._y1-t._y0)/(n||a<0&&-0),o=(r-t._y1)/(a||n<0&&-0),l=(s*a+o*n)/(n+a);return(a1(s)+a1(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function i1(t,e){var r=t._x1-t._x0;return r?(3*(t._y1-t._y0)/r-e)/2:e}function Fp(t,e,r){var n=t._x0,a=t._y0,s=t._x1,o=t._y1,l=(s-n)/3;t._context.bezierCurveTo(n+l,a+l*e,s-l,o-l*r,s,o)}function ff(t){this._context=t}ff.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fp(this,this._t0,i1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var r=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Fp(this,i1(this,r=s1(this,t,e)),r);break;default:Fp(this,this._t0,r=s1(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=r}}};function H2(t){this._context=new W2(t)}(H2.prototype=Object.create(ff.prototype)).point=function(t,e){ff.prototype.point.call(this,e,t)};function W2(t){this._context=t}W2.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,r,n,a,s){this._context.bezierCurveTo(e,t,n,r,s,a)}};function jV(t){return new ff(t)}function SV(t){return new H2(t)}function K2(t){this._context=t}K2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,r=t.length;if(r)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),r===2)this._context.lineTo(t[1],e[1]);else for(var n=o1(t),a=o1(e),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],t[o],e[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function o1(t){var e,r=t.length-1,n,a=new Array(r),s=new Array(r),o=new Array(r);for(a[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)a[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(a[r-1]=2,s[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=a[e]/s[e-1],s[e]-=n,o[e]-=n*o[e-1];for(a[r-1]=o[r-1]/s[r-1],e=r-2;e>=0;--e)a[e]=(o[e]-a[e+1])/s[e];for(s[r-1]=(t[r]+a[r-1])/2,e=0;e<r-1;++e)s[e]=2*t[e+1]-a[e+1];return[a,s]}function kV(t){return new K2(t)}function vg(t,e){this._context=t,this._t=e}vg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var r=this._x*(1-this._t)+t*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,e)}break}}this._x=t,this._y=e}};function NV(t){return new vg(t,.5)}function EV(t){return new vg(t,0)}function CV(t){return new vg(t,1)}function Dl(t,e){if((o=t.length)>1)for(var r=1,n,a,s=t[e[0]],o,l=s.length;r<o;++r)for(a=s,s=t[e[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Oy(t){for(var e=t.length,r=new Array(e);--e>=0;)r[e]=e;return r}function AV(t,e){return t[e]}function TV(t){const e=[];return e.key=t,e}function DV(){var t=At([]),e=Oy,r=Dl,n=AV;function a(s){var o=Array.from(t.apply(this,arguments),TV),l,c=o.length,d=-1,u;for(const h of s)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,s)]).data=h;for(l=0,u=U0(e(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(s){return arguments.length?(t=typeof s=="function"?s:At(Array.from(s)),a):t},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:At(+s),a):n},a.order=function(s){return arguments.length?(e=s==null?Oy:typeof s=="function"?s:At(Array.from(s)),a):e},a.offset=function(s){return arguments.length?(r=s??Dl,a):r},a}function PV(t,e){if((n=t.length)>0){for(var r,n,a=0,s=t[0].length,o;a<s;++a){for(o=r=0;r<n;++r)o+=t[r][a][1]||0;if(o)for(r=0;r<n;++r)t[r][a][1]/=o}Dl(t,e)}}function MV(t,e){if((a=t.length)>0){for(var r=0,n=t[e[0]],a,s=n.length;r<s;++r){for(var o=0,l=0;o<a;++o)l+=t[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Dl(t,e)}}function OV(t,e){if(!(!((o=t.length)>0)||!((s=(a=t[e[0]]).length)>0))){for(var r=0,n=1,a,s,o;n<s;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=t[e[l]],h=u[n][1]||0,f=u[n-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var p=t[e[v]],g=p[n][1]||0,y=p[n-1][1]||0;m+=g-y}c+=h,d+=m*h}a[n-1][1]+=a[n-1][0]=r,c&&(r-=d/c)}a[n-1][1]+=a[n-1][0]=r,Dl(t,e)}}function kd(t){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kd(t)}var RV=["type","size","sizeType"];function Ry(){return Ry=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ry.apply(this,arguments)}function l1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function c1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?l1(Object(r),!0).forEach(function(n){$V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $V(t,e,r){return e=IV(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IV(t){var e=LV(t,"string");return kd(e)=="symbol"?e:e+""}function LV(t,e){if(kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function FV(t,e){if(t==null)return{};var r=BV(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BV(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var G2={symbolCircle:z0,symbolCross:oV,symbolDiamond:cV,symbolSquare:dV,symbolStar:mV,symbolTriangle:gV,symbolWye:vV},qV=Math.PI/180,UV=function(e){var r="symbol".concat(mg(e));return G2[r]||z0},zV=function(e,r,n){if(r==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*qV;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},HV=function(e,r){G2["symbol".concat(mg(e))]=r},H0=function(e){var r=e.type,n=r===void 0?"circle":r,a=e.size,s=a===void 0?64:a,o=e.sizeType,l=o===void 0?"area":o,c=FV(e,RV),d=c1(c1({},c),{},{type:n,size:s,sizeType:l}),u=function(){var g=UV(n),y=yV().type(g).size(zV(s,l,n));return y()},h=d.className,f=d.cx,m=d.cy,v=Be(d,!0);return f===+f&&m===+m&&s===+s?$.createElement("path",Ry({},v,{className:Ge("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:u()})):null};H0.registerSymbol=HV;function Pl(t){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pl(t)}function $y(){return $y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$y.apply(this,arguments)}function d1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function WV(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?d1(Object(r),!0).forEach(function(n){Nd(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function KV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function GV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Q2(n.key),n)}}function VV(t,e,r){return e&&GV(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function QV(t,e,r){return e=mf(e),JV(t,V2()?Reflect.construct(e,r||[],mf(t).constructor):e.apply(t,r))}function JV(t,e){if(e&&(Pl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YV(t)}function YV(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V2(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V2=function(){return!!t})()}function mf(t){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mf(t)}function XV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Iy(t,e)}function Iy(t,e){return Iy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Iy(t,e)}function Nd(t,e,r){return e=Q2(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q2(t){var e=ZV(t,"string");return Pl(e)=="symbol"?e:e+""}function ZV(t,e){if(Pl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pn=32,W0=function(t){function e(){return KV(this,e),QV(this,e,arguments)}return XV(e,t),VV(e,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,s=pn/2,o=pn/6,l=pn/3,c=n.inactive?a:n.color;if(n.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:pn,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(pn,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return $.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(pn/8,"h").concat(pn,"v").concat(pn*3/4,"h").concat(-pn,"z"),className:"recharts-legend-icon"});if($.isValidElement(n.legendIcon)){var d=WV({},n);return delete d.legendIcon,$.cloneElement(n.legendIcon,d)}return $.createElement(H0,{fill:c,cx:s,cy:s,size:pn,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,s=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:pn,height:pn},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,v){var p=m.formatter||c,g=Ge(Nd(Nd({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var y=Ue(m.value)?null:m.value;Bn(!Ue(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?d:m.color;return $.createElement("li",$y({className:g,style:h,key:"legend-item-".concat(v)},Wi(n.props,m,v)),$.createElement(Ey,{width:o,height:o,viewBox:u,style:f},n.renderIcon(m)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},p?p(y,m,v):y))})}},{key:"render",value:function(){var n=this.props,a=n.payload,s=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(x.PureComponent);Nd(W0,"displayName","Legend");Nd(W0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var eQ=tg;function tQ(){this.__data__=new eQ,this.size=0}var rQ=tQ;function nQ(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var aQ=nQ;function sQ(t){return this.__data__.get(t)}var iQ=sQ;function oQ(t){return this.__data__.has(t)}var lQ=oQ,cQ=tg,dQ=P0,uQ=M0,hQ=200;function fQ(t,e){var r=this.__data__;if(r instanceof cQ){var n=r.__data__;if(!dQ||n.length<hQ-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new uQ(n)}return r.set(t,e),this.size=r.size,this}var mQ=fQ,gQ=tg,pQ=rQ,vQ=aQ,yQ=iQ,bQ=lQ,xQ=mQ;function wc(t){var e=this.__data__=new gQ(t);this.size=e.size}wc.prototype.clear=pQ;wc.prototype.delete=vQ;wc.prototype.get=yQ;wc.prototype.has=bQ;wc.prototype.set=xQ;var J2=wc,wQ="__lodash_hash_undefined__";function _Q(t){return this.__data__.set(t,wQ),this}var jQ=_Q;function SQ(t){return this.__data__.has(t)}var kQ=SQ,NQ=M0,EQ=jQ,CQ=kQ;function gf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new NQ;++e<r;)this.add(t[e])}gf.prototype.add=gf.prototype.push=EQ;gf.prototype.has=CQ;var Y2=gf;function AQ(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var X2=AQ;function TQ(t,e){return t.has(e)}var Z2=TQ,DQ=Y2,PQ=X2,MQ=Z2,OQ=1,RQ=2;function $Q(t,e,r,n,a,s){var o=r&OQ,l=t.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var d=s.get(t),u=s.get(e);if(d&&u)return d==e&&u==t;var h=-1,f=!0,m=r&RQ?new DQ:void 0;for(s.set(t,e),s.set(e,t);++h<l;){var v=t[h],p=e[h];if(n)var g=o?n(p,v,h,e,t,s):n(v,p,h,t,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(m){if(!PQ(e,function(y,b){if(!MQ(m,b)&&(v===y||a(v,y,r,n,s)))return m.push(b)})){f=!1;break}}else if(!(v===p||a(v,p,r,n,s))){f=!1;break}}return s.delete(t),s.delete(e),f}var eP=$Q,IQ=ha,LQ=IQ.Uint8Array,FQ=LQ;function BQ(t){var e=-1,r=Array(t.size);return t.forEach(function(n,a){r[++e]=[a,n]}),r}var qQ=BQ;function UQ(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var K0=UQ,u1=Tu,h1=FQ,zQ=D0,HQ=eP,WQ=qQ,KQ=K0,GQ=1,VQ=2,QQ="[object Boolean]",JQ="[object Date]",YQ="[object Error]",XQ="[object Map]",ZQ="[object Number]",eJ="[object RegExp]",tJ="[object Set]",rJ="[object String]",nJ="[object Symbol]",aJ="[object ArrayBuffer]",sJ="[object DataView]",f1=u1?u1.prototype:void 0,Bp=f1?f1.valueOf:void 0;function iJ(t,e,r,n,a,s,o){switch(r){case sJ:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case aJ:return!(t.byteLength!=e.byteLength||!s(new h1(t),new h1(e)));case QQ:case JQ:case ZQ:return zQ(+t,+e);case YQ:return t.name==e.name&&t.message==e.message;case eJ:case rJ:return t==e+"";case XQ:var l=WQ;case tJ:var c=n&GQ;if(l||(l=KQ),t.size!=e.size&&!c)return!1;var d=o.get(t);if(d)return d==e;n|=VQ,o.set(t,e);var u=HQ(l(t),l(e),n,a,s,o);return o.delete(t),u;case nJ:if(Bp)return Bp.call(t)==Bp.call(e)}return!1}var oJ=iJ;function lJ(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t}var tP=lJ,cJ=tP,dJ=Xr;function uJ(t,e,r){var n=e(t);return dJ(t)?n:cJ(n,r(t))}var hJ=uJ;function fJ(t,e){for(var r=-1,n=t==null?0:t.length,a=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[a++]=o)}return s}var mJ=fJ;function gJ(){return[]}var pJ=gJ,vJ=mJ,yJ=pJ,bJ=Object.prototype,xJ=bJ.propertyIsEnumerable,m1=Object.getOwnPropertySymbols,wJ=m1?function(t){return t==null?[]:(t=Object(t),vJ(m1(t),function(e){return xJ.call(t,e)}))}:yJ,_J=wJ;function jJ(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var SJ=jJ,kJ=za,NJ=Ha,EJ="[object Arguments]";function CJ(t){return NJ(t)&&kJ(t)==EJ}var AJ=CJ,g1=AJ,TJ=Ha,rP=Object.prototype,DJ=rP.hasOwnProperty,PJ=rP.propertyIsEnumerable,MJ=g1(function(){return arguments}())?g1:function(t){return TJ(t)&&DJ.call(t,"callee")&&!PJ.call(t,"callee")},G0=MJ,pf={exports:{}};function OJ(){return!1}var RJ=OJ;pf.exports;(function(t,e){var r=ha,n=RJ,a=e&&!e.nodeType&&e,s=a&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;t.exports=d})(pf,pf.exports);var nP=pf.exports,$J=9007199254740991,IJ=/^(?:0|[1-9]\d*)$/;function LJ(t,e){var r=typeof t;return e=e??$J,!!e&&(r=="number"||r!="symbol"&&IJ.test(t))&&t>-1&&t%1==0&&t<e}var V0=LJ,FJ=9007199254740991;function BJ(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=FJ}var Q0=BJ,qJ=za,UJ=Q0,zJ=Ha,HJ="[object Arguments]",WJ="[object Array]",KJ="[object Boolean]",GJ="[object Date]",VJ="[object Error]",QJ="[object Function]",JJ="[object Map]",YJ="[object Number]",XJ="[object Object]",ZJ="[object RegExp]",eY="[object Set]",tY="[object String]",rY="[object WeakMap]",nY="[object ArrayBuffer]",aY="[object DataView]",sY="[object Float32Array]",iY="[object Float64Array]",oY="[object Int8Array]",lY="[object Int16Array]",cY="[object Int32Array]",dY="[object Uint8Array]",uY="[object Uint8ClampedArray]",hY="[object Uint16Array]",fY="[object Uint32Array]",It={};It[sY]=It[iY]=It[oY]=It[lY]=It[cY]=It[dY]=It[uY]=It[hY]=It[fY]=!0;It[HJ]=It[WJ]=It[nY]=It[KJ]=It[aY]=It[GJ]=It[VJ]=It[QJ]=It[JJ]=It[YJ]=It[XJ]=It[ZJ]=It[eY]=It[tY]=It[rY]=!1;function mY(t){return zJ(t)&&UJ(t.length)&&!!It[qJ(t)]}var gY=mY;function pY(t){return function(e){return t(e)}}var aP=pY,vf={exports:{}};vf.exports;(function(t,e){var r=h2,n=e&&!e.nodeType&&e,a=n&&!0&&t&&!t.nodeType&&t,s=a&&a.exports===n,o=s&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l})(vf,vf.exports);var vY=vf.exports,yY=gY,bY=aP,p1=vY,v1=p1&&p1.isTypedArray,xY=v1?bY(v1):yY,sP=xY,wY=SJ,_Y=G0,jY=Xr,SY=nP,kY=V0,NY=sP,EY=Object.prototype,CY=EY.hasOwnProperty;function AY(t,e){var r=jY(t),n=!r&&_Y(t),a=!r&&!n&&SY(t),s=!r&&!n&&!a&&NY(t),o=r||n||a||s,l=o?wY(t.length,String):[],c=l.length;for(var d in t)(e||CY.call(t,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||kY(d,c)))&&l.push(d);return l}var TY=AY,DY=Object.prototype;function PY(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||DY;return t===r}var MY=PY;function OY(t,e){return function(r){return t(e(r))}}var iP=OY,RY=iP,$Y=RY(Object.keys,Object),IY=$Y,LY=MY,FY=IY,BY=Object.prototype,qY=BY.hasOwnProperty;function UY(t){if(!LY(t))return FY(t);var e=[];for(var r in Object(t))qY.call(t,r)&&r!="constructor"&&e.push(r);return e}var zY=UY,HY=T0,WY=Q0;function KY(t){return t!=null&&WY(t.length)&&!HY(t)}var Mu=KY,GY=TY,VY=zY,QY=Mu;function JY(t){return QY(t)?GY(t):VY(t)}var yg=JY,YY=hJ,XY=_J,ZY=yg;function eX(t){return YY(t,ZY,XY)}var tX=eX,y1=tX,rX=1,nX=Object.prototype,aX=nX.hasOwnProperty;function sX(t,e,r,n,a,s){var o=r&rX,l=y1(t),c=l.length,d=y1(e),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in e:aX.call(e,f)))return!1}var m=s.get(t),v=s.get(e);if(m&&v)return m==e&&v==t;var p=!0;s.set(t,e),s.set(e,t);for(var g=o;++h<c;){f=l[h];var y=t[f],b=e[f];if(n)var w=o?n(b,y,f,e,t,s):n(y,b,f,t,e,s);if(!(w===void 0?y===b||a(y,b,r,n,s):w)){p=!1;break}g||(g=f=="constructor")}if(p&&!g){var j=t.constructor,_=e.constructor;j!=_&&"constructor"in t&&"constructor"in e&&!(typeof j=="function"&&j instanceof j&&typeof _=="function"&&_ instanceof _)&&(p=!1)}return s.delete(t),s.delete(e),p}var iX=sX,oX=lo,lX=ha,cX=oX(lX,"DataView"),dX=cX,uX=lo,hX=ha,fX=uX(hX,"Promise"),mX=fX,gX=lo,pX=ha,vX=gX(pX,"Set"),oP=vX,yX=lo,bX=ha,xX=yX(bX,"WeakMap"),wX=xX,Ly=dX,Fy=P0,By=mX,qy=oP,Uy=wX,lP=za,_c=m2,b1="[object Map]",_X="[object Object]",x1="[object Promise]",w1="[object Set]",_1="[object WeakMap]",j1="[object DataView]",jX=_c(Ly),SX=_c(Fy),kX=_c(By),NX=_c(qy),EX=_c(Uy),ai=lP;(Ly&&ai(new Ly(new ArrayBuffer(1)))!=j1||Fy&&ai(new Fy)!=b1||By&&ai(By.resolve())!=x1||qy&&ai(new qy)!=w1||Uy&&ai(new Uy)!=_1)&&(ai=function(t){var e=lP(t),r=e==_X?t.constructor:void 0,n=r?_c(r):"";if(n)switch(n){case jX:return j1;case SX:return b1;case kX:return x1;case NX:return w1;case EX:return _1}return e});var CX=ai,qp=J2,AX=eP,TX=oJ,DX=iX,S1=CX,k1=Xr,N1=nP,PX=sP,MX=1,E1="[object Arguments]",C1="[object Array]",ih="[object Object]",OX=Object.prototype,A1=OX.hasOwnProperty;function RX(t,e,r,n,a,s){var o=k1(t),l=k1(e),c=o?C1:S1(t),d=l?C1:S1(e);c=c==E1?ih:c,d=d==E1?ih:d;var u=c==ih,h=d==ih,f=c==d;if(f&&N1(t)){if(!N1(e))return!1;o=!0,u=!1}if(f&&!u)return s||(s=new qp),o||PX(t)?AX(t,e,r,n,a,s):TX(t,e,c,r,n,a,s);if(!(r&MX)){var m=u&&A1.call(t,"__wrapped__"),v=h&&A1.call(e,"__wrapped__");if(m||v){var p=m?t.value():t,g=v?e.value():e;return s||(s=new qp),a(p,g,r,n,s)}}return f?(s||(s=new qp),DX(t,e,r,n,a,s)):!1}var $X=RX,IX=$X,T1=Ha;function cP(t,e,r,n,a){return t===e?!0:t==null||e==null||!T1(t)&&!T1(e)?t!==t&&e!==e:IX(t,e,r,n,cP,a)}var J0=cP,LX=J2,FX=J0,BX=1,qX=2;function UX(t,e,r,n){var a=r.length,s=a,o=!n;if(t==null)return!s;for(t=Object(t);a--;){var l=r[a];if(o&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){l=r[a];var c=l[0],d=t[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in t))return!1}else{var h=new LX;if(n)var f=n(d,u,c,t,e,h);if(!(f===void 0?FX(u,d,BX|qX,n,h):f))return!1}}return!0}var zX=UX,HX=Us;function WX(t){return t===t&&!HX(t)}var dP=WX,KX=dP,GX=yg;function VX(t){for(var e=GX(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,KX(a)]}return e}var QX=VX;function JX(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var uP=JX,YX=zX,XX=QX,ZX=uP;function eZ(t){var e=XX(t);return e.length==1&&e[0][2]?ZX(e[0][0],e[0][1]):function(r){return r===t||YX(r,t,e)}}var tZ=eZ;function rZ(t,e){return t!=null&&e in Object(t)}var nZ=rZ,aZ=b2,sZ=G0,iZ=Xr,oZ=V0,lZ=Q0,cZ=ng;function dZ(t,e,r){e=aZ(e,t);for(var n=-1,a=e.length,s=!1;++n<a;){var o=cZ(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=a?s:(a=t==null?0:t.length,!!a&&lZ(a)&&oZ(o,a)&&(iZ(t)||sZ(t)))}var uZ=dZ,hZ=nZ,fZ=uZ;function mZ(t,e){return t!=null&&fZ(t,e,hZ)}var gZ=mZ,pZ=J0,vZ=x2,yZ=gZ,bZ=A0,xZ=dP,wZ=uP,_Z=ng,jZ=1,SZ=2;function kZ(t,e){return bZ(t)&&xZ(e)?wZ(_Z(t),e):function(r){var n=vZ(r,t);return n===void 0&&n===e?yZ(r,t):pZ(e,n,jZ|SZ)}}var NZ=kZ;function EZ(t){return t}var jc=EZ;function CZ(t){return function(e){return e==null?void 0:e[t]}}var AZ=CZ,TZ=$0;function DZ(t){return function(e){return TZ(e,t)}}var PZ=DZ,MZ=AZ,OZ=PZ,RZ=A0,$Z=ng;function IZ(t){return RZ(t)?MZ($Z(t)):OZ(t)}var LZ=IZ,FZ=tZ,BZ=NZ,qZ=jc,UZ=Xr,zZ=LZ;function HZ(t){return typeof t=="function"?t:t==null?qZ:typeof t=="object"?UZ(t)?BZ(t[0],t[1]):FZ(t):zZ(t)}var fa=HZ;function WZ(t,e,r,n){for(var a=t.length,s=r+(n?1:-1);n?s--:++s<a;)if(e(t[s],s,t))return s;return-1}var hP=WZ;function KZ(t){return t!==t}var GZ=KZ;function VZ(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1}var QZ=VZ,JZ=hP,YZ=GZ,XZ=QZ;function ZZ(t,e,r){return e===e?XZ(t,e,r):JZ(t,YZ,r)}var eee=ZZ,tee=eee;function ree(t,e){var r=t==null?0:t.length;return!!r&&tee(t,e,0)>-1}var nee=ree;function aee(t,e,r){for(var n=-1,a=t==null?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1}var see=aee;function iee(){}var oee=iee,Up=oP,lee=oee,cee=K0,dee=1/0,uee=Up&&1/cee(new Up([,-0]))[1]==dee?function(t){return new Up(t)}:lee,hee=uee,fee=Y2,mee=nee,gee=see,pee=Z2,vee=hee,yee=K0,bee=200;function xee(t,e,r){var n=-1,a=mee,s=t.length,o=!0,l=[],c=l;if(r)o=!1,a=gee;else if(s>=bee){var d=e?null:vee(t);if(d)return yee(d);o=!1,a=pee,c=new fee}else c=e?[]:l;e:for(;++n<s;){var u=t[n],h=e?e(u):u;if(u=r||u!==0?u:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;e&&c.push(h),l.push(u)}else a(c,h,r)||(c!==l&&c.push(h),l.push(u))}return l}var wee=xee,_ee=fa,jee=wee;function See(t,e){return t&&t.length?jee(t,_ee(e)):[]}var kee=See;const D1=jt(kee);function fP(t,e,r){return e===!0?D1(t,r):Ue(e)?D1(t,e):t}function Ml(t){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ml(t)}var Nee=["ref"];function P1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function va(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P1(Object(r),!0).forEach(function(n){bg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Eee(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M1(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gP(n.key),n)}}function Cee(t,e,r){return e&&M1(t.prototype,e),r&&M1(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Aee(t,e,r){return e=yf(e),Tee(t,mP()?Reflect.construct(e,r||[],yf(t).constructor):e.apply(t,r))}function Tee(t,e){if(e&&(Ml(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dee(t)}function Dee(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mP=function(){return!!t})()}function yf(t){return yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yf(t)}function Pee(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zy(t,e)}function zy(t,e){return zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zy(t,e)}function bg(t,e,r){return e=gP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gP(t){var e=Mee(t,"string");return Ml(e)=="symbol"?e:e+""}function Mee(t,e){if(Ml(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Oee(t,e){if(t==null)return{};var r=Ree(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ree(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function $ee(t){return t.value}function Iee(t,e){if($.isValidElement(t))return $.cloneElement(t,e);if(typeof t=="function")return $.createElement(t,e);e.ref;var r=Oee(e,Nee);return $.createElement(W0,r)}var O1=1,tl=function(t){function e(){var r;Eee(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Aee(this,e,[].concat(a)),bg(r,"lastBoundingBox",{width:-1,height:-1}),r}return Pee(e,t),Cee(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>O1||Math.abs(a.height-this.lastBoundingBox.height)>O1)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?va({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,s=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,h,f;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();h={left:((d||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();f={top:((u||0)-v.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return va(va({},h),f)}},{key:"render",value:function(){var n=this,a=this.props,s=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,h=va(va({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return $.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){n.wrapperNode=m}},Iee(s,va(va({},this.props),{},{payload:fP(u,d,$ee)})))}}],[{key:"getWithHeight",value:function(n,a){var s=va(va({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&de(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(x.PureComponent);bg(tl,"displayName","Legend");bg(tl,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var R1=Tu,Lee=G0,Fee=Xr,$1=R1?R1.isConcatSpreadable:void 0;function Bee(t){return Fee(t)||Lee(t)||!!($1&&t&&t[$1])}var qee=Bee,Uee=tP,zee=qee;function pP(t,e,r,n,a){var s=-1,o=t.length;for(r||(r=zee),a||(a=[]);++s<o;){var l=t[s];e>0&&r(l)?e>1?pP(l,e-1,r,n,a):Uee(a,l):n||(a[a.length]=l)}return a}var vP=pP;function Hee(t){return function(e,r,n){for(var a=-1,s=Object(e),o=n(e),l=o.length;l--;){var c=o[t?l:++a];if(r(s[c],c,s)===!1)break}return e}}var Wee=Hee,Kee=Wee,Gee=Kee(),Vee=Gee,Qee=Vee,Jee=yg;function Yee(t,e){return t&&Qee(t,e,Jee)}var yP=Yee,Xee=Mu;function Zee(t,e){return function(r,n){if(r==null)return r;if(!Xee(r))return t(r,n);for(var a=r.length,s=e?a:-1,o=Object(r);(e?s--:++s<a)&&n(o[s],s,o)!==!1;);return r}}var ete=Zee,tte=yP,rte=ete,nte=rte(tte),Y0=nte,ate=Y0,ste=Mu;function ite(t,e){var r=-1,n=ste(t)?Array(t.length):[];return ate(t,function(a,s,o){n[++r]=e(a,s,o)}),n}var bP=ite;function ote(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var lte=ote,I1=pc;function cte(t,e){if(t!==e){var r=t!==void 0,n=t===null,a=t===t,s=I1(t),o=e!==void 0,l=e===null,c=e===e,d=I1(e);if(!l&&!d&&!s&&t>e||s&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!a)return 1;if(!n&&!s&&!d&&t<e||d&&r&&a&&!n&&!s||l&&r&&a||!o&&a||!c)return-1}return 0}var dte=cte,ute=dte;function hte(t,e,r){for(var n=-1,a=t.criteria,s=e.criteria,o=a.length,l=r.length;++n<o;){var c=ute(a[n],s[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return t.index-e.index}var fte=hte,zp=R0,mte=$0,gte=fa,pte=bP,vte=lte,yte=aP,bte=fte,xte=jc,wte=Xr;function _te(t,e,r){e.length?e=zp(e,function(s){return wte(s)?function(o){return mte(o,s.length===1?s[0]:s)}:s}):e=[xte];var n=-1;e=zp(e,yte(gte));var a=pte(t,function(s,o,l){var c=zp(e,function(d){return d(s)});return{criteria:c,index:++n,value:s}});return vte(a,function(s,o){return bte(s,o,r)})}var jte=_te;function Ste(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var kte=Ste,Nte=kte,L1=Math.max;function Ete(t,e,r){return e=L1(e===void 0?t.length-1:e,0),function(){for(var n=arguments,a=-1,s=L1(n.length-e,0),o=Array(s);++a<s;)o[a]=n[e+a];a=-1;for(var l=Array(e+1);++a<e;)l[a]=n[a];return l[e]=r(o),Nte(t,this,l)}}var Cte=Ete;function Ate(t){return function(){return t}}var Tte=Ate,Dte=lo,Pte=function(){try{var t=Dte(Object,"defineProperty");return t({},"",{}),t}catch{}}(),xP=Pte,Mte=Tte,F1=xP,Ote=jc,Rte=F1?function(t,e){return F1(t,"toString",{configurable:!0,enumerable:!1,value:Mte(e),writable:!0})}:Ote,$te=Rte,Ite=800,Lte=16,Fte=Date.now;function Bte(t){var e=0,r=0;return function(){var n=Fte(),a=Lte-(n-r);if(r=n,a>0){if(++e>=Ite)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var qte=Bte,Ute=$te,zte=qte,Hte=zte(Ute),Wte=Hte,Kte=jc,Gte=Cte,Vte=Wte;function Qte(t,e){return Vte(Gte(t,e,Kte),t+"")}var Jte=Qte,Yte=D0,Xte=Mu,Zte=V0,ere=Us;function tre(t,e,r){if(!ere(r))return!1;var n=typeof e;return(n=="number"?Xte(r)&&Zte(e,r.length):n=="string"&&e in r)?Yte(r[e],t):!1}var xg=tre,rre=vP,nre=jte,are=Jte,B1=xg,sre=are(function(t,e){if(t==null)return[];var r=e.length;return r>1&&B1(t,e[0],e[1])?e=[]:r>2&&B1(e[0],e[1],e[2])&&(e=[e[0]]),nre(t,rre(e,1),[])}),ire=sre;const X0=jt(ire);function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function Hy(){return Hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hy.apply(this,arguments)}function ore(t,e){return ure(t)||dre(t,e)||cre(t,e)||lre()}function lre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cre(t,e){if(t){if(typeof t=="string")return q1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q1(t,e)}}function q1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dre(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function ure(t){if(Array.isArray(t))return t}function U1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Hp(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U1(Object(r),!0).forEach(function(n){hre(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function hre(t,e,r){return e=fre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fre(t){var e=mre(t,"string");return Ed(e)=="symbol"?e:e+""}function mre(t,e){if(Ed(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ed(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gre(t){return Array.isArray(t)&&nr(t[0])&&nr(t[1])?t.join(" ~ "):t}var pre=function(e){var r=e.separator,n=r===void 0?" : ":r,a=e.contentStyle,s=a===void 0?{}:a,o=e.itemStyle,l=o===void 0?{}:o,c=e.labelStyle,d=c===void 0?{}:c,u=e.payload,h=e.formatter,f=e.itemSorter,m=e.wrapperClassName,v=e.labelClassName,p=e.label,g=e.labelFormatter,y=e.accessibilityLayer,b=y===void 0?!1:y,w=function(){if(u&&u.length){var D={padding:0,margin:0},A=(f?X0(u,f):u).map(function(C,R){if(C.type==="none")return null;var L=Hp({display:"block",paddingTop:4,paddingBottom:4,color:C.color||"#000"},l),M=C.formatter||h||gre,I=C.value,B=C.name,H=I,q=B;if(M&&H!=null&&q!=null){var O=M(I,B,C,R,u);if(Array.isArray(O)){var F=ore(O,2);H=F[0],q=F[1]}else H=O}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:L},nr(q)?$.createElement("span",{className:"recharts-tooltip-item-name"},q):null,nr(q)?$.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,$.createElement("span",{className:"recharts-tooltip-item-value"},H),$.createElement("span",{className:"recharts-tooltip-item-unit"},C.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:D},A)}return null},j=Hp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),_=Hp({margin:0},d),S=!Ze(p),N=S?p:"",k=Ge("recharts-default-tooltip",m),E=Ge("recharts-tooltip-label",v);S&&g&&u!==void 0&&u!==null&&(N=g(p,u));var P=b?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",Hy({className:k,style:j},P),$.createElement("p",{className:E,style:_},$.isValidElement(N)?N:"".concat(N)),w())};function Cd(t){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cd(t)}function oh(t,e,r){return e=vre(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function vre(t){var e=yre(t,"string");return Cd(e)=="symbol"?e:e+""}function yre(t,e){if(Cd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Cd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bc="recharts-tooltip-wrapper",bre={visibility:"hidden"};function xre(t){var e=t.coordinate,r=t.translateX,n=t.translateY;return Ge(Bc,oh(oh(oh(oh({},"".concat(Bc,"-right"),de(r)&&e&&de(e.x)&&r>=e.x),"".concat(Bc,"-left"),de(r)&&e&&de(e.x)&&r<e.x),"".concat(Bc,"-bottom"),de(n)&&e&&de(e.y)&&n>=e.y),"".concat(Bc,"-top"),de(n)&&e&&de(e.y)&&n<e.y))}function z1(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.key,a=t.offsetTopLeft,s=t.position,o=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,d=t.viewBoxDimension;if(s&&de(s[n]))return s[n];var u=r[n]-l-a,h=r[n]+a;if(e[n])return o[n]?u:h;if(o[n]){var f=u,m=c[n];return f<m?Math.max(h,c[n]):Math.max(u,c[n])}var v=h+l,p=c[n]+d;return v>p?Math.max(u,c[n]):Math.max(h,c[n])}function wre(t){var e=t.translateX,r=t.translateY,n=t.useTranslate3d;return{transform:n?"translate3d(".concat(e,"px, ").concat(r,"px, 0)"):"translate(".concat(e,"px, ").concat(r,"px)")}}function _re(t){var e=t.allowEscapeViewBox,r=t.coordinate,n=t.offsetTopLeft,a=t.position,s=t.reverseDirection,o=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,d,u,h;return o.height>0&&o.width>0&&r?(u=z1({allowEscapeViewBox:e,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=z1({allowEscapeViewBox:e,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=wre({translateX:u,translateY:h,useTranslate3d:l})):d=bre,{cssProperties:d,cssClasses:xre({translateX:u,translateY:h,coordinate:r})}}function Ol(t){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ol(t)}function H1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function W1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H1(Object(r),!0).forEach(function(n){Ky(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sre(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_P(n.key),n)}}function kre(t,e,r){return e&&Sre(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nre(t,e,r){return e=bf(e),Ere(t,wP()?Reflect.construct(e,r||[],bf(t).constructor):e.apply(t,r))}function Ere(t,e){if(e&&(Ol(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cre(t)}function Cre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wP=function(){return!!t})()}function bf(t){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bf(t)}function Are(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wy(t,e)}function Wy(t,e){return Wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Wy(t,e)}function Ky(t,e,r){return e=_P(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _P(t){var e=Tre(t,"string");return Ol(e)=="symbol"?e:e+""}function Tre(t,e){if(Ol(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var K1=1,Dre=function(t){function e(){var r;jre(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=Nre(this,e,[].concat(a)),Ky(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Ky(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return Are(e,t),kre(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>K1||Math.abs(n.height-this.state.lastBoundingBox.height)>K1)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,h=a.hasPayload,f=a.isAnimationActive,m=a.offset,v=a.position,p=a.reverseDirection,g=a.useTranslate3d,y=a.viewBox,b=a.wrapperStyle,w=_re({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:y}),j=w.cssClasses,_=w.cssProperties,S=W1(W1({transition:f&&s?"transform ".concat(l,"ms ").concat(c):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&h?"visible":"hidden",position:"absolute",top:0,left:0},b);return $.createElement("div",{tabIndex:-1,className:j,style:S,ref:function(k){n.wrapperNode=k}},d)}}])}(x.PureComponent),Pre=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ta={isSsr:Pre(),get:function(e){return Ta[e]},set:function(e,r){if(typeof e=="string")Ta[e]=r;else{var n=Object.keys(e);n&&n.length&&n.forEach(function(a){Ta[a]=e[a]})}}};function Rl(t){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rl(t)}function G1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function V1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?G1(Object(r),!0).forEach(function(n){Z0(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):G1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mre(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ore(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SP(n.key),n)}}function Rre(t,e,r){return e&&Ore(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $re(t,e,r){return e=xf(e),Ire(t,jP()?Reflect.construct(e,r||[],xf(t).constructor):e.apply(t,r))}function Ire(t,e){if(e&&(Rl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lre(t)}function Lre(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jP=function(){return!!t})()}function xf(t){return xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xf(t)}function Fre(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gy(t,e)}function Gy(t,e){return Gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gy(t,e)}function Z0(t,e,r){return e=SP(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function SP(t){var e=Bre(t,"string");return Rl(e)=="symbol"?e:e+""}function Bre(t,e){if(Rl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Rl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qre(t){return t.dataKey}function Ure(t,e){return $.isValidElement(t)?$.cloneElement(t,e):typeof t=="function"?$.createElement(t,e):$.createElement(pre,e)}var xn=function(t){function e(){return Mre(this,e),$re(this,e,arguments)}return Fre(e,t),Rre(e,[{key:"render",value:function(){var n=this,a=this.props,s=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,h=a.filterNull,f=a.isAnimationActive,m=a.offset,v=a.payload,p=a.payloadUniqBy,g=a.position,y=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,j=a.wrapperStyle,_=v??[];h&&_.length&&(_=fP(v.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),p,qre));var S=_.length>0;return $.createElement(Dre,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:s,coordinate:u,hasPayload:S,offset:m,position:g,reverseDirection:y,useTranslate3d:b,viewBox:w,wrapperStyle:j},Ure(d,V1(V1({},this.props),{},{payload:_})))}}])}(x.PureComponent);Z0(xn,"displayName","Tooltip");Z0(xn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var zre=ha,Hre=function(){return zre.Date.now()},Wre=Hre,Kre=/\s/;function Gre(t){for(var e=t.length;e--&&Kre.test(t.charAt(e)););return e}var Vre=Gre,Qre=Vre,Jre=/^\s+/;function Yre(t){return t&&t.slice(0,Qre(t)+1).replace(Jre,"")}var Xre=Yre,Zre=Xre,Q1=Us,ene=pc,J1=NaN,tne=/^[-+]0x[0-9a-f]+$/i,rne=/^0b[01]+$/i,nne=/^0o[0-7]+$/i,ane=parseInt;function sne(t){if(typeof t=="number")return t;if(ene(t))return J1;if(Q1(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Q1(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Zre(t);var r=rne.test(t);return r||nne.test(t)?ane(t.slice(2),r?2:8):tne.test(t)?J1:+t}var kP=sne,ine=Us,Wp=Wre,Y1=kP,one="Expected a function",lne=Math.max,cne=Math.min;function dne(t,e,r){var n,a,s,o,l,c,d=0,u=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(one);e=Y1(e)||0,ine(r)&&(u=!!r.leading,h="maxWait"in r,s=h?lne(Y1(r.maxWait)||0,e):s,f="trailing"in r?!!r.trailing:f);function m(S){var N=n,k=a;return n=a=void 0,d=S,o=t.apply(k,N),o}function v(S){return d=S,l=setTimeout(y,e),u?m(S):o}function p(S){var N=S-c,k=S-d,E=e-N;return h?cne(E,s-k):E}function g(S){var N=S-c,k=S-d;return c===void 0||N>=e||N<0||h&&k>=s}function y(){var S=Wp();if(g(S))return b(S);l=setTimeout(y,p(S))}function b(S){return l=void 0,f&&n?m(S):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),d=0,n=c=a=l=void 0}function j(){return l===void 0?o:b(Wp())}function _(){var S=Wp(),N=g(S);if(n=arguments,a=this,c=S,N){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(y,e),m(c)}return l===void 0&&(l=setTimeout(y,e)),o}return _.cancel=w,_.flush=j,_}var une=dne,hne=une,fne=Us,mne="Expected a function";function gne(t,e,r){var n=!0,a=!0;if(typeof t!="function")throw new TypeError(mne);return fne(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),hne(t,e,{leading:n,maxWait:e,trailing:a})}var pne=gne;const NP=jt(pne);function Ad(t){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ad(t)}function X1(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function lh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?X1(Object(r),!0).forEach(function(n){vne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X1(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vne(t,e,r){return e=yne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yne(t){var e=bne(t,"string");return Ad(e)=="symbol"?e:e+""}function bne(t,e){if(Ad(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ad(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xne(t,e){return Sne(t)||jne(t,e)||_ne(t,e)||wne()}function wne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ne(t,e){if(t){if(typeof t=="string")return Z1(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z1(t,e)}}function Z1(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Sne(t){if(Array.isArray(t))return t}var Kp=x.forwardRef(function(t,e){var r=t.aspect,n=t.initialDimension,a=n===void 0?{width:-1,height:-1}:n,s=t.width,o=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,d=t.minWidth,u=d===void 0?0:d,h=t.minHeight,f=t.maxHeight,m=t.children,v=t.debounce,p=v===void 0?0:v,g=t.id,y=t.className,b=t.onResize,w=t.style,j=w===void 0?{}:w,_=x.useRef(null),S=x.useRef();S.current=b,x.useImperativeHandle(e,function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})});var N=x.useState({containerWidth:a.width,containerHeight:a.height}),k=xne(N,2),E=k[0],P=k[1],T=x.useCallback(function(A,C){P(function(R){var L=Math.round(A),M=Math.round(C);return R.containerWidth===L&&R.containerHeight===M?R:{containerWidth:L,containerHeight:M}})},[]);x.useEffect(function(){var A=function(B){var H,q=B[0].contentRect,O=q.width,F=q.height;T(O,F),(H=S.current)===null||H===void 0||H.call(S,O,F)};p>0&&(A=NP(A,p,{trailing:!0,leading:!1}));var C=new ResizeObserver(A),R=_.current.getBoundingClientRect(),L=R.width,M=R.height;return T(L,M),C.observe(_.current),function(){C.disconnect()}},[T,p]);var D=x.useMemo(function(){var A=E.containerWidth,C=E.containerHeight;if(A<0||C<0)return null;Bn(mi(o)||mi(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Bn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=mi(o)?A:o,L=mi(c)?C:c;r&&r>0&&(R?L=R/r:L&&(R=L*r),f&&L>f&&(L=f)),Bn(R>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,L,o,c,u,h,r);var M=!Array.isArray(m)&&Aa(m.type).endsWith("Chart");return $.Children.map(m,function(I){return $.isValidElement(I)?x.cloneElement(I,lh({width:R,height:L},M?{style:lh({height:"100%",width:"100%",maxHeight:L,maxWidth:R},I.props.style)}:{})):I})},[r,m,c,f,h,u,E,o]);return $.createElement("div",{id:g?"".concat(g):void 0,className:Ge("recharts-responsive-container",y),style:lh(lh({},j),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:_},D)}),Td=function(e){return null};Td.displayName="Cell";function Dd(t){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dd(t)}function eS(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eS(Object(r),!0).forEach(function(n){kne(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function kne(t,e,r){return e=Nne(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nne(t){var e=Ene(t,"string");return Dd(e)=="symbol"?e:e+""}function Ene(t,e){if(Dd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Dd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ko={widthCache:{},cacheCount:0},Cne=2e3,Ane={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tS="recharts_measurement_span";function Tne(t){var e=Vy({},t);return Object.keys(e).forEach(function(r){e[r]||delete e[r]}),e}var ud=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Ta.isSsr)return{width:0,height:0};var n=Tne(r),a=JSON.stringify({text:e,copyStyle:n});if(ko.widthCache[a])return ko.widthCache[a];try{var s=document.getElementById(tS);s||(s=document.createElement("span"),s.setAttribute("id",tS),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=Vy(Vy({},Ane),n);Object.assign(s.style,o),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return ko.widthCache[a]=c,++ko.cacheCount>Cne&&(ko.cacheCount=0,ko.widthCache={}),c}catch{return{width:0,height:0}}},Dne=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function Pd(t){"@babel/helpers - typeof";return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pd(t)}function wf(t,e){return Rne(t)||One(t,e)||Mne(t,e)||Pne()}function Pne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mne(t,e){if(t){if(typeof t=="string")return rS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rS(t,e)}}function rS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function One(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Rne(t){if(Array.isArray(t))return t}function $ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lne(n.key),n)}}function Ine(t,e,r){return e&&nS(t.prototype,e),r&&nS(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Lne(t){var e=Fne(t,"string");return Pd(e)=="symbol"?e:e+""}function Fne(t,e){if(Pd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(Pd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var aS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Bne=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qne=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,EP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Une=Object.keys(EP),Bo="NaN";function zne(t,e){return t*EP[e]}var ch=function(){function t(e,r){$ne(this,t),this.num=e,this.unit=r,this.num=e,this.unit=r,Number.isNaN(e)&&(this.unit=""),r!==""&&!Bne.test(r)&&(this.num=NaN,this.unit=""),Une.includes(r)&&(this.num=zne(e,r),this.unit="px")}return Ine(t,[{key:"add",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new t(NaN,""):new t(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new t(NaN,""):new t(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=qne.exec(r))!==null&&n!==void 0?n:[],s=wf(a,3),o=s[1],l=s[2];return new t(parseFloat(o),l??"")}}])}();function CP(t){if(t.includes(Bo))return Bo;for(var e=t;e.includes("*")||e.includes("/");){var r,n=(r=aS.exec(e))!==null&&r!==void 0?r:[],a=wf(n,4),s=a[1],o=a[2],l=a[3],c=ch.parse(s??""),d=ch.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Bo;e=e.replace(aS,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,f=(h=sS.exec(e))!==null&&h!==void 0?h:[],m=wf(f,4),v=m[1],p=m[2],g=m[3],y=ch.parse(v??""),b=ch.parse(g??""),w=p==="+"?y.add(b):y.subtract(b);if(w.isNaN())return Bo;e=e.replace(sS,w.toString())}return e}var iS=/\(([^()]*)\)/;function Hne(t){for(var e=t;e.includes("(");){var r=iS.exec(e),n=wf(r,2),a=n[1];e=e.replace(iS,CP(a))}return e}function Wne(t){var e=t.replace(/\s+/g,"");return e=Hne(e),e=CP(e),e}function Kne(t){try{return Wne(t)}catch{return Bo}}function Gp(t){var e=Kne(t.slice(5,-1));return e===Bo?"":e}var Gne=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Vne=["dx","dy","angle","className","breakAll"];function Qy(){return Qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Qy.apply(this,arguments)}function oS(t,e){if(t==null)return{};var r=Qne(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Qne(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function lS(t,e){return Zne(t)||Xne(t,e)||Yne(t,e)||Jne()}function Jne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yne(t,e){if(t){if(typeof t=="string")return cS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cS(t,e)}}function cS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xne(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Zne(t){if(Array.isArray(t))return t}var AP=/[ \f\n\r\t\v\u2028\u2029]+/,TP=function(e){var r=e.children,n=e.breakAll,a=e.style;try{var s=[];Ze(r)||(n?s=r.toString().split(""):s=r.toString().split(AP));var o=s.map(function(c){return{word:c,width:ud(c,a).width}}),l=n?0:ud("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},eae=function(e,r,n,a,s){var o=e.maxLines,l=e.children,c=e.style,d=e.breakAll,u=de(o),h=l,f=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(L,M){var I=M.word,B=M.width,H=L[L.length-1];if(H&&(a==null||s||H.width+B+n<Number(a)))H.words.push(I),H.width+=B+n;else{var q={words:[I],width:B};L.push(q)}return L},[])},m=f(r),v=function(R){return R.reduce(function(L,M){return L.width>M.width?L:M})};if(!u)return m;for(var p="",g=function(R){var L=h.slice(0,R),M=TP({breakAll:d,style:c,children:L+p}).wordsWithComputedWidth,I=f(M),B=I.length>o||v(I).width>Number(a);return[B,I]},y=0,b=h.length-1,w=0,j;y<=b&&w<=h.length-1;){var _=Math.floor((y+b)/2),S=_-1,N=g(S),k=lS(N,2),E=k[0],P=k[1],T=g(_),D=lS(T,1),A=D[0];if(!E&&!A&&(y=_+1),E&&A&&(b=_-1),!E&&A){j=P;break}w++}return j||m},dS=function(e){var r=Ze(e)?[]:e.toString().split(AP);return[{words:r}]},tae=function(e){var r=e.width,n=e.scaleToFit,a=e.children,s=e.style,o=e.breakAll,l=e.maxLines;if((r||n)&&!Ta.isSsr){var c,d,u=TP({breakAll:o,children:a,style:s});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return dS(a);return eae({breakAll:o,children:a,maxLines:l,style:s},c,d,r,n)}return dS(a)},uS="#808080",Ki=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.lineHeight,l=o===void 0?"1em":o,c=e.capHeight,d=c===void 0?"0.71em":c,u=e.scaleToFit,h=u===void 0?!1:u,f=e.textAnchor,m=f===void 0?"start":f,v=e.verticalAnchor,p=v===void 0?"end":v,g=e.fill,y=g===void 0?uS:g,b=oS(e,Gne),w=x.useMemo(function(){return tae({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:h,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,h,b.style,b.width]),j=b.dx,_=b.dy,S=b.angle,N=b.className,k=b.breakAll,E=oS(b,Vne);if(!nr(n)||!nr(s))return null;var P=n+(de(j)?j:0),T=s+(de(_)?_:0),D;switch(p){case"start":D=Gp("calc(".concat(d,")"));break;case"middle":D=Gp("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:D=Gp("calc(".concat(w.length-1," * -").concat(l,")"));break}var A=[];if(h){var C=w[0].width,R=b.width;A.push("scale(".concat((de(R)?R/C:1)/C,")"))}return S&&A.push("rotate(".concat(S,", ").concat(P,", ").concat(T,")")),A.length&&(E.transform=A.join(" ")),$.createElement("text",Qy({},Be(E,!0),{x:P,y:T,className:Ge("recharts-text",N),textAnchor:m,fill:y.includes("url")?uS:y}),w.map(function(L,M){var I=L.words.join(k?"":" ");return $.createElement("tspan",{x:P,dy:M===0?D:l,key:"".concat(I,"-").concat(M)},I)}))};function Ns(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function rae(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ew(t){let e,r,n;t.length!==2?(e=Ns,r=(l,c)=>Ns(t(l),c),n=(l,c)=>t(l)-c):(e=t===Ns||t===rae?t:nae,r=t,n=t);function a(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function s(l,c,d=0,u=l.length){if(d<u){if(e(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=a(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:a,center:o,right:s}}function nae(){return 0}function DP(t){return t===null?NaN:+t}function*aae(t,e){for(let r of t)r!=null&&(r=+r)>=r&&(yield r)}const sae=ew(Ns),Ou=sae.right;ew(DP).center;class hS extends Map{constructor(e,r=lae){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[n,a]of e)this.set(n,a)}get(e){return super.get(fS(this,e))}has(e){return super.has(fS(this,e))}set(e,r){return super.set(iae(this,e),r)}delete(e){return super.delete(oae(this,e))}}function fS({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):r}function iae({_intern:t,_key:e},r){const n=e(r);return t.has(n)?t.get(n):(t.set(n,r),r)}function oae({_intern:t,_key:e},r){const n=e(r);return t.has(n)&&(r=t.get(n),t.delete(n)),r}function lae(t){return t!==null&&typeof t=="object"?t.valueOf():t}function cae(t=Ns){if(t===Ns)return PP;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,r)=>{const n=t(e,r);return n||n===0?n:(t(r,r)===0)-(t(e,e)===0)}}function PP(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const dae=Math.sqrt(50),uae=Math.sqrt(10),hae=Math.sqrt(2);function _f(t,e,r){const n=(e-t)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),o=s>=dae?10:s>=uae?5:s>=hae?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(t*d),c=Math.round(e*d),l/d<t&&++l,c/d>e&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(t/d),c=Math.round(e/d),l*d<t&&++l,c*d>e&&--c),c<l&&.5<=r&&r<2?_f(t,e,r*2):[l,c,d]}function Jy(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[a,s,o]=n?_f(e,t,r):_f(t,e,r);if(!(s>=a))return[];const l=s-a+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(s-d)/-o;else for(let d=0;d<l;++d)c[d]=(s-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function Yy(t,e,r){return e=+e,t=+t,r=+r,_f(t,e,r)[2]}function Xy(t,e,r){e=+e,t=+t,r=+r;const n=e<t,a=n?Yy(e,t,r):Yy(t,e,r);return(n?-1:1)*(a<0?1/-a:a)}function mS(t,e){let r;for(const n of t)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function gS(t,e){let r;for(const n of t)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function MP(t,e,r=0,n=1/0,a){if(e=Math.floor(e),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(t.length-1,n)),!(r<=e&&e<=n))return t;for(a=a===void 0?PP:cae(a);n>r;){if(n-r>600){const c=n-r+1,d=e-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(e-d*h/c+f)),v=Math.min(n,Math.floor(e+(c-d)*h/c+f));MP(t,e,m,v,a)}const s=t[e];let o=r,l=n;for(qc(t,r,e),a(t[n],s)>0&&qc(t,r,n);o<l;){for(qc(t,o,l),++o,--l;a(t[o],s)<0;)++o;for(;a(t[l],s)>0;)--l}a(t[r],s)===0?qc(t,r,l):(++l,qc(t,l,n)),l<=e&&(r=l+1),e<=l&&(n=l-1)}return t}function qc(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function fae(t,e,r){if(t=Float64Array.from(aae(t)),!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return gS(t);if(e>=1)return mS(t);var n,a=(n-1)*e,s=Math.floor(a),o=mS(MP(t,s).subarray(0,s+1)),l=gS(t.subarray(s+1));return o+(l-o)*(a-s)}}function mae(t,e,r=DP){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+r(t[0],0,t);if(e>=1)return+r(t[n-1],n-1,t);var n,a=(n-1)*e,s=Math.floor(a),o=+r(t[s],s,t),l=+r(t[s+1],s+1,t);return o+(l-o)*(a-s)}}function gae(t,e,r){t=+t,e=+e,r=(a=arguments.length)<2?(e=t,t=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((e-t)/r))|0,s=new Array(a);++n<a;)s[n]=t+n*r;return s}function Cn(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Wa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Zy=Symbol("implicit");function tw(){var t=new hS,e=[],r=[],n=Zy;function a(s){let o=t.get(s);if(o===void 0){if(n!==Zy)return n;t.set(s,o=e.push(s)-1)}return r[o%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new hS;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return tw(e,r).unknown(n)},Cn.apply(a,arguments),a}function Md(){var t=tw().unknown(void 0),e=t.domain,r=t.range,n=0,a=1,s,o,l=!1,c=0,d=0,u=.5;delete t.unknown;function h(){var f=e().length,m=a<n,v=m?a:n,p=m?n:a;s=(p-v)/Math.max(1,f-c+d*2),l&&(s=Math.floor(s)),v+=(p-v-s*(f-c))*u,o=s*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=gae(f).map(function(y){return v+s*y});return r(m?g.reverse():g)}return t.domain=function(f){return arguments.length?(e(f),h()):e()},t.range=function(f){return arguments.length?([n,a]=f,n=+n,a=+a,h()):[n,a]},t.rangeRound=function(f){return[n,a]=f,n=+n,a=+a,l=!0,h()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(f){return arguments.length?(l=!!f,h()):l},t.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},t.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},t.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},t.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},t.copy=function(){return Md(e(),[n,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Cn.apply(h(),arguments)}function OP(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return OP(e())},t}function hd(){return OP(Md.apply(null,arguments).paddingInner(1))}function rw(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function RP(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function Ru(){}var Od=.7,jf=1/Od,rl="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pae=/^#([0-9a-f]{3,8})$/,vae=new RegExp(`^rgb\\(${rl},${rl},${rl}\\)$`),yae=new RegExp(`^rgb\\(${ia},${ia},${ia}\\)$`),bae=new RegExp(`^rgba\\(${rl},${rl},${rl},${Rd}\\)$`),xae=new RegExp(`^rgba\\(${ia},${ia},${ia},${Rd}\\)$`),wae=new RegExp(`^hsl\\(${Rd},${ia},${ia}\\)$`),_ae=new RegExp(`^hsla\\(${Rd},${ia},${ia},${Rd}\\)$`),pS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rw(Ru,$d,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vS,formatHex:vS,formatHex8:jae,formatHsl:Sae,formatRgb:yS,toString:yS});function vS(){return this.rgb().formatHex()}function jae(){return this.rgb().formatHex8()}function Sae(){return $P(this).formatHsl()}function yS(){return this.rgb().formatRgb()}function $d(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=pae.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?bS(e):r===3?new Gr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?dh(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?dh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=vae.exec(t))?new Gr(e[1],e[2],e[3],1):(e=yae.exec(t))?new Gr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=bae.exec(t))?dh(e[1],e[2],e[3],e[4]):(e=xae.exec(t))?dh(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=wae.exec(t))?_S(e[1],e[2]/100,e[3]/100,1):(e=_ae.exec(t))?_S(e[1],e[2]/100,e[3]/100,e[4]):pS.hasOwnProperty(t)?bS(pS[t]):t==="transparent"?new Gr(NaN,NaN,NaN,0):null}function bS(t){return new Gr(t>>16&255,t>>8&255,t&255,1)}function dh(t,e,r,n){return n<=0&&(t=e=r=NaN),new Gr(t,e,r,n)}function kae(t){return t instanceof Ru||(t=$d(t)),t?(t=t.rgb(),new Gr(t.r,t.g,t.b,t.opacity)):new Gr}function eb(t,e,r,n){return arguments.length===1?kae(t):new Gr(t,e,r,n??1)}function Gr(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}rw(Gr,eb,RP(Ru,{brighter(t){return t=t==null?jf:Math.pow(jf,t),new Gr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Od:Math.pow(Od,t),new Gr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gr(Ci(this.r),Ci(this.g),Ci(this.b),Sf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:xS,formatHex:xS,formatHex8:Nae,formatRgb:wS,toString:wS}));function xS(){return`#${gi(this.r)}${gi(this.g)}${gi(this.b)}`}function Nae(){return`#${gi(this.r)}${gi(this.g)}${gi(this.b)}${gi((isNaN(this.opacity)?1:this.opacity)*255)}`}function wS(){const t=Sf(this.opacity);return`${t===1?"rgb(":"rgba("}${Ci(this.r)}, ${Ci(this.g)}, ${Ci(this.b)}${t===1?")":`, ${t})`}`}function Sf(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ci(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function gi(t){return t=Ci(t),(t<16?"0":"")+t.toString(16)}function _S(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new In(t,e,r,n)}function $P(t){if(t instanceof In)return new In(t.h,t.s,t.l,t.opacity);if(t instanceof Ru||(t=$d(t)),!t)return new In;if(t instanceof In)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,a=Math.min(e,r,n),s=Math.max(e,r,n),o=NaN,l=s-a,c=(s+a)/2;return l?(e===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-e)/l+2:o=(e-r)/l+4,l/=c<.5?s+a:2-s-a,o*=60):l=c>0&&c<1?0:o,new In(o,l,c,t.opacity)}function Eae(t,e,r,n){return arguments.length===1?$P(t):new In(t,e,r,n??1)}function In(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}rw(In,Eae,RP(Ru,{brighter(t){return t=t==null?jf:Math.pow(jf,t),new In(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Od:Math.pow(Od,t),new In(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,a=2*r-n;return new Gr(Vp(t>=240?t-240:t+120,a,n),Vp(t,a,n),Vp(t<120?t+240:t-120,a,n),this.opacity)},clamp(){return new In(jS(this.h),uh(this.s),uh(this.l),Sf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Sf(this.opacity);return`${t===1?"hsl(":"hsla("}${jS(this.h)}, ${uh(this.s)*100}%, ${uh(this.l)*100}%${t===1?")":`, ${t})`}`}}));function jS(t){return t=(t||0)%360,t<0?t+360:t}function uh(t){return Math.max(0,Math.min(1,t||0))}function Vp(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const nw=t=>()=>t;function Cae(t,e){return function(r){return t+r*e}}function Aae(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Tae(t){return(t=+t)==1?IP:function(e,r){return r-e?Aae(e,r,t):nw(isNaN(e)?r:e)}}function IP(t,e){var r=e-t;return r?Cae(t,r):nw(isNaN(t)?e:t)}const SS=function t(e){var r=Tae(e);function n(a,s){var o=r((a=eb(a)).r,(s=eb(s)).r),l=r(a.g,s.g),c=r(a.b,s.b),d=IP(a.opacity,s.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return n.gamma=t,n}(1);function Dae(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=t[a]*(1-s)+e[a]*s;return n}}function Pae(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Mae(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,a=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)a[o]=Sc(t[o],e[o]);for(;o<r;++o)s[o]=e[o];return function(l){for(o=0;o<n;++o)s[o]=a[o](l);return s}}function Oae(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function kf(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Rae(t,e){var r={},n={},a;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(a in e)a in t?r[a]=Sc(t[a],e[a]):n[a]=e[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var tb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qp=new RegExp(tb.source,"g");function $ae(t){return function(){return t}}function Iae(t){return function(e){return t(e)+""}}function Lae(t,e){var r=tb.lastIndex=Qp.lastIndex=0,n,a,s,o=-1,l=[],c=[];for(t=t+"",e=e+"";(n=tb.exec(t))&&(a=Qp.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:kf(n,a)})),r=Qp.lastIndex;return r<e.length&&(s=e.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Iae(c[0].x):$ae(e):(e=c.length,function(d){for(var u=0,h;u<e;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function Sc(t,e){var r=typeof e,n;return e==null||r==="boolean"?nw(e):(r==="number"?kf:r==="string"?(n=$d(e))?(e=n,SS):Lae:e instanceof $d?SS:e instanceof Date?Oae:Pae(e)?Dae:Array.isArray(e)?Mae:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Rae:kf)(t,e)}function aw(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}function Fae(t,e){e===void 0&&(e=t,t=Sc);for(var r=0,n=e.length-1,a=e[0],s=new Array(n<0?0:n);r<n;)s[r]=t(a,a=e[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function Bae(t){return function(){return t}}function Nf(t){return+t}var kS=[0,1];function $r(t){return t}function rb(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Bae(isNaN(e)?NaN:.5)}function qae(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Uae(t,e,r){var n=t[0],a=t[1],s=e[0],o=e[1];return a<n?(n=rb(a,n),s=r(o,s)):(n=rb(n,a),s=r(s,o)),function(l){return s(n(l))}}function zae(t,e,r){var n=Math.min(t.length,e.length)-1,a=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)a[o]=rb(t[o],t[o+1]),s[o]=r(e[o],e[o+1]);return function(l){var c=Ou(t,l,1,n)-1;return s[c](a[c](l))}}function $u(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function wg(){var t=kS,e=kS,r=Sc,n,a,s,o=$r,l,c,d;function u(){var f=Math.min(t.length,e.length);return o!==$r&&(o=qae(t[0],t[f-1])),l=f>2?zae:Uae,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?s:(c||(c=l(t.map(n),e,r)))(n(o(f)))}return h.invert=function(f){return o(a((d||(d=l(e,t.map(n),kf)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Nf),u()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=aw,u()},h.clamp=function(f){return arguments.length?(o=f?!0:$r,u()):o!==$r},h.interpolate=function(f){return arguments.length?(r=f,u()):r},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,m){return n=f,a=m,u()}}function sw(){return wg()($r,$r)}function Hae(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ef(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function $l(t){return t=Ef(Math.abs(t)),t?t[1]:NaN}function Wae(t,e){return function(r,n){for(var a=r.length,s=[],o=0,l=t[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Kae(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var Gae=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Id(t){if(!(e=Gae.exec(t)))throw new Error("invalid format: "+t);var e;return new iw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Id.prototype=iw.prototype;function iw(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}iw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Vae(t){e:for(var e=t.length,r=1,n=-1,a;r<e;++r)switch(t[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(a+1):t}var LP;function Qae(t,e){var r=Ef(t,e);if(!r)return t+"";var n=r[0],a=r[1],s=a-(LP=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Ef(t,Math.max(0,e+s-1))[0]}function NS(t,e){var r=Ef(t,e);if(!r)return t+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const ES={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hae,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>NS(t*100,e),r:NS,s:Qae,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function CS(t){return t}var AS=Array.prototype.map,TS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Jae(t){var e=t.grouping===void 0||t.thousands===void 0?CS:Wae(AS.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?CS:Kae(AS.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function d(h){h=Id(h);var f=h.fill,m=h.align,v=h.sign,p=h.symbol,g=h.zero,y=h.width,b=h.comma,w=h.precision,j=h.trim,_=h.type;_==="n"?(b=!0,_="g"):ES[_]||(w===void 0&&(w=12),j=!0,_="g"),(g||f==="0"&&m==="=")&&(g=!0,f="0",m="=");var S=p==="$"?r:p==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",N=p==="$"?n:/[%p]/.test(_)?o:"",k=ES[_],E=/[defgprs%]/.test(_);w=w===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(T){var D=S,A=N,C,R,L;if(_==="c")A=k(T)+A,T="";else{T=+T;var M=T<0||1/T<0;if(T=isNaN(T)?c:k(Math.abs(T),w),j&&(T=Vae(T)),M&&+T==0&&v!=="+"&&(M=!1),D=(M?v==="("?v:l:v==="-"||v==="("?"":v)+D,A=(_==="s"?TS[8+LP/3]:"")+A+(M&&v==="("?")":""),E){for(C=-1,R=T.length;++C<R;)if(L=T.charCodeAt(C),48>L||L>57){A=(L===46?a+T.slice(C+1):T.slice(C))+A,T=T.slice(0,C);break}}}b&&!g&&(T=e(T,1/0));var I=D.length+T.length+A.length,B=I<y?new Array(y-I+1).join(f):"";switch(b&&g&&(T=e(B+T,B.length?y-A.length:1/0),B=""),m){case"<":T=D+T+A+B;break;case"=":T=D+B+T+A;break;case"^":T=B.slice(0,I=B.length>>1)+D+T+A+B.slice(I);break;default:T=B+D+T+A;break}return s(T)}return P.toString=function(){return h+""},P}function u(h,f){var m=d((h=Id(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor($l(f)/3)))*3,p=Math.pow(10,-v),g=TS[8+v/3];return function(y){return m(p*y)+g}}return{format:d,formatPrefix:u}}var hh,ow,FP;Yae({thousands:",",grouping:[3],currency:["$",""]});function Yae(t){return hh=Jae(t),ow=hh.format,FP=hh.formatPrefix,hh}function Xae(t){return Math.max(0,-$l(Math.abs(t)))}function Zae(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($l(e)/3)))*3-$l(Math.abs(t)))}function ese(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,$l(e)-$l(t))+1}function BP(t,e,r,n){var a=Xy(t,e,r),s;switch(n=Id(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(s=Zae(a,o))&&(n.precision=s),FP(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=ese(a,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=Xae(a))&&(n.precision=s-(n.type==="%")*2);break}}return ow(n)}function zs(t){var e=t.domain;return t.ticks=function(r){var n=e();return Jy(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var a=e();return BP(a[0],a[a.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),a=0,s=n.length-1,o=n[a],l=n[s],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=s,s=d);u-- >0;){if(d=Yy(o,l,r),d===c)return n[a]=o,n[s]=l,e(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return t},t}function Cf(){var t=sw();return t.copy=function(){return $u(t,Cf())},Cn.apply(t,arguments),zs(t)}function qP(t){var e;function r(n){return n==null||isNaN(n=+n)?e:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(t=Array.from(n,Nf),r):t.slice()},r.unknown=function(n){return arguments.length?(e=n,r):e},r.copy=function(){return qP(t).unknown(e)},t=arguments.length?Array.from(t,Nf):[0,1],zs(r)}function UP(t,e){t=t.slice();var r=0,n=t.length-1,a=t[r],s=t[n],o;return s<a&&(o=r,r=n,n=o,o=a,a=s,s=o),t[r]=e.floor(a),t[n]=e.ceil(s),t}function DS(t){return Math.log(t)}function PS(t){return Math.exp(t)}function tse(t){return-Math.log(-t)}function rse(t){return-Math.exp(-t)}function nse(t){return isFinite(t)?+("1e"+t):t<0?0:t}function ase(t){return t===10?nse:t===Math.E?Math.exp:e=>Math.pow(t,e)}function sse(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function MS(t){return(e,r)=>-t(-e,r)}function lw(t){const e=t(DS,PS),r=e.domain;let n=10,a,s;function o(){return a=sse(n),s=ase(n),r()[0]<0?(a=MS(a),s=MS(s),t(tse,rse)):t(DS,PS),e}return e.base=function(l){return arguments.length?(n=+l,o()):n},e.domain=function(l){return arguments.length?(r(l),o()):r()},e.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=a(d),m=a(u),v,p;const g=l==null?10:+l;let y=[];if(!(n%1)&&m-f<g){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(v=1;v<n;++v)if(p=f<0?v/s(-f):v*s(f),!(p<d)){if(p>u)break;y.push(p)}}else for(;f<=m;++f)for(v=n-1;v>=1;--v)if(p=f>0?v/s(-f):v*s(f),!(p<d)){if(p>u)break;y.push(p)}y.length*2<g&&(y=Jy(d,u,g))}else y=Jy(f,m,Math.min(m-f,g)).map(s);return h?y.reverse():y},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Id(c)).precision==null&&(c.trim=!0),c=ow(c)),l===1/0)return c;const d=Math.max(1,n*l/e.ticks().length);return u=>{let h=u/s(Math.round(a(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},e.nice=()=>r(UP(r(),{floor:l=>s(Math.floor(a(l))),ceil:l=>s(Math.ceil(a(l)))})),e}function zP(){const t=lw(wg()).domain([1,10]);return t.copy=()=>$u(t,zP()).base(t.base()),Cn.apply(t,arguments),t}function OS(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function RS(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function cw(t){var e=1,r=t(OS(e),RS(e));return r.constant=function(n){return arguments.length?t(OS(e=+n),RS(e)):e},zs(r)}function HP(){var t=cw(wg());return t.copy=function(){return $u(t,HP()).constant(t.constant())},Cn.apply(t,arguments)}function $S(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ise(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ose(t){return t<0?-t*t:t*t}function dw(t){var e=t($r,$r),r=1;function n(){return r===1?t($r,$r):r===.5?t(ise,ose):t($S(r),$S(1/r))}return e.exponent=function(a){return arguments.length?(r=+a,n()):r},zs(e)}function uw(){var t=dw(wg());return t.copy=function(){return $u(t,uw()).exponent(t.exponent())},Cn.apply(t,arguments),t}function lse(){return uw.apply(null,arguments).exponent(.5)}function IS(t){return Math.sign(t)*t*t}function cse(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function WP(){var t=sw(),e=[0,1],r=!1,n;function a(s){var o=cse(t(s));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(s){return t.invert(IS(s))},a.domain=function(s){return arguments.length?(t.domain(s),a):t.domain()},a.range=function(s){return arguments.length?(t.range((e=Array.from(s,Nf)).map(IS)),a):e.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(t.clamp(s),a):t.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return WP(t.domain(),e).round(r).clamp(t.clamp()).unknown(n)},Cn.apply(a,arguments),zs(a)}function KP(){var t=[],e=[],r=[],n;function a(){var o=0,l=Math.max(1,e.length);for(r=new Array(l-1);++o<l;)r[o-1]=mae(t,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:e[Ou(r,o)]}return s.invertExtent=function(o){var l=e.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:t[0],l<r.length?r[l]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let l of o)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(Ns),a()},s.range=function(o){return arguments.length?(e=Array.from(o),a()):e.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return KP().domain(t).range(e).unknown(n)},Cn.apply(s,arguments)}function GP(){var t=0,e=1,r=1,n=[.5],a=[0,1],s;function o(c){return c!=null&&c<=c?a[Ou(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*e-(c-r)*t)/(r+1);return o}return o.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[t,n[0]]:d>=r?[n[r-1],e]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return GP().domain([t,e]).range(a).unknown(s)},Cn.apply(zs(o),arguments)}function VP(){var t=[.5],e=[0,1],r,n=1;function a(s){return s!=null&&s<=s?e[Ou(t,s,0,n)]:r}return a.domain=function(s){return arguments.length?(t=Array.from(s),n=Math.min(t.length,e.length-1),a):t.slice()},a.range=function(s){return arguments.length?(e=Array.from(s),n=Math.min(t.length,e.length-1),a):e.slice()},a.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return VP().domain(t).range(e).unknown(r)},Cn.apply(a,arguments)}const Jp=new Date,Yp=new Date;function ar(t,e,r,n){function a(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(t(s=new Date(+s)),s),a.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),a.round=s=>{const o=a(s),l=a.ceil(s);return s-o<l-s?o:l},a.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),a.range=(s,o,l)=>{const c=[];if(s=a.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let d;do c.push(d=new Date(+s)),e(s,l),t(s);while(d<s&&s<o);return c},a.filter=s=>ar(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;e(o,-1),!s(o););else for(;--l>=0;)for(;e(o,1),!s(o););}),r&&(a.count=(s,o)=>(Jp.setTime(+s),Yp.setTime(+o),t(Jp),t(Yp),Math.floor(r(Jp,Yp))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?o=>n(o)%s===0:o=>a.count(0,o)%s===0):a)),a}const Af=ar(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Af.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?ar(e=>{e.setTime(Math.floor(e/t)*t)},(e,r)=>{e.setTime(+e+r*t)},(e,r)=>(r-e)/t):Af);Af.range;const Sa=1e3,_n=Sa*60,ka=_n*60,Ra=ka*24,hw=Ra*7,LS=Ra*30,Xp=Ra*365,pi=ar(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Sa)},(t,e)=>(e-t)/Sa,t=>t.getUTCSeconds());pi.range;const fw=ar(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sa)},(t,e)=>{t.setTime(+t+e*_n)},(t,e)=>(e-t)/_n,t=>t.getMinutes());fw.range;const mw=ar(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*_n)},(t,e)=>(e-t)/_n,t=>t.getUTCMinutes());mw.range;const gw=ar(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Sa-t.getMinutes()*_n)},(t,e)=>{t.setTime(+t+e*ka)},(t,e)=>(e-t)/ka,t=>t.getHours());gw.range;const pw=ar(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ka)},(t,e)=>(e-t)/ka,t=>t.getUTCHours());pw.range;const Iu=ar(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*_n)/Ra,t=>t.getDate()-1);Iu.range;const _g=ar(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ra,t=>t.getUTCDate()-1);_g.range;const QP=ar(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Ra,t=>Math.floor(t/Ra));QP.range;function co(t){return ar(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,r)=>{e.setDate(e.getDate()+r*7)},(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*_n)/hw)}const jg=co(0),Tf=co(1),dse=co(2),use=co(3),Il=co(4),hse=co(5),fse=co(6);jg.range;Tf.range;dse.range;use.range;Il.range;hse.range;fse.range;function uo(t){return ar(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCDate(e.getUTCDate()+r*7)},(e,r)=>(r-e)/hw)}const Sg=uo(0),Df=uo(1),mse=uo(2),gse=uo(3),Ll=uo(4),pse=uo(5),vse=uo(6);Sg.range;Df.range;mse.range;gse.range;Ll.range;pse.range;vse.range;const vw=ar(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());vw.range;const yw=ar(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());yw.range;const $a=ar(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());$a.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ar(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,r)=>{e.setFullYear(e.getFullYear()+r*t)});$a.range;const Ia=ar(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());Ia.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:ar(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,r)=>{e.setUTCFullYear(e.getUTCFullYear()+r*t)});Ia.range;function JP(t,e,r,n,a,s){const o=[[pi,1,Sa],[pi,5,5*Sa],[pi,15,15*Sa],[pi,30,30*Sa],[s,1,_n],[s,5,5*_n],[s,15,15*_n],[s,30,30*_n],[a,1,ka],[a,3,3*ka],[a,6,6*ka],[a,12,12*ka],[n,1,Ra],[n,2,2*Ra],[r,1,hw],[e,1,LS],[e,3,3*LS],[t,1,Xp]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),v=m?m.range(d,+u+1):[];return f?v.reverse():v}function c(d,u,h){const f=Math.abs(u-d)/h,m=ew(([,,g])=>g).right(o,f);if(m===o.length)return t.every(Xy(d/Xp,u/Xp,h));if(m===0)return Af.every(Math.max(Xy(d,u,h),1));const[v,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(p)}return[l,c]}const[yse,bse]=JP(Ia,yw,Sg,QP,pw,mw),[xse,wse]=JP($a,vw,jg,Iu,gw,fw);function Zp(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ev(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Uc(t,e,r){return{y:t,m:e,d:r,H:0,M:0,S:0,L:0}}function _se(t){var e=t.dateTime,r=t.date,n=t.time,a=t.periods,s=t.days,o=t.shortDays,l=t.months,c=t.shortMonths,d=zc(a),u=Hc(a),h=zc(s),f=Hc(s),m=zc(o),v=Hc(o),p=zc(l),g=Hc(l),y=zc(c),b=Hc(c),w={a:M,A:I,b:B,B:H,c:null,d:HS,e:HS,f:Wse,g:tie,G:nie,H:Use,I:zse,j:Hse,L:YP,m:Kse,M:Gse,p:q,q:O,Q:GS,s:VS,S:Vse,u:Qse,U:Jse,V:Yse,w:Xse,W:Zse,x:null,X:null,y:eie,Y:rie,Z:aie,"%":KS},j={a:F,A:G,b:Y,B:Z,c:null,d:WS,e:WS,f:lie,g:yie,G:xie,H:sie,I:iie,j:oie,L:ZP,m:cie,M:die,p:le,q:V,Q:GS,s:VS,S:uie,u:hie,U:fie,V:mie,w:gie,W:pie,x:null,X:null,y:vie,Y:bie,Z:wie,"%":KS},_={a:P,A:T,b:D,B:A,c:C,d:US,e:US,f:Lse,g:qS,G:BS,H:zS,I:zS,j:Ose,L:Ise,m:Mse,M:Rse,p:E,q:Pse,Q:Bse,s:qse,S:$se,u:Ese,U:Cse,V:Ase,w:Nse,W:Tse,x:R,X:L,y:qS,Y:BS,Z:Dse,"%":Fse};w.x=S(r,w),w.X=S(n,w),w.c=S(e,w),j.x=S(r,j),j.X=S(n,j),j.c=S(e,j);function S(Q,ce){return function(xe){var ae=[],ee=-1,J=0,re=Q.length,ue,pe,ve;for(xe instanceof Date||(xe=new Date(+xe));++ee<re;)Q.charCodeAt(ee)===37&&(ae.push(Q.slice(J,ee)),(pe=FS[ue=Q.charAt(++ee)])!=null?ue=Q.charAt(++ee):pe=ue==="e"?" ":"0",(ve=ce[ue])&&(ue=ve(xe,pe)),ae.push(ue),J=ee+1);return ae.push(Q.slice(J,ee)),ae.join("")}}function N(Q,ce){return function(xe){var ae=Uc(1900,void 0,1),ee=k(ae,Q,xe+="",0),J,re;if(ee!=xe.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(ce&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(J=ev(Uc(ae.y,0,1)),re=J.getUTCDay(),J=re>4||re===0?Df.ceil(J):Df(J),J=_g.offset(J,(ae.V-1)*7),ae.y=J.getUTCFullYear(),ae.m=J.getUTCMonth(),ae.d=J.getUTCDate()+(ae.w+6)%7):(J=Zp(Uc(ae.y,0,1)),re=J.getDay(),J=re>4||re===0?Tf.ceil(J):Tf(J),J=Iu.offset(J,(ae.V-1)*7),ae.y=J.getFullYear(),ae.m=J.getMonth(),ae.d=J.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),re="Z"in ae?ev(Uc(ae.y,0,1)).getUTCDay():Zp(Uc(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(re+5)%7:ae.w+ae.U*7-(re+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,ev(ae)):Zp(ae)}}function k(Q,ce,xe,ae){for(var ee=0,J=ce.length,re=xe.length,ue,pe;ee<J;){if(ae>=re)return-1;if(ue=ce.charCodeAt(ee++),ue===37){if(ue=ce.charAt(ee++),pe=_[ue in FS?ce.charAt(ee++):ue],!pe||(ae=pe(Q,xe,ae))<0)return-1}else if(ue!=xe.charCodeAt(ae++))return-1}return ae}function E(Q,ce,xe){var ae=d.exec(ce.slice(xe));return ae?(Q.p=u.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function P(Q,ce,xe){var ae=m.exec(ce.slice(xe));return ae?(Q.w=v.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function T(Q,ce,xe){var ae=h.exec(ce.slice(xe));return ae?(Q.w=f.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function D(Q,ce,xe){var ae=y.exec(ce.slice(xe));return ae?(Q.m=b.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function A(Q,ce,xe){var ae=p.exec(ce.slice(xe));return ae?(Q.m=g.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function C(Q,ce,xe){return k(Q,e,ce,xe)}function R(Q,ce,xe){return k(Q,r,ce,xe)}function L(Q,ce,xe){return k(Q,n,ce,xe)}function M(Q){return o[Q.getDay()]}function I(Q){return s[Q.getDay()]}function B(Q){return c[Q.getMonth()]}function H(Q){return l[Q.getMonth()]}function q(Q){return a[+(Q.getHours()>=12)]}function O(Q){return 1+~~(Q.getMonth()/3)}function F(Q){return o[Q.getUTCDay()]}function G(Q){return s[Q.getUTCDay()]}function Y(Q){return c[Q.getUTCMonth()]}function Z(Q){return l[Q.getUTCMonth()]}function le(Q){return a[+(Q.getUTCHours()>=12)]}function V(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var ce=S(Q+="",w);return ce.toString=function(){return Q},ce},parse:function(Q){var ce=N(Q+="",!1);return ce.toString=function(){return Q},ce},utcFormat:function(Q){var ce=S(Q+="",j);return ce.toString=function(){return Q},ce},utcParse:function(Q){var ce=N(Q+="",!0);return ce.toString=function(){return Q},ce}}}var FS={"-":"",_:" ",0:"0"},dr=/^\s*\d+/,jse=/^%/,Sse=/[\\^$*+?|[\]().{}]/g;function lt(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(e)+a:a)}function kse(t){return t.replace(Sse,"\\$&")}function zc(t){return new RegExp("^(?:"+t.map(kse).join("|")+")","i")}function Hc(t){return new Map(t.map((e,r)=>[e.toLowerCase(),r]))}function Nse(t,e,r){var n=dr.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Ese(t,e,r){var n=dr.exec(e.slice(r,r+1));return n?(t.u=+n[0],r+n[0].length):-1}function Cse(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.U=+n[0],r+n[0].length):-1}function Ase(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.V=+n[0],r+n[0].length):-1}function Tse(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.W=+n[0],r+n[0].length):-1}function BS(t,e,r){var n=dr.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function qS(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Dse(t,e,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(r,r+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Pse(t,e,r){var n=dr.exec(e.slice(r,r+1));return n?(t.q=n[0]*3-3,r+n[0].length):-1}function Mse(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function US(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Ose(t,e,r){var n=dr.exec(e.slice(r,r+3));return n?(t.m=0,t.d=+n[0],r+n[0].length):-1}function zS(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function Rse(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function $se(t,e,r){var n=dr.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function Ise(t,e,r){var n=dr.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function Lse(t,e,r){var n=dr.exec(e.slice(r,r+6));return n?(t.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Fse(t,e,r){var n=jse.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function Bse(t,e,r){var n=dr.exec(e.slice(r));return n?(t.Q=+n[0],r+n[0].length):-1}function qse(t,e,r){var n=dr.exec(e.slice(r));return n?(t.s=+n[0],r+n[0].length):-1}function HS(t,e){return lt(t.getDate(),e,2)}function Use(t,e){return lt(t.getHours(),e,2)}function zse(t,e){return lt(t.getHours()%12||12,e,2)}function Hse(t,e){return lt(1+Iu.count($a(t),t),e,3)}function YP(t,e){return lt(t.getMilliseconds(),e,3)}function Wse(t,e){return YP(t,e)+"000"}function Kse(t,e){return lt(t.getMonth()+1,e,2)}function Gse(t,e){return lt(t.getMinutes(),e,2)}function Vse(t,e){return lt(t.getSeconds(),e,2)}function Qse(t){var e=t.getDay();return e===0?7:e}function Jse(t,e){return lt(jg.count($a(t)-1,t),e,2)}function XP(t){var e=t.getDay();return e>=4||e===0?Il(t):Il.ceil(t)}function Yse(t,e){return t=XP(t),lt(Il.count($a(t),t)+($a(t).getDay()===4),e,2)}function Xse(t){return t.getDay()}function Zse(t,e){return lt(Tf.count($a(t)-1,t),e,2)}function eie(t,e){return lt(t.getFullYear()%100,e,2)}function tie(t,e){return t=XP(t),lt(t.getFullYear()%100,e,2)}function rie(t,e){return lt(t.getFullYear()%1e4,e,4)}function nie(t,e){var r=t.getDay();return t=r>=4||r===0?Il(t):Il.ceil(t),lt(t.getFullYear()%1e4,e,4)}function aie(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+lt(e/60|0,"0",2)+lt(e%60,"0",2)}function WS(t,e){return lt(t.getUTCDate(),e,2)}function sie(t,e){return lt(t.getUTCHours(),e,2)}function iie(t,e){return lt(t.getUTCHours()%12||12,e,2)}function oie(t,e){return lt(1+_g.count(Ia(t),t),e,3)}function ZP(t,e){return lt(t.getUTCMilliseconds(),e,3)}function lie(t,e){return ZP(t,e)+"000"}function cie(t,e){return lt(t.getUTCMonth()+1,e,2)}function die(t,e){return lt(t.getUTCMinutes(),e,2)}function uie(t,e){return lt(t.getUTCSeconds(),e,2)}function hie(t){var e=t.getUTCDay();return e===0?7:e}function fie(t,e){return lt(Sg.count(Ia(t)-1,t),e,2)}function eM(t){var e=t.getUTCDay();return e>=4||e===0?Ll(t):Ll.ceil(t)}function mie(t,e){return t=eM(t),lt(Ll.count(Ia(t),t)+(Ia(t).getUTCDay()===4),e,2)}function gie(t){return t.getUTCDay()}function pie(t,e){return lt(Df.count(Ia(t)-1,t),e,2)}function vie(t,e){return lt(t.getUTCFullYear()%100,e,2)}function yie(t,e){return t=eM(t),lt(t.getUTCFullYear()%100,e,2)}function bie(t,e){return lt(t.getUTCFullYear()%1e4,e,4)}function xie(t,e){var r=t.getUTCDay();return t=r>=4||r===0?Ll(t):Ll.ceil(t),lt(t.getUTCFullYear()%1e4,e,4)}function wie(){return"+0000"}function KS(){return"%"}function GS(t){return+t}function VS(t){return Math.floor(+t/1e3)}var No,tM,rM;_ie({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _ie(t){return No=_se(t),tM=No.format,No.parse,rM=No.utcFormat,No.utcParse,No}function jie(t){return new Date(t)}function Sie(t){return t instanceof Date?+t:+new Date(+t)}function bw(t,e,r,n,a,s,o,l,c,d){var u=sw(),h=u.invert,f=u.domain,m=d(".%L"),v=d(":%S"),p=d("%I:%M"),g=d("%I %p"),y=d("%a %d"),b=d("%b %d"),w=d("%B"),j=d("%Y");function _(S){return(c(S)<S?m:l(S)<S?v:o(S)<S?p:s(S)<S?g:n(S)<S?a(S)<S?y:b:r(S)<S?w:j)(S)}return u.invert=function(S){return new Date(h(S))},u.domain=function(S){return arguments.length?f(Array.from(S,Sie)):f().map(jie)},u.ticks=function(S){var N=f();return t(N[0],N[N.length-1],S??10)},u.tickFormat=function(S,N){return N==null?_:d(N)},u.nice=function(S){var N=f();return(!S||typeof S.range!="function")&&(S=e(N[0],N[N.length-1],S??10)),S?f(UP(N,S)):u},u.copy=function(){return $u(u,bw(t,e,r,n,a,s,o,l,c,d))},u}function kie(){return Cn.apply(bw(xse,wse,$a,vw,jg,Iu,gw,fw,pi,tM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Nie(){return Cn.apply(bw(yse,bse,Ia,yw,Sg,_g,pw,mw,pi,rM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kg(){var t=0,e=1,r,n,a,s,o=$r,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(s(h)-r)*a,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([t,e]=h,r=s(t=+t),n=s(e=+e),a=r===n?0:1/(n-r),d):[t,e]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),d):[o(0),o(1)]}}return d.range=u(Sc),d.rangeRound=u(aw),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return s=h,r=h(t),n=h(e),a=r===n?0:1/(n-r),d}}function Hs(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function nM(){var t=zs(kg()($r));return t.copy=function(){return Hs(t,nM())},Wa.apply(t,arguments)}function aM(){var t=lw(kg()).domain([1,10]);return t.copy=function(){return Hs(t,aM()).base(t.base())},Wa.apply(t,arguments)}function sM(){var t=cw(kg());return t.copy=function(){return Hs(t,sM()).constant(t.constant())},Wa.apply(t,arguments)}function xw(){var t=dw(kg());return t.copy=function(){return Hs(t,xw()).exponent(t.exponent())},Wa.apply(t,arguments)}function Eie(){return xw.apply(null,arguments).exponent(.5)}function iM(){var t=[],e=$r;function r(n){if(n!=null&&!isNaN(n=+n))return e((Ou(t,n,1)-1)/(t.length-1))}return r.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let a of n)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(Ns),r},r.interpolator=function(n){return arguments.length?(e=n,r):e},r.range=function(){return t.map((n,a)=>e(a/(t.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>fae(t,s/n))},r.copy=function(){return iM(e).domain(t)},Wa.apply(r,arguments)}function Ng(){var t=0,e=.5,r=1,n=1,a,s,o,l,c,d=$r,u,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-s)*(n*p<n*s?l:c),d(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([t,e,r]=p,a=u(t=+t),s=u(e=+e),o=u(r=+r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m):[t,e,r]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(d=p,m):d};function v(p){return function(g){var y,b,w;return arguments.length?([y,b,w]=g,d=Fae(p,[y,b,w]),m):[d(0),d(.5),d(1)]}}return m.range=v(Sc),m.rangeRound=v(aw),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return u=p,a=p(t),s=p(e),o=p(r),l=a===s?0:.5/(s-a),c=s===o?0:.5/(o-s),n=s<a?-1:1,m}}function oM(){var t=zs(Ng()($r));return t.copy=function(){return Hs(t,oM())},Wa.apply(t,arguments)}function lM(){var t=lw(Ng()).domain([.1,1,10]);return t.copy=function(){return Hs(t,lM()).base(t.base())},Wa.apply(t,arguments)}function cM(){var t=cw(Ng());return t.copy=function(){return Hs(t,cM()).constant(t.constant())},Wa.apply(t,arguments)}function ww(){var t=dw(Ng());return t.copy=function(){return Hs(t,ww()).exponent(t.exponent())},Wa.apply(t,arguments)}function Cie(){return ww.apply(null,arguments).exponent(.5)}const QS=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Md,scaleDiverging:oM,scaleDivergingLog:lM,scaleDivergingPow:ww,scaleDivergingSqrt:Cie,scaleDivergingSymlog:cM,scaleIdentity:qP,scaleImplicit:Zy,scaleLinear:Cf,scaleLog:zP,scaleOrdinal:tw,scalePoint:hd,scalePow:uw,scaleQuantile:KP,scaleQuantize:GP,scaleRadial:WP,scaleSequential:nM,scaleSequentialLog:aM,scaleSequentialPow:xw,scaleSequentialQuantile:iM,scaleSequentialSqrt:Eie,scaleSequentialSymlog:sM,scaleSqrt:lse,scaleSymlog:HP,scaleThreshold:VP,scaleTime:kie,scaleUtc:Nie,tickFormat:BP},Symbol.toStringTag,{value:"Module"}));var Aie=pc;function Tie(t,e,r){for(var n=-1,a=t.length;++n<a;){var s=t[n],o=e(s);if(o!=null&&(l===void 0?o===o&&!Aie(o):r(o,l)))var l=o,c=s}return c}var Eg=Tie;function Die(t,e){return t>e}var dM=Die,Pie=Eg,Mie=dM,Oie=jc;function Rie(t){return t&&t.length?Pie(t,Oie,Mie):void 0}var $ie=Rie;const Cg=jt($ie);function Iie(t,e){return t<e}var uM=Iie,Lie=Eg,Fie=uM,Bie=jc;function qie(t){return t&&t.length?Lie(t,Bie,Fie):void 0}var Uie=qie;const Ag=jt(Uie);var zie=R0,Hie=fa,Wie=bP,Kie=Xr;function Gie(t,e){var r=Kie(t)?zie:Wie;return r(t,Hie(e))}var Vie=Gie,Qie=vP,Jie=Vie;function Yie(t,e){return Qie(Jie(t,e),1)}var Xie=Yie;const Zie=jt(Xie);var eoe=J0;function toe(t,e){return eoe(t,e)}var roe=toe;const Tg=jt(roe);var kc=1e9,noe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},jw,Bt=!0,kn="[DecimalError] ",Ai=kn+"Invalid argument: ",_w=kn+"Exponent out of range: ",Nc=Math.floor,si=Math.pow,aoe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ln,ir=1e7,Lt=7,hM=9007199254740991,Pf=Nc(hM/Lt),ye={};ye.absoluteValue=ye.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};ye.comparedTo=ye.cmp=function(t){var e,r,n,a,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(n=s.d.length,a=t.d.length,e=0,r=n<a?n:a;e<r;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};ye.decimalPlaces=ye.dp=function(){var t=this,e=t.d.length-1,r=(e-t.e)*Lt;if(e=t.d[e],e)for(;e%10==0;e/=10)r--;return r<0?0:r};ye.dividedBy=ye.div=function(t){return Da(this,new this.constructor(t))};ye.dividedToIntegerBy=ye.idiv=function(t){var e=this,r=e.constructor;return St(Da(e,new r(t),0,1),r.precision)};ye.equals=ye.eq=function(t){return!this.cmp(t)};ye.exponent=function(){return Jt(this)};ye.greaterThan=ye.gt=function(t){return this.cmp(t)>0};ye.greaterThanOrEqualTo=ye.gte=function(t){return this.cmp(t)>=0};ye.isInteger=ye.isint=function(){return this.e>this.d.length-2};ye.isNegative=ye.isneg=function(){return this.s<0};ye.isPositive=ye.ispos=function(){return this.s>0};ye.isZero=function(){return this.s===0};ye.lessThan=ye.lt=function(t){return this.cmp(t)<0};ye.lessThanOrEqualTo=ye.lte=function(t){return this.cmp(t)<1};ye.logarithm=ye.log=function(t){var e,r=this,n=r.constructor,a=n.precision,s=a+5;if(t===void 0)t=new n(10);else if(t=new n(t),t.s<1||t.eq(ln))throw Error(kn+"NaN");if(r.s<1)throw Error(kn+(r.s?"NaN":"-Infinity"));return r.eq(ln)?new n(0):(Bt=!1,e=Da(Ld(r,s),Ld(t,s),s),Bt=!0,St(e,a))};ye.minus=ye.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?gM(e,t):fM(e,(t.s=-t.s,t))};ye.modulo=ye.mod=function(t){var e,r=this,n=r.constructor,a=n.precision;if(t=new n(t),!t.s)throw Error(kn+"NaN");return r.s?(Bt=!1,e=Da(r,t,0,1).times(t),Bt=!0,r.minus(e)):St(new n(r),a)};ye.naturalExponential=ye.exp=function(){return mM(this)};ye.naturalLogarithm=ye.ln=function(){return Ld(this)};ye.negated=ye.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};ye.plus=ye.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?fM(e,t):gM(e,(t.s=-t.s,t))};ye.precision=ye.sd=function(t){var e,r,n,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Ai+t);if(e=Jt(a)+1,n=a.d.length-1,r=n*Lt+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return t&&e>r?e:r};ye.squareRoot=ye.sqrt=function(){var t,e,r,n,a,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(kn+"NaN")}for(t=Jt(l),Bt=!1,a=Math.sqrt(+l),a==0||a==1/0?(e=sa(l.d),(e.length+t)%2==0&&(e+="0"),a=Math.sqrt(e),t=Nc((t+1)/2)-(t<0||t%2),a==1/0?e="5e"+t:(e=a.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),n=new c(e)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(s=n,n=s.plus(Da(l,s,o+2)).times(.5),sa(s.d).slice(0,o)===(e=sa(n.d)).slice(0,o)){if(e=e.slice(o-3,o+1),a==o&&e=="4999"){if(St(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(e!="9999")break;o+=4}return Bt=!0,St(n,r)};ye.times=ye.mul=function(t){var e,r,n,a,s,o,l,c,d,u=this,h=u.constructor,f=u.d,m=(t=new h(t)).d;if(!u.s||!t.s)return new h(0);for(t.s*=u.s,r=u.e+t.e,c=f.length,d=m.length,c<d&&(s=f,f=m,m=s,o=c,c=d,d=o),s=[],o=c+d,n=o;n--;)s.push(0);for(n=d;--n>=0;){for(e=0,a=c+n;a>n;)l=s[a]+m[n]*f[a-n-1]+e,s[a--]=l%ir|0,e=l/ir|0;s[a]=(s[a]+e)%ir|0}for(;!s[--o];)s.pop();return e?++r:s.shift(),t.d=s,t.e=r,Bt?St(t,h.precision):t};ye.toDecimalPlaces=ye.todp=function(t,e){var r=this,n=r.constructor;return r=new n(r),t===void 0?r:(ca(t,0,kc),e===void 0?e=n.rounding:ca(e,0,8),St(r,t+Jt(r)+1,e))};ye.toExponential=function(t,e){var r,n=this,a=n.constructor;return t===void 0?r=Gi(n,!0):(ca(t,0,kc),e===void 0?e=a.rounding:ca(e,0,8),n=St(new a(n),t+1,e),r=Gi(n,!0,t+1)),r};ye.toFixed=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?Gi(a):(ca(t,0,kc),e===void 0?e=s.rounding:ca(e,0,8),n=St(new s(a),t+Jt(a)+1,e),r=Gi(n.abs(),!1,t+Jt(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};ye.toInteger=ye.toint=function(){var t=this,e=t.constructor;return St(new e(t),Jt(t)+1,e.rounding)};ye.toNumber=function(){return+this};ye.toPower=ye.pow=function(t){var e,r,n,a,s,o,l=this,c=l.constructor,d=12,u=+(t=new c(t));if(!t.s)return new c(ln);if(l=new c(l),!l.s){if(t.s<1)throw Error(kn+"Infinity");return l}if(l.eq(ln))return l;if(n=c.precision,t.eq(ln))return St(l,n);if(e=t.e,r=t.d.length-1,o=e>=r,s=l.s,o){if((r=u<0?-u:u)<=hM){for(a=new c(ln),e=Math.ceil(n/Lt+4),Bt=!1;r%2&&(a=a.times(l),YS(a.d,e)),r=Nc(r/2),r!==0;)l=l.times(l),YS(l.d,e);return Bt=!0,t.s<0?new c(ln).div(a):St(a,n)}}else if(s<0)throw Error(kn+"NaN");return s=s<0&&t.d[Math.max(e,r)]&1?-1:1,l.s=1,Bt=!1,a=t.times(Ld(l,n+d)),Bt=!0,a=mM(a),a.s=s,a};ye.toPrecision=function(t,e){var r,n,a=this,s=a.constructor;return t===void 0?(r=Jt(a),n=Gi(a,r<=s.toExpNeg||r>=s.toExpPos)):(ca(t,1,kc),e===void 0?e=s.rounding:ca(e,0,8),a=St(new s(a),t,e),r=Jt(a),n=Gi(a,t<=r||r<=s.toExpNeg,t)),n};ye.toSignificantDigits=ye.tosd=function(t,e){var r=this,n=r.constructor;return t===void 0?(t=n.precision,e=n.rounding):(ca(t,1,kc),e===void 0?e=n.rounding:ca(e,0,8)),St(new n(r),t,e)};ye.toString=ye.valueOf=ye.val=ye.toJSON=ye[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Jt(t),r=t.constructor;return Gi(t,e<=r.toExpNeg||e>=r.toExpPos)};function fM(t,e){var r,n,a,s,o,l,c,d,u=t.constructor,h=u.precision;if(!t.s||!e.s)return e.s||(e=new u(t)),Bt?St(e,h):e;if(c=t.d,d=e.d,o=t.e,a=e.e,c=c.slice(),s=o-a,s){for(s<0?(n=c,s=-s,l=d.length):(n=d,a=o,l=c.length),o=Math.ceil(h/Lt),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=d.length,l-s<0&&(s=l,n=d,d=c,c=n),r=0;s;)r=(c[--s]=c[s]+d[s]+r)/ir|0,c[s]%=ir;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=a,Bt?St(e,h):e}function ca(t,e,r){if(t!==~~t||t<e||t>r)throw Error(Ai+t)}function sa(t){var e,r,n,a=t.length-1,s="",o=t[0];if(a>0){for(s+=o,e=1;e<a;e++)n=t[e]+"",r=Lt-n.length,r&&(s+=is(r)),s+=n;o=t[e],n=o+"",r=Lt-n.length,r&&(s+=is(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Da=function(){function t(n,a){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*a+o,n[l]=s%ir|0,o=s/ir|0;return o&&n.unshift(o),n}function e(n,a,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,s){for(var o=0;s--;)n[s]-=o,o=n[s]<a[s]?1:0,n[s]=o*ir+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,o){var l,c,d,u,h,f,m,v,p,g,y,b,w,j,_,S,N,k,E=n.constructor,P=n.s==a.s?1:-1,T=n.d,D=a.d;if(!n.s)return new E(n);if(!a.s)throw Error(kn+"Division by zero");for(c=n.e-a.e,N=D.length,_=T.length,m=new E(P),v=m.d=[],d=0;D[d]==(T[d]||0);)++d;if(D[d]>(T[d]||0)&&--c,s==null?b=s=E.precision:o?b=s+(Jt(n)-Jt(a))+1:b=s,b<0)return new E(0);if(b=b/Lt+2|0,d=0,N==1)for(u=0,D=D[0],b++;(d<_||u)&&b--;d++)w=u*ir+(T[d]||0),v[d]=w/D|0,u=w%D|0;else{for(u=ir/(D[0]+1)|0,u>1&&(D=t(D,u),T=t(T,u),N=D.length,_=T.length),j=N,p=T.slice(0,N),g=p.length;g<N;)p[g++]=0;k=D.slice(),k.unshift(0),S=D[0],D[1]>=ir/2&&++S;do u=0,l=e(D,p,N,g),l<0?(y=p[0],N!=g&&(y=y*ir+(p[1]||0)),u=y/S|0,u>1?(u>=ir&&(u=ir-1),h=t(D,u),f=h.length,g=p.length,l=e(h,p,f,g),l==1&&(u--,r(h,N<f?k:D,f))):(u==0&&(l=u=1),h=D.slice()),f=h.length,f<g&&h.unshift(0),r(p,h,g),l==-1&&(g=p.length,l=e(D,p,N,g),l<1&&(u++,r(p,N<g?k:D,g))),g=p.length):l===0&&(u++,p=[0]),v[d++]=u,l&&p[0]?p[g++]=T[j]||0:(p=[T[j]],g=1);while((j++<_||p[0]!==void 0)&&b--)}return v[0]||v.shift(),m.e=c,St(m,o?s+Jt(m)+1:s)}}();function mM(t,e){var r,n,a,s,o,l,c=0,d=0,u=t.constructor,h=u.precision;if(Jt(t)>16)throw Error(_w+Jt(t));if(!t.s)return new u(ln);for(e==null?(Bt=!1,l=h):l=e,o=new u(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(n=Math.log(si(2,d))/Math.LN10*2+5|0,l+=n,r=a=s=new u(ln),u.precision=l;;){if(a=St(a.times(t),l),r=r.times(++c),o=s.plus(Da(a,r,l)),sa(o.d).slice(0,l)===sa(s.d).slice(0,l)){for(;d--;)s=St(s.times(s),l);return u.precision=h,e==null?(Bt=!0,St(s,h)):s}s=o}}function Jt(t){for(var e=t.e*Lt,r=t.d[0];r>=10;r/=10)e++;return e}function tv(t,e,r){if(e>t.LN10.sd())throw Bt=!0,r&&(t.precision=r),Error(kn+"LN10 precision limit exceeded");return St(new t(t.LN10),e)}function is(t){for(var e="";t--;)e+="0";return e}function Ld(t,e){var r,n,a,s,o,l,c,d,u,h=1,f=10,m=t,v=m.d,p=m.constructor,g=p.precision;if(m.s<1)throw Error(kn+(m.s?"NaN":"-Infinity"));if(m.eq(ln))return new p(0);if(e==null?(Bt=!1,d=g):d=e,m.eq(10))return e==null&&(Bt=!0),tv(p,d);if(d+=f,p.precision=d,r=sa(v),n=r.charAt(0),s=Jt(m),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(t),r=sa(m.d),n=r.charAt(0),h++;s=Jt(m),n>1?(m=new p("0."+r),s++):m=new p(n+"."+r.slice(1))}else return c=tv(p,d+2,g).times(s+""),m=Ld(new p(n+"."+r.slice(1)),d-f).plus(c),p.precision=g,e==null?(Bt=!0,St(m,g)):m;for(l=o=m=Da(m.minus(ln),m.plus(ln),d),u=St(m.times(m),d),a=3;;){if(o=St(o.times(u),d),c=l.plus(Da(o,new p(a),d)),sa(c.d).slice(0,d)===sa(l.d).slice(0,d))return l=l.times(2),s!==0&&(l=l.plus(tv(p,d+2,g).times(s+""))),l=Da(l,new p(h),d),p.precision=g,e==null?(Bt=!0,St(l,g)):l;l=c,a+=2}}function JS(t,e){var r,n,a;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(n=e.search(/e/i))>0?(r<0&&(r=n),r+=+e.slice(n+1),e=e.substring(0,n)):r<0&&(r=e.length),n=0;e.charCodeAt(n)===48;)++n;for(a=e.length;e.charCodeAt(a-1)===48;)--a;if(e=e.slice(n,a),e){if(a-=n,r=r-n-1,t.e=Nc(r/Lt),t.d=[],n=(r+1)%Lt,r<0&&(n+=Lt),n<a){for(n&&t.d.push(+e.slice(0,n)),a-=Lt;n<a;)t.d.push(+e.slice(n,n+=Lt));e=e.slice(n),n=Lt-e.length}else n-=a;for(;n--;)e+="0";if(t.d.push(+e),Bt&&(t.e>Pf||t.e<-Pf))throw Error(_w+r)}else t.s=0,t.e=0,t.d=[0];return t}function St(t,e,r){var n,a,s,o,l,c,d,u,h=t.d;for(o=1,s=h[0];s>=10;s/=10)o++;if(n=e-o,n<0)n+=Lt,a=e,d=h[u=0];else{if(u=Math.ceil((n+1)/Lt),s=h.length,u>=s)return t;for(d=s=h[u],o=1;s>=10;s/=10)o++;n%=Lt,a=n-Lt+o}if(r!==void 0&&(s=si(10,o-a-1),l=d/s%10|0,c=e<0||h[u+1]!==void 0||d%s,c=r<4?(l||c)&&(r==0||r==(t.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?d/si(10,o-a):0:h[u-1])%10&1||r==(t.s<0?8:7))),e<1||!h[0])return c?(s=Jt(t),h.length=1,e=e-s-1,h[0]=si(10,(Lt-e%Lt)%Lt),t.e=Nc(-e/Lt)||0):(h.length=1,h[0]=t.e=t.s=0),t;if(n==0?(h.length=u,s=1,u--):(h.length=u+1,s=si(10,Lt-n),h[u]=a>0?(d/si(10,o-a)%si(10,a)|0)*s:0),c)for(;;)if(u==0){(h[0]+=s)==ir&&(h[0]=1,++t.e);break}else{if(h[u]+=s,h[u]!=ir)break;h[u--]=0,s=1}for(n=h.length;h[--n]===0;)h.pop();if(Bt&&(t.e>Pf||t.e<-Pf))throw Error(_w+Jt(t));return t}function gM(t,e){var r,n,a,s,o,l,c,d,u,h,f=t.constructor,m=f.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new f(t),Bt?St(e,m):e;if(c=t.d,h=e.d,n=e.e,d=t.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),a=Math.max(Math.ceil(m/Lt),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=h.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){u=c[a]<h[a];break}o=0}for(u&&(r=c,c=h,h=r,e.s=-e.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(s=a;s&&c[--s]===0;)c[s]=ir-1;--c[s],c[a]+=ir}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(e.d=c,e.e=n,Bt?St(e,m):e):new f(0)}function Gi(t,e,r){var n,a=Jt(t),s=sa(t.d),o=s.length;return e?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+is(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+is(-a-1)+s,r&&(n=r-o)>0&&(s+=is(n))):a>=o?(s+=is(a+1-o),r&&(n=r-a-1)>0&&(s=s+"."+is(n))):((n=a+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(s+="."),s+=is(n))),t.s<0?"-"+s:s}function YS(t,e){if(t.length>e)return t.length=e,!0}function pM(t){var e,r,n;function a(s){var o=this;if(!(o instanceof a))return new a(s);if(o.constructor=a,s instanceof a){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ai+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return JS(o,s.toString())}else if(typeof s!="string")throw Error(Ai+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,aoe.test(s))JS(o,s);else throw Error(Ai+s)}if(a.prototype=ye,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=pM,a.config=a.set=soe,t===void 0&&(t={}),t)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<n.length;)t.hasOwnProperty(r=n[e++])||(t[r]=this[r]);return a.config(t),a}function soe(t){if(!t||typeof t!="object")throw Error(kn+"Object expected");var e,r,n,a=["precision",1,kc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<a.length;e+=3)if((n=t[r=a[e]])!==void 0)if(Nc(n)===n&&n>=a[e+1]&&n<=a[e+2])this[r]=n;else throw Error(Ai+r+": "+n);if((n=t[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ai+r+": "+n);return this}var jw=pM(noe);ln=new jw(1);const yt=jw;function ioe(t){return doe(t)||coe(t)||loe(t)||ooe()}function ooe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function loe(t,e){if(t){if(typeof t=="string")return nb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nb(t,e)}}function coe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function doe(t){if(Array.isArray(t))return nb(t)}function nb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var uoe=function(e){return e},vM={"@@functional/placeholder":!0},yM=function(e){return e===vM},XS=function(e){return function r(){return arguments.length===0||arguments.length===1&&yM(arguments.length<=0?void 0:arguments[0])?r:e.apply(void 0,arguments)}},hoe=function t(e,r){return e===1?r:XS(function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];var o=a.filter(function(l){return l!==vM}).length;return o>=e?r.apply(void 0,a):t(e-o,XS(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(h){return yM(h)?c.shift():h});return r.apply(void 0,ioe(u).concat(c))}))})},Dg=function(e){return hoe(e.length,e)},ab=function(e,r){for(var n=[],a=e;a<r;++a)n[a-e]=a;return n},foe=Dg(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(r){return e[r]}).map(t)}),moe=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return uoe;var a=r.reverse(),s=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},sb=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},bM=function(e){var r=null,n=null;return function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=e.apply(void 0,s)),n}};function goe(t){var e;return t===0?e=1:e=Math.floor(new yt(t).abs().log(10).toNumber())+1,e}function poe(t,e,r){for(var n=new yt(t),a=0,s=[];n.lt(e)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}var voe=Dg(function(t,e,r){var n=+t,a=+e;return n+r*(a-n)}),yoe=Dg(function(t,e,r){var n=e-+t;return n=n||1/0,(r-t)/n}),boe=Dg(function(t,e,r){var n=e-+t;return n=n||1/0,Math.max(0,Math.min(1,(r-t)/n))});const Pg={rangeStep:poe,getDigitCount:goe,interpolateNumber:voe,uninterpolateNumber:yoe,uninterpolateTruncation:boe};function ib(t){return _oe(t)||woe(t)||xM(t)||xoe()}function xoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function woe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function _oe(t){if(Array.isArray(t))return ob(t)}function Fd(t,e){return koe(t)||Soe(t,e)||xM(t,e)||joe()}function joe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xM(t,e){if(t){if(typeof t=="string")return ob(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ob(t,e)}}function ob(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Soe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var r=[],n=!0,a=!1,s=void 0;try{for(var o=t[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(e&&r.length===e));n=!0);}catch(c){a=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw s}}return r}}function koe(t){if(Array.isArray(t))return t}function wM(t){var e=Fd(t,2),r=e[0],n=e[1],a=r,s=n;return r>n&&(a=n,s=r),[a,s]}function _M(t,e,r){if(t.lte(0))return new yt(0);var n=Pg.getDigitCount(t.toNumber()),a=new yt(10).pow(n),s=t.div(a),o=n!==1?.05:.1,l=new yt(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return e?c:new yt(Math.ceil(c))}function Noe(t,e,r){var n=1,a=new yt(t);if(!a.isint()&&r){var s=Math.abs(t);s<1?(n=new yt(10).pow(Pg.getDigitCount(t)-1),a=new yt(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new yt(Math.floor(t)))}else t===0?a=new yt(Math.floor((e-1)/2)):r||(a=new yt(Math.floor(t)));var o=Math.floor((e-1)/2),l=moe(foe(function(c){return a.add(new yt(c-o).mul(n)).toNumber()}),ab);return l(0,e)}function jM(t,e,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(r-1)))return{step:new yt(0),tickMin:new yt(0),tickMax:new yt(0)};var s=_M(new yt(e).sub(t).div(r-1),n,a),o;t<=0&&e>=0?o=new yt(0):(o=new yt(t).add(e).div(2),o=o.sub(new yt(o).mod(s)));var l=Math.ceil(o.sub(t).div(s).toNumber()),c=Math.ceil(new yt(e).sub(o).div(s).toNumber()),d=l+c+1;return d>r?jM(t,e,r,n,a+1):(d<r&&(c=e>0?c+(r-d):c,l=e>0?l:l+(r-d)),{step:s,tickMin:o.sub(new yt(l).mul(s)),tickMax:o.add(new yt(c).mul(s))})}function Eoe(t){var e=Fd(t,2),r=e[0],n=e[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=wM([r,n]),c=Fd(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(ib(ab(0,a-1).map(function(){return 1/0}))):[].concat(ib(ab(0,a-1).map(function(){return-1/0})),[u]);return r>n?sb(h):h}if(d===u)return Noe(d,a,s);var f=jM(d,u,o,s),m=f.step,v=f.tickMin,p=f.tickMax,g=Pg.rangeStep(v,p.add(new yt(.1).mul(m)),m);return r>n?sb(g):g}function Coe(t,e){var r=Fd(t,2),n=r[0],a=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=wM([n,a]),l=Fd(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,a];if(c===d)return[c];var u=Math.max(e,2),h=_M(new yt(d).sub(c).div(u-1),s,0),f=[].concat(ib(Pg.rangeStep(new yt(c),new yt(d).sub(new yt(.99).mul(h)),h)),[d]);return n>a?sb(f):f}var Aoe=bM(Eoe),Toe=bM(Coe),Doe="Invariant failed";function Vi(t,e){throw new Error(Doe)}var Poe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Fl(t){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fl(t)}function Mf(){return Mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Mf.apply(this,arguments)}function Moe(t,e){return Ioe(t)||$oe(t,e)||Roe(t,e)||Ooe()}function Ooe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Roe(t,e){if(t){if(typeof t=="string")return ZS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZS(t,e)}}function ZS(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $oe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Ioe(t){if(Array.isArray(t))return t}function Loe(t,e){if(t==null)return{};var r=Foe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Foe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Boe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qoe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NM(n.key),n)}}function Uoe(t,e,r){return e&&qoe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zoe(t,e,r){return e=Of(e),Hoe(t,SM()?Reflect.construct(e,r||[],Of(t).constructor):e.apply(t,r))}function Hoe(t,e){if(e&&(Fl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Woe(t)}function Woe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function SM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SM=function(){return!!t})()}function Of(t){return Of=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Of(t)}function Koe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lb(t,e)}function lb(t,e){return lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},lb(t,e)}function kM(t,e,r){return e=NM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NM(t){var e=Goe(t,"string");return Fl(e)=="symbol"?e:e+""}function Goe(t,e){if(Fl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mg=function(t){function e(){return Boe(this,e),zoe(this,e,arguments)}return Koe(e,t),Uoe(e,[{key:"render",value:function(){var n=this.props,a=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,u=n.xAxis,h=n.yAxis,f=Loe(n,Poe),m=Be(f,!1);this.props.direction==="x"&&u.type!=="number"&&Vi();var v=c.map(function(p){var g=d(p,l),y=g.x,b=g.y,w=g.value,j=g.errorVal;if(!j)return null;var _=[],S,N;if(Array.isArray(j)){var k=Moe(j,2);S=k[0],N=k[1]}else S=N=j;if(s==="vertical"){var E=u.scale,P=b+a,T=P+o,D=P-o,A=E(w-S),C=E(w+N);_.push({x1:C,y1:T,x2:C,y2:D}),_.push({x1:A,y1:P,x2:C,y2:P}),_.push({x1:A,y1:T,x2:A,y2:D})}else if(s==="horizontal"){var R=h.scale,L=y+a,M=L-o,I=L+o,B=R(w-S),H=R(w+N);_.push({x1:M,y1:H,x2:I,y2:H}),_.push({x1:L,y1:B,x2:L,y2:H}),_.push({x1:M,y1:B,x2:I,y2:B})}return $.createElement(gt,Mf({className:"recharts-errorBar",key:"bar-".concat(_.map(function(q){return"".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))},m),_.map(function(q){return $.createElement("line",Mf({},q,{key:"line-".concat(q.x1,"-").concat(q.x2,"-").concat(q.y1,"-").concat(q.y2)}))}))});return $.createElement(gt,{className:"recharts-errorBars"},v)}}])}($.Component);kM(Mg,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});kM(Mg,"displayName","ErrorBar");function Bd(t){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bd(t)}function ek(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ys(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ek(Object(r),!0).forEach(function(n){Voe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Voe(t,e,r){return e=Qoe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qoe(t){var e=Joe(t,"string");return Bd(e)=="symbol"?e:e+""}function Joe(t,e){if(Bd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var EM=function(e){var r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,s=e.legendContent,o=sn(r,tl);if(!o)return null;var l=tl.defaultProps,c=l!==void 0?Ys(Ys({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:s==="children"?d=(n||[]).reduce(function(u,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return u.concat(v.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):d=(n||[]).map(function(u){var h=u.item,f=h.type.defaultProps,m=f!==void 0?Ys(Ys({},f),h.props):{},v=m.dataKey,p=m.name,g=m.legendType,y=m.hide;return{inactive:y,dataKey:v,type:c.iconType||g||"square",color:Sw(h),value:p||v,payload:m}}),Ys(Ys(Ys({},c),tl.getWithHeight(o,a)),{},{payload:d,item:o})};function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function tk(t){return ele(t)||Zoe(t)||Xoe(t)||Yoe()}function Yoe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xoe(t,e){if(t){if(typeof t=="string")return cb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cb(t,e)}}function Zoe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ele(t){if(Array.isArray(t))return cb(t)}function cb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function rk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rk(Object(r),!0).forEach(function(n){nl(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nl(t,e,r){return e=tle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function tle(t){var e=rle(t,"string");return qd(e)=="symbol"?e:e+""}function rle(t,e){if(qd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xr(t,e,r){return Ze(t)||Ze(e)?r:nr(e)?dn(t,e,r):Ue(e)?e(t):r}function fd(t,e,r,n){var a=Zie(t,function(l){return xr(l,e)});if(r==="number"){var s=a.filter(function(l){return de(l)||parseFloat(l)});return s.length?[Ag(s),Cg(s)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!Ze(l)}):a;return o.map(function(l){return nr(l)||l instanceof Date?l:""})}var nle=function(e){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,h=a[d].coordinate,f=d>=l-1?a[0].coordinate:a[d+1].coordinate,m=void 0;if(Or(h-u)!==Or(f-h)){var v=[];if(Or(f-h)===Or(c[1]-c[0])){m=f;var p=h+c[1]-c[0];v[0]=Math.min(p,(p+u)/2),v[1]=Math.max(p,(p+u)/2)}else{m=u;var g=f+c[1]-c[0];v[0]=Math.min(h,(g+h)/2),v[1]=Math.max(h,(g+h)/2)}var y=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(e>y[0]&&e<=y[1]||e>=v[0]&&e<=v[1]){o=a[d].index;break}}else{var b=Math.min(u,f),w=Math.max(u,f);if(e>(b+h)/2&&e<=(w+h)/2){o=a[d].index;break}}}else for(var j=0;j<l;j++)if(j===0&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<l-1&&e>(n[j].coordinate+n[j-1].coordinate)/2&&e<=(n[j].coordinate+n[j+1].coordinate)/2||j===l-1&&e>(n[j].coordinate+n[j-1].coordinate)/2){o=n[j].index;break}return o},Sw=function(e){var r,n=e,a=n.type.displayName,s=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Wt(Wt({},e.type.defaultProps),e.props):e.props,o=s.stroke,l=s.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},ale=function(e){var r=e.barSize,n=e.totalSize,a=e.stackGroups,s=a===void 0?{}:a;if(!s)return{};for(var o={},l=Object.keys(s),c=0,d=l.length;c<d;c++)for(var u=s[l[c]].stackGroups,h=Object.keys(u),f=0,m=h.length;f<m;f++){var v=u[h[f]],p=v.items,g=v.cateAxisId,y=p.filter(function(N){return Aa(N.type).indexOf("Bar")>=0});if(y&&y.length){var b=y[0].type.defaultProps,w=b!==void 0?Wt(Wt({},b),y[0].props):y[0].props,j=w.barSize,_=w[g];o[_]||(o[_]=[]);var S=Ze(j)?r:j;o[_].push({item:y[0],stackList:y.slice(1),barSize:Ze(S)?void 0:Rr(S,n,0)})}}return o},sle=function(e){var r=e.barGap,n=e.barCategoryGap,a=e.bandSize,s=e.sizeList,o=s===void 0?[]:s,l=e.maxBarSize,c=o.length;if(c<1)return null;var d=Rr(r,a,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=a/c,v=o.reduce(function(j,_){return j+_.barSize||0},0);v+=(c-1)*d,v>=a&&(v-=(c-1)*d,d=0),v>=a&&m>0&&(f=!0,m*=.9,v=c*m);var p=(a-v)/2>>0,g={offset:p-d,size:0};u=o.reduce(function(j,_){var S={item:_.item,position:{offset:g.offset+g.size+d,size:f?m:_.barSize}},N=[].concat(tk(j),[S]);return g=N[N.length-1].position,_.stackList&&_.stackList.length&&_.stackList.forEach(function(k){N.push({item:k,position:g})}),N},h)}else{var y=Rr(n,a,0,!0);a-2*y-(c-1)*d<=0&&(d=0);var b=(a-2*y-(c-1)*d)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;u=o.reduce(function(j,_,S){var N=[].concat(tk(j),[{item:_.item,position:{offset:y+(b+d)*S+(b-w)/2,size:w}}]);return _.stackList&&_.stackList.length&&_.stackList.forEach(function(k){N.push({item:k,position:N[N.length-1].position})}),N},h)}return u},ile=function(e,r,n,a){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=EM({children:s,legendWidth:c});if(d){var u=a||{},h=u.width,f=u.height,m=d.align,v=d.verticalAlign,p=d.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&m!=="center"&&de(e[m]))return Wt(Wt({},e),{},nl({},m,e[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&v!=="middle"&&de(e[v]))return Wt(Wt({},e),{},nl({},v,e[v]+(f||0)))}return e},ole=function(e,r,n){return Ze(r)?!0:e==="horizontal"?r==="yAxis":e==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},CM=function(e,r,n,a,s){var o=r.props.children,l=Sn(o,Mg).filter(function(d){return ole(a,s,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return e.reduce(function(d,u){var h=xr(u,n);if(Ze(h))return d;var f=Array.isArray(h)?[Ag(h),Cg(h)]:[h,h],m=c.reduce(function(v,p){var g=xr(u,p,0),y=f[0]-Math.abs(Array.isArray(g)?g[0]:g),b=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(y,v[0]),Math.max(b,v[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},lle=function(e,r,n,a,s){var o=r.map(function(l){return CM(e,l,n,s,a)}).filter(function(l){return!Ze(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},AM=function(e,r,n,a,s){var o=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&CM(e,c,d,a)||fd(e,d,n,s)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},TM=function(e,r){return e==="horizontal"&&r==="xAxis"||e==="vertical"&&r==="yAxis"||e==="centric"&&r==="angleAxis"||e==="radial"&&r==="radiusAxis"},DM=function(e,r,n,a){if(a)return e.map(function(c){return c.coordinate});var s,o,l=e.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},Na=function(e,r,n){if(!e)return null;var a=e.scale,s=e.duplicateDomain,o=e.type,l=e.range,c=e.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Or(l[0]-l[1])*2*d:d,r&&(e.ticks||e.niceTicks)){var u=(e.ticks||e.niceTicks).map(function(h){var f=s?s.indexOf(h):h;return{coordinate:a(f)+d,value:h,offset:d}});return u.filter(function(h){return!Du(h.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(h,f){return{coordinate:a(h)+d,value:h,index:f,offset:d}}):a.ticks&&!n?a.ticks(e.tickCount).map(function(h){return{coordinate:a(h)+d,value:h,offset:d}}):a.domain().map(function(h,f){return{coordinate:a(h)+d,value:s?s[h]:h,index:f,offset:d}})},rv=new WeakMap,fh=function(e,r){if(typeof r!="function")return e;rv.has(e)||rv.set(e,new WeakMap);var n=rv.get(e);if(n.has(r))return n.get(r);var a=function(){e.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},PM=function(e,r,n){var a=e.scale,s=e.type,o=e.layout,l=e.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Md(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Cf(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:hd(),realScaleType:"point"}:s==="category"?{scale:Md(),realScaleType:"band"}:{scale:Cf(),realScaleType:"linear"};if(Hi(a)){var c="scale".concat(mg(a));return{scale:(QS[c]||hd)(),realScaleType:QS[c]?c:"point"}}return Ue(a)?{scale:a}:{scale:hd(),realScaleType:"point"}},nk=1e-4,MM=function(e){var r=e.domain();if(!(!r||r.length<=2)){var n=r.length,a=e.range(),s=Math.min(a[0],a[1])-nk,o=Math.max(a[0],a[1])+nk,l=e(r[0]),c=e(r[n-1]);(l<s||l>o||c<s||c>o)&&e.domain([r[0],r[n-1]])}},cle=function(e,r){if(!e)return null;for(var n=0,a=e.length;n<a;n++)if(e[n].item===r)return e[n].position;return null},dle=function(e,r){if(!r||r.length!==2||!de(r[0])||!de(r[1]))return e;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),s=[e[0],e[1]];return(!de(e[0])||e[0]<n)&&(s[0]=n),(!de(e[1])||e[1]>a)&&(s[1]=a),s[0]>a&&(s[0]=a),s[1]<n&&(s[1]=n),s},ule=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0,l=0;l<r;++l){var c=Du(e[l][n][1])?e[l][n][0]:e[l][n][1];c>=0?(e[l][n][0]=s,e[l][n][1]=s+c,s=e[l][n][1]):(e[l][n][0]=o,e[l][n][1]=o+c,o=e[l][n][1])}},hle=function(e){var r=e.length;if(!(r<=0))for(var n=0,a=e[0].length;n<a;++n)for(var s=0,o=0;o<r;++o){var l=Du(e[o][n][1])?e[o][n][0]:e[o][n][1];l>=0?(e[o][n][0]=s,e[o][n][1]=s+l,s=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}},fle={sign:ule,expand:PV,none:Dl,silhouette:MV,wiggle:OV,positive:hle},mle=function(e,r,n){var a=r.map(function(l){return l.props.dataKey}),s=fle[n],o=DV().keys(a).value(function(l,c){return+xr(l,c,0)}).order(Oy).offset(s);return o(e)},gle=function(e,r,n,a,s,o){if(!e)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?Wt(Wt({},f.type.defaultProps),f.props):f.props,p=v.stackId,g=v.hide;if(g)return h;var y=v[n],b=h[y]||{hasStack:!1,stackGroups:{}};if(nr(p)){var w=b.stackGroups[p]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(f),b.hasStack=!0,b.stackGroups[p]=w}else b.stackGroups[Pu("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[f]};return Wt(Wt({},h),{},nl({},y,b))},c),u={};return Object.keys(d).reduce(function(h,f){var m=d[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,g){var y=m.stackGroups[g];return Wt(Wt({},p),{},nl({},g,{numericAxisId:n,cateAxisId:a,items:y.items,stackedData:mle(e,y.items,s)}))},v)}return Wt(Wt({},h),{},nl({},f,m))},u)},OM=function(e,r){var n=r.realScaleType,a=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=e.domain();if(!d.length)return null;var u=Aoe(d,s,l);return e.domain([Ag(u),Cg(u)]),{niceTicks:u}}if(s&&a==="number"){var h=e.domain(),f=Toe(h,s,l);return{niceTicks:f}}return null},ak=function(e){var r=e.axis,n=e.ticks,a=e.offset,s=e.bandSize,o=e.entry,l=e.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=xr(o,r.dataKey,r.domain[l]);return Ze(c)?null:r.scale(c)-s/2+a},ple=function(e){var r=e.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return a<=0&&s>=0?0:s<0?s:a}return n[0]},vle=function(e,r){var n,a=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Wt(Wt({},e.type.defaultProps),e.props):e.props,s=a.stackId;if(nr(s)){var o=r[s];if(o){var l=o.items.indexOf(e);return l>=0?o.stackedData[l]:null}}return null},yle=function(e){return e.reduce(function(r,n){return[Ag(n.concat([r[0]]).filter(de)),Cg(n.concat([r[1]]).filter(de))]},[1/0,-1/0])},RM=function(e,r,n){return Object.keys(e).reduce(function(a,s){var o=e[s],l=o.stackedData,c=l.reduce(function(d,u){var h=yle(u.slice(r,n+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},sk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ik=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,db=function(e,r,n){if(Ue(e))return e(r,n);if(!Array.isArray(e))return r;var a=[];if(de(e[0]))a[0]=n?e[0]:Math.min(e[0],r[0]);else if(sk.test(e[0])){var s=+sk.exec(e[0])[1];a[0]=r[0]-s}else Ue(e[0])?a[0]=e[0](r[0]):a[0]=r[0];if(de(e[1]))a[1]=n?e[1]:Math.max(e[1],r[1]);else if(ik.test(e[1])){var o=+ik.exec(e[1])[1];a[1]=r[1]+o}else Ue(e[1])?a[1]=e[1](r[1]):a[1]=r[1];return a},Rf=function(e,r,n){if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&r&&r.length>=2){for(var s=X0(r,function(h){return h.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var d=s[l],u=s[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},ok=function(e,r,n){return!e||!e.length||Tg(e,dn(n,"type.defaultProps.domain"))?r:e},$M=function(e,r){var n=e.type.defaultProps?Wt(Wt({},e.type.defaultProps),e.props):e.props,a=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,u=n.hide;return Wt(Wt({},Be(e,!1)),{},{dataKey:a,unit:o,formatter:l,name:s||a,color:Sw(e),value:xr(r,a),type:c,payload:r,chartType:d,hide:u})};function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function lk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function wa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lk(Object(r),!0).forEach(function(n){IM(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function IM(t,e,r){return e=ble(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ble(t){var e=xle(t,"string");return Ud(e)=="symbol"?e:e+""}function xle(t,e){if(Ud(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ud(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wle(t,e){return kle(t)||Sle(t,e)||jle(t,e)||_le()}function _le(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jle(t,e){if(t){if(typeof t=="string")return ck(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ck(t,e)}}function ck(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sle(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function kle(t){if(Array.isArray(t))return t}var $f=Math.PI/180,Nle=function(e){return e*180/Math.PI},Dt=function(e,r,n,a){return{x:e+Math.cos(-$f*a)*n,y:r+Math.sin(-$f*a)*n}},LM=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Ele=function(e,r,n,a,s){var o=e.width,l=e.height,c=e.startAngle,d=e.endAngle,u=Rr(e.cx,o,o/2),h=Rr(e.cy,l,l/2),f=LM(o,l,n),m=Rr(e.innerRadius,f,0),v=Rr(e.outerRadius,f,f*.8),p=Object.keys(r);return p.reduce(function(g,y){var b=r[y],w=b.domain,j=b.reversed,_;if(Ze(b.range))a==="angleAxis"?_=[c,d]:a==="radiusAxis"&&(_=[m,v]),j&&(_=[_[1],_[0]]);else{_=b.range;var S=_,N=wle(S,2);c=N[0],d=N[1]}var k=PM(b,s),E=k.realScaleType,P=k.scale;P.domain(w).range(_),MM(P);var T=OM(P,wa(wa({},b),{},{realScaleType:E})),D=wa(wa(wa({},b),T),{},{range:_,radius:v,realScaleType:E,scale:P,cx:u,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:d});return wa(wa({},g),{},IM({},y,D))},{})},Cle=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(a-o,2))},Ale=function(e,r){var n=e.x,a=e.y,s=r.cx,o=r.cy,l=Cle({x:n,y:a},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:Nle(d),angleInRadian:d}},Tle=function(e){var r=e.startAngle,n=e.endAngle,a=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(a,s);return{startAngle:r-o*360,endAngle:n-o*360}},Dle=function(e,r){var n=r.startAngle,a=r.endAngle,s=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(s,o);return e+l*360},dk=function(e,r){var n=e.x,a=e.y,s=Ale({x:n,y:a},r),o=s.radius,l=s.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=Tle(r),h=u.startAngle,f=u.endAngle,m=l,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?wa(wa({},r),{},{radius:o,angle:Dle(m,r)}):null},FM=function(e){return!x.isValidElement(e)&&!Ue(e)&&typeof e!="boolean"?e.className:""};function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}var Ple=["offset"];function Mle(t){return Ile(t)||$le(t)||Rle(t)||Ole()}function Ole(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rle(t,e){if(t){if(typeof t=="string")return ub(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ub(t,e)}}function $le(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ile(t){if(Array.isArray(t))return ub(t)}function ub(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lle(t,e){if(t==null)return{};var r=Fle(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fle(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function uk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uk(Object(r),!0).forEach(function(n){Ble(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Ble(t,e,r){return e=qle(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qle(t){var e=Ule(t,"string");return zd(e)=="symbol"?e:e+""}function Ule(t,e){if(zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hd.apply(this,arguments)}var zle=function(e){var r=e.value,n=e.formatter,a=Ze(e.children)?r:e.children;return Ue(n)?n(a):a},Hle=function(e,r){var n=Or(r-e),a=Math.min(Math.abs(r-e),360);return n*a},Wle=function(e,r,n){var a=e.position,s=e.viewBox,o=e.offset,l=e.className,c=s,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,p=c.clockWise,g=(h+f)/2,y=Hle(m,v),b=y>=0?1:-1,w,j;a==="insideStart"?(w=m+b*o,j=p):a==="insideEnd"?(w=v-b*o,j=!p):a==="end"&&(w=v+b*o,j=p),j=y<=0?j:!j;var _=Dt(d,u,g,w),S=Dt(d,u,g,w+(j?1:-1)*359),N="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(j?0:1,`,
    `).concat(S.x,",").concat(S.y),k=Ze(e.id)?Pu("recharts-radial-line-"):e.id;return $.createElement("text",Hd({},n,{dominantBaseline:"central",className:Ge("recharts-radial-bar-label",l)}),$.createElement("defs",null,$.createElement("path",{id:k,d:N})),$.createElement("textPath",{xlinkHref:"#".concat(k)},r))},Kle=function(e){var r=e.viewBox,n=e.offset,a=e.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,d=s.outerRadius,u=s.startAngle,h=s.endAngle,f=(u+h)/2;if(a==="outside"){var m=Dt(o,l,d+n,f),v=m.x,p=m.y;return{x:v,y:p,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,y=Dt(o,l,g,f),b=y.x,w=y.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Gle=function(e){var r=e.viewBox,n=e.parentViewBox,a=e.offset,s=e.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,f=h*a,m=h>0?"end":"start",v=h>0?"start":"end",p=d>=0?1:-1,g=p*a,y=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var w={x:l+d/2,y:c-h*a,textAnchor:"middle",verticalAnchor:m};return Zt(Zt({},w),n?{height:Math.max(c-n.y,0),width:d}:{})}if(s==="bottom"){var j={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:v};return Zt(Zt({},j),n?{height:Math.max(n.y+n.height-(c+u),0),width:d}:{})}if(s==="left"){var _={x:l-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Zt(Zt({},_),n?{width:Math.max(_.x-n.x,0),height:u}:{})}if(s==="right"){var S={x:l+d+g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Zt(Zt({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:u}:{})}var N=n?{width:d,height:u}:{};return s==="insideLeft"?Zt({x:l+g,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},N):s==="insideRight"?Zt({x:l+d-g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},N):s==="insideTop"?Zt({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:v},N):s==="insideBottom"?Zt({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:m},N):s==="insideTopLeft"?Zt({x:l+g,y:c+f,textAnchor:b,verticalAnchor:v},N):s==="insideTopRight"?Zt({x:l+d-g,y:c+f,textAnchor:y,verticalAnchor:v},N):s==="insideBottomLeft"?Zt({x:l+g,y:c+u-f,textAnchor:b,verticalAnchor:m},N):s==="insideBottomRight"?Zt({x:l+d-g,y:c+u-f,textAnchor:y,verticalAnchor:m},N):vc(s)&&(de(s.x)||mi(s.x))&&(de(s.y)||mi(s.y))?Zt({x:l+Rr(s.x,d),y:c+Rr(s.y,u),textAnchor:"end",verticalAnchor:"end"},N):Zt({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},N)},Vle=function(e){return"cx"in e&&de(e.cx)};function or(t){var e=t.offset,r=e===void 0?5:e,n=Lle(t,Ple),a=Zt({offset:r},n),s=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,h=u===void 0?"":u,f=a.textBreakAll;if(!s||Ze(l)&&Ze(c)&&!x.isValidElement(d)&&!Ue(d))return null;if(x.isValidElement(d))return x.cloneElement(d,a);var m;if(Ue(d)){if(m=x.createElement(d,a),x.isValidElement(m))return m}else m=zle(a);var v=Vle(s),p=Be(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Wle(a,m,p);var g=v?Kle(a):Gle(a);return $.createElement(Ki,Hd({className:Ge("recharts-label",h)},p,g,{breakAll:f}),m)}or.displayName="Label";var BM=function(e){var r=e.cx,n=e.cy,a=e.angle,s=e.startAngle,o=e.endAngle,l=e.r,c=e.radius,d=e.innerRadius,u=e.outerRadius,h=e.x,f=e.y,m=e.top,v=e.left,p=e.width,g=e.height,y=e.clockWise,b=e.labelViewBox;if(b)return b;if(de(p)&&de(g)){if(de(h)&&de(f))return{x:h,y:f,width:p,height:g};if(de(m)&&de(v))return{x:m,y:v,width:p,height:g}}return de(h)&&de(f)?{x:h,y:f,width:0,height:0}:de(r)&&de(n)?{cx:r,cy:n,startAngle:s||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:y}:e.viewBox?e.viewBox:{}},Qle=function(e,r){return e?e===!0?$.createElement(or,{key:"label-implicit",viewBox:r}):nr(e)?$.createElement(or,{key:"label-implicit",viewBox:r,value:e}):x.isValidElement(e)?e.type===or?x.cloneElement(e,{key:"label-implicit",viewBox:r}):$.createElement(or,{key:"label-implicit",content:e,viewBox:r}):Ue(e)?$.createElement(or,{key:"label-implicit",content:e,viewBox:r}):vc(e)?$.createElement(or,Hd({viewBox:r},e,{key:"label-implicit"})):null:null},Jle=function(e,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var a=e.children,s=BM(e),o=Sn(a,or).map(function(c,d){return x.cloneElement(c,{viewBox:r||s,key:"label-".concat(d)})});if(!n)return o;var l=Qle(e.label,r||s);return[l].concat(Mle(o))};or.parseViewBox=BM;or.renderCallByParent=Jle;function Yle(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Xle=Yle;const Zle=jt(Xle);function Wd(t){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wd(t)}var ece=["valueAccessor"],tce=["data","dataKey","clockWise","id","textBreakAll"];function rce(t){return ice(t)||sce(t)||ace(t)||nce()}function nce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ace(t,e){if(t){if(typeof t=="string")return hb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hb(t,e)}}function sce(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ice(t){if(Array.isArray(t))return hb(t)}function hb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},If.apply(this,arguments)}function hk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function fk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hk(Object(r),!0).forEach(function(n){oce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oce(t,e,r){return e=lce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lce(t){var e=cce(t,"string");return Wd(e)=="symbol"?e:e+""}function cce(t,e){if(Wd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Wd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mk(t,e){if(t==null)return{};var r=dce(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dce(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var uce=function(e){return Array.isArray(e.value)?Zle(e.value):e.value};function Es(t){var e=t.valueAccessor,r=e===void 0?uce:e,n=mk(t,ece),a=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=mk(n,tce);return!a||!a.length?null:$.createElement(gt,{className:"recharts-label-list"},a.map(function(u,h){var f=Ze(s)?r(u,h):xr(u&&u.payload,s),m=Ze(l)?{}:{id:"".concat(l,"-").concat(h)};return $.createElement(or,If({},Be(u,!0),d,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:or.parseViewBox(Ze(o)?u:fk(fk({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Es.displayName="LabelList";function hce(t,e){return t?t===!0?$.createElement(Es,{key:"labelList-implicit",data:e}):$.isValidElement(t)||Ue(t)?$.createElement(Es,{key:"labelList-implicit",data:e,content:t}):vc(t)?$.createElement(Es,If({data:e},t,{key:"labelList-implicit"})):null:null}function fce(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var n=t.children,a=Sn(n,Es).map(function(o,l){return x.cloneElement(o,{data:e,key:"labelList-".concat(l)})});if(!r)return a;var s=hce(t.label,e);return[s].concat(rce(a))}Es.renderCallByParent=fce;function Kd(t){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kd(t)}function fb(){return fb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},fb.apply(this,arguments)}function gk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function pk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gk(Object(r),!0).forEach(function(n){mce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function mce(t,e,r){return e=gce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gce(t){var e=pce(t,"string");return Kd(e)=="symbol"?e:e+""}function pce(t,e){if(Kd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vce=function(e,r){var n=Or(r-e),a=Math.min(Math.abs(r-e),359.999);return n*a},mh=function(e){var r=e.cx,n=e.cy,a=e.radius,s=e.angle,o=e.sign,l=e.isExternal,c=e.cornerRadius,d=e.cornerIsExternal,u=c*(l?1:-1)+a,h=Math.asin(c/u)/$f,f=d?s:s+o*h,m=Dt(r,n,u,f),v=Dt(r,n,a,f),p=d?s-o*h:s,g=Dt(r,n,u*Math.cos(h*$f),p);return{center:m,circleTangency:v,lineTangency:g,theta:h}},qM=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.startAngle,l=e.endAngle,c=vce(o,l),d=o+c,u=Dt(r,n,s,o),h=Dt(r,n,s,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var m=Dt(r,n,a,o),v=Dt(r,n,a,d);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(r,",").concat(n," Z");return f},yce=function(e){var r=e.cx,n=e.cy,a=e.innerRadius,s=e.outerRadius,o=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,d=e.startAngle,u=e.endAngle,h=Or(u-d),f=mh({cx:r,cy:n,radius:s,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,p=f.theta,g=mh({cx:r,cy:n,radius:s,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),y=g.circleTangency,b=g.lineTangency,w=g.theta,j=c?Math.abs(d-u):Math.abs(d-u)-p-w;if(j<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):qM({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:d,endAngle:u});var _="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(j>180),",").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var S=mh({cx:r,cy:n,radius:a,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=S.circleTangency,k=S.lineTangency,E=S.theta,P=mh({cx:r,cy:n,radius:a,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=P.circleTangency,D=P.lineTangency,A=P.theta,C=c?Math.abs(d-u):Math.abs(d-u)-E-A;if(C<0&&o===0)return"".concat(_,"L").concat(r,",").concat(n,"Z");_+="L".concat(D.x,",").concat(D.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(C>180),",").concat(+(h>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,"Z")}else _+="L".concat(r,",").concat(n,"Z");return _},bce={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UM=function(e){var r=pk(pk({},bce),e),n=r.cx,a=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,h=r.endAngle,f=r.className;if(o<s||u===h)return null;var m=Ge("recharts-sector",f),v=o-s,p=Rr(l,v,0,!0),g;return p>0&&Math.abs(u-h)<360?g=yce({cx:n,cy:a,innerRadius:s,outerRadius:o,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):g=qM({cx:n,cy:a,innerRadius:s,outerRadius:o,startAngle:u,endAngle:h}),$.createElement("path",fb({},Be(r,!0),{className:m,d:g,role:"img"}))};function Gd(t){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gd(t)}function mb(){return mb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},mb.apply(this,arguments)}function vk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function yk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(r),!0).forEach(function(n){xce(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function xce(t,e,r){return e=wce(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wce(t){var e=_ce(t,"string");return Gd(e)=="symbol"?e:e+""}function _ce(t,e){if(Gd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bk={curveBasisClosed:xV,curveBasisOpen:wV,curveBasis:bV,curveBumpX:sV,curveBumpY:iV,curveLinearClosed:_V,curveLinear:pg,curveMonotoneX:jV,curveMonotoneY:SV,curveNatural:kV,curveStep:NV,curveStepAfter:CV,curveStepBefore:EV},gh=function(e){return e.x===+e.x&&e.y===+e.y},Wc=function(e){return e.x},Kc=function(e){return e.y},jce=function(e,r){if(Ue(e))return e;var n="curve".concat(mg(e));return(n==="curveMonotone"||n==="curveBump")&&r?bk["".concat(n).concat(r==="vertical"?"Y":"X")]:bk[n]||pg},Sce=function(e){var r=e.type,n=r===void 0?"linear":r,a=e.points,s=a===void 0?[]:a,o=e.baseLine,l=e.layout,c=e.connectNulls,d=c===void 0?!1:c,u=jce(n,l),h=d?s.filter(function(p){return gh(p)}):s,f;if(Array.isArray(o)){var m=d?o.filter(function(p){return gh(p)}):o,v=h.map(function(p,g){return yk(yk({},p),{},{base:m[g]})});return l==="vertical"?f=sh().y(Kc).x1(Wc).x0(function(p){return p.base.x}):f=sh().x(Wc).y1(Kc).y0(function(p){return p.base.y}),f.defined(gh).curve(u),f(v)}return l==="vertical"&&de(o)?f=sh().y(Kc).x1(Wc).x0(o):de(o)?f=sh().x(Wc).y1(Kc).y0(o):f=$2().x(Wc).y(Kc),f.defined(gh).curve(u),f(h)},gb=function(e){var r=e.className,n=e.points,a=e.path,s=e.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?Sce(e):a;return x.createElement("path",mb({},Be(e,!1),lf(e),{className:Ge("recharts-curve",r),d:o,ref:s}))},zM={exports:{}},kce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Nce=kce,Ece=Nce;function HM(){}function WM(){}WM.resetWarningCache=HM;var Cce=function(){function t(n,a,s,o,l,c){if(c!==Ece){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:WM,resetWarningCache:HM};return r.PropTypes=r,r};zM.exports=Cce();var Ace=zM.exports;const ut=jt(Ace);var Tce=Object.getOwnPropertyNames,Dce=Object.getOwnPropertySymbols,Pce=Object.prototype.hasOwnProperty;function xk(t,e){return function(n,a,s){return t(n,a,s)&&e(n,a,s)}}function ph(t){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return t(r,n,a);var s=a.cache,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);var c=t(r,n,a);return s.delete(r),s.delete(n),c}}function wk(t){return Tce(t).concat(Dce(t))}var Mce=Object.hasOwn||function(t,e){return Pce.call(t,e)};function ho(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Oce="__v",Rce="__o",$ce="_owner",_k=Object.getOwnPropertyDescriptor,jk=Object.keys;function Ice(t,e,r){var n=t.length;if(e.length!==n)return!1;for(;n-- >0;)if(!r.equals(t[n],e[n],n,n,t,e,r))return!1;return!0}function Lce(t,e){return ho(t.getTime(),e.getTime())}function Fce(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Bce(t,e){return t===e}function Sk(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),s=t.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var d=e.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(a[h]){h++;continue}var f=o.value,m=l.value;if(r.equals(f[0],m[0],c,h,t,e,r)&&r.equals(f[1],m[1],f[0],m[0],t,e,r)){u=a[h]=!0;break}h++}if(!u)return!1;c++}return!0}var qce=ho;function Uce(t,e,r){var n=jk(t),a=n.length;if(jk(e).length!==a)return!1;for(;a-- >0;)if(!KM(t,e,r,n[a]))return!1;return!0}function Gc(t,e,r){var n=wk(t),a=n.length;if(wk(e).length!==a)return!1;for(var s,o,l;a-- >0;)if(s=n[a],!KM(t,e,r,s)||(o=_k(t,s),l=_k(e,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function zce(t,e){return ho(t.valueOf(),e.valueOf())}function Hce(t,e){return t.source===e.source&&t.flags===e.flags}function kk(t,e,r){var n=t.size;if(n!==e.size)return!1;if(!n)return!0;for(var a=new Array(n),s=t.values(),o,l;(o=s.next())&&!o.done;){for(var c=e.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&r.equals(o.value,l.value,o.value,l.value,t,e,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function Wce(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Kce(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function KM(t,e,r,n){return(n===$ce||n===Rce||n===Oce)&&(t.$$typeof||e.$$typeof)?!0:Mce(e,n)&&r.equals(t[n],e[n],n,n,t,e,r)}var Gce="[object Arguments]",Vce="[object Boolean]",Qce="[object Date]",Jce="[object Error]",Yce="[object Map]",Xce="[object Number]",Zce="[object Object]",ede="[object RegExp]",tde="[object Set]",rde="[object String]",nde="[object URL]",ade=Array.isArray,Nk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ek=Object.assign,sde=Object.prototype.toString.call.bind(Object.prototype.toString);function ide(t){var e=t.areArraysEqual,r=t.areDatesEqual,n=t.areErrorsEqual,a=t.areFunctionsEqual,s=t.areMapsEqual,o=t.areNumbersEqual,l=t.areObjectsEqual,c=t.arePrimitiveWrappersEqual,d=t.areRegExpsEqual,u=t.areSetsEqual,h=t.areTypedArraysEqual,f=t.areUrlsEqual;return function(v,p,g){if(v===p)return!0;if(v==null||p==null)return!1;var y=typeof v;if(y!==typeof p)return!1;if(y!=="object")return y==="number"?o(v,p,g):y==="function"?a(v,p,g):!1;var b=v.constructor;if(b!==p.constructor)return!1;if(b===Object)return l(v,p,g);if(ade(v))return e(v,p,g);if(Nk!=null&&Nk(v))return h(v,p,g);if(b===Date)return r(v,p,g);if(b===RegExp)return d(v,p,g);if(b===Map)return s(v,p,g);if(b===Set)return u(v,p,g);var w=sde(v);return w===Qce?r(v,p,g):w===ede?d(v,p,g):w===Yce?s(v,p,g):w===tde?u(v,p,g):w===Zce?typeof v.then!="function"&&typeof p.then!="function"&&l(v,p,g):w===nde?f(v,p,g):w===Jce?n(v,p,g):w===Gce?l(v,p,g):w===Vce||w===Xce||w===rde?c(v,p,g):!1}}function ode(t){var e=t.circular,r=t.createCustomConfig,n=t.strict,a={areArraysEqual:n?Gc:Ice,areDatesEqual:Lce,areErrorsEqual:Fce,areFunctionsEqual:Bce,areMapsEqual:n?xk(Sk,Gc):Sk,areNumbersEqual:qce,areObjectsEqual:n?Gc:Uce,arePrimitiveWrappersEqual:zce,areRegExpsEqual:Hce,areSetsEqual:n?xk(kk,Gc):kk,areTypedArraysEqual:n?Gc:Wce,areUrlsEqual:Kce};if(r&&(a=Ek({},a,r(a))),e){var s=ph(a.areArraysEqual),o=ph(a.areMapsEqual),l=ph(a.areObjectsEqual),c=ph(a.areSetsEqual);a=Ek({},a,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function lde(t){return function(e,r,n,a,s,o,l){return t(e,r,l)}}function cde(t){var e=t.circular,r=t.comparator,n=t.createState,a=t.equals,s=t.strict;if(n)return function(c,d){var u=n(),h=u.cache,f=h===void 0?e?new WeakMap:void 0:h,m=u.meta;return r(c,d,{cache:f,equals:a,meta:m,strict:s})};if(e)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};var o={cache:void 0,equals:a,meta:void 0,strict:s};return function(c,d){return r(c,d,o)}}var dde=Ws();Ws({strict:!0});Ws({circular:!0});Ws({circular:!0,strict:!0});Ws({createInternalComparator:function(){return ho}});Ws({strict:!0,createInternalComparator:function(){return ho}});Ws({circular:!0,createInternalComparator:function(){return ho}});Ws({circular:!0,createInternalComparator:function(){return ho},strict:!0});function Ws(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,n=t.createInternalComparator,a=t.createState,s=t.strict,o=s===void 0?!1:s,l=ode(t),c=ide(l),d=n?n(c):lde(c);return cde({circular:r,comparator:c,createState:a,equals:d,strict:o})}function ude(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Ck(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(s){r<0&&(r=s),s-r>e?(t(s),r=-1):ude(a)};requestAnimationFrame(n)}function pb(t){"@babel/helpers - typeof";return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pb(t)}function hde(t){return pde(t)||gde(t)||mde(t)||fde()}function fde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mde(t,e){if(t){if(typeof t=="string")return Ak(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ak(t,e)}}function Ak(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function gde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function pde(t){if(Array.isArray(t))return t}function vde(){var t={},e=function(){return null},r=!1,n=function a(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=hde(o),c=l[0],d=l.slice(1);if(typeof c=="number"){Ck(a.bind(null,d),c);return}a(c),Ck(a.bind(null,d));return}pb(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Vd(t){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(t)}function Tk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Dk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tk(Object(r),!0).forEach(function(n){GM(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function GM(t,e,r){return e=yde(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yde(t){var e=bde(t,"string");return Vd(e)==="symbol"?e:String(e)}function bde(t,e){if(Vd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xde=function(e,r){return[Object.keys(e),Object.keys(r)].reduce(function(n,a){return n.filter(function(s){return a.includes(s)})})},wde=function(e){return e},_de=function(e){return e.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},md=function(e,r){return Object.keys(r).reduce(function(n,a){return Dk(Dk({},n),{},GM({},a,e(a,r[a])))},{})},Pk=function(e,r,n){return e.map(function(a){return"".concat(_de(a)," ").concat(r,"ms ").concat(n)}).join(",")};function jde(t,e){return Nde(t)||kde(t,e)||VM(t,e)||Sde()}function Sde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kde(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Nde(t){if(Array.isArray(t))return t}function Ede(t){return Tde(t)||Ade(t)||VM(t)||Cde()}function Cde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VM(t,e){if(t){if(typeof t=="string")return vb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vb(t,e)}}function Ade(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Tde(t){if(Array.isArray(t))return vb(t)}function vb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Lf=1e-4,QM=function(e,r){return[0,3*e,3*r-6*e,3*e-3*r+1]},JM=function(e,r){return e.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},Mk=function(e,r){return function(n){var a=QM(e,r);return JM(a,n)}},Dde=function(e,r){return function(n){var a=QM(e,r),s=[].concat(Ede(a.map(function(o,l){return o*l}).slice(1)),[0]);return JM(s,n)}},Ok=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,s=0,o=1,l=1;break;case"ease":a=.25,s=.1,o=.25,l=1;break;case"ease-in":a=.42,s=0,o=1,l=1;break;case"ease-out":a=.42,s=0,o=.58,l=1;break;case"ease-in-out":a=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=jde(d,4);a=u[0],s=u[1],o=u[2],l=u[3]}}}var h=Mk(a,o),f=Mk(s,l),m=Dde(a,o),v=function(y){return y>1?1:y<0?0:y},p=function(y){for(var b=y>1?1:y,w=b,j=0;j<8;++j){var _=h(w)-b,S=m(w);if(Math.abs(_-b)<Lf||S<Lf)return f(w);w=v(w-_/S)}return f(w)};return p.isStepper=!1,p},Pde=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.stiff,n=r===void 0?100:r,a=e.damping,s=a===void 0?8:a,o=e.dt,l=o===void 0?17:o,c=function(u,h,f){var m=-(u-h)*n,v=f*s,p=f+(m-v)*l/1e3,g=f*l/1e3+u;return Math.abs(g-h)<Lf&&Math.abs(p)<Lf?[h,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},Mde=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Ok(a);case"spring":return Pde();default:if(a.split("(")[0]==="cubic-bezier")return Ok(a)}return typeof a=="function"?a:null};function Qd(t){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qd(t)}function Rk(t){return $de(t)||Rde(t)||YM(t)||Ode()}function Ode(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function $de(t){if(Array.isArray(t))return bb(t)}function $k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$k(Object(r),!0).forEach(function(n){yb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yb(t,e,r){return e=Ide(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ide(t){var e=Lde(t,"string");return Qd(e)==="symbol"?e:String(e)}function Lde(t,e){if(Qd(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fde(t,e){return Ude(t)||qde(t,e)||YM(t,e)||Bde()}function Bde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YM(t,e){if(t){if(typeof t=="string")return bb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bb(t,e)}}function bb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qde(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Ude(t){if(Array.isArray(t))return t}var Ff=function(e,r,n){return e+(r-e)*n},xb=function(e){var r=e.from,n=e.to;return r!==n},zde=function t(e,r,n){var a=md(function(s,o){if(xb(o)){var l=e(o.from,o.to,o.velocity),c=Fde(l,2),d=c[0],u=c[1];return ur(ur({},o),{},{from:d,velocity:u})}return o},r);return n<1?md(function(s,o){return xb(o)?ur(ur({},o),{},{velocity:Ff(o.velocity,a[s].velocity,n),from:Ff(o.from,a[s].from,n)}):o},r):t(e,a,n-1)};const Hde=function(t,e,r,n,a){var s=xde(t,e),o=s.reduce(function(g,y){return ur(ur({},g),{},yb({},y,[t[y],e[y]]))},{}),l=s.reduce(function(g,y){return ur(ur({},g),{},yb({},y,{from:t[y],velocity:0,to:e[y]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return md(function(y,b){return b.from},l)},m=function(){return!Object.values(l).filter(xb).length},v=function(y){d||(d=y);var b=y-d,w=b/r.dt;l=zde(r,l,w),a(ur(ur(ur({},t),e),f())),d=y,m()||(c=requestAnimationFrame(h))},p=function(y){u||(u=y);var b=(y-u)/n,w=md(function(_,S){return Ff.apply(void 0,Rk(S).concat([r(b)]))},o);if(a(ur(ur(ur({},t),e),w)),b<1)c=requestAnimationFrame(h);else{var j=md(function(_,S){return Ff.apply(void 0,Rk(S).concat([r(1)]))},o);a(ur(ur(ur({},t),e),j))}};return h=r.isStepper?v:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Bl(t){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bl(t)}var Wde=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Kde(t,e){if(t==null)return{};var r=Gde(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Gde(t,e){if(t==null)return{};var r={},n=Object.keys(t),a,s;for(s=0;s<n.length;s++)a=n[s],!(e.indexOf(a)>=0)&&(r[a]=t[a]);return r}function nv(t){return Yde(t)||Jde(t)||Qde(t)||Vde()}function Vde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qde(t,e){if(t){if(typeof t=="string")return wb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wb(t,e)}}function Jde(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Yde(t){if(Array.isArray(t))return wb(t)}function wb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ik(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Pn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ik(Object(r),!0).forEach(function(n){ad(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ik(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ad(t,e,r){return e=XM(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xde(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zde(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XM(n.key),n)}}function eue(t,e,r){return e&&Zde(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XM(t){var e=tue(t,"string");return Bl(e)==="symbol"?e:String(e)}function tue(t,e){if(Bl(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Bl(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rue(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_b(t,e)}function _b(t,e){return _b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},_b(t,e)}function nue(t){var e=aue();return function(){var n=Bf(t),a;if(e){var s=Bf(this).constructor;a=Reflect.construct(n,arguments,s)}else a=n.apply(this,arguments);return jb(this,a)}}function jb(t,e){if(e&&(Bl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sb(t)}function Sb(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function aue(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bf(t){return Bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bf(t)}var La=function(t){rue(r,t);var e=nue(r);function r(n,a){var s;Xde(this,r),s=e.call(this,n,a);var o=s.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,f=o.children,m=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Sb(s)),s.changeStyle=s.changeStyle.bind(Sb(s)),!l||m<=0)return s.state={style:{}},typeof f=="function"&&(s.state={style:u}),jb(s);if(h&&h.length)s.state={style:h[0].style};else if(d){if(typeof f=="function")return s.state={style:d},jb(s);s.state={style:c?ad({},c,d):d}}else s.state={style:{}};return s}return eue(r,[{key:"componentDidMount",value:function(){var a=this.props,s=a.isActive,o=a.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,d=s.shouldReAnimate,u=s.to,h=s.from,f=this.state.style;if(l){if(!o){var m={style:c?ad({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(m);return}if(!(dde(a.to,u)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||d?h:a.to;if(this.state&&f){var g={style:c?ad({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(g)}this.runAnimation(Pn(Pn({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var s=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,h=a.onAnimationEnd,f=a.onAnimationStart,m=Hde(o,l,Mde(d),c,this.changeStyle),v=function(){s.stopJSAnimation=m()};this.manager.start([f,u,v,c,h])}},{key:"runStepAnimation",value:function(a){var s=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,h=d.duration,f=h===void 0?0:h,m=function(p,g,y){if(y===0)return p;var b=g.duration,w=g.easing,j=w===void 0?"ease":w,_=g.style,S=g.properties,N=g.onAnimationEnd,k=y>0?o[y-1]:g,E=S||Object.keys(_);if(typeof j=="function"||j==="spring")return[].concat(nv(p),[s.runJSAnimation.bind(s,{from:k.style,to:_,duration:b,easing:j}),b]);var P=Pk(E,b,j),T=Pn(Pn(Pn({},k.style),_),{},{transition:P});return[].concat(nv(p),[T,b,N]).filter(wde)};return this.manager.start([c].concat(nv(o.reduce(m,[u,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=vde());var s=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,h=a.onAnimationEnd,f=a.steps,m=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var p=l?ad({},l,c):c,g=Pk(Object.keys(p),o,d);v.start([u,s,Pn(Pn({},p),{},{transition:g}),o,h])}},{key:"render",value:function(){var a=this.props,s=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Kde(a,Wde),d=x.Children.count(s),u=this.state.style;if(typeof s=="function")return s(u);if(!l||d===0||o<=0)return s;var h=function(m){var v=m.props,p=v.style,g=p===void 0?{}:p,y=v.className,b=x.cloneElement(m,Pn(Pn({},c),{},{style:Pn(Pn({},g),u),className:y}));return b};return d===1?h(x.Children.only(s)):$.createElement("div",null,x.Children.map(s,function(f){return h(f)}))}}]),r}(x.PureComponent);La.displayName="Animate";La.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};La.propTypes={from:ut.oneOfType([ut.object,ut.string]),to:ut.oneOfType([ut.object,ut.string]),attributeName:ut.string,duration:ut.number,begin:ut.number,easing:ut.oneOfType([ut.string,ut.func]),steps:ut.arrayOf(ut.shape({duration:ut.number.isRequired,style:ut.object.isRequired,easing:ut.oneOfType([ut.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ut.func]),properties:ut.arrayOf("string"),onAnimationEnd:ut.func})),children:ut.oneOfType([ut.node,ut.func]),isActive:ut.bool,canBegin:ut.bool,onAnimationEnd:ut.func,shouldReAnimate:ut.bool,onAnimationStart:ut.func,onAnimationReStart:ut.func};function Lr(){return Lr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lr.apply(null,arguments)}function Jd(t){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jd(t)}function qf(){return qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qf.apply(this,arguments)}function sue(t,e){return cue(t)||lue(t,e)||oue(t,e)||iue()}function iue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oue(t,e){if(t){if(typeof t=="string")return Lk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lk(t,e)}}function Lk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lue(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function cue(t){if(Array.isArray(t))return t}function Fk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Bk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fk(Object(r),!0).forEach(function(n){due(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function due(t,e,r){return e=uue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uue(t){var e=hue(t,"string");return Jd(e)=="symbol"?e:e+""}function hue(t,e){if(Jd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qk=function(e,r,n,a,s){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,d=a>=0&&n>=0||a<0&&n<0?1:0,u;if(o>0&&s instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=s[f]>o?o:s[f];u="M".concat(e,",").concat(r+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(e+c*h[0],",").concat(r)),u+="L ".concat(e+n-c*h[1],",").concat(r),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(e+n,",").concat(r+l*h[1])),u+="L ".concat(e+n,",").concat(r+a-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(e+n-c*h[2],",").concat(r+a)),u+="L ".concat(e+c*h[3],",").concat(r+a),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(r+a-l*h[3])),u+="Z"}else if(o>0&&s===+s&&s>0){var v=Math.min(o,s);u="M ".concat(e,",").concat(r+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+c*v,",").concat(r,`
            L `).concat(e+n-c*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+n,",").concat(r+l*v,`
            L `).concat(e+n,",").concat(r+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+n-c*v,",").concat(r+a,`
            L `).concat(e+c*v,",").concat(r+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(r+a-l*v," Z")}else u="M ".concat(e,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return u},fue=function(e,r){if(!e||!r)return!1;var n=e.x,a=e.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(s,s+l),u=Math.max(s,s+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return n>=d&&n<=u&&a>=h&&a<=f}return!1},mue={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kw=function(e){var r=Bk(Bk({},mue),e),n=x.useRef(),a=x.useState(-1),s=sue(a,2),o=s[0],l=s[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,u=r.width,h=r.height,f=r.radius,m=r.className,v=r.animationEasing,p=r.animationDuration,g=r.animationBegin,y=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var w=Ge("recharts-rectangle",m);return b?$.createElement(La,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:p,animationEasing:v,isActive:b},function(j){var _=j.width,S=j.height,N=j.x,k=j.y;return $.createElement(La,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:y,easing:v},$.createElement("path",qf({},Be(r,!0),{className:w,d:qk(N,k,_,S,f),ref:n})))}):$.createElement("path",qf({},Be(r,!0),{className:w,d:qk(c,d,u,h,f)}))},gue=["points","className","baseLinePoints","connectNulls"];function qo(){return qo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},qo.apply(this,arguments)}function pue(t,e){if(t==null)return{};var r=vue(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Uk(t){return wue(t)||xue(t)||bue(t)||yue()}function yue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bue(t,e){if(t){if(typeof t=="string")return kb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kb(t,e)}}function xue(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function wue(t){if(Array.isArray(t))return kb(t)}function kb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var zk=function(e){return e&&e.x===+e.x&&e.y===+e.y},_ue=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return e.forEach(function(n){zk(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),zk(e[0])&&r[r.length-1].push(e[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},gd=function(e,r){var n=_ue(e);r&&(n=[n.reduce(function(s,o){return[].concat(Uk(s),Uk(o))},[])]);var a=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},jue=function(e,r,n){var a=gd(e,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(gd(r.reverse(),n).slice(1))},Sue=function(e){var r=e.points,n=e.className,a=e.baseLinePoints,s=e.connectNulls,o=pue(e,gue);if(!r||!r.length)return null;var l=Ge("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=jue(r,a,s);return $.createElement("g",{className:l},$.createElement("path",qo({},Be(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?$.createElement("path",qo({},Be(o,!0),{fill:"none",d:gd(r,s)})):null,c?$.createElement("path",qo({},Be(o,!0),{fill:"none",d:gd(a,s)})):null)}var u=gd(r,s);return $.createElement("path",qo({},Be(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function Nb(){return Nb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Nb.apply(this,arguments)}var Nw=function(e){var r=e.cx,n=e.cy,a=e.r,s=e.className,o=Ge("recharts-dot",s);return r===+r&&n===+n&&a===+a?x.createElement("circle",Nb({},Be(e,!1),lf(e),{className:o,cx:r,cy:n,r:a})):null};function Yd(t){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yd(t)}var kue=["x","y","top","left","width","height","className"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Eb.apply(this,arguments)}function Hk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Nue(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hk(Object(r),!0).forEach(function(n){Eue(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Eue(t,e,r){return e=Cue(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cue(t){var e=Aue(t,"string");return Yd(e)=="symbol"?e:e+""}function Aue(t,e){if(Yd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tue(t,e){if(t==null)return{};var r=Due(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Due(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var Pue=function(e,r,n,a,s,o){return"M".concat(e,",").concat(s,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},Mue=function(e){var r=e.x,n=r===void 0?0:r,a=e.y,s=a===void 0?0:a,o=e.top,l=o===void 0?0:o,c=e.left,d=c===void 0?0:c,u=e.width,h=u===void 0?0:u,f=e.height,m=f===void 0?0:f,v=e.className,p=Tue(e,kue),g=Nue({x:n,y:s,top:l,left:d,width:h,height:m},p);return!de(n)||!de(s)||!de(h)||!de(m)||!de(l)||!de(d)?null:$.createElement("path",Eb({},Be(g,!0),{className:Ge("recharts-cross",v),d:Pue(n,s,h,m,l,d)}))},Oue=Eg,Rue=dM,$ue=fa;function Iue(t,e){return t&&t.length?Oue(t,$ue(e),Rue):void 0}var Lue=Iue;const Fue=jt(Lue);var Bue=Eg,que=fa,Uue=uM;function zue(t,e){return t&&t.length?Bue(t,que(e),Uue):void 0}var Hue=zue;const Wue=jt(Hue);var Kue=["cx","cy","angle","ticks","axisLine"],Gue=["ticks","tick","angle","tickFormatter","stroke"];function ql(t){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ql(t)}function pd(){return pd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pd.apply(this,arguments)}function Wk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wk(Object(r),!0).forEach(function(n){Og(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kk(t,e){if(t==null)return{};var r=Vue(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Vue(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Que(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eO(n.key),n)}}function Jue(t,e,r){return e&&Gk(t.prototype,e),r&&Gk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yue(t,e,r){return e=Uf(e),Xue(t,ZM()?Reflect.construct(e,r||[],Uf(t).constructor):e.apply(t,r))}function Xue(t,e){if(e&&(ql(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zue(t)}function Zue(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZM=function(){return!!t})()}function Uf(t){return Uf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uf(t)}function ehe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cb(t,e)}function Cb(t,e){return Cb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Cb(t,e)}function Og(t,e,r){return e=eO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eO(t){var e=the(t,"string");return ql(e)=="symbol"?e:e+""}function the(t,e){if(ql(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rg=function(t){function e(){return Que(this,e),Yue(this,e,arguments)}return ehe(e,t),Jue(e,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Dt(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=Fue(l,function(u){return u.coordinate||0}),d=Wue(l,function(u){return u.coordinate||0});return{cx:a,cy:s,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,d=Kk(n,Kue),u=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),h=Dt(a,s,u[0],o),f=Dt(a,s,u[1],o),m=Xs(Xs(Xs({},Be(d,!1)),{},{fill:"none"},Be(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return $.createElement("line",pd({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=Kk(a,Gue),h=this.getTickTextAnchor(),f=Be(u,!1),m=Be(o,!1),v=s.map(function(p,g){var y=n.getTickValueCoord(p),b=Xs(Xs(Xs(Xs({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:g},y),{},{payload:p});return $.createElement(gt,pd({className:Ge("recharts-polar-radius-axis-tick",FM(o)),key:"tick-".concat(p.coordinate)},Wi(n.props,p,g)),e.renderTickItem(o,b,c?c(p.value,g):p.value))});return $.createElement(gt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.axisLine,o=n.tick;return!a||!a.length?null:$.createElement(gt,{className:Ge("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),or.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,s){var o;return $.isValidElement(n)?o=$.cloneElement(n,a):Ue(n)?o=n(a):o=$.createElement(Ki,pd({},a,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(x.PureComponent);Og(Rg,"displayName","PolarRadiusAxis");Og(Rg,"axisType","radiusAxis");Og(Rg,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ul(t){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ul(t)}function ci(){return ci=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ci.apply(this,arguments)}function Vk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(r),!0).forEach(function(n){$g(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Vk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rhe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rO(n.key),n)}}function nhe(t,e,r){return e&&Qk(t.prototype,e),r&&Qk(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function ahe(t,e,r){return e=zf(e),she(t,tO()?Reflect.construct(e,r||[],zf(t).constructor):e.apply(t,r))}function she(t,e){if(e&&(Ul(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ihe(t)}function ihe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tO=function(){return!!t})()}function zf(t){return zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zf(t)}function ohe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ab(t,e)}function Ab(t,e){return Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ab(t,e)}function $g(t,e,r){return e=rO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rO(t){var e=lhe(t,"string");return Ul(e)=="symbol"?e:e+""}function lhe(t,e){if(Ul(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var che=Math.PI/180,Jk=1e-5,Ig=function(t){function e(){return rhe(this,e),ahe(this,e,arguments)}return ohe(e,t),nhe(e,[{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,h=Dt(s,o,l,n.coordinate),f=Dt(s,o,l+(c==="inner"?-1:1)*u,n.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,s=Math.cos(-n.coordinate*che),o;return s>Jk?o=a==="outer"?"start":"end":s<-Jk?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,d=Zs(Zs({},Be(this.props,!1)),{},{fill:"none"},Be(l,!1));if(c==="circle")return $.createElement(Nw,ci({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:s,r:o}));var u=this.props.ticks,h=u.map(function(f){return Dt(a,s,o,f.coordinate)});return $.createElement(Sue,ci({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,s=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=Be(this.props,!1),h=Be(o,!1),f=Zs(Zs({},u),{},{fill:"none"},Be(l,!1)),m=s.map(function(v,p){var g=n.getTickLineCoord(v),y=n.getTickTextAnchor(v),b=Zs(Zs(Zs({textAnchor:y},u),{},{stroke:"none",fill:d},h),{},{index:p,payload:v,x:g.x2,y:g.y2});return $.createElement(gt,ci({className:Ge("recharts-polar-angle-axis-tick",FM(o)),key:"tick-".concat(v.coordinate)},Wi(n.props,v,p)),l&&$.createElement("line",ci({className:"recharts-polar-angle-axis-tick-line"},f,g)),o&&e.renderTickItem(o,b,c?c(v.value,p):v.value))});return $.createElement(gt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!a||!a.length?null:$.createElement(gt,{className:Ge("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,s){var o;return $.isValidElement(n)?o=$.cloneElement(n,a):Ue(n)?o=n(a):o=$.createElement(Ki,ci({},a,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(x.PureComponent);$g(Ig,"displayName","PolarAngleAxis");$g(Ig,"axisType","angleAxis");$g(Ig,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var dhe=iP,uhe=dhe(Object.getPrototypeOf,Object),hhe=uhe,fhe=za,mhe=hhe,ghe=Ha,phe="[object Object]",vhe=Function.prototype,yhe=Object.prototype,nO=vhe.toString,bhe=yhe.hasOwnProperty,xhe=nO.call(Object);function whe(t){if(!ghe(t)||fhe(t)!=phe)return!1;var e=mhe(t);if(e===null)return!0;var r=bhe.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&nO.call(r)==xhe}var _he=whe;const jhe=jt(_he);var She=za,khe=Ha,Nhe="[object Boolean]";function Ehe(t){return t===!0||t===!1||khe(t)&&She(t)==Nhe}var Che=Ehe;const Ahe=jt(Che);function Xd(t){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(t)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hf.apply(this,arguments)}function The(t,e){return Ohe(t)||Mhe(t,e)||Phe(t,e)||Dhe()}function Dhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Phe(t,e){if(t){if(typeof t=="string")return Yk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yk(t,e)}}function Yk(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mhe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Ohe(t){if(Array.isArray(t))return t}function Xk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Zk(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xk(Object(r),!0).forEach(function(n){Rhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Rhe(t,e,r){return e=$he(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $he(t){var e=Ihe(t,"string");return Xd(e)=="symbol"?e:e+""}function Ihe(t,e){if(Xd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eN=function(e,r,n,a,s){var o=n-a,l;return l="M ".concat(e,",").concat(r),l+="L ".concat(e+n,",").concat(r),l+="L ".concat(e+n-o/2,",").concat(r+s),l+="L ".concat(e+n-o/2-a,",").concat(r+s),l+="L ".concat(e,",").concat(r," Z"),l},Lhe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Fhe=function(e){var r=Zk(Zk({},Lhe),e),n=x.useRef(),a=x.useState(-1),s=The(a,2),o=s[0],l=s[1];x.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,h=r.lowerWidth,f=r.height,m=r.className,v=r.animationEasing,p=r.animationDuration,g=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var b=Ge("recharts-trapezoid",m);return y?$.createElement(La,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:p,animationEasing:v,isActive:y},function(w){var j=w.upperWidth,_=w.lowerWidth,S=w.height,N=w.x,k=w.y;return $.createElement(La,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:v},$.createElement("path",Hf({},Be(r,!0),{className:b,d:eN(N,k,j,_,S),ref:n})))}):$.createElement("g",null,$.createElement("path",Hf({},Be(r,!0),{className:b,d:eN(c,d,u,h,f)})))},Bhe=["option","shapeType","propTransformer","activeClassName","isActive"];function Zd(t){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zd(t)}function qhe(t,e){if(t==null)return{};var r=Uhe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Uhe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Wf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tN(Object(r),!0).forEach(function(n){zhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function zhe(t,e,r){return e=Hhe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Hhe(t){var e=Whe(t,"string");return Zd(e)=="symbol"?e:e+""}function Whe(t,e){if(Zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Khe(t,e){return Wf(Wf({},e),t)}function Ghe(t,e){return t==="symbols"}function rN(t){var e=t.shapeType,r=t.elementProps;switch(e){case"rectangle":return $.createElement(kw,r);case"trapezoid":return $.createElement(Fhe,r);case"sector":return $.createElement(UM,r);case"symbols":if(Ghe(e))return $.createElement(H0,r);break;default:return null}}function Vhe(t){return x.isValidElement(t)?t.props:t}function aO(t){var e=t.option,r=t.shapeType,n=t.propTransformer,a=n===void 0?Khe:n,s=t.activeClassName,o=s===void 0?"recharts-active-shape":s,l=t.isActive,c=qhe(t,Bhe),d;if(x.isValidElement(e))d=x.cloneElement(e,Wf(Wf({},c),Vhe(e)));else if(Ue(e))d=e(c);else if(jhe(e)&&!Ahe(e)){var u=a(e,c);d=$.createElement(rN,{shapeType:r,elementProps:u})}else{var h=c;d=$.createElement(rN,{shapeType:r,elementProps:h})}return l?$.createElement(gt,{className:o},d):d}function Lg(t,e){return e!=null&&"trapezoids"in t.props}function Fg(t,e){return e!=null&&"sectors"in t.props}function eu(t,e){return e!=null&&"points"in t.props}function Qhe(t,e){var r,n,a=t.x===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.x)||t.x===e.x,s=t.y===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.y)||t.y===e.y;return a&&s}function Jhe(t,e){var r=t.endAngle===e.endAngle,n=t.startAngle===e.startAngle;return r&&n}function Yhe(t,e){var r=t.x===e.x,n=t.y===e.y,a=t.z===e.z;return r&&n&&a}function Xhe(t,e){var r;return Lg(t,e)?r=Qhe:Fg(t,e)?r=Jhe:eu(t,e)&&(r=Yhe),r}function Zhe(t,e){var r;return Lg(t,e)?r="trapezoids":Fg(t,e)?r="sectors":eu(t,e)&&(r="points"),r}function efe(t,e){if(Lg(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Fg(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return eu(t,e)?e.payload:{}}function tfe(t){var e=t.activeTooltipItem,r=t.graphicalItem,n=t.itemData,a=Zhe(r,e),s=efe(r,e),o=n.filter(function(c,d){var u=Tg(s,c),h=r.props[a].filter(function(v){var p=Xhe(r,e);return p(v,e)}),f=r.props[a].indexOf(h[h.length-1]),m=d===f;return u&&m}),l=n.indexOf(o[o.length-1]);return l}var Uh;function zl(t){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zl(t)}function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Uo.apply(this,arguments)}function nN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Ct(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nN(Object(r),!0).forEach(function(n){wn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function rfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iO(n.key),n)}}function nfe(t,e,r){return e&&aN(t.prototype,e),r&&aN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function afe(t,e,r){return e=Kf(e),sfe(t,sO()?Reflect.construct(e,r||[],Kf(t).constructor):e.apply(t,r))}function sfe(t,e){if(e&&(zl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ife(t)}function ife(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sO=function(){return!!t})()}function Kf(t){return Kf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Kf(t)}function ofe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tb(t,e)}function Tb(t,e){return Tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Tb(t,e)}function wn(t,e,r){return e=iO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function iO(t){var e=lfe(t,"string");return zl(e)=="symbol"?e:e+""}function lfe(t,e){if(zl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var da=function(t){function e(r){var n;return rfe(this,e),n=afe(this,e,[r]),wn(n,"pieRef",null),wn(n,"sectorRefs",[]),wn(n,"id",Pu("recharts-pie-")),wn(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ue(a)&&a()}),wn(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ue(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return ofe(e,t),nfe(e,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,d=s.valueKey,u=Be(this.props,!1),h=Be(o,!1),f=Be(l,!1),m=o&&o.offsetRadius||20,v=n.map(function(p,g){var y=(p.startAngle+p.endAngle)/2,b=Dt(p.cx,p.cy,p.outerRadius+m,y),w=Ct(Ct(Ct(Ct({},u),p),{},{stroke:"none"},h),{},{index:g,textAnchor:e.getTextAnchor(b.x,p.cx)},b),j=Ct(Ct(Ct(Ct({},u),p),{},{fill:"none",stroke:p.fill},f),{},{index:g,points:[Dt(p.cx,p.cy,p.outerRadius,y),b]}),_=c;return Ze(c)&&Ze(d)?_="value":Ze(c)&&(_=d),$.createElement(gt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&e.renderLabelLineItem(l,j,"line"),e.renderLabelItem(o,w,xr(p,_)))});return $.createElement(gt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(n){var a=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&n.length!==1)return null;var h=a.isActiveIndex(u),f=c&&a.hasActiveIndex()?c:null,m=h?o:f,v=Ct(Ct({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return $.createElement(gt,Uo({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Wi(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),$.createElement(aO,Uo({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,s=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return $.createElement(La,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,g=[],y=s&&s[0],b=y.startAngle;return s.forEach(function(w,j){var _=f&&f[j],S=j>0?dn(w,"paddingAngle",0):0;if(_){var N=ss(_.endAngle-_.startAngle,w.endAngle-w.startAngle),k=Ct(Ct({},w),{},{startAngle:b+S,endAngle:b+N(p)+S});g.push(k),b=k.endAngle}else{var E=w.endAngle,P=w.startAngle,T=ss(0,E-P),D=T(p),A=Ct(Ct({},w),{},{startAngle:b+S,endAngle:b+D+S});g.push(A),b=A.endAngle}}),$.createElement(gt,null,n.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&a&&a.length&&(!o||!Tg(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,s=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,h=a.innerRadius,f=a.outerRadius,m=a.isAnimationActive,v=this.state.isAnimationFinished;if(s||!o||!o.length||!de(d)||!de(u)||!de(h)||!de(f))return null;var p=Ge("recharts-pie",l);return $.createElement(gt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(o),or.renderCallByParent(this.props,null,!1),(!m||v)&&Es.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,s){if($.isValidElement(n))return $.cloneElement(n,a);if(Ue(n))return n(a);var o=Ge("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return $.createElement(gb,Uo({},a,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,s){if($.isValidElement(n))return $.cloneElement(n,a);var o=s;if(Ue(n)&&(o=n(a),$.isValidElement(o)))return o;var l=Ge("recharts-pie-label-text",typeof n!="boolean"&&!Ue(n)?n.className:"");return $.createElement(Ki,Uo({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(x.PureComponent);Uh=da;wn(da,"displayName","Pie");wn(da,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ta.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});wn(da,"parseDeltaAngle",function(t,e){var r=Or(e-t),n=Math.min(Math.abs(e-t),360);return r*n});wn(da,"getRealPieData",function(t){var e=t.data,r=t.children,n=Be(t,!1),a=Sn(r,Td);return e&&e.length?e.map(function(s,o){return Ct(Ct(Ct({payload:s},n),s),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(s){return Ct(Ct({},n),s.props)}):[]});wn(da,"parseCoordinateOfPie",function(t,e){var r=e.top,n=e.left,a=e.width,s=e.height,o=LM(a,s),l=n+Rr(t.cx,a,a/2),c=r+Rr(t.cy,s,s/2),d=Rr(t.innerRadius,o,0),u=Rr(t.outerRadius,o,o*.8),h=t.maxRadius||Math.sqrt(a*a+s*s)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});wn(da,"getComposedData",function(t){var e=t.item,r=t.offset,n=e.type.defaultProps!==void 0?Ct(Ct({},e.type.defaultProps),e.props):e.props,a=Uh.getRealPieData(n);if(!a||!a.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,d=n.dataKey,u=n.nameKey,h=n.valueKey,f=n.tooltipType,m=Math.abs(n.minAngle),v=Uh.parseCoordinateOfPie(n,r),p=Uh.parseDeltaAngle(o,l),g=Math.abs(p),y=d;Ze(d)&&Ze(h)?(Bn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):Ze(d)&&(Bn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=h);var b=a.filter(function(k){return xr(k,y,0)!==0}).length,w=(g>=360?b:b-1)*c,j=g-b*m-w,_=a.reduce(function(k,E){var P=xr(E,y,0);return k+(de(P)?P:0)},0),S;if(_>0){var N;S=a.map(function(k,E){var P=xr(k,y,0),T=xr(k,u,E),D=(de(P)?P:0)/_,A;E?A=N.endAngle+Or(p)*c*(P!==0?1:0):A=o;var C=A+Or(p)*((P!==0?m:0)+D*j),R=(A+C)/2,L=(v.innerRadius+v.outerRadius)/2,M=[{name:T,value:P,payload:k,dataKey:y,type:f}],I=Dt(v.cx,v.cy,L,R);return N=Ct(Ct(Ct({percent:D,cornerRadius:s,name:T,tooltipPayload:M,midAngle:R,middleRadius:L,tooltipPosition:I},k),v),{},{value:xr(k,y),startAngle:A,endAngle:C,payload:k,paddingAngle:Or(p)*c}),N})}return Ct(Ct({},v),{},{sectors:S,data:a})});var cfe=Math.ceil,dfe=Math.max;function ufe(t,e,r,n){for(var a=-1,s=dfe(cfe((e-t)/(r||1)),0),o=Array(s);s--;)o[n?s:++a]=t,t+=r;return o}var hfe=ufe,ffe=kP,sN=1/0,mfe=17976931348623157e292;function gfe(t){if(!t)return t===0?t:0;if(t=ffe(t),t===sN||t===-sN){var e=t<0?-1:1;return e*mfe}return t===t?t:0}var oO=gfe,pfe=hfe,vfe=xg,av=oO;function yfe(t){return function(e,r,n){return n&&typeof n!="number"&&vfe(e,r,n)&&(r=n=void 0),e=av(e),r===void 0?(r=e,e=0):r=av(r),n=n===void 0?e<r?1:-1:av(n),pfe(e,r,n,t)}}var bfe=yfe,xfe=bfe,wfe=xfe(),_fe=wfe;const Gf=jt(_fe);function tu(t){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(t)}function iN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function oN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?iN(Object(r),!0).forEach(function(n){lO(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function lO(t,e,r){return e=jfe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jfe(t){var e=Sfe(t,"string");return tu(e)=="symbol"?e:e+""}function Sfe(t,e){if(tu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kfe=["Webkit","Moz","O","ms"],Nfe=function(e,r){var n=e.replace(/(\w)/,function(s){return s.toUpperCase()}),a=kfe.reduce(function(s,o){return oN(oN({},s),{},lO({},o+n,r))},{});return a[e]=r,a};function Hl(t){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hl(t)}function Vf(){return Vf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Vf.apply(this,arguments)}function lN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function sv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lN(Object(r),!0).forEach(function(n){rn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Efe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dO(n.key),n)}}function Cfe(t,e,r){return e&&cN(t.prototype,e),r&&cN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Afe(t,e,r){return e=Qf(e),Tfe(t,cO()?Reflect.construct(e,r||[],Qf(t).constructor):e.apply(t,r))}function Tfe(t,e){if(e&&(Hl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dfe(t)}function Dfe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cO=function(){return!!t})()}function Qf(t){return Qf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Qf(t)}function Pfe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Db(t,e)}function Db(t,e){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Db(t,e)}function rn(t,e,r){return e=dO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dO(t){var e=Mfe(t,"string");return Hl(e)=="symbol"?e:e+""}function Mfe(t,e){if(Hl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ofe=function(e){var r=e.data,n=e.startIndex,a=e.endIndex,s=e.x,o=e.width,l=e.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=hd().domain(Gf(0,c)).range([s,s+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(a),scale:d,scaleValues:u}},dN=function(e){return e.changedTouches&&!!e.changedTouches.length},Wl=function(t){function e(r){var n;return Efe(this,e),n=Afe(this,e,[r]),rn(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),rn(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),rn(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,s=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),rn(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),rn(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),rn(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),rn(n,"handleSlideDragStart",function(a){var s=dN(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Pfe(e,t),Cfe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(a,s),f=Math.max(a,s),m=e.getIndexInRange(o,h),v=e.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:v===u?u:v-v%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,s=a.data,o=a.tickFormatter,l=a.dataKey,c=xr(s[n],l,n);return Ue(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,s=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,p=n.pageX-s;p>0?p=Math.min(p,d+u-h-l,d+u-h-o):p<0&&(p=Math.max(p,d-o,d-l));var g=this.getIndex({startX:o+p,endX:l+p});(g.startIndex!==f||g.endIndex!==m)&&v&&v(g),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var s=dN(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,s=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,h=u.x,f=u.width,m=u.travellerWidth,v=u.onChange,p=u.gap,g=u.data,y={startX:this.state.startX,endX:this.state.endX},b=n.pageX-s;b>0?b=Math.min(b,h+f-m-d):b<0&&(b=Math.max(b,h-d)),y[o]=d+b;var w=this.getIndex(y),j=w.startIndex,_=w.endIndex,S=function(){var k=g.length-1;return o==="startX"&&(l>c?j%p===0:_%p===0)||l<c&&_===k||o==="endX"&&(l>c?_%p===0:j%p===0)||l>c&&_===k};this.setState(rn(rn({},o,d+b),"brushMoveStartX",n.pageX),function(){v&&S()&&v(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var s=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],h=l.indexOf(u);if(h!==-1){var f=h+n;if(!(f===-1||f>=l.length)){var m=l[f];a==="startX"&&m>=d||a==="endX"&&m<=c||this.setState(rn({},a,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return $.createElement("rect",{stroke:d,fill:c,x:a,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.data,d=n.children,u=n.padding,h=x.Children.only(d);return h?$.cloneElement(h,{x:a,y:s,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var s,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,p=c.startIndex,g=c.endIndex,y=Math.max(n,this.props.x),b=sv(sv({},Be(this.props,!1)),{},{x:y,y:d,width:u,height:h}),w=m||"Min value: ".concat((s=v[p])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return $.createElement(gt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(_){["ArrowLeft","ArrowRight"].includes(_.key)&&(_.preventDefault(),_.stopPropagation(),l.handleTravellerMoveKeyboard(_.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(f,b))}},{key:"renderSlide",value:function(n,a){var s=this.props,o=s.y,l=s.height,c=s.stroke,d=s.travellerWidth,u=Math.min(n,a)+d,h=Math.max(Math.abs(a-n)-d,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,u=this.state,h=u.startX,f=u.endX,m=5,v={pointerEvents:"none",fill:d};return $.createElement(gt,{className:"recharts-brush-texts"},$.createElement(Ki,Vf({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},v),this.getTextOfTick(a)),$.createElement(Ki,Vf({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},v),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,a=n.data,s=n.className,o=n.children,l=n.x,c=n.y,d=n.width,u=n.height,h=n.alwaysShowText,f=this.state,m=f.startX,v=f.endX,p=f.isTextActive,g=f.isSlideMoving,y=f.isTravellerMoving,b=f.isTravellerFocused;if(!a||!a.length||!de(l)||!de(c)||!de(d)||!de(u)||d<=0||u<=0)return null;var w=Ge("recharts-brush",s),j=$.Children.count(o)===1,_=Nfe("userSelect","none");return $.createElement(gt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:_},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(p||g||y||b||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(s+l/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:a,y:s,width:o,height:l,fill:c,stroke:"none"}),$.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var s;return $.isValidElement(n)?s=$.cloneElement(n,a):Ue(n)?s=n(a):s=e.renderDefaultTraveller(a),s}},{key:"getDerivedStateFromProps",value:function(n,a){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,u=n.startIndex,h=n.endIndex;if(s!==a.prevData||d!==a.prevUpdateId)return sv({prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},s&&s.length?Ofe({data:s,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var f=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(n,a){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(x.PureComponent);rn(Wl,"displayName","Brush");rn(Wl,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Rfe=Y0;function $fe(t,e){var r;return Rfe(t,function(n,a,s){return r=e(n,a,s),!r}),!!r}var Ife=$fe,Lfe=X2,Ffe=fa,Bfe=Ife,qfe=Xr,Ufe=xg;function zfe(t,e,r){var n=qfe(t)?Lfe:Bfe;return r&&Ufe(t,e,r)&&(e=void 0),n(t,Ffe(e))}var Hfe=zfe;const Wfe=jt(Hfe);var oa=function(e,r){var n=e.alwaysShow,a=e.ifOverflow;return n&&(a="extendDomain"),a===r},uN=xP;function Kfe(t,e,r){e=="__proto__"&&uN?uN(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Gfe=Kfe,Vfe=Gfe,Qfe=yP,Jfe=fa;function Yfe(t,e){var r={};return e=Jfe(e),Qfe(t,function(n,a,s){Vfe(r,a,e(n,a,s))}),r}var Xfe=Yfe;const Zfe=jt(Xfe);function eme(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}var tme=eme,rme=Y0;function nme(t,e){var r=!0;return rme(t,function(n,a,s){return r=!!e(n,a,s),r}),r}var ame=nme,sme=tme,ime=ame,ome=fa,lme=Xr,cme=xg;function dme(t,e,r){var n=lme(t)?sme:ime;return r&&cme(t,e,r)&&(e=void 0),n(t,ome(e))}var ume=dme;const uO=jt(ume);var hme=["x","y"];function ru(t){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ru(t)}function Pb(){return Pb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Pb.apply(this,arguments)}function hN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hN(Object(r),!0).forEach(function(n){fme(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function fme(t,e,r){return e=mme(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mme(t){var e=gme(t,"string");return ru(e)=="symbol"?e:e+""}function gme(t,e){if(ru(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ru(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pme(t,e){if(t==null)return{};var r=vme(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function vme(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function yme(t,e){var r=t.x,n=t.y,a=pme(t,hme),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),d="".concat(e.height||a.height),u=parseInt(d,10),h="".concat(e.width||a.width),f=parseInt(h,10);return Vc(Vc(Vc(Vc(Vc({},e),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:e.name,radius:e.radius})}function fN(t){return $.createElement(aO,Pb({shapeType:"rectangle",propTransformer:yme,activeClassName:"recharts-active-bar"},t))}var bme=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof e=="number")return e;var s=de(n)||WG(n);return s?e(n,a):(s||Vi(),r)}},xme=["value","background"],hO;function Kl(t){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kl(t)}function wme(t,e){if(t==null)return{};var r=_me(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function _me(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jf.apply(this,arguments)}function mN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mN(Object(r),!0).forEach(function(n){bs(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function jme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mO(n.key),n)}}function Sme(t,e,r){return e&&gN(t.prototype,e),r&&gN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kme(t,e,r){return e=Yf(e),Nme(t,fO()?Reflect.construct(e,r||[],Yf(t).constructor):e.apply(t,r))}function Nme(t,e){if(e&&(Kl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eme(t)}function Eme(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fO=function(){return!!t})()}function Yf(t){return Yf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Yf(t)}function Cme(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mb(t,e)}function Mb(t,e){return Mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Mb(t,e)}function bs(t,e,r){return e=mO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mO(t){var e=Ame(t,"string");return Kl(e)=="symbol"?e:e+""}function Ame(t,e){if(Kl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var fo=function(t){function e(){var r;jme(this,e);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=kme(this,e,[].concat(a)),bs(r,"state",{isAnimationFinished:!1}),bs(r,"id",Pu("recharts-bar-")),bs(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),bs(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Cme(e,t),Sme(e,[{key:"renderRectanglesStatically",value:function(n){var a=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,d=s.activeBar,u=Be(this.props,!1);return n&&n.map(function(h,f){var m=f===c,v=m?d:o,p=Vt(Vt(Vt({},u),h),{},{isActive:m,option:v,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return $.createElement(gt,Jf({className:"recharts-bar-rectangle"},Wi(a.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),$.createElement(fN,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,s=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,h=a.animationId,f=this.state.prevData;return $.createElement(La,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,p=s.map(function(g,y){var b=f&&f[y];if(b){var w=ss(b.x,g.x),j=ss(b.y,g.y),_=ss(b.width,g.width),S=ss(b.height,g.height);return Vt(Vt({},g),{},{x:w(v),y:j(v),width:_(v),height:S(v)})}if(o==="horizontal"){var N=ss(0,g.height),k=N(v);return Vt(Vt({},g),{},{y:g.y+g.height-k,height:k})}var E=ss(0,g.width),P=E(v);return Vt(Vt({},g),{},{width:P})});return $.createElement(gt,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&a&&a.length&&(!o||!Tg(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,s=a.data,o=a.dataKey,l=a.activeIndex,c=Be(this.props.background,!1);return s.map(function(d,u){d.value;var h=d.background,f=wme(d,xme);if(!h)return null;var m=Vt(Vt(Vt(Vt(Vt({},f),{},{fill:"#eee"},h),c),Wi(n.props,d,u)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return $.createElement(fN,Jf({key:"background-bar-".concat(u),option:n.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,d=s.layout,u=s.children,h=Sn(u,Mg);if(!h)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,m=function(g,y){var b=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:b,errorVal:xr(g,y)}},v={clipPath:n?"url(#clipPath-".concat(a,")"):null};return $.createElement(gt,v,h.map(function(p){return $.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,u=n.top,h=n.width,f=n.height,m=n.isAnimationActive,v=n.background,p=n.id;if(a||!s||!s.length)return null;var g=this.state.isAnimationFinished,y=Ge("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,j=b||w,_=Ze(p)?this.id:p;return $.createElement(gt,{className:y},b||w?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(_)},$.createElement("rect",{x:b?d:d-h/2,y:w?u:u-f/2,width:b?h:h*2,height:w?f:f*2}))):null,$.createElement(gt,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(_,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,_),(!m||g)&&Es.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(x.PureComponent);hO=fo;bs(fo,"displayName","Bar");bs(fo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bs(fo,"getComposedData",function(t){var e=t.props,r=t.item,n=t.barPosition,a=t.bandSize,s=t.xAxis,o=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,d=t.stackedData,u=t.dataStartIndex,h=t.displayedData,f=t.offset,m=cle(n,r);if(!m)return null;var v=e.layout,p=r.type.defaultProps,g=p!==void 0?Vt(Vt({},p),r.props):r.props,y=g.dataKey,b=g.children,w=g.minPointSize,j=v==="horizontal"?o:s,_=d?j.scale.domain():null,S=ple({numericAxis:j}),N=Sn(b,Td),k=h.map(function(E,P){var T,D,A,C,R,L;d?T=dle(d[u+P],_):(T=xr(E,y),Array.isArray(T)||(T=[S,T]));var M=bme(w,hO.defaultProps.minPointSize)(T[1],P);if(v==="horizontal"){var I,B=[o.scale(T[0]),o.scale(T[1])],H=B[0],q=B[1];D=ak({axis:s,ticks:l,bandSize:a,offset:m.offset,entry:E,index:P}),A=(I=q??H)!==null&&I!==void 0?I:void 0,C=m.size;var O=H-q;if(R=Number.isNaN(O)?0:O,L={x:D,y:o.y,width:C,height:o.height},Math.abs(M)>0&&Math.abs(R)<Math.abs(M)){var F=Or(R||M)*(Math.abs(M)-Math.abs(R));A-=F,R+=F}}else{var G=[s.scale(T[0]),s.scale(T[1])],Y=G[0],Z=G[1];if(D=Y,A=ak({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:E,index:P}),C=Z-Y,R=m.size,L={x:s.x,y:A,width:s.width,height:R},Math.abs(M)>0&&Math.abs(C)<Math.abs(M)){var le=Or(C||M)*(Math.abs(M)-Math.abs(C));C+=le}}return Vt(Vt(Vt({},E),{},{x:D,y:A,width:C,height:R,value:d?T:T[1],payload:E,background:L},N&&N[P]&&N[P].props),{},{tooltipPayload:[$M(r,E)],tooltipPosition:{x:D+C/2,y:A+R/2}})});return Vt({data:k,layout:v},f)});function nu(t){"@babel/helpers - typeof";return nu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nu(t)}function Tme(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gO(n.key),n)}}function Dme(t,e,r){return e&&pN(t.prototype,e),r&&pN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function vN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Rn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vN(Object(r),!0).forEach(function(n){Bg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Bg(t,e,r){return e=gO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gO(t){var e=Pme(t,"string");return nu(e)=="symbol"?e:e+""}function Pme(t,e){if(nu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Mme=function(e,r,n,a,s){var o=e.width,l=e.height,c=e.layout,d=e.children,u=Object.keys(r),h={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},f=!!sn(d,fo);return u.reduce(function(m,v){var p=r[v],g=p.orientation,y=p.domain,b=p.padding,w=b===void 0?{}:b,j=p.mirror,_=p.reversed,S="".concat(g).concat(j?"Mirror":""),N,k,E,P,T;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var D=y[1]-y[0],A=1/0,C=p.categoricalDomain.sort(VG);if(C.forEach(function(G,Y){Y>0&&(A=Math.min((G||0)-(C[Y-1]||0),A))}),Number.isFinite(A)){var R=A/D,L=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(N=R*L/2),p.padding==="no-gap"){var M=Rr(e.barCategoryGap,R*L),I=R*L/2;N=I-M-(I-M)/L*M}}}a==="xAxis"?k=[n.left+(w.left||0)+(N||0),n.left+n.width-(w.right||0)-(N||0)]:a==="yAxis"?k=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(N||0),n.top+n.height-(w.bottom||0)-(N||0)]:k=p.range,_&&(k=[k[1],k[0]]);var B=PM(p,s,f),H=B.scale,q=B.realScaleType;H.domain(y).range(k),MM(H);var O=OM(H,Rn(Rn({},p),{},{realScaleType:q}));a==="xAxis"?(T=g==="top"&&!j||g==="bottom"&&j,E=n.left,P=h[S]-T*p.height):a==="yAxis"&&(T=g==="left"&&!j||g==="right"&&j,E=h[S]-T*p.width,P=n.top);var F=Rn(Rn(Rn({},p),O),{},{realScaleType:q,x:E,y:P,scale:H,width:a==="xAxis"?n.width:p.width,height:a==="yAxis"?n.height:p.height});return F.bandSize=Rf(F,O),!p.hide&&a==="xAxis"?h[S]+=(T?-1:1)*F.height:p.hide||(h[S]+=(T?-1:1)*F.width),Rn(Rn({},m),{},Bg({},v,F))},{})},pO=function(e,r){var n=e.x,a=e.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(a,o),width:Math.abs(s-n),height:Math.abs(o-a)}},Ome=function(e){var r=e.x1,n=e.y1,a=e.x2,s=e.y2;return pO({x:r,y:n},{x:a,y:s})},vO=function(){function t(e){Tme(this,t),this.scale=e}return Dme(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],s=n[n.length-1];return a<=s?r>=a&&r<=s:r>=s&&r<=a}}],[{key:"create",value:function(r){return new t(r)}}])}();Bg(vO,"EPS",1e-4);var Ew=function(e){var r=Object.keys(e).reduce(function(n,a){return Rn(Rn({},n),{},Bg({},a,vO.create(e[a])))},{});return Rn(Rn({},r),{},{apply:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return Zfe(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return uO(a,function(s,o){return r[o].isInRange(s)})}})};function Rme(t){return(t%180+180)%180}var $me=function(e){var r=e.width,n=e.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Rme(a),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Ime=fa,Lme=Mu,Fme=yg;function Bme(t){return function(e,r,n){var a=Object(e);if(!Lme(e)){var s=Ime(r);e=Fme(e),r=function(l){return s(a[l],l,a)}}var o=t(e,r,n);return o>-1?a[s?e[o]:o]:void 0}}var qme=Bme,Ume=oO;function zme(t){var e=Ume(t),r=e%1;return e===e?r?e-r:e:0}var Hme=zme,Wme=hP,Kme=fa,Gme=Hme,Vme=Math.max;function Qme(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var a=r==null?0:Gme(r);return a<0&&(a=Vme(n+a,0)),Wme(t,Kme(e),a)}var Jme=Qme,Yme=qme,Xme=Jme,Zme=Yme(Xme),ege=Zme;const tge=jt(ege);var rge=Q7(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),Cw=x.createContext(void 0),Aw=x.createContext(void 0),yO=x.createContext(void 0),bO=x.createContext({}),xO=x.createContext(void 0),wO=x.createContext(0),_O=x.createContext(0),yN=function(e){var r=e.state,n=r.xAxisMap,a=r.yAxisMap,s=r.offset,o=e.clipPathId,l=e.children,c=e.width,d=e.height,u=rge(s);return $.createElement(Cw.Provider,{value:n},$.createElement(Aw.Provider,{value:a},$.createElement(bO.Provider,{value:s},$.createElement(yO.Provider,{value:u},$.createElement(xO.Provider,{value:o},$.createElement(wO.Provider,{value:d},$.createElement(_O.Provider,{value:c},l)))))))},nge=function(){return x.useContext(xO)},jO=function(e){var r=x.useContext(Cw);r==null&&Vi();var n=r[e];return n==null&&Vi(),n},age=function(){var e=x.useContext(Cw);return ls(e)},sge=function(){var e=x.useContext(Aw),r=tge(e,function(n){return uO(n.domain,Number.isFinite)});return r||ls(e)},SO=function(e){var r=x.useContext(Aw);r==null&&Vi();var n=r[e];return n==null&&Vi(),n},ige=function(){var e=x.useContext(yO);return e},oge=function(){return x.useContext(bO)},Tw=function(){return x.useContext(_O)},Dw=function(){return x.useContext(wO)};function Gl(t){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gl(t)}function lge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,NO(n.key),n)}}function dge(t,e,r){return e&&cge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function uge(t,e,r){return e=Xf(e),hge(t,kO()?Reflect.construct(e,r||[],Xf(t).constructor):e.apply(t,r))}function hge(t,e){if(e&&(Gl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fge(t)}function fge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function kO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kO=function(){return!!t})()}function Xf(t){return Xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xf(t)}function mge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ob(t,e)}function Ob(t,e){return Ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ob(t,e)}function bN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function xN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bN(Object(r),!0).forEach(function(n){Pw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Pw(t,e,r){return e=NO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function NO(t){var e=gge(t,"string");return Gl(e)=="symbol"?e:e+""}function gge(t,e){if(Gl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pge(t,e){return xge(t)||bge(t,e)||yge(t,e)||vge()}function vge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yge(t,e){if(t){if(typeof t=="string")return wN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wN(t,e)}}function wN(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bge(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function xge(t){if(Array.isArray(t))return t}function Rb(){return Rb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rb.apply(this,arguments)}var wge=function(e,r){var n;return $.isValidElement(e)?n=$.cloneElement(e,r):Ue(e)?n=e(r):n=$.createElement("line",Rb({},r,{className:"recharts-reference-line-line"})),n},_ge=function(e,r,n,a,s,o,l,c,d){var u=s.x,h=s.y,f=s.width,m=s.height;if(n){var v=d.y,p=e.y.apply(v,{position:o});if(oa(d,"discard")&&!e.y.isInRange(p))return null;var g=[{x:u+f,y:p},{x:u,y:p}];return c==="left"?g.reverse():g}if(r){var y=d.x,b=e.x.apply(y,{position:o});if(oa(d,"discard")&&!e.x.isInRange(b))return null;var w=[{x:b,y:h+m},{x:b,y:h}];return l==="top"?w.reverse():w}if(a){var j=d.segment,_=j.map(function(S){return e.apply(S,{position:o})});return oa(d,"discard")&&Wfe(_,function(S){return!e.isInRange(S)})?null:_}return null};function jge(t){var e=t.x,r=t.y,n=t.segment,a=t.xAxisId,s=t.yAxisId,o=t.shape,l=t.className,c=t.alwaysShow,d=nge(),u=jO(a),h=SO(s),f=ige();if(!d||!f)return null;Bn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=Ew({x:u.scale,y:h.scale}),v=nr(e),p=nr(r),g=n&&n.length===2,y=_ge(m,v,p,g,f,t.position,u.orientation,h.orientation,t);if(!y)return null;var b=pge(y,2),w=b[0],j=w.x,_=w.y,S=b[1],N=S.x,k=S.y,E=oa(t,"hidden")?"url(#".concat(d,")"):void 0,P=xN(xN({clipPath:E},Be(t,!0)),{},{x1:j,y1:_,x2:N,y2:k});return $.createElement(gt,{className:Ge("recharts-reference-line",l)},wge(o,P),or.renderCallByParent(t,Ome({x1:j,y1:_,x2:N,y2:k})))}var Mw=function(t){function e(){return lge(this,e),uge(this,e,arguments)}return mge(e,t),dge(e,[{key:"render",value:function(){return $.createElement(jge,this.props)}}])}($.Component);Pw(Mw,"displayName","ReferenceLine");Pw(Mw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function $b(){return $b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$b.apply(this,arguments)}function Vl(t){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vl(t)}function _N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function jN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_N(Object(r),!0).forEach(function(n){qg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_N(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Sge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CO(n.key),n)}}function Nge(t,e,r){return e&&kge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ege(t,e,r){return e=Zf(e),Cge(t,EO()?Reflect.construct(e,r||[],Zf(t).constructor):e.apply(t,r))}function Cge(t,e){if(e&&(Vl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Age(t)}function Age(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function EO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(EO=function(){return!!t})()}function Zf(t){return Zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zf(t)}function Tge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ib(t,e)}function Ib(t,e){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Ib(t,e)}function qg(t,e,r){return e=CO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function CO(t){var e=Dge(t,"string");return Vl(e)=="symbol"?e:e+""}function Dge(t,e){if(Vl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pge=function(e){var r=e.x,n=e.y,a=e.xAxis,s=e.yAxis,o=Ew({x:a.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return oa(e,"discard")&&!o.isInRange(l)?null:l},Ug=function(t){function e(){return Sge(this,e),Ege(this,e,arguments)}return Tge(e,t),Nge(e,[{key:"render",value:function(){var n=this.props,a=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=nr(a),u=nr(s);if(Bn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=Pge(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,p=v.shape,g=v.className,y=oa(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=jN(jN({clipPath:y},Be(this.props,!0)),{},{cx:f,cy:m});return $.createElement(gt,{className:Ge("recharts-reference-dot",g)},e.renderDot(p,b),or.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}($.Component);qg(Ug,"displayName","ReferenceDot");qg(Ug,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});qg(Ug,"renderDot",function(t,e){var r;return $.isValidElement(t)?r=$.cloneElement(t,e):Ue(t)?r=t(e):r=$.createElement(Nw,$b({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),r});function Lb(){return Lb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lb.apply(this,arguments)}function Ql(t){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ql(t)}function SN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function kN(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?SN(Object(r),!0).forEach(function(n){zg(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mge(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oge(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,TO(n.key),n)}}function Rge(t,e,r){return e&&Oge(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function $ge(t,e,r){return e=em(e),Ige(t,AO()?Reflect.construct(e,r||[],em(t).constructor):e.apply(t,r))}function Ige(t,e){if(e&&(Ql(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lge(t)}function Lge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function AO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AO=function(){return!!t})()}function em(t){return em=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},em(t)}function Fge(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fb(t,e)}function Fb(t,e){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Fb(t,e)}function zg(t,e,r){return e=TO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function TO(t){var e=Bge(t,"string");return Ql(e)=="symbol"?e:e+""}function Bge(t,e){if(Ql(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qge=function(e,r,n,a,s){var o=s.x1,l=s.x2,c=s.y1,d=s.y2,u=s.xAxis,h=s.yAxis;if(!u||!h)return null;var f=Ew({x:u.scale,y:h.scale}),m={x:e?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:n?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:r?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(d,{position:"end"}):f.y.rangeMax};return oa(s,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:pO(m,v)},Hg=function(t){function e(){return Mge(this,e),$ge(this,e,arguments)}return Fge(e,t),Rge(e,[{key:"render",value:function(){var n=this.props,a=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,u=n.clipPathId;Bn(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=nr(a),f=nr(s),m=nr(o),v=nr(l),p=this.props.shape;if(!h&&!f&&!m&&!v&&!p)return null;var g=qge(h,f,m,v,this.props);if(!g&&!p)return null;var y=oa(this.props,"hidden")?"url(#".concat(u,")"):void 0;return $.createElement(gt,{className:Ge("recharts-reference-area",c)},e.renderRect(p,kN(kN({clipPath:y},Be(this.props,!0)),g)),or.renderCallByParent(this.props,g))}}])}($.Component);zg(Hg,"displayName","ReferenceArea");zg(Hg,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});zg(Hg,"renderRect",function(t,e){var r;return $.isValidElement(t)?r=$.cloneElement(t,e):Ue(t)?r=t(e):r=$.createElement(kw,Lb({},e,{className:"recharts-reference-area-rect"})),r});function DO(t,e,r){if(e<1)return[];if(e===1&&r===void 0)return t;for(var n=[],a=0;a<t.length;a+=e)n.push(t[a]);return n}function Uge(t,e,r){var n={width:t.width+e.width,height:t.height+e.height};return $me(n,r)}function zge(t,e,r){var n=r==="width",a=t.x,s=t.y,o=t.width,l=t.height;return e===1?{start:n?a:s,end:n?a+o:s+l}:{start:n?a+o:s+l,end:n?a:s}}function tm(t,e,r,n,a){if(t*e<t*n||t*e>t*a)return!1;var s=r();return t*(e-t*s/2-n)>=0&&t*(e+t*s/2-a)<=0}function Hge(t,e){return DO(t,e+1)}function Wge(t,e,r,n,a){for(var s=(n||[]).slice(),o=e.start,l=e.end,c=0,d=1,u=o,h=function(){var v=n==null?void 0:n[c];if(v===void 0)return{v:DO(n,d)};var p=c,g,y=function(){return g===void 0&&(g=r(v,p)),g},b=v.coordinate,w=c===0||tm(t,b,y,u,l);w||(c=0,u=o,d+=1),w&&(u=b+t*(y()/2+a),c+=d)},f;d<=s.length;)if(f=h(),f)return f.v;return[]}function au(t){"@babel/helpers - typeof";return au=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},au(t)}function NN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?NN(Object(r),!0).forEach(function(n){Kge(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):NN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Kge(t,e,r){return e=Gge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gge(t){var e=Vge(t,"string");return au(e)=="symbol"?e:e+""}function Vge(t,e){if(au(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(au(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qge(t,e,r,n,a){for(var s=(n||[]).slice(),o=s.length,l=e.start,c=e.end,d=function(f){var m=s[f],v,p=function(){return v===void 0&&(v=r(m,f)),v};if(f===o-1){var g=t*(m.coordinate+t*p()/2-c);s[f]=m=vr(vr({},m),{},{tickCoord:g>0?m.coordinate-g*t:m.coordinate})}else s[f]=m=vr(vr({},m),{},{tickCoord:m.coordinate});var y=tm(t,m.tickCoord,p,l,c);y&&(c=m.tickCoord-t*(p()/2+a),s[f]=vr(vr({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return s}function Jge(t,e,r,n,a,s){var o=(n||[]).slice(),l=o.length,c=e.start,d=e.end;if(s){var u=n[l-1],h=r(u,l-1),f=t*(u.coordinate+t*h/2-d);o[l-1]=u=vr(vr({},u),{},{tickCoord:f>0?u.coordinate-f*t:u.coordinate});var m=tm(t,u.tickCoord,function(){return h},c,d);m&&(d=u.tickCoord-t*(h/2+a),o[l-1]=vr(vr({},u),{},{isShow:!0}))}for(var v=s?l-1:l,p=function(b){var w=o[b],j,_=function(){return j===void 0&&(j=r(w,b)),j};if(b===0){var S=t*(w.coordinate-t*_()/2-c);o[b]=w=vr(vr({},w),{},{tickCoord:S<0?w.coordinate-S*t:w.coordinate})}else o[b]=w=vr(vr({},w),{},{tickCoord:w.coordinate});var N=tm(t,w.tickCoord,_,c,d);N&&(c=w.tickCoord+t*(_()/2+a),o[b]=vr(vr({},w),{},{isShow:!0}))},g=0;g<v;g++)p(g);return o}function Ow(t,e,r){var n=t.tick,a=t.ticks,s=t.viewBox,o=t.minTickGap,l=t.orientation,c=t.interval,d=t.tickFormatter,u=t.unit,h=t.angle;if(!a||!a.length||!n)return[];if(de(c)||Ta.isSsr)return Hge(a,typeof c=="number"&&de(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",v=u&&m==="width"?ud(u,{fontSize:e,letterSpacing:r}):{width:0,height:0},p=function(w,j){var _=Ue(d)?d(w.value,j):w.value;return m==="width"?Uge(ud(_,{fontSize:e,letterSpacing:r}),v,h):ud(_,{fontSize:e,letterSpacing:r})[m]},g=a.length>=2?Or(a[1].coordinate-a[0].coordinate):1,y=zge(s,g,m);return c==="equidistantPreserveStart"?Wge(g,y,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?f=Jge(g,y,p,a,o,c==="preserveStartEnd"):f=Qge(g,y,p,a,o),f.filter(function(b){return b.isShow}))}var Yge=["viewBox"],Xge=["viewBox"],Zge=["ticks"];function Jl(t){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jl(t)}function zo(){return zo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zo.apply(this,arguments)}function EN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function Xt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?EN(Object(r),!0).forEach(function(n){Rw(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function iv(t,e){if(t==null)return{};var r=epe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function epe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function tpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MO(n.key),n)}}function rpe(t,e,r){return e&&CN(t.prototype,e),r&&CN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function npe(t,e,r){return e=rm(e),ape(t,PO()?Reflect.construct(e,r||[],rm(t).constructor):e.apply(t,r))}function ape(t,e){if(e&&(Jl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return spe(t)}function spe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PO=function(){return!!t})()}function rm(t){return rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rm(t)}function ipe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bb(t,e)}function Bb(t,e){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Bb(t,e)}function Rw(t,e,r){return e=MO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function MO(t){var e=ope(t,"string");return Jl(e)=="symbol"?e:e+""}function ope(t,e){if(Jl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Jl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ec=function(t){function e(r){var n;return tpe(this,e),n=npe(this,e,[r]),n.state={fontSize:"",letterSpacing:""},n}return ipe(e,t),rpe(e,[{key:"shouldComponentUpdate",value:function(n,a){var s=n.viewBox,o=iv(n,Yge),l=this.props,c=l.viewBox,d=iv(l,Xge);return!el(s,c)||!el(o,d)||!el(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,s=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,h=a.mirror,f=a.tickMargin,m,v,p,g,y,b,w=h?-1:1,j=n.tickSize||u,_=de(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":m=v=n.coordinate,g=o+ +!h*c,p=g-w*j,b=p-w*f,y=_;break;case"left":p=g=n.coordinate,v=s+ +!h*l,m=v-w*j,y=m-w*f,b=_;break;case"right":p=g=n.coordinate,v=s+ +h*l,m=v+w*j,y=m+w*f,b=_;break;default:m=v=n.coordinate,g=o+ +h*c,p=g+w*j,b=p+w*f,y=_;break}return{line:{x1:m,y1:p,x2:v,y2:g},tick:{x:y,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o;switch(a){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,s=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,u=n.axisLine,h=Xt(Xt(Xt({},Be(this.props,!1)),Be(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=Xt(Xt({},h),{},{x1:a,y1:s+f*l,x2:a+o,y2:s+f*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);h=Xt(Xt({},h),{},{x1:a+m*o,y1:s,x2:a+m*o,y2:s+l})}return $.createElement("line",zo({},h,{className:Ge("recharts-cartesian-axis-line",dn(u,"className"))}))}},{key:"renderTicks",value:function(n,a,s){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,f=l.unit,m=Ow(Xt(Xt({},this.props),{},{ticks:n}),a,s),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=Be(this.props,!1),y=Be(u,!1),b=Xt(Xt({},g),{},{fill:"none"},Be(c,!1)),w=m.map(function(j,_){var S=o.getTickLineCoord(j),N=S.line,k=S.tick,E=Xt(Xt(Xt(Xt({textAnchor:v,verticalAnchor:p},g),{},{stroke:"none",fill:d},y),k),{},{index:_,payload:j,visibleTicksCount:m.length,tickFormatter:h});return $.createElement(gt,zo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},Wi(o.props,j,_)),c&&$.createElement("line",zo({},b,N,{className:Ge("recharts-cartesian-axis-tick-line",dn(c,"className"))})),u&&e.renderTickItem(u,E,"".concat(Ue(h)?h(j.value,_):j.value).concat(f||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,s=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var h=this.props,f=h.ticks,m=iv(h,Zge),v=f;return Ue(c)&&(v=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:$.createElement(gt,{className:Ge("recharts-cartesian-axis",d),ref:function(g){n.layerReference=g}},s&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),or.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,s){var o,l=Ge(a.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(n)?o=$.cloneElement(n,Xt(Xt({},a),{},{className:l})):Ue(n)?o=n(Xt(Xt({},a),{},{className:l})):o=$.createElement(Ki,zo({},a,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(x.Component);Rw(Ec,"displayName","CartesianAxis");Rw(Ec,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var lpe=["x1","y1","x2","y2","key"],cpe=["offset"];function Qi(t){"@babel/helpers - typeof";return Qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qi(t)}function AN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function br(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?AN(Object(r),!0).forEach(function(n){dpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function dpe(t,e,r){return e=upe(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function upe(t){var e=hpe(t,"string");return Qi(e)=="symbol"?e:e+""}function hpe(t,e){if(Qi(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Qi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vi(){return vi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},vi.apply(this,arguments)}function TN(t,e){if(t==null)return{};var r=fpe(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function fpe(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}var mpe=function(e){var r=e.fill;if(!r||r==="none")return null;var n=e.fillOpacity,a=e.x,s=e.y,o=e.width,l=e.height,c=e.ry;return $.createElement("rect",{x:a,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function OO(t,e){var r;if($.isValidElement(t))r=$.cloneElement(t,e);else if(Ue(t))r=t(e);else{var n=e.x1,a=e.y1,s=e.x2,o=e.y2,l=e.key,c=TN(e,lpe),d=Be(c,!1);d.offset;var u=TN(d,cpe);r=$.createElement("line",vi({},u,{x1:n,y1:a,x2:s,y2:o,fill:"none",key:l}))}return r}function gpe(t){var e=t.x,r=t.width,n=t.horizontal,a=n===void 0?!0:n,s=t.horizontalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var d=br(br({},t),{},{x1:e,y1:l,x2:e+r,y2:l,key:"line-".concat(c),index:c});return OO(a,d)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function ppe(t){var e=t.y,r=t.height,n=t.vertical,a=n===void 0?!0:n,s=t.verticalPoints;if(!a||!s||!s.length)return null;var o=s.map(function(l,c){var d=br(br({},t),{},{x1:l,y1:e,x2:l,y2:e+r,key:"line-".concat(c),index:c});return OO(a,d)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function vpe(t){var e=t.horizontalFill,r=t.fillOpacity,n=t.x,a=t.y,s=t.width,o=t.height,l=t.horizontalPoints,c=t.horizontal,d=c===void 0?!0:c;if(!d||!e||!e.length)return null;var u=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var v=!u[m+1],p=v?a+o-f:u[m+1]-f;if(p<=0)return null;var g=m%e.length;return $.createElement("rect",{key:"react-".concat(m),y:f,x:n,height:p,width:s,stroke:"none",fill:e[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function ype(t){var e=t.vertical,r=e===void 0?!0:e,n=t.verticalFill,a=t.fillOpacity,s=t.x,o=t.y,l=t.width,c=t.height,d=t.verticalPoints;if(!r||!n||!n.length)return null;var u=d.map(function(f){return Math.round(f+s-s)}).sort(function(f,m){return f-m});s!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var v=!u[m+1],p=v?s+l-f:u[m+1]-f;if(p<=0)return null;var g=m%n.length;return $.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:n[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var bpe=function(e,r){var n=e.xAxis,a=e.width,s=e.height,o=e.offset;return DM(Ow(br(br(br({},Ec.defaultProps),n),{},{ticks:Na(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.left,o.left+o.width,r)},xpe=function(e,r){var n=e.yAxis,a=e.width,s=e.height,o=e.offset;return DM(Ow(br(br(br({},Ec.defaultProps),n),{},{ticks:Na(n,!0),viewBox:{x:0,y:0,width:a,height:s}})),o.top,o.top+o.height,r)},Eo={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function RO(t){var e,r,n,a,s,o,l=Tw(),c=Dw(),d=oge(),u=br(br({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:Eo.stroke,fill:(r=t.fill)!==null&&r!==void 0?r:Eo.fill,horizontal:(n=t.horizontal)!==null&&n!==void 0?n:Eo.horizontal,horizontalFill:(a=t.horizontalFill)!==null&&a!==void 0?a:Eo.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:Eo.vertical,verticalFill:(o=t.verticalFill)!==null&&o!==void 0?o:Eo.verticalFill,x:de(t.x)?t.x:d.left,y:de(t.y)?t.y:d.top,width:de(t.width)?t.width:d.width,height:de(t.height)?t.height:d.height}),h=u.x,f=u.y,m=u.width,v=u.height,p=u.syncWithTicks,g=u.horizontalValues,y=u.verticalValues,b=age(),w=sge();if(!de(m)||m<=0||!de(v)||v<=0||!de(h)||h!==+h||!de(f)||f!==+f)return null;var j=u.verticalCoordinatesGenerator||bpe,_=u.horizontalCoordinatesGenerator||xpe,S=u.horizontalPoints,N=u.verticalPoints;if((!S||!S.length)&&Ue(_)){var k=g&&g.length,E=_({yAxis:w?br(br({},w),{},{ticks:k?g:w.ticks}):void 0,width:l,height:c,offset:d},k?!0:p);Bn(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Qi(E),"]")),Array.isArray(E)&&(S=E)}if((!N||!N.length)&&Ue(j)){var P=y&&y.length,T=j({xAxis:b?br(br({},b),{},{ticks:P?y:b.ticks}):void 0,width:l,height:c,offset:d},P?!0:p);Bn(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Qi(T),"]")),Array.isArray(T)&&(N=T)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(mpe,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),$.createElement(gpe,vi({},u,{offset:d,horizontalPoints:S,xAxis:b,yAxis:w})),$.createElement(ppe,vi({},u,{offset:d,verticalPoints:N,xAxis:b,yAxis:w})),$.createElement(vpe,vi({},u,{horizontalPoints:S})),$.createElement(ype,vi({},u,{verticalPoints:N})))}RO.displayName="CartesianGrid";function Yl(t){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yl(t)}function wpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,LO(n.key),n)}}function jpe(t,e,r){return e&&_pe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Spe(t,e,r){return e=nm(e),kpe(t,$O()?Reflect.construct(e,r||[],nm(t).constructor):e.apply(t,r))}function kpe(t,e){if(e&&(Yl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Npe(t)}function Npe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $O(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($O=function(){return!!t})()}function nm(t){return nm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nm(t)}function Epe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qb(t,e)}function qb(t,e){return qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},qb(t,e)}function IO(t,e,r){return e=LO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function LO(t){var e=Cpe(t,"string");return Yl(e)=="symbol"?e:e+""}function Cpe(t,e){if(Yl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Yl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ub(){return Ub=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ub.apply(this,arguments)}function Ape(t){var e=t.xAxisId,r=Tw(),n=Dw(),a=jO(e);return a==null?null:x.createElement(Ec,Ub({},a,{className:Ge("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Na(o,!0)}}))}var Wg=function(t){function e(){return wpe(this,e),Spe(this,e,arguments)}return Epe(e,t),jpe(e,[{key:"render",value:function(){return x.createElement(Ape,this.props)}}])}(x.Component);IO(Wg,"displayName","XAxis");IO(Wg,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Xl(t){"@babel/helpers - typeof";return Xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xl(t)}function Tpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qO(n.key),n)}}function Ppe(t,e,r){return e&&Dpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mpe(t,e,r){return e=am(e),Ope(t,FO()?Reflect.construct(e,r||[],am(t).constructor):e.apply(t,r))}function Ope(t,e){if(e&&(Xl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rpe(t)}function Rpe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FO=function(){return!!t})()}function am(t){return am=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},am(t)}function $pe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zb(t,e)}function zb(t,e){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},zb(t,e)}function BO(t,e,r){return e=qO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qO(t){var e=Ipe(t,"string");return Xl(e)=="symbol"?e:e+""}function Ipe(t,e){if(Xl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hb(){return Hb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hb.apply(this,arguments)}var Lpe=function(e){var r=e.yAxisId,n=Tw(),a=Dw(),s=SO(r);return s==null?null:x.createElement(Ec,Hb({},s,{className:Ge("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Na(l,!0)}}))},Kg=function(t){function e(){return Tpe(this,e),Mpe(this,e,arguments)}return $pe(e,t),Ppe(e,[{key:"render",value:function(){return x.createElement(Lpe,this.props)}}])}(x.Component);BO(Kg,"displayName","YAxis");BO(Kg,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function DN(t){return Upe(t)||qpe(t)||Bpe(t)||Fpe()}function Fpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bpe(t,e){if(t){if(typeof t=="string")return Wb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wb(t,e)}}function qpe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Upe(t){if(Array.isArray(t))return Wb(t)}function Wb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Kb=function(e,r,n,a,s){var o=Sn(e,Mw),l=Sn(e,Ug),c=[].concat(DN(o),DN(l)),d=Sn(e,Hg),u="".concat(a,"Id"),h=a[0],f=r;if(c.length&&(f=c.reduce(function(p,g){if(g.props[u]===n&&oa(g.props,"extendDomain")&&de(g.props[h])){var y=g.props[h];return[Math.min(p[0],y),Math.max(p[1],y)]}return p},f)),d.length){var m="".concat(h,"1"),v="".concat(h,"2");f=d.reduce(function(p,g){if(g.props[u]===n&&oa(g.props,"extendDomain")&&de(g.props[m])&&de(g.props[v])){var y=g.props[m],b=g.props[v];return[Math.min(p[0],y,b),Math.max(p[1],y,b)]}return p},f)}return s&&s.length&&(f=s.reduce(function(p,g){return de(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},f)),f},UO={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function s(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,h||c,f),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)e.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,m,v){var p=r?r+d:d;if(!this._events[p])return!1;var g=this._events[p],y=arguments.length,b,w;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),y){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,f),!0;case 5:return g.fn.call(g.context,u,h,f,m),!0;case 6:return g.fn.call(g.context,u,h,f,m,v),!0}for(w=1,b=new Array(y-1);w<y;w++)b[w-1]=arguments[w];g.fn.apply(g.context,b)}else{var j=g.length,_;for(w=0;w<j;w++)switch(g[w].once&&this.removeListener(d,g[w].fn,void 0,!0),y){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,h);break;case 4:g[w].fn.call(g[w].context,u,h,f);break;default:if(!b)for(_=1,b=new Array(y-1);_<y;_++)b[_-1]=arguments[_];g[w].fn.apply(g[w].context,b)}}return!0},l.prototype.on=function(d,u,h){return s(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return s(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===u&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var p=0,g=[],y=v.length;p<y;p++)(v[p].fn!==u||f&&!v[p].once||h&&v[p].context!==h)&&g.push(v[p]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(UO);var zpe=UO.exports;const Hpe=jt(zpe);var ov=new Hpe,lv="recharts.syncMouseEvents";function su(t){"@babel/helpers - typeof";return su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},su(t)}function Wpe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kpe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zO(n.key),n)}}function Gpe(t,e,r){return e&&Kpe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cv(t,e,r){return e=zO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zO(t){var e=Vpe(t,"string");return su(e)=="symbol"?e:e+""}function Vpe(t,e){if(su(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(su(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qpe=function(){function t(){Wpe(this,t),cv(this,"activeIndex",0),cv(this,"coordinateList",[]),cv(this,"layout","horizontal")}return Gpe(t,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,s=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,h=u===void 0?null:u,f=r.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),s=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((n=window)===null||n===void 0?void 0:n.scrollY)||0,h=s+c+d,f=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function Jpe(t,e,r){if(r==="number"&&e===!0&&Array.isArray(t)){var n=t==null?void 0:t[0],a=t==null?void 0:t[1];if(n&&a&&de(n)&&de(a))return!0}return!1}function Ype(t,e,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-a:r.left+.5,y:t==="horizontal"?r.top+.5:e.y-a,width:t==="horizontal"?n:r.width-1,height:t==="horizontal"?r.height-1:n}}function HO(t){var e=t.cx,r=t.cy,n=t.radius,a=t.startAngle,s=t.endAngle,o=Dt(e,r,n,a),l=Dt(e,r,n,s);return{points:[o,l],cx:e,cy:r,radius:n,startAngle:a,endAngle:s}}function Xpe(t,e,r){var n,a,s,o;if(t==="horizontal")n=e.x,s=n,a=r.top,o=r.top+r.height;else if(t==="vertical")a=e.y,o=a,n=r.left,s=r.left+r.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,d=e.innerRadius,u=e.outerRadius,h=e.angle,f=Dt(l,c,d,h),m=Dt(l,c,u,h);n=f.x,a=f.y,s=m.x,o=m.y}else return HO(e);return[{x:n,y:a},{x:s,y:o}]}function iu(t){"@babel/helpers - typeof";return iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},iu(t)}function PN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function vh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?PN(Object(r),!0).forEach(function(n){Zpe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zpe(t,e,r){return e=eve(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function eve(t){var e=tve(t,"string");return iu(e)=="symbol"?e:e+""}function tve(t,e){if(iu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(iu(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rve(t){var e,r,n=t.element,a=t.tooltipEventType,s=t.isActive,o=t.activeCoordinate,l=t.activePayload,c=t.offset,d=t.activeTooltipIndex,u=t.tooltipAxisBandSize,h=t.layout,f=t.chartName,m=(e=n.props.cursor)!==null&&e!==void 0?e:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!s||!o||f!=="ScatterChart"&&a!=="axis")return null;var v,p=gb;if(f==="ScatterChart")v=o,p=Mue;else if(f==="BarChart")v=Ype(h,o,c,u),p=kw;else if(h==="radial"){var g=HO(o),y=g.cx,b=g.cy,w=g.radius,j=g.startAngle,_=g.endAngle;v={cx:y,cy:b,startAngle:j,endAngle:_,innerRadius:w,outerRadius:w},p=UM}else v={points:Xpe(h,o,c)},p=gb;var S=vh(vh(vh(vh({stroke:"#ccc",pointerEvents:"none"},c),v),Be(m,!1)),{},{payload:l,payloadIndex:d,className:Ge("recharts-tooltip-cursor",m.className)});return x.isValidElement(m)?x.cloneElement(m,S):x.createElement(p,S)}var nve=["item"],ave=["children","className","width","height","style","compact","title","desc"];function Zl(t){"@babel/helpers - typeof";return Zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zl(t)}function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ho.apply(this,arguments)}function MN(t,e){return ove(t)||ive(t,e)||KO(t,e)||sve()}function sve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ive(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,a,s,o,l=[],c=!0,d=!1;try{if(s=(r=r.call(t)).next,e!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function ove(t){if(Array.isArray(t))return t}function ON(t,e){if(t==null)return{};var r=lve(t,e),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(a=0;a<s.length;a++)n=s[a],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function lve(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function cve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GO(n.key),n)}}function uve(t,e,r){return e&&dve(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function hve(t,e,r){return e=sm(e),fve(t,WO()?Reflect.construct(e,r||[],sm(t).constructor):e.apply(t,r))}function fve(t,e){if(e&&(Zl(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mve(t)}function mve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function WO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WO=function(){return!!t})()}function sm(t){return sm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sm(t)}function gve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gb(t,e)}function Gb(t,e){return Gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Gb(t,e)}function ec(t){return yve(t)||vve(t)||KO(t)||pve()}function pve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KO(t,e){if(t){if(typeof t=="string")return Vb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vb(t,e)}}function vve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function yve(t){if(Array.isArray(t))return Vb(t)}function Vb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?RN(Object(r),!0).forEach(function(n){Me(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Me(t,e,r){return e=GO(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function GO(t){var e=bve(t,"string");return Zl(e)=="symbol"?e:e+""}function bve(t,e){if(Zl(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var xve={xAxis:["bottom","top"],yAxis:["left","right"]},wve={width:"100%",height:"100%"},VO={x:0,y:0};function yh(t){return t}var _ve=function(e,r){return r==="horizontal"?e.x:r==="vertical"?e.y:r==="centric"?e.angle:e.radius},jve=function(e,r,n,a){var s=r.find(function(u){return u&&u.index===n});if(s){if(e==="horizontal")return{x:s.coordinate,y:a.y};if(e==="vertical")return{x:a.x,y:s.coordinate};if(e==="centric"){var o=s.coordinate,l=a.radius;return te(te(te({},a),Dt(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,d=a.angle;return te(te(te({},a),Dt(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return VO},Gg=function(e,r){var n=r.graphicalItems,a=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(ec(l),ec(d)):l},[]);return o.length>0?o:e&&e.length&&de(a)&&de(s)?e.slice(a,s+1):[]};function QO(t){return t==="number"?[0,"auto"]:void 0}var Qb=function(e,r,n,a){var s=e.graphicalItems,o=e.tooltipAxis,l=Gg(r,e);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:r;h&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=n&&(h=h.slice(e.dataStartIndex,e.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=jy(m,o.dataKey,a)}else f=h&&h[n]||l[n];return f?[].concat(ec(c),[$M(d,f)]):c},[])},$N=function(e,r,n,a){var s=a||{x:e.chartX,y:e.chartY},o=_ve(s,n),l=e.orderedTooltipTicks,c=e.tooltipAxis,d=e.tooltipTicks,u=nle(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=Qb(e,r,u,h),m=jve(n,l,u,s);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},Sve=function(e,r){var n=r.axes,a=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,h=e.children,f=e.stackOffset,m=TM(u,s);return n.reduce(function(v,p){var g,y=p.type.defaultProps!==void 0?te(te({},p.type.defaultProps),p.props):p.props,b=y.type,w=y.dataKey,j=y.allowDataOverflow,_=y.allowDuplicatedCategory,S=y.scale,N=y.ticks,k=y.includeHidden,E=y[o];if(v[E])return v;var P=Gg(e.data,{graphicalItems:a.filter(function(O){var F,G=o in O.props?O.props[o]:(F=O.type.defaultProps)===null||F===void 0?void 0:F[o];return G===E}),dataStartIndex:c,dataEndIndex:d}),T=P.length,D,A,C;Jpe(y.domain,j,b)&&(D=db(y.domain,null,j),m&&(b==="number"||S!=="auto")&&(C=fd(P,w,"category")));var R=QO(b);if(!D||D.length===0){var L,M=(L=y.domain)!==null&&L!==void 0?L:R;if(w){if(D=fd(P,w,b),b==="category"&&m){var I=GG(D);_&&I?(A=D,D=Gf(0,T)):_||(D=ok(M,D,p).reduce(function(O,F){return O.indexOf(F)>=0?O:[].concat(ec(O),[F])},[]))}else if(b==="category")_?D=D.filter(function(O){return O!==""&&!Ze(O)}):D=ok(M,D,p).reduce(function(O,F){return O.indexOf(F)>=0||F===""||Ze(F)?O:[].concat(ec(O),[F])},[]);else if(b==="number"){var B=lle(P,a.filter(function(O){var F,G,Y=o in O.props?O.props[o]:(F=O.type.defaultProps)===null||F===void 0?void 0:F[o],Z="hide"in O.props?O.props.hide:(G=O.type.defaultProps)===null||G===void 0?void 0:G.hide;return Y===E&&(k||!Z)}),w,s,u);B&&(D=B)}m&&(b==="number"||S!=="auto")&&(C=fd(P,w,"category"))}else m?D=Gf(0,T):l&&l[E]&&l[E].hasStack&&b==="number"?D=f==="expand"?[0,1]:RM(l[E].stackGroups,c,d):D=AM(P,a.filter(function(O){var F=o in O.props?O.props[o]:O.type.defaultProps[o],G="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return F===E&&(k||!G)}),b,u,!0);if(b==="number")D=Kb(h,D,E,s,N),M&&(D=db(M,D,j));else if(b==="category"&&M){var H=M,q=D.every(function(O){return H.indexOf(O)>=0});q&&(D=H)}}return te(te({},v),{},Me({},E,te(te({},y),{},{axisType:s,domain:D,categoricalDomain:C,duplicateDomain:A,originalDomain:(g=y.domain)!==null&&g!==void 0?g:R,isCategorical:m,layout:u})))},{})},kve=function(e,r){var n=r.graphicalItems,a=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.layout,h=e.children,f=Gg(e.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),m=f.length,v=TM(u,s),p=-1;return n.reduce(function(g,y){var b=y.type.defaultProps!==void 0?te(te({},y.type.defaultProps),y.props):y.props,w=b[o],j=QO("number");if(!g[w]){p++;var _;return v?_=Gf(0,m):l&&l[w]&&l[w].hasStack?(_=RM(l[w].stackGroups,c,d),_=Kb(h,_,w,s)):(_=db(j,AM(f,n.filter(function(S){var N,k,E=o in S.props?S.props[o]:(N=S.type.defaultProps)===null||N===void 0?void 0:N[o],P="hide"in S.props?S.props.hide:(k=S.type.defaultProps)===null||k===void 0?void 0:k.hide;return E===w&&!P}),"number",u),a.defaultProps.allowDataOverflow),_=Kb(h,_,w,s)),te(te({},g),{},Me({},w,te(te({axisType:s},a.defaultProps),{},{hide:!0,orientation:dn(xve,"".concat(s,".").concat(p%2),null),domain:_,originalDomain:j,isCategorical:v,layout:u})))}return g},{})},Nve=function(e,r){var n=r.axisType,a=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=e.children,h="".concat(a,"Id"),f=Sn(u,s),m={};return f&&f.length?m=Sve(e,{axes:f,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=kve(e,{Axis:s,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},Eve=function(e){var r=ls(e),n=Na(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:X0(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Rf(r,n)}},IN=function(e){var r=e.children,n=e.defaultShowTooltip,a=sn(r,Wl),s=0,o=0;return e.data&&e.data.length!==0&&(o=e.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(s=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Cve=function(e){return!e||!e.length?!1:e.some(function(r){var n=Aa(r&&r.type);return n&&n.indexOf("Bar")>=0})},LN=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Ave=function(e,r){var n=e.props,a=e.graphicalItems,s=e.xAxisMap,o=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,d=n.width,u=n.height,h=n.children,f=n.margin||{},m=sn(h,Wl),v=sn(h,tl),p=Object.keys(c).reduce(function(_,S){var N=c[S],k=N.orientation;return!N.mirror&&!N.hide?te(te({},_),{},Me({},k,_[k]+N.width)):_},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(_,S){var N=o[S],k=N.orientation;return!N.mirror&&!N.hide?te(te({},_),{},Me({},k,dn(_,"".concat(k))+N.height)):_},{top:f.top||0,bottom:f.bottom||0}),y=te(te({},g),p),b=y.bottom;m&&(y.bottom+=m.props.height||Wl.defaultProps.height),v&&r&&(y=ile(y,a,n,r));var w=d-y.left-y.right,j=u-y.top-y.bottom;return te(te({brushBottom:b},y),{},{width:Math.max(w,0),height:Math.max(j,0)})},Tve=function(e,r){if(r==="xAxis")return e[r].width;if(r==="yAxis")return e[r].height},JO=function(e){var r=e.chartName,n=e.GraphicalChild,a=e.defaultTooltipEventType,s=a===void 0?"axis":a,o=e.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=e.axisComponents,d=e.legendContent,u=e.formatAxisMap,h=e.defaultProps,f=function(y,b){var w=b.graphicalItems,j=b.stackGroups,_=b.offset,S=b.updateId,N=b.dataStartIndex,k=b.dataEndIndex,E=y.barSize,P=y.layout,T=y.barGap,D=y.barCategoryGap,A=y.maxBarSize,C=LN(P),R=C.numericAxisName,L=C.cateAxisName,M=Cve(w),I=[];return w.forEach(function(B,H){var q=Gg(y.data,{graphicalItems:[B],dataStartIndex:N,dataEndIndex:k}),O=B.type.defaultProps!==void 0?te(te({},B.type.defaultProps),B.props):B.props,F=O.dataKey,G=O.maxBarSize,Y=O["".concat(R,"Id")],Z=O["".concat(L,"Id")],le={},V=c.reduce(function(dt,we){var ze=b["".concat(we.axisType,"Map")],Ie=O["".concat(we.axisType,"Id")];ze&&ze[Ie]||we.axisType==="zAxis"||Vi();var gr=ze[Ie];return te(te({},dt),{},Me(Me({},we.axisType,gr),"".concat(we.axisType,"Ticks"),Na(gr)))},le),Q=V[L],ce=V["".concat(L,"Ticks")],xe=j&&j[Y]&&j[Y].hasStack&&vle(B,j[Y].stackGroups),ae=Aa(B.type).indexOf("Bar")>=0,ee=Rf(Q,ce),J=[],re=M&&ale({barSize:E,stackGroups:j,totalSize:Tve(V,L)});if(ae){var ue,pe,ve=Ze(G)?A:G,ke=(ue=(pe=Rf(Q,ce,!0))!==null&&pe!==void 0?pe:ve)!==null&&ue!==void 0?ue:0;J=sle({barGap:T,barCategoryGap:D,bandSize:ke!==ee?ke:ee,sizeList:re[Z],maxBarSize:ve}),ke!==ee&&(J=J.map(function(dt){return te(te({},dt),{},{position:te(te({},dt.position),{},{offset:dt.position.offset-ke/2})})}))}var ot=B&&B.type&&B.type.getComposedData;ot&&I.push({props:te(te({},ot(te(te({},V),{},{displayedData:q,props:y,dataKey:F,item:B,bandSize:ee,barPosition:J,offset:_,stackedData:xe,layout:P,dataStartIndex:N,dataEndIndex:k}))),{},Me(Me(Me({key:B.key||"item-".concat(H)},R,V[R]),L,V[L]),"animationId",S)),childIndex:s9(B,y.children),item:B})}),I},m=function(y,b){var w=y.props,j=y.dataStartIndex,_=y.dataEndIndex,S=y.updateId;if(!t1({props:w}))return null;var N=w.children,k=w.layout,E=w.stackOffset,P=w.data,T=w.reverseStackOrder,D=LN(k),A=D.numericAxisName,C=D.cateAxisName,R=Sn(N,n),L=gle(P,R,"".concat(A,"Id"),"".concat(C,"Id"),E,T),M=c.reduce(function(O,F){var G="".concat(F.axisType,"Map");return te(te({},O),{},Me({},G,Nve(w,te(te({},F),{},{graphicalItems:R,stackGroups:F.axisType===A&&L,dataStartIndex:j,dataEndIndex:_}))))},{}),I=Ave(te(te({},M),{},{props:w,graphicalItems:R}),b==null?void 0:b.legendBBox);Object.keys(M).forEach(function(O){M[O]=u(w,M[O],I,O.replace("Map",""),r)});var B=M["".concat(C,"Map")],H=Eve(B),q=f(w,te(te({},M),{},{dataStartIndex:j,dataEndIndex:_,updateId:S,graphicalItems:R,stackGroups:L,offset:I}));return te(te({formattedGraphicalItems:q,graphicalItems:R,offset:I,stackGroups:L},H),M)},v=function(g){function y(b){var w,j,_;return cve(this,y),_=hve(this,y,[b]),Me(_,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Me(_,"accessibilityManager",new Qpe),Me(_,"handleLegendBBoxUpdate",function(S){if(S){var N=_.state,k=N.dataStartIndex,E=N.dataEndIndex,P=N.updateId;_.setState(te({legendBBox:S},m({props:_.props,dataStartIndex:k,dataEndIndex:E,updateId:P},te(te({},_.state),{},{legendBBox:S}))))}}),Me(_,"handleReceiveSyncEvent",function(S,N,k){if(_.props.syncId===S){if(k===_.eventEmitterSymbol&&typeof _.props.syncMethod!="function")return;_.applySyncEvent(N)}}),Me(_,"handleBrushChange",function(S){var N=S.startIndex,k=S.endIndex;if(N!==_.state.dataStartIndex||k!==_.state.dataEndIndex){var E=_.state.updateId;_.setState(function(){return te({dataStartIndex:N,dataEndIndex:k},m({props:_.props,dataStartIndex:N,dataEndIndex:k,updateId:E},_.state))}),_.triggerSyncEvent({dataStartIndex:N,dataEndIndex:k})}}),Me(_,"handleMouseEnter",function(S){var N=_.getMouseInfo(S);if(N){var k=te(te({},N),{},{isTooltipActive:!0});_.setState(k),_.triggerSyncEvent(k);var E=_.props.onMouseEnter;Ue(E)&&E(k,S)}}),Me(_,"triggeredAfterMouseMove",function(S){var N=_.getMouseInfo(S),k=N?te(te({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};_.setState(k),_.triggerSyncEvent(k);var E=_.props.onMouseMove;Ue(E)&&E(k,S)}),Me(_,"handleItemMouseEnter",function(S){_.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Me(_,"handleItemMouseLeave",function(){_.setState(function(){return{isTooltipActive:!1}})}),Me(_,"handleMouseMove",function(S){S.persist(),_.throttleTriggeredAfterMouseMove(S)}),Me(_,"handleMouseLeave",function(S){_.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};_.setState(N),_.triggerSyncEvent(N);var k=_.props.onMouseLeave;Ue(k)&&k(N,S)}),Me(_,"handleOuterEvent",function(S){var N=a9(S),k=dn(_.props,"".concat(N));if(N&&Ue(k)){var E,P;/.*touch.*/i.test(N)?P=_.getMouseInfo(S.changedTouches[0]):P=_.getMouseInfo(S),k((E=P)!==null&&E!==void 0?E:{},S)}}),Me(_,"handleClick",function(S){var N=_.getMouseInfo(S);if(N){var k=te(te({},N),{},{isTooltipActive:!0});_.setState(k),_.triggerSyncEvent(k);var E=_.props.onClick;Ue(E)&&E(k,S)}}),Me(_,"handleMouseDown",function(S){var N=_.props.onMouseDown;if(Ue(N)){var k=_.getMouseInfo(S);N(k,S)}}),Me(_,"handleMouseUp",function(S){var N=_.props.onMouseUp;if(Ue(N)){var k=_.getMouseInfo(S);N(k,S)}}),Me(_,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&_.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Me(_,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&_.handleMouseDown(S.changedTouches[0])}),Me(_,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&_.handleMouseUp(S.changedTouches[0])}),Me(_,"handleDoubleClick",function(S){var N=_.props.onDoubleClick;if(Ue(N)){var k=_.getMouseInfo(S);N(k,S)}}),Me(_,"handleContextMenu",function(S){var N=_.props.onContextMenu;if(Ue(N)){var k=_.getMouseInfo(S);N(k,S)}}),Me(_,"triggerSyncEvent",function(S){_.props.syncId!==void 0&&ov.emit(lv,_.props.syncId,S,_.eventEmitterSymbol)}),Me(_,"applySyncEvent",function(S){var N=_.props,k=N.layout,E=N.syncMethod,P=_.state.updateId,T=S.dataStartIndex,D=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)_.setState(te({dataStartIndex:T,dataEndIndex:D},m({props:_.props,dataStartIndex:T,dataEndIndex:D,updateId:P},_.state)));else if(S.activeTooltipIndex!==void 0){var A=S.chartX,C=S.chartY,R=S.activeTooltipIndex,L=_.state,M=L.offset,I=L.tooltipTicks;if(!M)return;if(typeof E=="function")R=E(I,S);else if(E==="value"){R=-1;for(var B=0;B<I.length;B++)if(I[B].value===S.activeLabel){R=B;break}}var H=te(te({},M),{},{x:M.left,y:M.top}),q=Math.min(A,H.x+H.width),O=Math.min(C,H.y+H.height),F=I[R]&&I[R].value,G=Qb(_.state,_.props.data,R),Y=I[R]?{x:k==="horizontal"?I[R].coordinate:q,y:k==="horizontal"?O:I[R].coordinate}:VO;_.setState(te(te({},S),{},{activeLabel:F,activeCoordinate:Y,activePayload:G,activeTooltipIndex:R}))}else _.setState(S)}),Me(_,"renderCursor",function(S){var N,k=_.state,E=k.isTooltipActive,P=k.activeCoordinate,T=k.activePayload,D=k.offset,A=k.activeTooltipIndex,C=k.tooltipAxisBandSize,R=_.getTooltipEventType(),L=(N=S.props.active)!==null&&N!==void 0?N:E,M=_.props.layout,I=S.key||"_recharts-cursor";return $.createElement(rve,{key:I,activeCoordinate:P,activePayload:T,activeTooltipIndex:A,chartName:r,element:S,isActive:L,layout:M,offset:D,tooltipAxisBandSize:C,tooltipEventType:R})}),Me(_,"renderPolarAxis",function(S,N,k){var E=dn(S,"type.axisType"),P=dn(_.state,"".concat(E,"Map")),T=S.type.defaultProps,D=T!==void 0?te(te({},T),S.props):S.props,A=P&&P[D["".concat(E,"Id")]];return x.cloneElement(S,te(te({},A),{},{className:Ge(E,A.className),key:S.key||"".concat(N,"-").concat(k),ticks:Na(A,!0)}))}),Me(_,"renderPolarGrid",function(S){var N=S.props,k=N.radialLines,E=N.polarAngles,P=N.polarRadius,T=_.state,D=T.radiusAxisMap,A=T.angleAxisMap,C=ls(D),R=ls(A),L=R.cx,M=R.cy,I=R.innerRadius,B=R.outerRadius;return x.cloneElement(S,{polarAngles:Array.isArray(E)?E:Na(R,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(P)?P:Na(C,!0).map(function(H){return H.coordinate}),cx:L,cy:M,innerRadius:I,outerRadius:B,key:S.key||"polar-grid",radialLines:k})}),Me(_,"renderLegend",function(){var S=_.state.formattedGraphicalItems,N=_.props,k=N.children,E=N.width,P=N.height,T=_.props.margin||{},D=E-(T.left||0)-(T.right||0),A=EM({children:k,formattedGraphicalItems:S,legendWidth:D,legendContent:d});if(!A)return null;var C=A.item,R=ON(A,nve);return x.cloneElement(C,te(te({},R),{},{chartWidth:E,chartHeight:P,margin:T,onBBoxUpdate:_.handleLegendBBoxUpdate}))}),Me(_,"renderTooltip",function(){var S,N=_.props,k=N.children,E=N.accessibilityLayer,P=sn(k,xn);if(!P)return null;var T=_.state,D=T.isTooltipActive,A=T.activeCoordinate,C=T.activePayload,R=T.activeLabel,L=T.offset,M=(S=P.props.active)!==null&&S!==void 0?S:D;return x.cloneElement(P,{viewBox:te(te({},L),{},{x:L.left,y:L.top}),active:M,label:R,payload:M?C:[],coordinate:A,accessibilityLayer:E})}),Me(_,"renderBrush",function(S){var N=_.props,k=N.margin,E=N.data,P=_.state,T=P.offset,D=P.dataStartIndex,A=P.dataEndIndex,C=P.updateId;return x.cloneElement(S,{key:S.key||"_recharts-brush",onChange:fh(_.handleBrushChange,S.props.onChange),data:E,x:de(S.props.x)?S.props.x:T.left,y:de(S.props.y)?S.props.y:T.top+T.height+T.brushBottom-(k.bottom||0),width:de(S.props.width)?S.props.width:T.width,startIndex:D,endIndex:A,updateId:"brush-".concat(C)})}),Me(_,"renderReferenceElement",function(S,N,k){if(!S)return null;var E=_,P=E.clipPathId,T=_.state,D=T.xAxisMap,A=T.yAxisMap,C=T.offset,R=S.type.defaultProps||{},L=S.props,M=L.xAxisId,I=M===void 0?R.xAxisId:M,B=L.yAxisId,H=B===void 0?R.yAxisId:B;return x.cloneElement(S,{key:S.key||"".concat(N,"-").concat(k),xAxis:D[I],yAxis:A[H],viewBox:{x:C.left,y:C.top,width:C.width,height:C.height},clipPathId:P})}),Me(_,"renderActivePoints",function(S){var N=S.item,k=S.activePoint,E=S.basePoint,P=S.childIndex,T=S.isRange,D=[],A=N.props.key,C=N.item.type.defaultProps!==void 0?te(te({},N.item.type.defaultProps),N.item.props):N.item.props,R=C.activeDot,L=C.dataKey,M=te(te({index:P,dataKey:L,cx:k.x,cy:k.y,r:4,fill:Sw(N.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},Be(R,!1)),lf(R));return D.push(y.renderActiveDot(R,M,"".concat(A,"-activePoint-").concat(P))),E?D.push(y.renderActiveDot(R,te(te({},M),{},{cx:E.x,cy:E.y}),"".concat(A,"-basePoint-").concat(P))):T&&D.push(null),D}),Me(_,"renderGraphicChild",function(S,N,k){var E=_.filterFormatItem(S,N,k);if(!E)return null;var P=_.getTooltipEventType(),T=_.state,D=T.isTooltipActive,A=T.tooltipAxis,C=T.activeTooltipIndex,R=T.activeLabel,L=_.props.children,M=sn(L,xn),I=E.props,B=I.points,H=I.isRange,q=I.baseLine,O=E.item.type.defaultProps!==void 0?te(te({},E.item.type.defaultProps),E.item.props):E.item.props,F=O.activeDot,G=O.hide,Y=O.activeBar,Z=O.activeShape,le=!!(!G&&D&&M&&(F||Y||Z)),V={};P!=="axis"&&M&&M.props.trigger==="click"?V={onClick:fh(_.handleItemMouseEnter,S.props.onClick)}:P!=="axis"&&(V={onMouseLeave:fh(_.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:fh(_.handleItemMouseEnter,S.props.onMouseEnter)});var Q=x.cloneElement(S,te(te({},E.props),V));function ce(we){return typeof A.dataKey=="function"?A.dataKey(we.payload):null}if(le)if(C>=0){var xe,ae;if(A.dataKey&&!A.allowDuplicatedCategory){var ee=typeof A.dataKey=="function"?ce:"payload.".concat(A.dataKey.toString());xe=jy(B,ee,R),ae=H&&q&&jy(q,ee,R)}else xe=B==null?void 0:B[C],ae=H&&q&&q[C];if(Z||Y){var J=S.props.activeIndex!==void 0?S.props.activeIndex:C;return[x.cloneElement(S,te(te(te({},E.props),V),{},{activeIndex:J})),null,null]}if(!Ze(xe))return[Q].concat(ec(_.renderActivePoints({item:E,activePoint:xe,basePoint:ae,childIndex:C,isRange:H})))}else{var re,ue=(re=_.getItemByXY(_.state.activeCoordinate))!==null&&re!==void 0?re:{graphicalItem:Q},pe=ue.graphicalItem,ve=pe.item,ke=ve===void 0?S:ve,ot=pe.childIndex,dt=te(te(te({},E.props),V),{},{activeIndex:ot});return[x.cloneElement(ke,dt),null,null]}return H?[Q,null,null]:[Q,null]}),Me(_,"renderCustomized",function(S,N,k){return x.cloneElement(S,te(te({key:"recharts-customized-".concat(k)},_.props),_.state))}),Me(_,"renderMap",{CartesianGrid:{handler:yh,once:!0},ReferenceArea:{handler:_.renderReferenceElement},ReferenceLine:{handler:yh},ReferenceDot:{handler:_.renderReferenceElement},XAxis:{handler:yh},YAxis:{handler:yh},Brush:{handler:_.renderBrush,once:!0},Bar:{handler:_.renderGraphicChild},Line:{handler:_.renderGraphicChild},Area:{handler:_.renderGraphicChild},Radar:{handler:_.renderGraphicChild},RadialBar:{handler:_.renderGraphicChild},Scatter:{handler:_.renderGraphicChild},Pie:{handler:_.renderGraphicChild},Funnel:{handler:_.renderGraphicChild},Tooltip:{handler:_.renderCursor,once:!0},PolarGrid:{handler:_.renderPolarGrid,once:!0},PolarAngleAxis:{handler:_.renderPolarAxis},PolarRadiusAxis:{handler:_.renderPolarAxis},Customized:{handler:_.renderCustomized}}),_.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Pu("recharts"),"-clip"),_.throttleTriggeredAfterMouseMove=NP(_.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),_.state={},_}return gve(y,g),uve(y,[{key:"componentDidMount",value:function(){var w,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,j=w.children,_=w.data,S=w.height,N=w.layout,k=sn(j,xn);if(k){var E=k.props.defaultIndex;if(!(typeof E!="number"||E<0||E>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[E]&&this.state.tooltipTicks[E].value,T=Qb(this.state,_,E,P),D=this.state.tooltipTicks[E].coordinate,A=(this.state.offset.top+S)/2,C=N==="horizontal",R=C?{x:D,y:A}:{y:D,x:A},L=this.state.formattedGraphicalItems.find(function(I){var B=I.item;return B.type.name==="Scatter"});L&&(R=te(te({},R),L.props.points[E].tooltipPosition),T=L.props.points[E].tooltipPayload);var M={activeTooltipIndex:E,isTooltipActive:!0,activeLabel:P,activePayload:T,activeCoordinate:R};this.setState(M),this.renderCursor(k),this.accessibilityManager.setIndex(E)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var _,S;this.accessibilityManager.setDetails({offset:{left:(_=this.props.margin.left)!==null&&_!==void 0?_:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){ky([sn(w.children,xn)],[sn(this.props.children,xn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=sn(this.props.children,xn);if(w&&typeof w.props.shared=="boolean"){var j=w.props.shared?"axis":"item";return l.indexOf(j)>=0?j:s}return s}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var j=this.container,_=j.getBoundingClientRect(),S=Dne(_),N={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},k=_.width/j.offsetWidth||1,E=this.inRange(N.chartX,N.chartY,k);if(!E)return null;var P=this.state,T=P.xAxisMap,D=P.yAxisMap,A=this.getTooltipEventType(),C=$N(this.state,this.props.data,this.props.layout,E);if(A!=="axis"&&T&&D){var R=ls(T).scale,L=ls(D).scale,M=R&&R.invert?R.invert(N.chartX):null,I=L&&L.invert?L.invert(N.chartY):null;return te(te({},N),{},{xValue:M,yValue:I},C)}return C?te(te({},N),C):null}},{key:"inRange",value:function(w,j){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,N=w/_,k=j/_;if(S==="horizontal"||S==="vertical"){var E=this.state.offset,P=N>=E.left&&N<=E.left+E.width&&k>=E.top&&k<=E.top+E.height;return P?{x:N,y:k}:null}var T=this.state,D=T.angleAxisMap,A=T.radiusAxisMap;if(D&&A){var C=ls(D);return dk({x:N,y:k},C)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,j=this.getTooltipEventType(),_=sn(w,xn),S={};_&&j==="axis"&&(_.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=lf(this.props,this.handleOuterEvent);return te(te({},N),S)}},{key:"addListener",value:function(){ov.on(lv,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){ov.removeListener(lv,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,j,_){for(var S=this.state.formattedGraphicalItems,N=0,k=S.length;N<k;N++){var E=S[N];if(E.item===w||E.props.key===w.key||j===Aa(E.item.type)&&_===E.childIndex)return E}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,j=this.state.offset,_=j.left,S=j.top,N=j.height,k=j.width;return $.createElement("defs",null,$.createElement("clipPath",{id:w},$.createElement("rect",{x:_,y:S,height:N,width:k})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(j,_){var S=MN(_,2),N=S[0],k=S[1];return te(te({},j),{},Me({},N,k.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(j,_){var S=MN(_,2),N=S[0],k=S[1];return te(te({},j),{},Me({},N,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(w){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[w])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(w){var j=this.state,_=j.formattedGraphicalItems,S=j.activeItem;if(_&&_.length)for(var N=0,k=_.length;N<k;N++){var E=_[N],P=E.props,T=E.item,D=T.type.defaultProps!==void 0?te(te({},T.type.defaultProps),T.props):T.props,A=Aa(T.type);if(A==="Bar"){var C=(P.data||[]).find(function(I){return fue(w,I)});if(C)return{graphicalItem:E,payload:C}}else if(A==="RadialBar"){var R=(P.data||[]).find(function(I){return dk(w,I)});if(R)return{graphicalItem:E,payload:R}}else if(Lg(E,S)||Fg(E,S)||eu(E,S)){var L=tfe({graphicalItem:E,activeTooltipItem:S,itemData:D.data}),M=D.activeIndex===void 0?L:D.activeIndex;return{graphicalItem:te(te({},E),{},{childIndex:M}),payload:eu(E,S)?D.data[L]:E.props.data[L]}}}return null}},{key:"render",value:function(){var w=this;if(!t1(this))return null;var j=this.props,_=j.children,S=j.className,N=j.width,k=j.height,E=j.style,P=j.compact,T=j.title,D=j.desc,A=ON(j,ave),C=Be(A,!1);if(P)return $.createElement(yN,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(Ey,Ho({},C,{width:N,height:k,title:T,desc:D}),this.renderClipPath(),n1(_,this.renderMap)));if(this.props.accessibilityLayer){var R,L;C.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,C.role=(L=this.props.role)!==null&&L!==void 0?L:"application",C.onKeyDown=function(I){w.accessibilityManager.keyboardEvent(I)},C.onFocus=function(){w.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return $.createElement(yN,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",Ho({className:Ge("recharts-wrapper",S),style:te({position:"relative",cursor:"default",width:N,height:k},E)},M,{ref:function(B){w.container=B}}),$.createElement(Ey,Ho({},C,{width:N,height:k,title:T,desc:D,style:wve}),this.renderClipPath(),n1(_,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(x.Component);Me(v,"displayName",r),Me(v,"defaultProps",te({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Me(v,"getDerivedStateFromProps",function(g,y){var b=g.dataKey,w=g.data,j=g.children,_=g.width,S=g.height,N=g.layout,k=g.stackOffset,E=g.margin,P=y.dataStartIndex,T=y.dataEndIndex;if(y.updateId===void 0){var D=IN(g);return te(te(te({},D),{},{updateId:0},m(te(te({props:g},D),{},{updateId:0}),y)),{},{prevDataKey:b,prevData:w,prevWidth:_,prevHeight:S,prevLayout:N,prevStackOffset:k,prevMargin:E,prevChildren:j})}if(b!==y.prevDataKey||w!==y.prevData||_!==y.prevWidth||S!==y.prevHeight||N!==y.prevLayout||k!==y.prevStackOffset||!el(E,y.prevMargin)){var A=IN(g),C={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},R=te(te({},$N(y,w,N)),{},{updateId:y.updateId+1}),L=te(te(te({},A),C),R);return te(te(te({},L),m(te({props:g},L),y)),{},{prevDataKey:b,prevData:w,prevWidth:_,prevHeight:S,prevLayout:N,prevStackOffset:k,prevMargin:E,prevChildren:j})}if(!ky(j,y.prevChildren)){var M,I,B,H,q=sn(j,Wl),O=q&&(M=(I=q.props)===null||I===void 0?void 0:I.startIndex)!==null&&M!==void 0?M:P,F=q&&(B=(H=q.props)===null||H===void 0?void 0:H.endIndex)!==null&&B!==void 0?B:T,G=O!==P||F!==T,Y=!Ze(w),Z=Y&&!G?y.updateId:y.updateId+1;return te(te({updateId:Z},m(te(te({props:g},y),{},{updateId:Z,dataStartIndex:O,dataEndIndex:F}),y)),{},{prevChildren:j,dataStartIndex:O,dataEndIndex:F})}return null}),Me(v,"renderActiveDot",function(g,y,b){var w;return x.isValidElement(g)?w=x.cloneElement(g,y):Ue(g)?w=g(y):w=$.createElement(Nw,y),$.createElement(gt,{className:"recharts-active-dot",key:b},w)});var p=x.forwardRef(function(y,b){return $.createElement(v,Ho({},y,{ref:b}))});return p.displayName=v.displayName,p},Dve=JO({chartName:"BarChart",GraphicalChild:fo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Wg},{axisType:"yAxis",AxisComp:Kg}],formatAxisMap:Mme}),FN=JO({chartName:"PieChart",GraphicalChild:da,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ig},{axisType:"radiusAxis",AxisComp:Rg}],formatAxisMap:Ele,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const BN=5e5,YO=(t,e)=>{const r=t&&t>0?t:1,n=Math.max(1,r-2),a=Math.min(24,r+2);return Ye({queryKey:["schedules-calendar",r,e],queryFn:async()=>{console.log(` Calendar: Loading weeks ${n}-${a} for class ${e||"all"} (currentWeek: ${t}  ${r})`);let s=[],o=0;const l=1e3;let c=!0,d=0;for(;c;){console.log(` Calendar batch: ${o} to ${o+l-1} (Progress: ${d} rows)`);let u=W.from("schedules_view").select("*").gte("academic_week",n).lte("academic_week",a).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).range(o,o+l-1);e&&(u=u.eq("class_id",e));const{data:h,error:f}=await u;if(f){console.error(" Error fetching batch from schedules_view:",f),console.log(" Falling back to schedules table with pagination...");let m=W.from("class_schedules").select(`
              *,
              schedule_subjects (id, name, code, color),
              classes (id, name, level, grade),
              teachers (id, full_name, nip)
            `).gte("academic_week",n).lte("academic_week",a).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).range(o,o+l-1);e&&(m=m.eq("class_id",e));const{data:v,error:p}=await m;if(p)throw console.error(" Fallback query also failed:",p),p;if(!v||v.length===0){c=!1;break}s=[...s,...v],d+=v.length,v.length<l?c=!1:o+=l;continue}if(!h||h.length===0){c=!1;break}s=[...s,...h],d+=h.length,h.length<l?c=!1:o+=l,d>=5e4&&(console.log(" Reached safety limit of 50k records for calendar"),c=!1)}return console.log(` Calendar data fetched: ${s.length} records for weeks ${n}-${a} (Total batches: ${Math.ceil(d/l)})`),s},enabled:!0,staleTime:2*60*1e3,gcTime:5*60*1e3})},Ks=()=>Ye({queryKey:["schedules-complete"],queryFn:async()=>{console.log(" Fetching ALL schedules with smart pagination...");let t=[],e=0;const r=500;let n=!0,a=0;for(;n;){console.log(` Complete batch: ${e} to ${e+r-1} (Progress: ${a} rows)`);const{data:o,error:l}=await W.from("schedules_view").select(`
            id,
            academic_week,
            day_of_week,
            start_time,
            end_time,
            subject_name,
            subject_color,
            class_name,
            class_id,
            subject_id,
            teacher_name,
            session_category_id,
            session_category_name,
            session_category_color,
            room,
            notes,
            tujuan_pembelajaran,
            materi_pembelajaran
          `).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).range(e,e+r-1);if(l)throw console.error(" Complete schedules batch error:",l),l;if(!o||o.length===0){n=!1;break}t=[...t,...o],a+=o.length,o.length<r?n=!1:e+=r,a>=BN&&(console.log(` Reached maximum limit of ${BN} records`),n=!1)}console.log(` Complete schedules data fetched: ${t.length} records (Total batches: ${Math.ceil(a/r)})`);const s=t.reduce((o,l)=>(o[l.academic_week]=(o[l.academic_week]||0)+1,o),{});return console.log(" Week distribution:",s),console.log(" Available weeks:",Object.keys(s).sort((o,l)=>parseInt(o)-parseInt(l))),t},staleTime:5*60*1e3,gcTime:15*60*1e3,refetchOnWindowFocus:!1,retry:3,retryDelay:t=>Math.min(1e3*2**t,3e4)}),Pve=(t,e)=>Ye({queryKey:["schedules-single-week",t,e],queryFn:async()=>{console.log(` Fetching single week ${t} for class ${e||"all"}`);let r=W.from("schedules_view").select(`
          id,
          academic_week,
          day_of_week,
          start_time,
          end_time,
          subject_name,
          subject_color,
          class_name,
          class_id,
          subject_id,
          teacher_name,
          session_category_id,
          session_category_name,
          session_category_color,
          room,
          notes,
          tujuan_pembelajaran,
          materi_pembelajaran
        `).eq("academic_week",t).not("day_of_week","is",null).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0});e&&(r=r.eq("class_id",e));const{data:n,error:a}=await r;if(a)throw console.error(`Error fetching week ${t}:`,a),a;return console.log(` Single week ${t} fetched: ${(n==null?void 0:n.length)||0} records`),n||[]},enabled:t>0&&t<=24,staleTime:3*60*1e3,gcTime:10*60*1e3}),fr=()=>{const{profile:t}=tt();return Ye({queryKey:["academic-years"],queryFn:async()=>{if(!(t!=null&&t.school_id))return[];const{data:e,error:r}=await W.from("academic_years").select("*").eq("school_id",t.school_id).order("start_date",{ascending:!1});if(r)throw r;return e},enabled:!!(t!=null&&t.school_id)})},ma=()=>{const{profile:t}=tt();return Ye({queryKey:["active-academic-year"],queryFn:async()=>{if(!(t!=null&&t.school_id))return null;const{data:e,error:r}=await W.from("academic_years").select("*").eq("school_id",t.school_id).eq("is_active",!0).single();if(r&&r.code!=="PGRST116")throw r;return e},enabled:!!(t!=null&&t.school_id)})},Mve=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");await W.from("academic_years").update({is_active:!1}).eq("school_id",r.school_id);const{data:a,error:s}=await W.from("academic_years").update({is_active:!0}).eq("id",n).eq("school_id",r.school_id).select().single();if(s)throw s;return await W.from("general_settings").upsert({school_id:r.school_id,active_academic_year_id:n,academic_year_id:n}),a},onSuccess:()=>{t.invalidateQueries({queryKey:["academic-years"]}),t.invalidateQueries({queryKey:["active-academic-year"]}),t.invalidateQueries({queryKey:["general-settings"]}),e({title:"Berhasil",description:"Tahun ajaran aktif berhasil diperbarui"})},onError:n=>{e({title:"Error",description:"Gagal memperbarui tahun ajaran aktif",variant:"destructive"}),console.error("Error updating active academic year:",n)}})},$w=()=>{const{profile:t}=tt(),{data:e}=fr(),r=Ne(),n=e==null?void 0:e.find(u=>u.is_active),{data:a=[],isLoading:s}=Ye({queryKey:["holidays",t==null?void 0:t.school_id,n==null?void 0:n.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(n!=null&&n.id))return[];const{data:u,error:h}=await W.from("holidays").select("*").eq("school_id",t.school_id).eq("academic_year_id",n.id).order("start_date");return h?(console.error("Error fetching holidays:",h),[]):u||[]},enabled:!!(t!=null&&t.school_id)&&!!(n!=null&&n.id)}),o=Se({mutationFn:async u=>{if(!(t!=null&&t.school_id)||!(n!=null&&n.id))throw new Error("Missing school or academic year data");const{data:h,error:f}=await W.from("holidays").insert([{...u,school_id:t.school_id,academic_year_id:n.id}]).select().single();if(f)throw f;return h},onSuccess:()=>{r.invalidateQueries({queryKey:["holidays"]}),nt({title:"Berhasil",description:"Event telah ditambahkan"})},onError:u=>{console.error("Error creating holiday:",u),nt({title:"Error",description:"Gagal menambahkan event",variant:"destructive"})}}),l=Se({mutationFn:async({id:u,...h})=>{const{data:f,error:m}=await W.from("holidays").update(h).eq("id",u).select().single();if(m)throw m;return f},onSuccess:()=>{r.invalidateQueries({queryKey:["holidays"]}),nt({title:"Berhasil",description:"Event telah diperbarui"})},onError:u=>{console.error("Error updating holiday:",u),nt({title:"Error",description:"Gagal memperbarui event",variant:"destructive"})}}),c=Se({mutationFn:async u=>{const{error:h}=await W.from("holidays").delete().eq("id",u);if(h)throw h},onSuccess:()=>{r.invalidateQueries({queryKey:["holidays"]}),nt({title:"Berhasil",description:"Event telah dihapus"})},onError:u=>{console.error("Error deleting holiday:",u),nt({title:"Error",description:"Gagal menghapus event",variant:"destructive"})}}),d=Se({mutationFn:async u=>{if(!(t!=null&&t.school_id)||!(n!=null&&n.id))throw new Error("Missing school or academic year data");const h=u.map(v=>({...v,school_id:t.school_id,academic_year_id:n.id})),{data:f,error:m}=await W.from("holidays").insert(h).select();if(m)throw m;return f},onSuccess:u=>{r.invalidateQueries({queryKey:["holidays"]}),nt({title:"Berhasil",description:`${u.length} libur nasional telah ditambahkan`})},onError:u=>{console.error("Error creating multiple holidays:",u),nt({title:"Error",description:"Gagal menambahkan libur nasional",variant:"destructive"})}});return{holidays:a,isLoading:s,createHoliday:o.mutate,updateHoliday:l.mutate,deleteHoliday:c.mutate,createMultipleHolidays:d.mutate,isCreating:o.isPending,isUpdating:l.isPending,isDeleting:c.isPending,isCreatingMultiple:d.isPending}},Yt=()=>Ye({queryKey:["classes"],queryFn:async()=>{const{data:t,error:e}=await W.from("classes").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}}),Ove=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{var d;const{data:n}=await W.from("profiles").select("school_id").eq("id",(d=(await W.auth.getUser()).data.user)==null?void 0:d.id).single(),{data:a}=await W.from("academic_years").select("id").eq("school_id",n==null?void 0:n.school_id).eq("is_active",!0).single(),o={I:1,II:2,III:3,IV:4,V:5,VI:6,VII:7,VIII:8,IX:9,X:10,XI:11,XII:12}[r.level]||1,{data:l,error:c}=await W.from("classes").insert({...r,grade:o,school_id:n==null?void 0:n.school_id,academic_year_id:a==null?void 0:a.id}).select().single();if(c)throw c;return l},onSuccess:()=>{t.invalidateQueries({queryKey:["classes"]}),e({title:"Berhasil",description:"Data kelas berhasil ditambahkan"})},onError:r=>{e({title:"Gagal",description:"Gagal menambahkan data kelas: "+r.message,variant:"destructive"})}})},Rve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,...n})=>{if(n.level){const o={I:1,II:2,III:3,IV:4,V:5,VI:6,VII:7,VIII:8,IX:9,X:10,XI:11,XII:12};n.grade=o[n.level]||1}const{data:a,error:s}=await W.from("classes").update(n).eq("id",r).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["classes"]}),e({title:"Berhasil",description:"Data kelas berhasil diperbarui"})},onError:r=>{e({title:"Gagal",description:"Gagal memperbarui data kelas: "+r.message,variant:"destructive"})}})},$ve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{const{error:n}=await W.from("classes").delete().eq("id",r);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["classes"]}),e({title:"Berhasil",description:"Data kelas berhasil dihapus"})},onError:r=>{e({title:"Gagal",description:"Gagal menghapus data kelas: "+r.message,variant:"destructive"})}})},Vg=()=>{const{profile:t}=tt(),{data:e}=fr(),r=e==null?void 0:e.find(n=>n.is_active);return Ye({queryKey:["schedule-subjects",t==null?void 0:t.school_id,r==null?void 0:r.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(r!=null&&r.id))throw new Error("Missing required data");console.log("Fetching schedule subjects for:",{school_id:t.school_id,academic_year_id:r.id});const{data:n,error:a}=await W.from("schedule_subjects").select(`
          *,
          session_categories (
            id,
            name,
            color
          )
        `).eq("school_id",t.school_id).eq("academic_year_id",r.id).order("name",{ascending:!0});if(a)throw console.error("Error fetching schedule subjects:",a),a;return console.log("Schedule Subjects fetched:",{academicYear:r.id,totalSubjects:(n==null?void 0:n.length)||0,subjects:n==null?void 0:n.map(s=>{var o;return{name:s.name,category:(o=s.session_categories)==null?void 0:o.name}})}),n},enabled:!!(t!=null&&t.school_id)&&!!(r!=null&&r.id),staleTime:0,gcTime:0,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!0})},Iw=(t=!0)=>{const e=Ne(),{toast:r}=Ce(),{profile:n}=tt(),{data:a}=fr(),s=a==null?void 0:a.find(o=>o.is_active);return Se({mutationFn:async o=>{var l;try{if(console.log("Creating schedule subject with data:",o),!(n!=null&&n.school_id)||!(s!=null&&s.id))throw new Error("Data sekolah atau tahun akademik tidak ditemukan");const c={name:o.name.trim(),code:((l=o.code)==null?void 0:l.trim())||null,color:o.color,total_hours_per_year:o.total_hours_per_year||0,standard_duration:o.standard_duration||45,session_category_id:o.schedule_category_id,school_id:n.school_id,academic_year_id:s.id};console.log("Insert data for schedule_subjects:",c);const{data:d,error:u}=await W.from("schedule_subjects").insert(c).select("*").single();if(u)throw console.error("Supabase error creating schedule subject:",u),u.code==="23505"?new Error("Mata pelajaran dengan nama tersebut sudah ada untuk kategori ini"):u;if(o.selected_classes&&o.selected_classes.length>0){console.log("Creating class assignments for:",o.selected_classes);const h=o.selected_classes.map(m=>({schedule_subject_id:d.id,class_id:m,hours_per_week:0,hours_per_year:0})),{error:f}=await W.from("schedule_class_subjects").insert(h);f?console.error(" Error creating class assignments:",f):console.log(" Class assignments created successfully for",o.selected_classes.length,"classes")}else console.log(" No classes selected, subject will appear for all classes by default");return console.log("Schedule subject created successfully:",d),d}catch(c){throw console.error("Full error in createScheduleSubject:",c),c}},onSuccess:async o=>{console.log(" useCreateScheduleSubject onSuccess called with:",o),console.log(" Created subject details:",{id:o==null?void 0:o.id,name:o==null?void 0:o.name,session_category_id:o==null?void 0:o.session_category_id,school_id:o==null?void 0:o.school_id,academic_year_id:o==null?void 0:o.academic_year_id,timestamp:new Date().toISOString()}),console.log(" Starting comprehensive cache invalidation..."),await Promise.all([e.invalidateQueries({queryKey:["schedule-subjects"]}),e.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),e.invalidateQueries({queryKey:["schedule-class-subjects"]}),e.invalidateQueries({queryKey:["subjects"]}),e.invalidateQueries({queryKey:["matrix-subjects"]}),e.invalidateQueries({queryKey:["matrix-class-subjects"]}),e.invalidateQueries({queryKey:["all-subjects-by-category"]}),e.invalidateQueries({queryKey:["class-subjects-by-category"]}),e.invalidateQueries({queryKey:["kbm-subjects"]}),e.invalidateQueries({queryKey:["unified-subjects"]})]),console.log(" Cache invalidation completed"),setTimeout(()=>{console.log(" Starting force refetch..."),e.refetchQueries({queryKey:["schedule-subjects"]}),e.refetchQueries({queryKey:["schedule-subjects-by-category"]}),e.refetchQueries({queryKey:["all-subjects-by-category"]}),e.refetchQueries({queryKey:["matrix-subjects"]}),e.refetchQueries({queryKey:["kbm-subjects"]}),console.log(" Force refetch completed")},200),t&&r({title:"Berhasil",description:"Mata pelajaran berhasil dibuat"})},onError:o=>{console.error("useCreateScheduleSubject onError called with:",o),t&&r({title:"Gagal",description:(o==null?void 0:o.message)||"Gagal membuat mata pelajaran",variant:"destructive"})}})},XO=(t=!0)=>{const e=Ne(),{toast:r}=Ce();return Se({mutationFn:async({id:n,...a})=>{const{data:s,error:o}=await W.from("schedule_subjects").update(a).eq("id",n).select("*").single();if(o)throw o;return s},onSuccess:async()=>{await e.invalidateQueries({queryKey:["schedule-subjects"]}),await e.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),await e.invalidateQueries({queryKey:["schedule-class-subjects"]}),await e.invalidateQueries({queryKey:["subjects"]}),await e.invalidateQueries({queryKey:["matrix-subjects"]}),await e.invalidateQueries({queryKey:["all-subjects-by-category"]}),e.refetchQueries({queryKey:["schedule-subjects"]}),e.refetchQueries({queryKey:["schedule-subjects-by-category"]}),t&&r({title:"Berhasil",description:"Mata pelajaran berhasil diperbarui"})},onError:n=>{t&&r({title:"Gagal",description:(n==null?void 0:n.message)||"Gagal memperbarui mata pelajaran",variant:"destructive"})}})},ZO=(t=!0)=>{const e=Ne(),{toast:r}=Ce();return Se({mutationFn:async n=>{const{error:a}=await W.from("schedule_subjects").delete().eq("id",n);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["schedule-subjects"]}),e.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),e.invalidateQueries({queryKey:["schedule-class-subjects"]}),t&&r({title:"Berhasil",description:"Mata pelajaran berhasil dihapus"})},onError:n=>{t&&r({title:"Gagal",description:(n==null?void 0:n.message)||"Gagal menghapus mata pelajaran",variant:"destructive"})}})},eR=()=>{const{profile:t}=tt(),{data:e}=fr(),r=e==null?void 0:e.find(n=>n.is_active);return Ye({queryKey:["schedule-class-subjects",t==null?void 0:t.school_id,r==null?void 0:r.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(r!=null&&r.id))throw new Error("Missing required data");console.log("Fetching schedule class subjects for:",{school_id:t.school_id,academic_year_id:r.id});const{data:n,error:a}=await W.from("schedule_class_subjects").select(`
          *,
          classes!inner (
            id, name, level, grade, capacity, school_id, academic_year_id
          ),
          schedule_subjects (
            id, name, code, color, total_hours_per_year
          )
        `).eq("classes.school_id",t.school_id).eq("classes.academic_year_id",r.id).order("created_at",{ascending:!1});if(a)throw console.error("Error fetching schedule class subjects:",a),a;return console.log("Schedule Class Subjects fetched:",{academicYear:r.id,totalRelations:(n==null?void 0:n.length)||0}),n},enabled:!!(t!=null&&t.school_id)&&!!(r!=null&&r.id),staleTime:0,gcTime:0,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!0})},tR=(t=!0)=>{const e=Ne(),{toast:r}=Ce();return Se({mutationFn:async n=>{try{console.log("Creating schedule class subject with data:",n);const a={class_id:n.class_id,schedule_subject_id:n.schedule_subject_id,hours_per_week:n.hours_per_week||0,hours_per_year:n.hours_per_year||0};console.log("Insert data for schedule_class_subjects:",a);const{data:s,error:o}=await W.from("schedule_class_subjects").insert(a).select(`
            *,
            class:classes(id, name, level, grade),
            schedule_subject:schedule_subjects(*)
          `).single();if(o)throw console.error("Supabase error creating schedule class subject:",o),o.code==="23505"?new Error("Mata pelajaran sudah ditambahkan ke kelas ini"):o;return console.log("Schedule class subject created successfully:",s),s}catch(a){throw console.error("Full error in createScheduleClassSubject:",a),a}},onSuccess:async n=>{console.log("useCreateScheduleClassSubject onSuccess called with:",n),await Promise.all([e.invalidateQueries({queryKey:["schedule-class-subjects"]}),e.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),e.invalidateQueries({queryKey:["schedule-subjects"]}),e.invalidateQueries({queryKey:["subjects"]}),e.invalidateQueries({queryKey:["matrix-subjects"]}),e.invalidateQueries({queryKey:["matrix-class-subjects"]}),e.invalidateQueries({queryKey:["class-subjects"]}),e.invalidateQueries({queryKey:["all-subjects-by-category"]}),e.invalidateQueries({queryKey:["class-subjects-by-category"]})]),setTimeout(()=>{e.refetchQueries({queryKey:["schedule-class-subjects"]}),e.refetchQueries({queryKey:["schedule-subjects-by-category"]}),e.refetchQueries({queryKey:["all-subjects-by-category"]}),e.refetchQueries({queryKey:["matrix-subjects"]})},200),t&&r({title:"Berhasil",description:"Mata pelajaran berhasil ditambahkan ke kelas"})},onError:n=>{console.error("useCreateScheduleClassSubject onError called with:",n),t&&r({title:"Gagal",description:(n==null?void 0:n.message)||"Gagal menambahkan mata pelajaran ke kelas",variant:"destructive"})}})},Ive=(t=!0)=>{const e=Ne(),{toast:r}=Ce();return Se({mutationFn:async n=>{const{error:a}=await W.from("schedule_class_subjects").delete().eq("id",n);if(a)throw a},onSuccess:()=>{e.invalidateQueries({queryKey:["schedule-class-subjects"]}),e.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),t&&r({title:"Berhasil",description:"Relasi mata pelajaran dengan kelas berhasil dihapus"})},onError:n=>{t&&r({title:"Gagal",description:(n==null?void 0:n.message)||"Gagal menghapus relasi mata pelajaran dengan kelas",variant:"destructive"})}})},Qg=()=>Ye({queryKey:["teachers"],queryFn:async()=>{console.log(" Fetching teachers data...");try{const{data:t}=await W.auth.getUser();if(!t.user)throw new Error("User not authenticated");const{data:e}=await W.from("profiles").select("school_id").eq("id",t.user.id).single();if(!(e!=null&&e.school_id))throw new Error("School ID not found in profile");const{data:r,error:n}=await W.from("teachers").select("*").eq("school_id",e.school_id).order("created_at",{ascending:!1});if(n)throw console.error(" Error fetching teachers:",n),n;return console.log(" Teachers data fetched successfully:",r),r||[]}catch(t){throw console.error(" Exception in useTeachers:",t),t}}}),Lve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{var u;console.log(" Creating teacher with data:",r);const{data:n,error:a}=await W.from("profiles").select("school_id").eq("id",(u=(await W.auth.getUser()).data.user)==null?void 0:u.id).single();a&&console.error(" Error getting profile:",a);const{data:s,error:o}=await W.from("academic_years").select("id").eq("school_id",n==null?void 0:n.school_id).eq("is_active",!0).single();o&&console.error(" Error getting active year:",o);const l={full_name:r.full_name,nip:r.nip||null,email:r.email||null,phone:r.phone||null,role:r.role||"guru",is_available:!0,school_id:(n==null?void 0:n.school_id)||null,academic_year_id:(s==null?void 0:s.id)||null};console.log(" Inserting teacher data:",l);const{data:c,error:d}=await W.from("teachers").insert(l).select().single();if(d)throw console.error(" Create teacher error:",d),d;return console.log(" Teacher created successfully:",c),c},onSuccess:()=>{t.invalidateQueries({queryKey:["teachers"]}),e({title:"Berhasil",description:"Data guru berhasil ditambahkan"})},onError:r=>{e({title:"Gagal",description:"Gagal menambahkan data guru: "+r.message,variant:"destructive"})}})},Fve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,role:n,...a})=>{console.log(" Updating teacher with data:",{id:r,role:n,teacherData:a});const s=["full_name","nip","email","phone","role"],o={};s.forEach(d=>{a[d]!==void 0&&(o[d]=a[d])}),n&&(o.role=n),console.log(" Sending update data:",o);const{data:l,error:c}=await W.from("teachers").update(o).eq("id",r).select().single();if(c)throw console.error(" Update teacher error:",c),c;if(n&&l.user_id)try{const{error:d}=await W.from("profiles").update({role:n}).eq("id",l.user_id);d&&console.error("Warning: Failed to sync role with profile:",d)}catch(d){console.error("Warning: Role sync failed:",d)}return l},onSuccess:()=>{t.invalidateQueries({queryKey:["teachers"]}),e({title:"Berhasil",description:"Data guru berhasil diperbarui"})},onError:r=>{e({title:"Gagal",description:"Gagal memperbarui data guru: "+r.message,variant:"destructive"})}})},Bve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{const{error:n}=await W.from("teachers").delete().eq("id",r);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["teachers"]}),e({title:"Berhasil",description:"Data guru berhasil dihapus"})},onError:r=>{e({title:"Gagal",description:"Gagal menghapus data guru: "+r.message,variant:"destructive"})}})},mr=()=>{const{data:t}=fr(),e=x.useMemo(()=>t==null?void 0:t.find(n=>n.is_active),[t]);return{academicWeeks:x.useMemo(()=>{if(!e)return[];const n=new Date(e.start_date),a=new Date(e.end_date),s=[];let o=Cr(n,{weekStartsOn:1}),l=1;for(;o<=a;){const c=oo(o,{weekStartsOn:1});s.push({weekNumber:l,startDate:o,endDate:c,label:`Minggu ${l}`,dateRange:`${be(o,"dd MMM",{locale:bt})} - ${be(c,"dd MMM yyyy",{locale:bt})}`,isCurrentWeek:Xm(new Date,{start:o,end:c})}),o=Tl(o,1),l++}return s},[e]),activeAcademicYear:e}},Ar=()=>{const{profile:t}=tt(),{data:e}=fr(),r=e==null?void 0:e.find(n=>n.is_active);return Ye({queryKey:["session_categories",t==null?void 0:t.school_id,r==null?void 0:r.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(r!=null&&r.id))throw new Error("Missing required data");console.log("Fetching session categories for:",{school_id:t.school_id,academic_year_id:r.id});const{data:n,error:a}=await W.from("session_categories").select("*").eq("school_id",t.school_id).eq("academic_year_id",r.id).order("created_at",{ascending:!0});if(a)throw console.error("Error fetching session categories:",a),a;return console.log("Session Categories fetched:",{academicYear:r.id,totalCategories:(n==null?void 0:n.length)||0,categories:n==null?void 0:n.map(s=>({name:s.name,color:s.color}))}),n||[]},enabled:!!(t!=null&&t.school_id)&&!!(r!=null&&r.id),staleTime:0,gcTime:0,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!0})},qve=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt(),{data:n}=fr(),a=n==null?void 0:n.find(s=>s.is_active);return Se({mutationFn:async s=>{if(!(r!=null&&r.school_id)||!(a!=null&&a.id))throw new Error("Missing required data");const{data:o,error:l}=await W.from("session_categories").insert({name:s.name,description:s.description,color:s.color||"#6B7280",school_id:r.school_id,academic_year_id:a.id}).select().single();if(l)throw l;return o},onSuccess:()=>{t.invalidateQueries({queryKey:["session_categories"]}),e({title:"Berhasil",description:"Kategori sesi berhasil ditambahkan"})},onError:s=>{e({title:"Gagal",description:"Gagal menambahkan kategori sesi: "+s.message,variant:"destructive"})}})},Uve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,...n})=>{const{data:a,error:s}=await W.from("session_categories").update(n).eq("id",r).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["session_categories"]}),e({title:"Berhasil",description:"Kategori sesi berhasil diperbarui"})},onError:r=>{e({title:"Gagal",description:"Gagal memperbarui kategori sesi: "+r.message,variant:"destructive"})}})},zve=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{const{error:n}=await W.from("session_categories").delete().eq("id",r);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["session_categories"]}),e({title:"Berhasil",description:"Kategori sesi berhasil dihapus"})},onError:r=>{e({title:"Gagal",description:"Gagal menghapus kategori sesi: "+r.message,variant:"destructive"})}})},Hve=({username:t})=>{const[e]=x.useState(new Date),[r,n]=x.useState("all");tt();const a=cc(),{data:s=[],isLoading:o}=Ks(),{holidays:l=[],isLoading:c}=$w(),{data:d=[]}=Yt(),{data:u=[]}=Vg(),{data:h=[]}=Qg(),{data:f}=ma(),{academicWeeks:m}=mr(),{data:v=[]}=Ar(),p=x.useMemo(()=>r==="all"?s:s.filter(k=>k.class_id===r),[s,r]),g=x.useMemo(()=>r==="all"?null:d.find(k=>k.id===r),[d,r]),y=x.useMemo(()=>{const k=new Date,E=m.find(I=>I.isCurrentWeek),P=p.filter(I=>{var q;if(!E)return!1;const B=parseInt(((q=I.academic_week)==null?void 0:q.toString())||"0"),H=k.getDay()===0?7:k.getDay();return B===E.weekNumber&&I.day_of_week===H}),T=p.filter(I=>{var H;return E?parseInt(((H=I.academic_week)==null?void 0:H.toString())||"0")===E.weekNumber:!1}),D=new Date,A=f?new Date(f.end_date):new Date,C=Hn({start:D,end:A});let R=0;if(r==="all")R=C.filter(I=>{if(ks(I)===0)return!1;const H=be(I,"yyyy-MM-dd");return!l.some(O=>{const F=be(new Date(O.start_date),"yyyy-MM-dd"),G=be(new Date(O.end_date),"yyyy-MM-dd");return H>=F&&H<=G})}).length;else{const I=[...new Set(p.map(B=>B.day_of_week))];R=C.filter(B=>{const H=ks(B);if(H===0||!I.includes(H))return!1;const O=be(B,"yyyy-MM-dd");return!l.some(G=>{const Y=be(new Date(G.start_date),"yyyy-MM-dd"),Z=be(new Date(G.end_date),"yyyy-MM-dd");return O>=Y&&O<=Z})}).length}const L=[...new Set(p.map(I=>I.subject_id))],M=[...new Set(p.map(I=>I.teacher_id).filter(Boolean))];return{todaySchedules:P.length,thisWeekSchedules:T.length,totalClasses:r==="all"?d.length:1,totalSubjects:r==="all"?u.length:L.length,totalTeachers:r==="all"?h.length:M.length,effectiveDaysLeft:R,totalSchedules:p.length}},[p,d,u,h,l,m,f,r]),b=x.useMemo(()=>{const k=new Date,E=m.find(D=>D.isCurrentWeek);if(!E)return[];const P=k.getDay()===0?7:k.getDay();return p.filter(D=>{var C;return parseInt(((C=D.academic_week)==null?void 0:C.toString())||"0")===E.weekNumber&&D.day_of_week===P}).sort((D,A)=>(D.start_time||"").localeCompare(A.start_time||"")).map(D=>{const C=be(new Date,"HH:mm"),R=D.start_time||"",L=D.end_time||"";let M="upcoming";return C>=R&&C<=L?M="ongoing":C>L&&(M="completed"),{...D,status:M,progress:M==="ongoing"?Math.round((new Date(`2000-01-01 ${C}`).getTime()-new Date(`2000-01-01 ${R}`).getTime())/(new Date(`2000-01-01 ${L}`).getTime()-new Date(`2000-01-01 ${R}`).getTime())*100):0}})},[p,m]),w=x.useMemo(()=>{const k=new Date;return l.filter(E=>new Date(E.start_date)>=k).sort((E,P)=>new Date(E.start_date).getTime()-new Date(P.start_date).getTime()).slice(0,5)},[l]),j=x.useMemo(()=>{const k=new Date,E=Qt(k),P=Ua(k);return Hn({start:E,end:P}).map(D=>{const A=be(D,"yyyy-MM-dd"),C=l.some(I=>{const B=be(new Date(I.start_date),"yyyy-MM-dd"),H=be(new Date(I.end_date),"yyyy-MM-dd");return A>=B&&A<=H}),R=D.getDay()===0?7:D.getDay(),L=m.find(I=>I.isCurrentWeek),M=L&&p.some(I=>{var H;return parseInt(((H=I.academic_week)==null?void 0:H.toString())||"0")===L.weekNumber&&I.day_of_week===R});return{date:D,isToday:_H(D),hasEvent:C,hasSchedules:M,dayNumber:D.getDate()}})},[l,p,m]),_=x.useMemo(()=>{const k=v.find(C=>C.name==="KBM"),E=v.find(C=>C.name==="EKSKUL");if(!k&&!E)return[];const P=[k==null?void 0:k.id,E==null?void 0:E.id].filter(Boolean),D=p.filter(C=>{var M;const R=u.find(I=>I.id===C.subject_id),L=(M=R==null?void 0:R.session_categories)==null?void 0:M.id;return R&&L&&P.includes(L)}).reduce((C,R)=>{const L=R.subject_name||"Unknown";return C[L]=(C[L]||0)+1,C},{}),A=["#84cc16","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#10b981"];return Object.entries(D).sort(([,C],[,R])=>R-C).slice(0,8).map(([C,R],L)=>({name:C,value:R,color:A[L%A.length]}))},[p,v,u]),S=x.useMemo(()=>{const k=m.find(P=>P.isCurrentWeek);return k?[{name:"Senin",key:1},{name:"Selasa",key:2},{name:"Rabu",key:3},{name:"Kamis",key:4},{name:"Jumat",key:5},{name:"Sabtu",key:6},{name:"Minggu",key:7}].map(({name:P,key:T})=>{const D=p.filter(A=>{var R;return parseInt(((R=A.academic_week)==null?void 0:R.toString())||"0")===k.weekNumber&&A.day_of_week===T});return{day:P,jadwal:D.length,percentage:p.length>0?D.length/p.length*100:0}}):[]},[p,m]),N=x.useMemo(()=>{const k=b.reduce((E,P)=>(E[P.status]=(E[P.status]||0)+1,E),{});return[{name:"Akan Datang",value:k.upcoming||0,color:"#3b82f6"},{name:"Berlangsung",value:k.ongoing||0,color:"#10b981"},{name:"Selesai",value:k.completed||0,color:"#6b7280"}].filter(E=>E.value>0)},[b]);return o||c?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-lime-400 mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Memuat dashboard..."})]})}):i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-lime-400/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-400/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[i.jsx("div",{children:i.jsxs("p",{className:"text-muted-foreground",children:["Tahun Akademik ",(f==null?void 0:f.year_name)||"2024/2025",g&&i.jsx("span",{className:"ml-2 px-2 py-1 bg-lime-400/20 text-lime-400 rounded-md text-sm font-medium",children:g.name})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qa,{className:"h-4 w-4 text-muted-foreground"}),i.jsxs(Re,{value:r,onValueChange:n,children:[i.jsx(De,{className:"w-48 bg-card border-border",children:i.jsx($e,{placeholder:"Pilih Kelas"})}),i.jsxs(Pe,{children:[i.jsx(he,{value:"all",children:"Semua Kelas"}),d.map(k=>i.jsxs(he,{value:k.id,children:[k.name," - ",k.level]},k.id))]})]})]})]}),i.jsx("div",{className:"mt-4 p-3 bg-muted/30 rounded-lg border border-border",children:i.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.jsx("span",{className:"font-medium",children:"Sumber Data:"}),r==="all"?` Menampilkan data dari semua ${d.length} kelas dengan total ${y.totalSchedules} jadwal`:` Menampilkan data khusus untuk kelas ${g==null?void 0:g.name} dengan ${y.totalSchedules} jadwal`]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs(ie,{className:"bg-gradient-to-br from-lime-400/10 to-lime-600/10 border-lime-400/20",children:[i.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ee,{className:"text-sm font-medium text-lime-400",children:"Jadwal Hari Ini"}),i.jsx(Gt,{className:"h-4 w-4 text-lime-400"})]}),i.jsxs(oe,{children:[i.jsx("div",{className:"text-2xl font-bold text-foreground",children:y.todaySchedules}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:["dari ",y.thisWeekSchedules," jadwal minggu ini"]})]})]}),i.jsxs(ie,{className:"bg-gradient-to-br from-blue-400/10 to-blue-600/10 border-blue-400/20",children:[i.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ee,{className:"text-sm font-medium text-blue-400",children:r==="all"?"Total Kelas":"Mata Pelajaran"}),i.jsx(js,{className:"h-4 w-4 text-blue-400"})]}),i.jsxs(oe,{children:[i.jsx("div",{className:"text-2xl font-bold text-foreground",children:r==="all"?y.totalClasses:y.totalSubjects}),i.jsx("p",{className:"text-xs text-muted-foreground",children:r==="all"?"kelas aktif":"mata pelajaran unik"})]})]}),i.jsxs(ie,{className:"bg-gradient-to-br from-purple-400/10 to-purple-600/10 border-purple-400/20",children:[i.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ee,{className:"text-sm font-medium text-purple-400",children:"Total Guru"}),i.jsx(tr,{className:"h-4 w-4 text-purple-400"})]}),i.jsxs(oe,{children:[i.jsx("div",{className:"text-2xl font-bold text-foreground",children:y.totalTeachers}),i.jsx("p",{className:"text-xs text-muted-foreground",children:r==="all"?"guru aktif":"guru mengajar"})]})]}),i.jsxs(ie,{className:"bg-gradient-to-br from-orange-400/10 to-orange-600/10 border-orange-400/20",children:[i.jsxs(_e,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(Ee,{className:"text-sm font-medium text-orange-400",children:"Hari Efektif"}),i.jsx(cn,{className:"h-4 w-4 text-orange-400"})]}),i.jsxs(oe,{children:[i.jsx("div",{className:"text-2xl font-bold text-foreground",children:y.effectiveDaysLeft}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"hari tersisa tahun ini"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(tL,{className:"h-5 w-5 text-purple-400"}),"Distribusi Mata Pelajaran"]}),i.jsx(Hr,{children:r==="all"?"Distribusi jadwal per mata pelajaran (semua kelas)":`Distribusi jadwal mata pelajaran untuk kelas ${g==null?void 0:g.name}`})]}),i.jsx(oe,{children:_.length>0?i.jsxs("div",{className:"flex items-center gap-6",children:[i.jsx("div",{className:"flex-1",children:i.jsx(Kp,{width:"100%",height:200,children:i.jsxs(FN,{children:[i.jsx(da,{data:_,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:_.map((k,E)=>i.jsx(Td,{fill:k.color},`cell-${E}`))}),i.jsx(xn,{})]})})}),i.jsx("div",{className:"flex-1 space-y-2",children:_.map((k,E)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k.color}}),i.jsx("span",{className:"flex-1 truncate",children:k.name}),i.jsx("span",{className:"font-medium",children:k.value})]},E))})]}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Tidak ada data jadwal untuk ditampilkan"})})]}),i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(Ni,{className:"h-5 w-5 text-blue-400"}),"Distribusi Jadwal Mingguan"]}),i.jsx(Hr,{children:r==="all"?"Jumlah jadwal per hari dalam seminggu (semua kelas)":`Jadwal per hari untuk kelas ${g==null?void 0:g.name}`})]}),i.jsx(oe,{children:S.length>0?i.jsx(Kp,{width:"100%",height:200,children:i.jsxs(Dve,{data:S,children:[i.jsx(RO,{strokeDasharray:"3 3"}),i.jsx(Wg,{dataKey:"day"}),i.jsx(Kg,{}),i.jsx(xn,{}),i.jsx(fo,{dataKey:"jadwal",fill:"#84cc16",radius:[4,4,0,0]})]})}):i.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Tidak ada data jadwal mingguan"})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(Ve,{className:"h-5 w-5 text-lime-400"}),"Kalender ",be(e,"MMMM yyyy",{locale:bt})]}),i.jsx(Hr,{children:r==="all"?"Kalender dengan highlight jadwal dari semua kelas":`Kalender dengan highlight jadwal kelas ${g==null?void 0:g.name}`})]}),i.jsxs(oe,{children:[i.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Min","Sen","Sel","Rab","Kam","Jum","Sab"].map(k=>i.jsx("div",{className:"text-center text-sm text-muted-foreground font-medium p-2",children:k},k))}),i.jsx("div",{className:"grid grid-cols-7 gap-2",children:j.map((k,E)=>i.jsxs("div",{className:`
                        h-10 flex items-center justify-center text-sm rounded-lg cursor-pointer transition-all duration-200 relative
                        ${k.isToday?"bg-lime-400 text-lime-900 font-bold":k.hasEvent?"bg-red-400/20 text-red-400 hover:bg-red-400/30":k.hasSchedules?"bg-blue-400/20 text-blue-400 hover:bg-blue-400/30":"text-muted-foreground hover:bg-muted/50"}
                      `,children:[k.dayNumber,k.hasEvent&&i.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-red-400 rounded-full"})]},E))})]})]}),i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(vA,{className:"h-5 w-5 text-blue-400"}),"Jadwal Hari Ini"]}),i.jsxs(Hr,{children:[be(new Date,"EEEE, dd MMMM yyyy",{locale:bt}),r!=="all"&&i.jsxs("span",{className:"ml-2 text-blue-400",children:[" Kelas ",g==null?void 0:g.name]})]})]}),i.jsx(oe,{children:b.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx($i,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:r==="all"?"Tidak ada jadwal hari ini":`Tidak ada jadwal hari ini untuk kelas ${g==null?void 0:g.name}`})]}):i.jsx("div",{className:"space-y-4",children:b.map((k,E)=>i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted/30 rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("div",{className:`w-3 h-3 rounded-full ${k.status==="ongoing"?"bg-green-400":k.status==="completed"?"bg-gray-400":"bg-blue-400"}`})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h4",{className:"font-medium text-foreground truncate",children:k.subject_name||"Mata Pelajaran"}),i.jsx(st,{variant:k.status==="ongoing"?"default":k.status==="completed"?"secondary":"outline",children:k.status==="ongoing"?"Berlangsung":k.status==="completed"?"Selesai":"Akan Datang"})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[k.start_time," - ",k.end_time,r==="all"&&i.jsxs("span",{children:["  ",k.class_name]})]}),k.teacher_name&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Guru: ",k.teacher_name]}),k.status==="ongoing"&&i.jsx(N0,{value:k.progress,className:"mt-2 h-2"})]})]},E))})})]})]}),i.jsxs("div",{className:"space-y-6",children:[N.length>0&&i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(Kx,{className:"h-5 w-5 text-green-400"}),"Status Jadwal Hari Ini"]}),i.jsx(Hr,{children:r==="all"?"Status jadwal dari semua kelas":`Status jadwal kelas ${g==null?void 0:g.name}`})]}),i.jsx(oe,{children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"flex-1",children:i.jsx(Kp,{width:"100%",height:120,children:i.jsxs(FN,{children:[i.jsx(da,{data:N,cx:"50%",cy:"50%",innerRadius:30,outerRadius:50,paddingAngle:5,dataKey:"value",children:N.map((k,E)=>i.jsx(Td,{fill:k.color},`cell-${E}`))}),i.jsx(xn,{})]})})}),i.jsx("div",{className:"flex-1 space-y-2",children:N.map((k,E)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:k.color}}),i.jsx("span",{className:"flex-1",children:k.name}),i.jsx("span",{className:"font-medium",children:k.value})]},E))})]})})]}),i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(ct,{className:"h-5 w-5 text-lime-400"}),"Aksi Cepat"]}),i.jsx(Hr,{children:"Navigasi cepat ke fitur utama"})]}),i.jsxs(oe,{className:"space-y-3",children:[i.jsxs(K,{onClick:()=>a("/schedules"),className:"w-full justify-start bg-lime-400/10 hover:bg-lime-400/20 text-lime-400 border-lime-400/20",variant:"outline",children:[i.jsx(Kt,{className:"h-4 w-4 mr-2"}),"Kelola Jadwal"]}),i.jsxs(K,{onClick:()=>a("/classes"),className:"w-full justify-start bg-blue-400/10 hover:bg-blue-400/20 text-blue-400 border-blue-400/20",variant:"outline",children:[i.jsx(js,{className:"h-4 w-4 mr-2"}),"Kelola Kelas"]}),i.jsxs(K,{onClick:()=>a("/holidays"),className:"w-full justify-start bg-purple-400/10 hover:bg-purple-400/20 text-purple-400 border-purple-400/20",variant:"outline",children:[i.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Kelola Event"]})]})]}),i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(Y3,{className:"h-5 w-5 text-orange-400"}),"Event Mendatang"]}),i.jsx(Hr,{children:"5 event terdekat dalam kalender"})]}),i.jsx(oe,{children:w.length===0?i.jsx("div",{className:"text-center py-4",children:i.jsx("p",{className:"text-muted-foreground text-sm",children:"Tidak ada event mendatang"})}):i.jsx("div",{className:"space-y-3",children:w.map((k,E)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-muted/20 rounded-lg",children:[i.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-orange-400 rounded-full mt-2"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-foreground text-sm truncate",children:k.name}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[be(new Date(k.start_date),"dd MMM yyyy",{locale:bt}),k.start_date!==k.end_date&&i.jsxs("span",{children:[" - ",be(new Date(k.end_date),"dd MMM yyyy",{locale:bt})]})]}),k.description&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:k.description})]})]},E))})})]}),i.jsxs(ie,{className:"bg-card/40 backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"flex items-center gap-2",children:[i.jsx(xL,{className:"h-5 w-5 text-green-400"}),"Ringkasan Sistem"]}),i.jsx(Hr,{children:r==="all"?"Statistik keseluruhan sistem":`Statistik untuk kelas ${g==null?void 0:g.name}`})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Jadwal"}),i.jsx("span",{className:"font-medium",children:y.totalSchedules})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Jadwal Minggu Ini"}),i.jsx("span",{className:"font-medium",children:y.thisWeekSchedules})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Mata Pelajaran"}),i.jsx("span",{className:"font-medium",children:y.totalSubjects})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Guru Aktif"}),i.jsx("span",{className:"font-medium",children:y.totalTeachers})]}),i.jsx("div",{className:"pt-2 border-t border-border",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-sm text-muted-foreground",children:"Tahun Akademik"}),i.jsx("span",{className:"font-medium text-xs",children:f==null?void 0:f.year_name})]})})]})]})]})]})]})]})},Lw=()=>{const t=Ne();return x.useEffect(()=>{console.log(" Initializing comprehensive real-time sync system...");const e=W.channel("schedule-realtime-sync").on("postgres_changes",{event:"*",schema:"public",table:"class_schedules"},async r=>{console.log(" Real-time: class_schedules table changed (triggers schedules_view)",r),console.log(" Starting comprehensive cache invalidation for class_schedules..."),await Promise.all([t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-simple"]}),t.invalidateQueries({queryKey:["schedules-paginated"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["schedules-week"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]})]),console.log(" Force refetching critical queries for immediate UI update..."),setTimeout(()=>{t.refetchQueries({queryKey:["schedules-complete"]}),t.refetchQueries({queryKey:["schedules-simple"]}),t.refetchQueries({queryKey:["jp-progress-simple"]}),console.log(" Real-time UI refresh completed")},100)}).on("postgres_changes",{event:"*",schema:"public",table:"schedule_subjects"},async r=>{console.log(" Real-time: schedule_subjects table changed",r),console.log(" Payload details:",{eventType:r.eventType,new:r.new,old:r.old,table:r.table}),console.log(" Starting comprehensive cache invalidation..."),await Promise.all([t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["matrix-subjects"]}),t.invalidateQueries({queryKey:["matrix-class-subjects"]}),t.invalidateQueries({queryKey:["all-subjects-by-category"]}),t.invalidateQueries({queryKey:["class-subjects-by-category"]}),t.invalidateQueries({queryKey:["kbm-subjects"]}),t.invalidateQueries({queryKey:["unified-subjects"]})]),console.log(" Cache invalidation completed"),setTimeout(()=>{console.log(" Starting force refetch..."),t.refetchQueries({queryKey:["schedule-subjects"]}),t.refetchQueries({queryKey:["schedule-subjects-by-category"]}),t.refetchQueries({queryKey:["all-subjects-by-category"]}),t.refetchQueries({queryKey:["matrix-subjects"]}),t.refetchQueries({queryKey:["kbm-subjects"]}),console.log(" Force refetch completed")},100)}).on("postgres_changes",{event:"*",schema:"public",table:"subjects"},async r=>{console.log(" Real-time: subjects table changed",r),await Promise.all([t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["class-subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),t.invalidateQueries({queryKey:["matrix-subjects"]}),t.invalidateQueries({queryKey:["matrix-class-subjects"]}),t.invalidateQueries({queryKey:["all-subjects-by-category"]}),t.invalidateQueries({queryKey:["class-subjects-by-category"]})]),setTimeout(()=>{t.refetchQueries({queryKey:["subjects"]}),t.refetchQueries({queryKey:["all-subjects-by-category"]}),t.refetchQueries({queryKey:["schedule-subjects-by-category"]}),t.refetchQueries({queryKey:["matrix-subjects"]})},100)}).on("postgres_changes",{event:"*",schema:"public",table:"session_categories"},r=>{console.log(" Real-time: session_categories table changed",r),t.invalidateQueries({queryKey:["session-categories"]}),t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedule-subjects"]})}).on("postgres_changes",{event:"*",schema:"public",table:"classes"},r=>{console.log(" Real-time: classes table changed",r),t.invalidateQueries({queryKey:["classes"]}),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["class-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]})}).on("postgres_changes",{event:"*",schema:"public",table:"teachers"},r=>{console.log(" Real-time: teachers table changed",r),t.invalidateQueries({queryKey:["teachers"]}),t.invalidateQueries({queryKey:["schedules"]})}).on("postgres_changes",{event:"*",schema:"public",table:"time_sessions"},r=>{console.log(" Real-time: time_sessions table changed",r),t.invalidateQueries({queryKey:["time-sessions"]}),t.invalidateQueries({queryKey:["schedules"]})}).on("postgres_changes",{event:"*",schema:"public",table:"schedule_class_subjects"},async r=>{console.log(" Real-time: schedule_class_subjects table changed",r),await Promise.all([t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),t.invalidateQueries({queryKey:["matrix-subjects"]}),t.invalidateQueries({queryKey:["matrix-class-subjects"]}),t.invalidateQueries({queryKey:["all-subjects-by-category"]}),t.invalidateQueries({queryKey:["class-subjects-by-category"]}),t.invalidateQueries({queryKey:["subjects"]})]),setTimeout(()=>{t.refetchQueries({queryKey:["schedule-class-subjects"]}),t.refetchQueries({queryKey:["schedule-subjects-by-category"]}),t.refetchQueries({queryKey:["all-subjects-by-category"]}),t.refetchQueries({queryKey:["matrix-subjects"]})},100)}).subscribe(r=>{console.log(" Real-time sync subscription status:",r),r==="SUBSCRIBED"?(console.log(" Real-time sync successfully established for subjects matrix"),console.log(" Listening to tables: subjects, schedule_subjects, schedule_class_subjects, session_categories, classes")):r==="CHANNEL_ERROR"?console.error(" Real-time sync channel error"):r==="TIMED_OUT"?console.warn(" Real-time sync timed out"):r==="CLOSED"&&console.log(" Real-time sync channel closed")});return()=>{console.log(" Cleaning up real-time sync subscriptions..."),W.removeChannel(e)}},[t]),{isActive:!0,message:"Real-time sync is active"}},Fw=()=>{const t=Ne();return{forceRefresh:()=>{console.log(" Force refreshing all schedule data..."),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-simple"]}),t.invalidateQueries({queryKey:["schedules-paginated"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["schedules-week"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["session-categories"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),t.refetchQueries({queryKey:["schedules-complete"]}),t.refetchQueries({queryKey:["schedules-simple"]}),t.refetchQueries({queryKey:["jp-progress-simple"]})}}},Wve=()=>{Lw();const{profile:t}=tt();return i.jsx("div",{className:"w-full h-full",children:i.jsx(Hve,{username:(t==null?void 0:t.full_name)||"User"})})},Kve=({activeTab:t,onTabChange:e,isLoggedIn:r,onLoginClick:n,onLogoutClick:a})=>{const s=r?[{id:"dashboard",label:"Dashboard",icon:dL},{id:"logout",label:"Logout",icon:SA,action:a}]:[{id:"beranda",label:"Beranda",icon:qx},{id:"fitur",label:"Fitur Utama",icon:Ve},{id:"login",label:"Login/Daftar",icon:Ss,action:n},{id:"kontak",label:"Hubungi Kami",icon:Hx}];return i.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border/50",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-2xl font-bold text-foreground tracking-tight",children:["Indo",i.jsx("span",{className:"text-lime-400",children:"Jadwal"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"flex items-center space-x-2 bg-muted/60 rounded-full p-2",children:s.map(o=>i.jsxs("button",{onClick:()=>o.action?o.action():e(o.id),className:se("flex items-center space-x-2 px-4 py-2 rounded-full transition-all duration-300",t===o.id||o.id==="beranda"&&!r&&t==="beranda"?"bg-lime-400 text-gray-900 shadow-lg shadow-lime-400/20":"text-muted-foreground hover:text-foreground hover:bg-accent/50"),children:[i.jsx(o.icon,{size:18}),i.jsx("span",{className:"text-sm font-medium tracking-wide",children:o.label})]},o.id))}),i.jsx(WD,{})]})]})})})},Gve=()=>i.jsx("div",{className:"flex items-center justify-center mb-8",children:i.jsxs("div",{className:"bg-gradient-to-r from-lime-400/20 to-blue-400/20 backdrop-blur-sm border border-lime-400/30 rounded-full px-6 py-3 flex items-center space-x-3",children:[i.jsx(hL,{size:16,className:"text-lime-400 animate-spin"}),i.jsx("span",{className:"text-sm text-gray-200 tracking-wide",children:"Menyusun Jadwal Cerdas untuk Masa Depan Edukasi Anda"})]})}),Vve=()=>{const t=[{time:"08:00",subject:"Matematika",teacher:"Pak Ahmad",room:"Kelas 1A",color:"lime"},{time:"09:30",subject:"Bahasa Indonesia",teacher:"Bu Sari",room:"Kelas 1B",color:"blue"},{time:"11:00",subject:"IPA",teacher:"Pak Budi",room:"Lab IPA",color:"purple"},{time:"13:00",subject:"Sejarah",teacher:"Bu Ratna",room:"Kelas 2A",color:"cyan"}];return i.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-lime-400/10 to-blue-400/10 rounded-3xl blur-xl"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-lime-400/5 to-blue-400/5 rounded-3xl"}),i.jsxs("div",{className:"relative bg-gray-800/40 backdrop-blur-sm border border-gray-600/30 rounded-3xl p-8 shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h3",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[i.jsx(Ve,{className:"text-lime-400",size:28}),i.jsx("span",{children:"Jadwal Hari Ini"})]}),i.jsx("div",{className:"text-sm text-gray-400",children:"Senin, 27 Mei 2025"})]}),i.jsx("div",{className:"grid gap-4",children:t.map((e,r)=>i.jsx("div",{className:"bg-gray-700/30 backdrop-blur-sm border border-gray-600/20 rounded-xl p-4 hover:bg-gray-700/50 transition-all duration-300 group",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:`w-3 h-12 rounded-full bg-gradient-to-b from-${e.color}-400 to-${e.color}-600`}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-lg font-semibold text-white",children:e.subject}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400 mt-1",children:[i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(Gt,{size:14}),i.jsx("span",{children:e.time})]}),i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(tr,{size:14}),i.jsx("span",{children:e.teacher})]}),i.jsxs("span",{className:"flex items-center space-x-1",children:[i.jsx(Om,{size:14}),i.jsx("span",{children:e.room})]})]})]})]}),i.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("button",{className:"text-lime-400 hover:text-lime-300 text-sm font-medium",children:"Edit"})})]})},r))}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-8 pt-6 border-t border-gray-600/30",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-lime-400",children:"12"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Kelas Hari Ini"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"8"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Guru Aktif"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-400",children:"245"}),i.jsx("div",{className:"text-sm text-gray-400",children:"Siswa"})]})]})]})]})},Qve=({onLoginClick:t})=>{const e=[{icon:Ve,title:"Manajemen Jadwal Cerdas",description:"Sistem otomatis untuk mengatur jadwal pelajaran tanpa bentrok",color:"lime"},{icon:tr,title:"Koordinasi Multi-User",description:"Guru, admin, dan siswa dapat mengakses jadwal secara real-time",color:"blue"},{icon:Gt,title:"Notifikasi Real-time",description:"Pemberitahuan otomatis untuk perubahan jadwal dan event penting",color:"purple"},{icon:vL,title:"Sistem Aman & Terpercaya",description:"Data terlindungi dengan enkripsi tingkat enterprise",color:"cyan"}],r=["Mengurangi bentrok jadwal hingga 95%","Menghemat waktu penjadwalan hingga 80%","Meningkatkan koordinasi antar guru","Dashboard analytics yang comprehensive","Support untuk tahun ajaran multiple","Export jadwal ke berbagai format"];return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-lime-400/5 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-400/5 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute top-3/4 left-1/2 w-64 h-64 bg-purple-400/5 rounded-full blur-3xl animate-pulse"})]}),i.jsx("section",{className:"relative pt-32 pb-20 px-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto text-center",children:[i.jsx(Gve,{}),i.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-foreground mb-6 tracking-tight",children:["Jadwal Pelajaran",i.jsx("span",{className:"block bg-gradient-to-r from-lime-400 to-blue-400 bg-clip-text text-transparent",children:"Masa Depan"})]}),i.jsx("p",{className:"text-xl text-muted-foreground mb-12 max-w-3xl mx-auto leading-relaxed tracking-wide",children:"Revolusikan cara sekolah dan pondok pesantren di Indonesia mengelola jadwal akademik dengan teknologi AI yang cerdas dan intuitif."}),i.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-6 mb-16",children:[i.jsxs(K,{onClick:t,className:"bg-lime-500 hover:bg-lime-600 text-gray-900 dark:text-gray-900 font-semibold px-8 py-4 rounded-xl text-lg transition-all duration-300 shadow-lg transform hover:scale-105",children:["Mulai Sekarang",i.jsx(Z_,{className:"ml-2",size:20})]}),i.jsx(K,{variant:"outline",className:"border-border hover:bg-accent/50 px-8 py-4 rounded-xl text-lg backdrop-blur-sm",children:"Lihat Demo"})]}),i.jsx(Vve,{})]})}),i.jsx("section",{className:"relative py-20 px-6",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-6",children:["Fitur ",i.jsx("span",{className:"text-lime-400",children:"Unggulan"})]}),i.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Solusi lengkap untuk semua kebutuhan penjadwalan institusi pendidikan modern"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:e.map((n,a)=>i.jsx("div",{className:"group",children:i.jsxs("div",{className:"bg-card/40 backdrop-blur-sm border border-border/30 rounded-2xl p-6 h-full hover:bg-card/60 transition-all duration-300 hover:border-border/50 hover:transform hover:scale-105",children:[i.jsx("div",{className:`w-12 h-12 bg-${n.color}-400/20 rounded-xl flex items-center justify-center mb-4 group-hover:bg-${n.color}-400/30 transition-colors duration-300`,children:i.jsx(n.icon,{className:`text-${n.color}-400`,size:24})}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:n.title}),i.jsx("p",{className:"text-muted-foreground leading-relaxed",children:n.description})]})},a))})]})}),i.jsx("section",{className:"relative py-20 px-6",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-4xl font-bold text-foreground mb-6",children:["Mengapa Memilih ",i.jsx("span",{className:"text-blue-400",children:"Indo Jadwal"}),"?"]}),i.jsx("p",{className:"text-xl text-muted-foreground mb-8 leading-relaxed",children:"Dipercaya oleh ribuan institusi pendidikan di seluruh Indonesia untuk mengelola jadwal akademik dengan efisiensi maksimal."}),i.jsx("div",{className:"space-y-4",children:r.map((n,a)=>i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx($i,{className:"text-lime-400 flex-shrink-0",size:20}),i.jsx("span",{className:"text-foreground",children:n})]},a))}),i.jsxs(K,{onClick:t,className:"mt-8 bg-blue-500 hover:bg-blue-600 text-white font-semibold px-8 py-4 rounded-xl text-lg transition-all duration-300 shadow-lg",children:["Coba Gratis Sekarang",i.jsx(wL,{className:"ml-2",size:20})]})]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-3xl blur-xl"}),i.jsx("div",{className:"relative bg-card/40 backdrop-blur-sm border border-border/30 rounded-3xl p-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-5xl font-bold text-foreground mb-2",children:"1000+"}),i.jsx("div",{className:"text-muted-foreground mb-6",children:"Sekolah & Pesantren"}),i.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-lime-400",children:"95%"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Efisiensi Jadwal"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-400",children:"24/7"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Support"})]})]})]})})]})]})})}),i.jsx("section",{className:"relative py-20 px-6",children:i.jsx("div",{className:"max-w-4xl mx-auto text-center",children:i.jsxs("div",{className:"bg-gradient-to-r from-lime-400/10 to-blue-400/10 backdrop-blur-sm border border-border/30 rounded-3xl p-12",children:[i.jsx("h2",{className:"text-4xl font-bold text-foreground mb-6",children:"Siap Mengoptimalkan Jadwal Anda?"}),i.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Bergabunglah dengan revolusi digital pendidikan Indonesia"}),i.jsxs(K,{onClick:t,className:"bg-lime-500 hover:bg-lime-600 text-gray-900 dark:text-gray-900 font-bold px-12 py-5 rounded-xl text-xl transition-all duration-300 shadow-lg transform hover:scale-105",children:["Mulai Transformasi Digital",i.jsx(Z_,{className:"ml-3",size:24})]})]})})})]})},kt=Tx,Jve=Dx,rR=x.forwardRef(({className:t,...e},r)=>i.jsx(wu,{ref:r,className:se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));rR.displayName=wu.displayName;const xt=x.forwardRef(({className:t,children:e,...r},n)=>i.jsxs(Jve,{children:[i.jsx(rR,{}),i.jsxs(_u,{ref:n,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[e,i.jsxs(Am,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(Ds,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xt.displayName=_u.displayName;const wt=({className:t,...e})=>i.jsx("div",{className:se("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});wt.displayName="DialogHeader";const Tr=({className:t,...e})=>i.jsx("div",{className:se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});Tr.displayName="DialogFooter";const _t=x.forwardRef(({className:t,...e},r)=>i.jsx(ju,{ref:r,className:se("text-lg font-semibold leading-none tracking-tight",t),...e}));_t.displayName=ju.displayName;const nR=x.forwardRef(({className:t,...e},r)=>i.jsx(Su,{ref:r,className:se("text-sm text-muted-foreground",t),...e}));nR.displayName=Su.displayName;var Yve="Label",aR=x.forwardRef((t,e)=>i.jsx(it.label,{...t,ref:e,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=t.onMouseDown)==null||a.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));aR.displayName=Yve;var sR=aR;const Xve=no("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ne=x.forwardRef(({className:t,...e},r)=>i.jsx(sR,{ref:r,className:se(Xve(),t),...e}));ne.displayName=sR.displayName;var Bw="Tabs",[Zve,KAe]=Kn(Bw,[gc]),iR=gc(),[eye,qw]=Zve(Bw),oR=x.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:s,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,u=Px(l),[h,f]=Fs({prop:n,onChange:a,defaultProp:s});return i.jsx(eye,{scope:r,baseId:xu(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:i.jsx(it.div,{dir:u,"data-orientation":o,...d,ref:e})})});oR.displayName=Bw;var lR="TabsList",cR=x.forwardRef((t,e)=>{const{__scopeTabs:r,loop:n=!0,...a}=t,s=qw(lR,r),o=iR(r);return i.jsx(m0,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:n,children:i.jsx(it.div,{role:"tablist","aria-orientation":s.orientation,...a,ref:e})})});cR.displayName=lR;var dR="TabsTrigger",uR=x.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...s}=t,o=qw(dR,r),l=iR(r),c=mR(o.baseId,n),d=gR(o.baseId,n),u=n===o.value;return i.jsx(g0,{asChild:!0,...l,focusable:!a,active:u,children:i.jsx(it.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...s,ref:e,onMouseDown:je(t.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(n):h.preventDefault()}),onKeyDown:je(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(n)}),onFocus:je(t.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!a&&h&&o.onValueChange(n)})})})});uR.displayName=dR;var hR="TabsContent",fR=x.forwardRef((t,e)=>{const{__scopeTabs:r,value:n,forceMount:a,children:s,...o}=t,l=qw(hR,r),c=mR(l.baseId,n),d=gR(l.baseId,n),u=n===l.value,h=x.useRef(u);return x.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),i.jsx(Nn,{present:a||u,children:({present:f})=>i.jsx(it.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:f&&s})})});fR.displayName=hR;function mR(t,e){return`${t}-trigger-${e}`}function gR(t,e){return`${t}-content-${e}`}var tye=oR,pR=cR,vR=uR,yR=fR;const mo=tye,Gs=x.forwardRef(({className:t,...e},r)=>i.jsx(pR,{ref:r,className:se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));Gs.displayName=pR.displayName;const jr=x.forwardRef(({className:t,...e},r)=>i.jsx(vR,{ref:r,className:se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));jr.displayName=vR.displayName;const Sr=x.forwardRef(({className:t,...e},r)=>i.jsx(yR,{ref:r,className:se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Sr.displayName=yR.displayName;const rye=({isOpen:t,onClose:e,onLogin:r})=>{const[n,a]=x.useState(!1),[s,o]=x.useState(""),[l,c]=x.useState(""),[d,u]=x.useState(""),[h,f]=x.useState(""),[m,v]=x.useState(null),{toast:p}=Ce(),[g]=S3();x.useEffect(()=>{const j=g.get("invite");j&&(f(j),y(j))},[g]);const y=async j=>{if(j)try{const{data:_,error:S}=await W.from("teacher_invites").select("*").eq("invite_code",j).eq("status","pending").gt("expires_at",new Date().toISOString()).single();if(S||!_){p({title:"Kode Undangan Tidak Valid",description:"Kode undangan tidak ditemukan atau sudah kedaluwarsa",variant:"destructive"});return}v(_),o(_.email),p({title:"Kode Undangan Valid",description:`Anda diundang sebagai ${_.role} untuk ${_.email}`})}catch(_){console.error("Error validating invite:",_)}},b=async j=>{j.preventDefault(),a(!0);try{const{error:_}=await W.auth.signInWithPassword({email:s,password:l});_?p({title:"Error",description:_.message,variant:"destructive"}):(p({title:"Success",description:"Login berhasil!"}),r(),e())}catch{p({title:"Error",description:"Terjadi kesalahan saat login",variant:"destructive"})}finally{a(!1)}},w=async j=>{j.preventDefault(),a(!0);try{const{data:_,error:S}=await W.auth.signUp({email:s,password:l,options:{data:{full_name:d}}});if(S){p({title:"Error",description:S.message,variant:"destructive"});return}if(h&&m&&_.user)try{const{data:N,error:k}=await W.rpc("use_teacher_invite",{_invite_code:h,_user_id:_.user.id});k?(console.error("Error processing invite:",k),p({title:"Warning",description:"Akun berhasil dibuat, tapi gagal memproses undangan. Silakan hubungi admin.",variant:"destructive"})):p({title:"Success",description:"Registrasi berhasil! Anda telah bergabung dengan sekolah. Silakan login."})}catch(N){console.error("Exception processing invite:",N)}else p({title:"Success",description:"Registrasi berhasil! Silakan login dengan akun Anda."})}catch{p({title:"Error",description:"Terjadi kesalahan saat registrasi",variant:"destructive"})}finally{a(!1)}};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"sm:max-w-md bg-gray-800 border-gray-700",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"text-center text-2xl font-bold text-white",children:["Indo",i.jsx("span",{className:"text-lime-400",children:"Jadwal"})]})}),i.jsxs(mo,{defaultValue:"login",className:"w-full",children:[i.jsxs(Gs,{className:"grid w-full grid-cols-2 bg-gray-700",children:[i.jsx(jr,{value:"login",className:"text-gray-300 data-[state=active]:bg-lime-400 data-[state=active]:text-gray-900",children:"Login"}),i.jsx(jr,{value:"register",className:"text-gray-300 data-[state=active]:bg-lime-400 data-[state=active]:text-gray-900",children:"Daftar"})]}),i.jsx(Sr,{value:"login",children:i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"email",className:"text-gray-300",children:"Email"}),i.jsx(me,{id:"email",type:"email",value:s,onChange:j=>o(j.target.value),placeholder:"nama@email.com",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"password",className:"text-gray-300",children:"Password"}),i.jsx(me,{id:"password",type:"password",value:l,onChange:j=>c(j.target.value),placeholder:"Password",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder-gray-400"})]}),i.jsx(K,{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-lime-400 to-lime-500 hover:from-lime-500 hover:to-lime-600 text-gray-900 font-semibold",children:n?i.jsxs(i.Fragment,{children:[i.jsx(Qr,{className:"mr-2 h-4 w-4 animate-spin"}),"Memproses..."]}):"Login"})]})}),i.jsx(Sr,{value:"register",children:i.jsxs("form",{onSubmit:w,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"fullName",className:"text-gray-300",children:"Nama Lengkap"}),i.jsx(me,{id:"fullName",type:"text",value:d,onChange:j=>u(j.target.value),placeholder:"Nama Lengkap",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"registerEmail",className:"text-gray-300",children:"Email"}),i.jsx(me,{id:"registerEmail",type:"email",value:s,onChange:j=>o(j.target.value),placeholder:"nama@email.com",required:!0,className:"bg-gray-700 border-gray-600 text-white placeholder-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"registerPassword",className:"text-gray-300",children:"Password"}),i.jsx(me,{id:"registerPassword",type:"password",value:l,onChange:j=>c(j.target.value),placeholder:"Password (min. 6 karakter)",required:!0,minLength:6,className:"bg-gray-700 border-gray-600 text-white placeholder-gray-400"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"inviteCode",className:"text-gray-300",children:"Kode Undangan (Opsional)"}),i.jsx(me,{id:"inviteCode",type:"text",value:h,onChange:j=>{f(j.target.value),j.target.value&&y(j.target.value)},placeholder:"Masukkan kode undangan jika ada",className:"bg-gray-700 border-gray-600 text-white placeholder-gray-400"}),m&&i.jsxs("p",{className:"text-sm text-green-400",children:[" Undangan valid untuk ",m.email," sebagai ",m.role]})]}),i.jsx(K,{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold",children:n?i.jsxs(i.Fragment,{children:[i.jsx(Qr,{className:"mr-2 h-4 w-4 animate-spin"}),"Memproses..."]}):"Daftar"})]})})]})]})})},nye=()=>{const[t,e]=x.useState("beranda"),[r,n]=x.useState(!1),{user:a,loading:s,signOut:o}=tt(),l=cc();x.useEffect(()=>{a&&!s&&l("/dashboard")},[a,s,l]);const c=()=>{n(!0)},d=()=>{n(!1)},u=()=>{e("dashboard")},h=async()=>{await o(),e("beranda")};return s?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qr,{className:"h-12 w-12 animate-spin text-lime-400 mx-auto mb-4"}),i.jsx("div",{className:"text-foreground text-lg",children:"Memuat IndoJadwal..."})]})}):i.jsxs("div",{className:"w-full",children:[i.jsx(Kve,{activeTab:t,onTabChange:e,isLoggedIn:!!a,onLoginClick:c,onLogoutClick:h}),i.jsx(Qve,{onLoginClick:c}),i.jsx(rye,{isOpen:r,onClose:d,onLogin:u}),i.jsx(Vx,{})]})},aye=()=>{const{profile:t}=tt(),{data:e}=fr(),r=e==null?void 0:e.find(n=>n.is_active);return Ye({queryKey:["kbm-subjects",t==null?void 0:t.school_id,r==null?void 0:r.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(r!=null&&r.id))throw new Error("Missing required data");console.log(" Fetching KBM subjects for:",{school_id:t.school_id,academic_year_id:r.id,timestamp:new Date().toISOString()});const{data:n,error:a}=await W.from("schedule_subjects").select(`
          id,
          name,
          code,
          color,
          total_hours_per_year,
          session_category_id,
          school_id,
          academic_year_id,
          created_at,
          updated_at,
          session_categories (
            id,
            name,
            color
          )
        `).eq("school_id",t.school_id).eq("academic_year_id",r.id).order("name",{ascending:!0});if(a)throw console.error(" Error fetching KBM subjects:",a),a;console.log(" Raw schedule_subjects data:",{totalCount:(n==null?void 0:n.length)||0,data:n==null?void 0:n.map(o=>{var l;return{id:o.id,name:o.name,session_category_id:o.session_category_id,category_name:(l=o.session_categories)==null?void 0:l.name}})});const s=(n==null?void 0:n.map(o=>{var l,c;return{...o,type:"kbm",category_name:(l=o.session_categories)==null?void 0:l.name,category_color:(c=o.session_categories)==null?void 0:c.color}}))||[];return console.log(" KBM subjects transformed:",{totalCount:s.length,subjects:s.map(o=>({id:o.id,name:o.name,category_name:o.category_name,session_category_id:o.session_category_id}))}),s},enabled:!!(t!=null&&t.school_id)&&!!(r!=null&&r.id),staleTime:0,gcTime:0,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!0})},sye=aye,iye=()=>{const{profile:t}=tt(),{data:e}=fr(),r=e==null?void 0:e.find(n=>n.is_active);return Ye({queryKey:["matrix-class-subjects",t==null?void 0:t.school_id,r==null?void 0:r.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(r!=null&&r.id))throw new Error("Missing required data");console.log("Fetching matrix class subjects for:",{school_id:t.school_id,academic_year_id:r.id});try{const{data:n,error:a}=await W.from("schedule_class_subjects").select("*");if(a)return console.error("Error fetching schedule_class_subjects:",a),[];const{data:s,error:o}=await W.from("schedule_subjects").select("id, school_id, academic_year_id").eq("school_id",t.school_id).eq("academic_year_id",r.id);if(o)return console.error("Error fetching schedule_subjects:",o),[];const l=new Set((s==null?void 0:s.map(u=>u.id))||[]),d=((n==null?void 0:n.filter(u=>l.has(u.schedule_subject_id)))||[]).map(u=>({id:u.id,class_id:u.class_id,subject_id:u.schedule_subject_id,hours_per_week:u.hours_per_week||0,hours_per_year:u.hours_per_year||0,created_at:u.created_at,updated_at:u.updated_at}));return console.log("Matrix class subjects fetched successfully:",{totalClassSubjects:(n==null?void 0:n.length)||0,validSubjects:(s==null?void 0:s.length)||0,filteredResults:d.length}),d}catch(n){return console.error("Error in useMatrixClassSubjects:",n),[]}},enabled:!!(t!=null&&t.school_id)&&!!(r!=null&&r.id),staleTime:0,gcTime:0,retry:1,refetchOnWindowFocus:!1,refetchOnMount:!0})},oye=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{console.log("Creating matrix class subject with data:",r);const n={schedule_subject_id:r.subject_id,class_id:r.class_id,hours_per_week:Math.round(r.hours_per_year/36)||0,hours_per_year:r.hours_per_year||0},{data:a,error:s}=await W.from("schedule_class_subjects").insert(n).select(`
          id,
          schedule_subject_id,
          class_id,
          hours_per_week,
          hours_per_year,
          created_at,
          updated_at
        `).single();if(s)throw console.error("Error creating matrix class subject:",s),s;return console.log("Matrix class subject created:",a),a},onSuccess:async()=>{await t.invalidateQueries({queryKey:["matrix-subjects"]}),await t.invalidateQueries({queryKey:["matrix-class-subjects"]}),await t.invalidateQueries({queryKey:["schedule-subjects"]}),await t.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),await t.invalidateQueries({queryKey:["schedule-class-subjects"]}),await t.invalidateQueries({queryKey:["subjects"]}),await t.invalidateQueries({queryKey:["all-subjects-by-category"]}),t.refetchQueries({queryKey:["matrix-subjects"]}),t.refetchQueries({queryKey:["matrix-class-subjects"]}),t.refetchQueries({queryKey:["schedule-subjects-by-category"]}),e({title:"Berhasil",description:"Mata pelajaran berhasil ditambahkan ke kelas"})},onError:r=>{console.error("Error in useCreateMatrixClassSubject:",r),e({title:"Gagal",description:(r==null?void 0:r.message)||"Gagal menambahkan mata pelajaran ke kelas",variant:"destructive"})}})},lye=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,hours_per_year:n})=>{console.log(" Updating matrix class subject:",{id:r,hours_per_year:n});const{data:a,error:s}=await W.from("schedule_class_subjects").update({hours_per_year:n,hours_per_week:Math.round(n/36)||0}).eq("id",r).select().single();if(s)throw console.error(" Error updating matrix class subject:",s),s;return console.log(" Matrix class subject updated successfully:",a),a},onSuccess:async()=>{console.log(" Matrix class subject update success - invalidating caches..."),await Promise.all([t.invalidateQueries({queryKey:["matrix-subjects"]}),t.invalidateQueries({queryKey:["matrix-class-subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["all-subjects-by-category"]})]),setTimeout(()=>{t.refetchQueries({queryKey:["matrix-subjects"]}),t.refetchQueries({queryKey:["matrix-class-subjects"]}),t.refetchQueries({queryKey:["schedule-subjects-by-category"]})},100),e({title:"Berhasil",description:"JP berhasil diperbarui"})},onError:r=>{console.error(" Matrix class subject update failed:",r),e({title:"Gagal",description:(r==null?void 0:r.message)||"Gagal memperbarui JP",variant:"destructive"})}})},bR=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{const{error:n}=await W.from("schedule_class_subjects").delete().eq("id",r);if(n)throw console.error("Error deleting matrix class subject:",n),n},onSuccess:async()=>{await t.invalidateQueries({queryKey:["matrix-subjects"]}),await t.invalidateQueries({queryKey:["matrix-class-subjects"]}),await t.invalidateQueries({queryKey:["schedule-subjects"]}),await t.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),await t.invalidateQueries({queryKey:["schedule-class-subjects"]}),await t.invalidateQueries({queryKey:["subjects"]}),await t.invalidateQueries({queryKey:["all-subjects-by-category"]}),t.refetchQueries({queryKey:["matrix-subjects"]}),t.refetchQueries({queryKey:["matrix-class-subjects"]}),t.refetchQueries({queryKey:["schedule-subjects-by-category"]}),e({title:"Berhasil",description:"Assignment berhasil dihapus"})},onError:r=>{console.error("Error in useDeleteMatrixClassSubject:",r),e({title:"Gagal",description:(r==null?void 0:r.message)||"Gagal menghapus assignment",variant:"destructive"})}})},Lu=()=>{const{profile:t}=tt(),{data:e}=fr(),r=e==null?void 0:e.find(n=>n.is_active);return Ye({queryKey:["extracurriculars",t==null?void 0:t.school_id,r==null?void 0:r.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(r!=null&&r.id))throw new Error("Missing required data");console.log(" Fetching extracurriculars for:",{school_id:t.school_id,academic_year_id:r.id,profile:!!t,activeYear:!!r});const{data:n,error:a}=await W.from("extracurriculars").select(`
          *,
          session_categories (
            id,
            name,
            color
          )
        `).eq("school_id",t.school_id).eq("academic_year_id",r.id).order("name",{ascending:!0});if(a)throw console.error("Error fetching extracurriculars:",a),a;return console.log(" Extracurriculars fetched:",{count:(n==null?void 0:n.length)||0,data:n==null?void 0:n.map(s=>({name:s.name,session_category_id:s.session_category_id}))}),n||[]},enabled:!!(t!=null&&t.school_id)&&!!(r!=null&&r.id),staleTime:0,gcTime:0,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!0})},cye=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt(),{data:n}=fr(),a=n==null?void 0:n.find(s=>s.is_active);return Se({mutationFn:async s=>{console.log("Creating extracurricular with data:",s);try{if(!(r!=null&&r.school_id)||!(a!=null&&a.id))throw new Error("Data sekolah atau tahun akademik tidak ditemukan");const{data:o}=await W.from("session_categories").select("id, name").eq("school_id",r.school_id).eq("academic_year_id",a.id).eq("name","Ekskul").single();console.log(" Found ekstrakurikuler category:",o);const l={name:s.name,description:s.description||`Ekstrakurikuler ${s.name}`,hours_per_year:s.hours_per_year,color:s.color||"#F97316",session_category_id:(o==null?void 0:o.id)||null,school_id:r.school_id,academic_year_id:a.id};console.log("Clean extracurricular data:",l);const{data:c,error:d}=await W.from("extracurriculars").insert(l).select().single();if(d)throw console.error("Error creating extracurricular:",d),d;return console.log("Extracurricular created:",c),c}catch(o){throw console.error("Full error in createExtracurricular:",o),o}},onSuccess:()=>{t.invalidateQueries({queryKey:["extracurriculars"]}),e({title:"Berhasil",description:"Data ekstrakurikuler berhasil ditambahkan"})},onError:s=>{console.error("Error in onError:",s),e({title:"Gagal",description:"Gagal menambahkan data ekstrakurikuler: "+(s.message||"Unknown error"),variant:"destructive"})}})},dye=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,...n})=>{console.log("Updating extracurricular:",r,n);const a={name:n.name,hours_per_year:n.hours_per_year||0,color:n.color||"#F97316",session_category_id:n.session_category_id||null},{data:s,error:o}=await W.from("extracurriculars").update(a).eq("id",r).select().single();if(o)throw console.error("Error updating extracurricular:",o),o;return console.log("Extracurricular updated:",s),s},onSuccess:()=>{t.invalidateQueries({queryKey:["extracurriculars"]}),e({title:"Berhasil",description:"Data ekstrakurikuler berhasil diperbarui"})},onError:r=>{console.error("Error updating extracurricular:",r),e({title:"Gagal",description:"Gagal memperbarui data ekstrakurikuler: "+(r.message||"Unknown error"),variant:"destructive"})}})},uye=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{console.log("Deleting extracurricular:",r);const{error:n}=await W.from("extracurriculars").delete().eq("id",r);if(n)throw console.error("Error deleting extracurricular:",n),n},onSuccess:()=>{t.invalidateQueries({queryKey:["extracurriculars"]}),e({title:"Berhasil",description:"Data ekstrakurikuler berhasil dihapus"})},onError:r=>{console.error("Error deleting extracurricular:",r),e({title:"Gagal",description:"Gagal menghapus data ekstrakurikuler: "+(r.message||"Unknown error"),variant:"destructive"})}})},Uw=()=>{const{profile:t}=tt();return Ye({queryKey:["extracurricular-classes"],queryFn:async()=>{if(!(t!=null&&t.school_id))return[];const{data:e,error:r}=await W.from("extracurricular_classes").select("*").eq("school_id",t.school_id);if(r)throw r;return e},enabled:!!(t!=null&&t.school_id)})},xR=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");const{data:a,error:s}=await W.from("extracurricular_classes").insert({...n,hours_per_week:Math.round(n.hours_per_year/36),school_id:r.school_id}).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["extracurricular-classes"]}),e({title:"Berhasil",description:"Ekstrakurikuler berhasil ditambahkan ke kelas"})},onError:n=>{console.error("Error creating extracurricular class:",n),e({title:"Error",description:"Gagal menambahkan ekstrakurikuler ke kelas",variant:"destructive"})}})},hye=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,hours_per_year:n})=>{const{data:a,error:s}=await W.from("extracurricular_classes").update({hours_per_year:n,hours_per_week:Math.round(n/36)}).eq("id",r).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["extracurricular-classes"]}),e({title:"Berhasil",description:"JP ekstrakurikuler berhasil diperbarui"})},onError:r=>{console.error("Error updating extracurricular class:",r),e({title:"Error",description:"Gagal memperbarui JP ekstrakurikuler",variant:"destructive"})}})},wR=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{console.log(" Deleting extracurricular class:",r);const{error:n}=await W.from("extracurricular_classes").delete().eq("id",r);if(n)throw console.error(" Error deleting extracurricular class:",n),n;return console.log(" Extracurricular class deleted successfully"),r},onSuccess:()=>{t.invalidateQueries({queryKey:["extracurricular-classes"]}),t.invalidateQueries({queryKey:["extracurriculars"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),e({title:"Berhasil",description:"Ekstrakurikuler berhasil dihapus dari kelas"}),console.log(" Extracurricular class delete successful - cache invalidated")},onError:r=>{console.error(" Extracurricular class delete failed:",r),e({title:"Gagal",description:"Gagal menghapus ekstrakurikuler: "+r.message,variant:"destructive"})}})},bh=["#8B5CF6","#F97316","#3B82F6","#22C55E","#06B6D4","#EC4899","#EAB308","#EF4444","#84CC16","#F59E0B","#14B8A6","#6366F1"],_R=({open:t,onOpenChange:e,editingSubject:r})=>{const[n,a]=x.useState([]),[s,o]=x.useState({name:"",code:"",schedule_category_id:"",color:bh[0],total_hours_per_year:"0",standard_duration:"45"}),{data:l=[]}=Ar(),c=Iw(),d=XO(),{toast:u}=Ce(),h=Ne();x.useEffect(()=>{var v,p;o(r?{name:r.name||"",code:r.code||"",schedule_category_id:r.session_category_id||"",color:r.color||bh[0],total_hours_per_year:((v=r.total_hours_per_year)==null?void 0:v.toString())||"0",standard_duration:((p=r.standard_duration)==null?void 0:p.toString())||"45"}:{name:"",code:"",schedule_category_id:"",color:bh[0],total_hours_per_year:"0",standard_duration:"45"})},[r]);const f=async v=>{if(v.preventDefault(),!s.name.trim()||!s.code.trim()){u({title:"Error",description:"Nama dan kode mata pelajaran harus diisi",variant:"destructive"});return}const p=parseInt(s.total_hours_per_year);if(isNaN(p)||p<0){u({title:"Error",description:"JP/Tahun harus berupa angka yang valid (0 atau lebih)",variant:"destructive"});return}console.log("Form data:",s);try{const g={name:s.name.trim(),code:s.code.trim(),color:s.color,total_hours_per_year:p,standard_duration:parseInt(s.standard_duration)||45,schedule_category_id:s.schedule_category_id,selected_classes:n};r?await d.mutateAsync({id:r.id,...g}):await c.mutateAsync(g),console.log(" Modal: Starting aggressive cache refresh..."),await Promise.all([h.invalidateQueries({queryKey:["schedule-subjects"]}),h.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),h.invalidateQueries({queryKey:["all-subjects-by-category"]}),h.invalidateQueries({queryKey:["matrix-subjects"]}),h.invalidateQueries({queryKey:["kbm-subjects"]}),h.invalidateQueries({queryKey:["unified-subjects"]}),h.invalidateQueries({queryKey:["subjects"]})]),setTimeout(async()=>{console.log(" Modal: Force refetching all queries..."),await Promise.all([h.refetchQueries({queryKey:["schedule-subjects"]}),h.refetchQueries({queryKey:["schedule-subjects-by-category"]}),h.refetchQueries({queryKey:["all-subjects-by-category"]}),h.refetchQueries({queryKey:["matrix-subjects"]}),h.refetchQueries({queryKey:["kbm-subjects"]}),h.refetchQueries({queryKey:["unified-subjects"]})]),console.log(" Modal: All queries refetched")},100),setTimeout(()=>{console.log(" Modal: Additional refresh cycle..."),h.invalidateQueries(),h.refetchQueries({queryKey:["kbm-subjects"]}),h.refetchQueries({queryKey:["matrix-subjects"]})},500),e(!1)}catch(g){console.error("Error in handleSubmit:",g)}},m=c.isPending||d.isPending;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-2xl",children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Mata Pelajaran":"Tambah Mata Pelajaran Baru"})}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Nama Mata Pelajaran*"}),i.jsx(me,{id:"name",value:s.name,onChange:v=>o(p=>({...p,name:v.target.value})),placeholder:"Contoh: Matematika",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"code",children:"Kode Mata Pelajaran*"}),i.jsx(me,{id:"code",value:s.code,onChange:v=>o(p=>({...p,code:v.target.value})),placeholder:"Contoh: MAT",required:!0})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"schedule_category_id",children:"Kategori Jadwal"}),i.jsxs(Re,{value:s.schedule_category_id,onValueChange:v=>o(p=>({...p,schedule_category_id:v})),children:[i.jsx(De,{children:i.jsx($e,{placeholder:"Pilih kategori sesi"})}),i.jsx(Pe,{children:l.map(v=>i.jsx(he,{value:v.id,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:v.color}}),v.name]})},v.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"standard_duration",children:"Durasi Standar (menit)"}),i.jsx(me,{id:"standard_duration",type:"number",value:s.standard_duration,onChange:v=>o(p=>({...p,standard_duration:v.target.value})),placeholder:"45",min:"1"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"total_hours_per_year",children:"JP/Tahun*"}),i.jsx(me,{id:"total_hours_per_year",type:"number",value:s.total_hours_per_year,onChange:v=>o(p=>({...p,total_hours_per_year:v.target.value})),placeholder:"Contoh: 144 (atau 0 jika belum direncanakan)",min:"0",required:!0})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Masukkan 0 jika belum ada perencanaan pasti. Nanti akan otomatis terhitung dari menu Jadwal."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Warna Mata Pelajaran"}),i.jsx("div",{className:"grid grid-cols-8 gap-2",children:bh.map(v=>i.jsx("button",{type:"button",className:`w-10 h-10 rounded-lg border-2 transition-all duration-200 hover:scale-105 ${s.color===v?"border-foreground ring-2 ring-offset-2 ring-foreground":"border-border hover:border-muted-foreground"}`,style:{backgroundColor:v},onClick:()=>o(p=>({...p,color:v})),title:`Pilih warna ${v}`},v))}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:s.color}}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Warna terpilih: ",s.color]})]})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:m,children:"Batal"}),i.jsx(K,{type:"submit",disabled:m,children:m?"Menyimpan...":r?"Update":"Simpan"})]})]})]})})},xh=["#F97316","#EAB308","#84CC16","#22C55E","#14B8A6","#06B6D4","#3B82F6","#6366F1","#8B5CF6","#EC4899","#EF4444","#F59E0B"],jR=({open:t,onOpenChange:e,editingExtracurricular:r})=>{const[n,a]=x.useState({name:"",hours_per_year:"",session_category_id:"",color:xh[0]}),s=cye(),o=dye(),{data:l=[]}=Ar(),{toast:c}=Ce(),d=l.filter(f=>f.name==="Ekskul");x.useEffect(()=>{var f,m,v;t&&a(r?{name:r.name||"",hours_per_year:((f=r.hours_per_year)==null?void 0:f.toString())||"",session_category_id:r.session_category_id||((m=d[0])==null?void 0:m.id)||"",color:r.color||xh[0]}:{name:"",hours_per_year:"",session_category_id:((v=d[0])==null?void 0:v.id)||"",color:xh[0]})},[r==null?void 0:r.id,t]);const u=async f=>{if(f.preventDefault(),!n.name.trim()||n.hours_per_year.trim()===""){c({title:"Error",description:"Nama ekstrakurikuler dan JP/Tahun harus diisi",variant:"destructive"});return}const m=parseInt(n.hours_per_year);if(isNaN(m)||m<0){c({title:"Error",description:"JP/Tahun harus berupa angka yang valid (0 atau lebih)",variant:"destructive"});return}console.log("Form data:",{...n,hours_per_year:m});try{const v={name:n.name.trim(),hours_per_year:m,color:n.color,session_category_id:n.session_category_id};console.log(" Submitting extracurricular data:",v),r?(await o.mutateAsync({id:r.id,...v}),c({title:" Berhasil",description:"Ekstrakurikuler berhasil diperbarui"})):(await s.mutateAsync(v),c({title:" Berhasil",description:"Ekstrakurikuler berhasil ditambahkan"})),e(!1)}catch(v){console.error(" Error in handleSubmit:",v),c({title:" Gagal",description:`Gagal menyimpan ekstrakurikuler: ${v.message}`,variant:"destructive"})}},h=s.isPending||o.isPending;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-lg",children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Ekstrakurikuler":"Tambah Ekstrakurikuler Baru"})}),i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Nama Ekstrakurikuler*"}),i.jsx(me,{id:"name",value:n.name,onChange:f=>a(m=>({...m,name:f.target.value})),placeholder:"Contoh: Pramuka, Basket, Musik",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"hours_per_year",children:"JP/Tahun*"}),i.jsx(me,{id:"hours_per_year",type:"number",value:n.hours_per_year,onChange:f=>a(m=>({...m,hours_per_year:f.target.value})),placeholder:"Contoh: 72 (atau 0 jika belum direncanakan)",min:"0",required:!0})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"category",children:"Kategori*"}),i.jsxs(Re,{value:n.session_category_id,onValueChange:f=>a(m=>({...m,session_category_id:f})),children:[i.jsx(De,{children:i.jsx($e,{placeholder:"Pilih kategori"})}),i.jsx(Pe,{children:d.map(f=>i.jsx(he,{value:f.id,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.color}}),f.name]})},f.id))})]})]}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Masukkan 0 jika belum ada perencanaan pasti. Nanti akan otomatis terhitung dari menu Jadwal."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Warna Ekstrakurikuler"}),i.jsx("div",{className:"grid grid-cols-6 gap-2",children:xh.map(f=>i.jsx("button",{type:"button",className:`w-10 h-10 rounded-lg border-2 transition-all duration-200 hover:scale-105 ${n.color===f?"border-foreground ring-2 ring-offset-2 ring-foreground":"border-border hover:border-muted-foreground"}`,style:{backgroundColor:f},onClick:()=>a(m=>({...m,color:f})),title:`Pilih warna ${f}`},f))}),i.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[i.jsx("div",{className:"w-4 h-4 rounded border",style:{backgroundColor:n.color}}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Warna terpilih: ",n.color]})]})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:h,children:"Batal"}),i.jsx(K,{type:"submit",disabled:h,children:h?"Menyimpan...":r?"Update":"Simpan"})]})]})]})})},SR=()=>Ye({queryKey:["class-subjects"],queryFn:async()=>{console.log(" useClassSubjects: Fetching class subjects...");const{data:t,error:e}=await W.from("class_schedules").select(`
          *,
          classes(*),
          schedule_subjects(*)
        `).is("day_of_week",null).order("created_at",{ascending:!1});return e?(console.error(" useClassSubjects error:",e),console.log(" Falling back to empty array to prevent 400 errors"),[]):(console.log(" useClassSubjects: Found",(t==null?void 0:t.length)||0,"class subjects"),t)},retry:1,retryDelay:1e3,staleTime:5*60*1e3}),kR=(t=!0)=>{const e=Ne(),{toast:r}=Ce();return Se({mutationFn:async n=>{try{console.log("Creating class subject with data:",n);const a={class_id:n.class_id,subject_id:n.subject_id,hours_per_week:Math.round(n.hours_per_year/36)||0,hours_per_year:n.hours_per_year||0};console.log("Insert data for class_subjects:",a);const{data:s,error:o}=await W.from("class_schedules").insert(a).select().single();if(o)throw console.error("Supabase error creating class subject:",o),console.error("Error details:",{message:o.message,details:o.details,hint:o.hint,code:o.code}),o;return console.log("Class subject created successfully:",s),s}catch(a){throw console.error("Full error in createClassSubject mutationFn:",a),a}},onSuccess:n=>{console.log("useCreateClassSubject onSuccess called with:",n),e.invalidateQueries({queryKey:["class-subjects"]}),e.invalidateQueries({queryKey:["subjects"]}),t&&r({title:"Berhasil",description:"Mata pelajaran berhasil ditambahkan ke kelas"})},onError:n=>{console.error("useCreateClassSubject onError called with:",n),t&&r({title:"Gagal",description:"Gagal menambahkan mata pelajaran ke kelas: "+((n==null?void 0:n.message)||"Unknown error"),variant:"destructive"})}})},fye=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,hours_per_year:n})=>{console.log(" Updating class subject:",{id:r,hours_per_year:n});const{data:a,error:s}=await W.from("class_schedules").update({hours_per_year:n,hours_per_week:Math.round(n/36)}).eq("id",r).select().single();if(s)throw console.error(" Error updating class subject:",s),s;return console.log(" Class subject updated successfully:",a),a},onSuccess:()=>{t.invalidateQueries({queryKey:["class-subjects"]}),t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),console.log(" Class subject update successful - cache invalidated")},onError:r=>{console.error(" Class subject update failed:",r),e({title:"Gagal",description:"Gagal memperbarui data mata pelajaran: "+r.message,variant:"destructive"})}})},NR=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{console.log(" Deleting class subject:",r);const{error:n}=await W.from("class_schedules").delete().eq("id",r);if(n)throw console.error(" Error deleting class subject:",n),n;return console.log(" Class subject deleted successfully"),r},onSuccess:()=>{t.invalidateQueries({queryKey:["class-subjects"]}),t.invalidateQueries({queryKey:["subjects"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),e({title:"Berhasil",description:"Mata pelajaran berhasil dihapus dari kelas"}),console.log(" Class subject delete successful - cache invalidated")},onError:r=>{console.error(" Class subject delete failed:",r),e({title:"Gagal",description:"Gagal menghapus mata pelajaran: "+r.message,variant:"destructive"})}})},mye=({open:t,onOpenChange:e,assignment:r,subjectName:n,className:a,isExtracurricular:s=!1,isMatrixAssignment:o=!1})=>{const[l,c]=x.useState(0),d=fye(),u=NR(),h=hye(),f=wR(),m=lye(),v=bR(),{toast:p}=Ce();x.useEffect(()=>{r&&c(r.hours_per_year||(r.hours_per_week||0)*36)},[r]);const g=async()=>{try{console.log(" Saving assignment with hours per year:",l),console.log(" Assignment ID:",r.id),console.log(" Is extracurricular:",s),console.log(" Assignment data:",r),s?(console.log(" Updating extracurricular class assignment..."),await h.mutateAsync({id:r.id,hours_per_year:l})):o?(console.log(" Updating matrix class subject assignment..."),await m.mutateAsync({id:r.id,hours_per_year:l})):(console.log(" Updating class subject assignment..."),await d.mutateAsync({id:r.id,hours_per_year:l})),p({title:" Berhasil",description:`Jam pelajaran berhasil diperbarui menjadi ${l} JP/Tahun`}),console.log(" Assignment update successful"),e(!1)}catch(j){console.error(" Error updating assignment:",j),p({title:" Gagal",description:"Gagal memperbarui jam pelajaran: "+j.message,variant:"destructive"})}},y=async()=>{const j=s?"ekstrakurikuler":"mata pelajaran";if(confirm(`Apakah Anda yakin ingin menghapus ${j} "${n}" dari kelas "${a}"?`))try{console.log(" Deleting assignment:",{id:r.id,type:j,isExtracurricular:s}),s?(console.log(" Deleting extracurricular class assignment..."),await f.mutateAsync(r.id)):o?(console.log(" Deleting matrix class subject assignment..."),await v.mutateAsync(r.id)):(console.log(" Deleting class subject assignment..."),await u.mutateAsync(r.id)),console.log(" Assignment deletion successful"),e(!1)}catch(_){console.error(" Error deleting assignment:",_),p({title:" Gagal",description:`Gagal menghapus ${j}: ${_.message}`,variant:"destructive"})}},b=j=>{const _=j.target.value;if(_==="")c(0);else{const S=parseInt(_);!isNaN(S)&&S>=0&&c(S)}},w=d.isPending||u.isPending||h.isPending||f.isPending||m.isPending||v.isPending;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"bg-gray-800 border-gray-700 text-white max-w-md",children:[i.jsxs(wt,{children:[i.jsxs(_t,{className:s?"text-orange-400":"text-lime-400",children:["Edit Penugasan ",s?"Ekstrakurikuler":"Mata Pelajaran"]}),i.jsxs("div",{className:"text-gray-300 text-sm",children:[i.jsx("div",{children:n}),i.jsxs("div",{children:["Kelas ",a]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"hoursPerYear",className:"text-gray-300",children:"Jam Pelajaran per Tahun"}),i.jsx(me,{id:"hoursPerYear",type:"number",min:"0",max:"360",value:l,onChange:b,className:"bg-gray-700 border-gray-600 text-white",placeholder:"0"}),i.jsx("p",{className:"text-xs text-gray-400",children:"Total jam pelajaran dalam satu tahun akademik (0 untuk mata pelajaran yang tidak dijadwalkan)"})]}),i.jsx("div",{className:"border-t border-gray-600 pt-4",children:i.jsxs(K,{type:"button",variant:"destructive",onClick:y,disabled:w,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:[i.jsx(Ut,{className:"mr-2 h-4 w-4"}),"Hapus dari Kelas"]})})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),className:"border-gray-600 text-gray-300",disabled:w,children:"Batal"}),i.jsx(K,{type:"button",onClick:g,className:"bg-lime-400 hover:bg-lime-500 text-gray-900",disabled:w,children:w?"Menyimpan...":"Simpan"})]})]})})},ER=({open:t,onOpenChange:e,onConfirm:r,title:n,description:a,itemName:s,isLoading:o=!1})=>{const l=()=>{r(),e(!1)};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"bg-gray-800 border-gray-700 text-white max-w-md",children:[i.jsx(wt,{children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx(Ii,{className:"h-6 w-6 text-red-400"})}),i.jsx("div",{children:i.jsx(_t,{className:"text-red-400 text-lg",children:n})})]})}),i.jsxs("div",{className:"py-4",children:[i.jsx("p",{className:"text-gray-300 mb-3",children:a}),s&&i.jsx("div",{className:"bg-gray-700/50 rounded-lg p-3 border border-gray-600",children:i.jsx("p",{className:"text-white font-medium",children:s})}),i.jsx("p",{className:"text-red-400 text-sm mt-3 font-medium",children:"Tindakan ini tidak dapat dibatalkan."})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",disabled:o,children:"Batal"}),i.jsx(K,{type:"button",onClick:l,className:"bg-red-600 hover:bg-red-700 text-white",disabled:o,children:o?"Menghapus...":"Hapus"})]})]})})},gye=({subjects:t,sortedClasses:e,getSubjectColor:r,getClassSubject:n,handleAddSubjectToClass:a,handleEditAssignment:s,handleDeleteAssignment:o,createClassSubject:l,onAddSubject:c,onEditSubject:d,onDeleteSubject:u})=>!t||t.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(Kt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Belum ada mata pelajaran"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Mulai dengan menambahkan mata pelajaran pertama"}),i.jsxs(K,{onClick:c,className:"bg-lime-500 hover:bg-lime-600 text-gray-900 font-semibold",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Tambah Mata Pelajaran"]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-max",children:[i.jsxs("div",{className:"grid grid-cols-[250px_repeat(auto-fit,minmax(120px,1fr))] gap-2 p-4",children:[i.jsx("div",{className:"flex items-center justify-center bg-muted/20 border border-border rounded-lg p-3 shadow-sm",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Kt,{className:"h-5 w-5 text-lime-500 mx-auto mb-1"}),i.jsx("div",{className:"text-foreground font-medium text-sm",children:"MATA PELAJARAN"})]})}),e.map(h=>i.jsxs("div",{className:"text-center bg-muted/10 border border-border rounded-lg p-3 py-[12px] px-0 shadow-sm",children:[i.jsxs("div",{className:"text-foreground font-medium text-sm",children:["Kelas ",h.level]}),i.jsx("div",{className:"text-muted-foreground text-xs",children:h.name})]},h.id))]}),i.jsx("div",{className:"space-y-2 p-4",children:t.map(h=>i.jsxs("div",{className:"grid grid-cols-[250px_repeat(auto-fit,minmax(120px,1fr))] gap-2 items-center",children:[i.jsxs("div",{className:"group relative rounded-xl p-3 h-16 flex flex-col justify-center border-2",style:{backgroundColor:`${h.color}20`,borderColor:`${h.color}40`},children:[i.jsx("div",{className:"text-foreground text-sm font-medium mb-1",children:h.name}),i.jsx("div",{className:"text-muted-foreground text-xs opacity-70",children:h.code}),i.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex gap-1",children:[i.jsx(K,{size:"sm",variant:"ghost",onClick:f=>{f.stopPropagation(),d(h)},className:"h-5 w-5 p-0 hover:bg-accent/20 text-muted-foreground hover:text-foreground rounded-sm",children:i.jsx(Yh,{className:"h-2.5 w-2.5"})}),i.jsx(K,{size:"sm",variant:"ghost",onClick:f=>{f.stopPropagation(),u(h)},className:"h-5 w-5 p-0 hover:bg-red-500/20 text-muted-foreground hover:text-red-400 rounded-sm",children:i.jsx(Ut,{className:"h-2.5 w-2.5"})})]})]}),e.map(f=>{const m=n(h.id,f.id);return i.jsx("div",{className:"flex justify-center",children:m?i.jsxs("div",{className:"group relative h-16 w-full",children:[i.jsxs("div",{className:"p-3 h-16 w-full flex flex-col justify-center items-center cursor-pointer hover:opacity-80 transition-opacity rounded-lg border-2",style:{backgroundColor:`${h.color}20`,borderColor:`${h.color}60`},children:[i.jsx("div",{className:"text-foreground text-sm font-medium",children:h.name}),i.jsxs("div",{className:"text-muted-foreground opacity-70 text-xs mt-1",children:[m.hours_per_year||m.hours_per_week*36," JP/Tahun"]})]}),i.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex gap-1",children:[i.jsx(K,{size:"sm",onClick:()=>s(m,h.name,`${f.level} ${f.name}`),className:"h-5 w-5 p-0 bg-blue-600/80 hover:bg-blue-700 rounded-sm",children:i.jsx(Yh,{className:"w-2.5 h-2.5"})}),i.jsx(K,{size:"sm",onClick:()=>o(m),className:"h-5 w-5 p-0 bg-red-600/80 hover:bg-red-700 rounded-sm",children:i.jsx(Ut,{className:"w-2.5 h-2.5"})})]})]}):i.jsxs(K,{variant:"ghost",onClick:()=>a(h,f),disabled:l.isPending,className:"h-16 w-full text-primary hover:bg-primary/10 border border-dashed border-primary/30 flex flex-col items-center justify-center rounded-lg my-0 bg-muted/5",children:[i.jsx(ct,{className:"h-4 w-4 mb-1"}),i.jsx("span",{className:"text-xs",children:"Tambah"})]})},f.id)})]},h.id))})]})}),pye=({activeAcademicYear:t,onEditAssignment:e})=>{const[r,n]=x.useState(!1),[a,s]=x.useState(!1),[o,l]=x.useState(null),[c,d]=x.useState(null),{data:u=[]}=Yt(),{data:h=[]}=Lu(),{data:f=[]}=Uw(),m=xR(),v=wR(),p=uye(),g=[...u].sort((E,P)=>E.level!==P.level?E.level.localeCompare(P.level):E.grade!==P.grade?E.grade-P.grade:E.name.localeCompare(P.name)),y=(E,P)=>f.find(T=>T.extracurricular_id===E&&T.class_id===P),b=(E,P)=>{m.mutate({extracurricular_id:E,class_id:P,hours_per_year:36})},w=(E,P,T)=>{e&&e(E,P,T)},j=E=>{confirm("Apakah Anda yakin ingin menghapus assignment ini?")&&v.mutate(E.id)},_=E=>{l(E),n(!0)},S=E=>{d(E),s(!0)},N=()=>{c&&(p.mutate(c.id),d(null))},k=E=>{n(E),E||l(null)};return t?i.jsxs("div",{className:"overflow-x-auto",children:[i.jsxs("div",{className:"min-w-max",children:[i.jsxs("div",{className:"grid grid-cols-[250px_repeat(auto-fit,minmax(120px,1fr))] gap-2 p-4",children:[i.jsx("div",{className:"flex items-center justify-center bg-muted/20 border border-border rounded-lg p-3 shadow-sm",children:i.jsxs("div",{className:"text-center",children:[i.jsx(EA,{className:"h-5 w-5 text-orange-500 mx-auto mb-1"}),i.jsx("div",{className:"text-foreground font-medium text-sm",children:"EKSTRAKURIKULER"})]})}),g.map(E=>i.jsxs("div",{className:"text-center bg-muted/10 border border-border rounded-lg p-3 py-[12px] px-0 shadow-sm",children:[i.jsxs("div",{className:"text-foreground font-medium text-sm",children:["Kelas ",E.level]}),i.jsx("div",{className:"text-muted-foreground text-xs",children:E.name})]},E.id))]}),i.jsx("div",{className:"space-y-2 p-4",children:h.map(E=>i.jsxs("div",{className:"grid grid-cols-[250px_repeat(auto-fit,minmax(120px,1fr))] gap-2 items-center",children:[i.jsxs("div",{className:"group relative rounded-xl p-3 h-16 flex flex-col justify-center border-2",style:{backgroundColor:`${E.color||"#F97316"}20`,borderColor:`${E.color||"#F97316"}40`},children:[i.jsx("div",{className:"text-foreground text-sm font-medium",children:E.name}),i.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex gap-1",children:[i.jsx(K,{size:"sm",variant:"ghost",onClick:P=>{P.stopPropagation(),_(E)},className:"h-5 w-5 p-0 hover:bg-accent/20 text-muted-foreground hover:text-foreground rounded-sm",children:i.jsx(Yh,{className:"h-2.5 w-2.5"})}),i.jsx(K,{size:"sm",variant:"ghost",onClick:P=>{P.stopPropagation(),S(E)},className:"h-5 w-5 p-0 hover:bg-red-500/20 text-muted-foreground hover:text-red-400 rounded-sm",children:i.jsx(Ut,{className:"h-2.5 w-2.5"})})]})]}),g.map(P=>{const T=y(E.id,P.id);return i.jsx("div",{className:"flex justify-center",children:T?i.jsxs("div",{className:"group relative h-16 w-full",children:[i.jsxs("div",{className:"p-3 h-16 w-full flex flex-col justify-center items-center cursor-pointer hover:opacity-80 transition-opacity rounded-lg border-2",style:{backgroundColor:`${E.color||"#F97316"}20`,borderColor:`${E.color||"#F97316"}60`},children:[i.jsx("div",{className:"text-foreground text-sm font-medium",children:E.name}),i.jsxs("div",{className:"text-muted-foreground opacity-70 text-xs mt-1",children:[T.hours_per_year||T.hours_per_week*36," JP/Tahun"]})]}),i.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex gap-1",children:[i.jsx(K,{size:"sm",onClick:()=>w(T,E.name,`${P.level} ${P.name}`),className:"h-5 w-5 p-0 bg-blue-600/80 hover:bg-blue-700 rounded-sm",children:i.jsx(Yh,{className:"w-2.5 h-2.5"})}),i.jsx(K,{size:"sm",onClick:()=>j(T),className:"h-5 w-5 p-0 bg-red-600/80 hover:bg-red-700 rounded-sm",children:i.jsx(Ut,{className:"w-2.5 h-2.5"})})]})]}):i.jsxs(K,{variant:"ghost",onClick:()=>b(E.id,P.id),className:"h-16 w-full text-primary hover:bg-primary/10 border border-dashed border-primary/30 flex flex-col items-center justify-center rounded-lg my-0 bg-muted/5",children:[i.jsx(ct,{className:"h-4 w-4 mb-1"}),i.jsx("span",{className:"text-xs",children:"Tambah"})]})},P.id)})]},E.id))})]}),i.jsx(jR,{open:r,onOpenChange:k,editingExtracurricular:o}),i.jsx(ER,{open:a,onOpenChange:s,onConfirm:N,title:"Hapus Ekstrakurikuler",description:"Apakah Anda yakin ingin menghapus ekstrakurikuler ini? Semua data terkait akan ikut terhapus.",itemName:c==null?void 0:c.name,isLoading:p.isPending})]}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsx("div",{className:"text-center py-12",children:i.jsx("div",{className:"bg-orange-500/10 border border-orange-500/20 rounded-lg p-6",children:i.jsx("p",{className:"text-orange-400",children:"Tidak ada tahun akademik yang aktif. Silakan buat tahun akademik terlebih dahulu."})})})})})},vye=()=>{Lw();const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(!1),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState(""),[f,m]=x.useState(""),[v,p]=x.useState(!1),[g,y]=x.useState(null),[b,w]=x.useState(null),{data:j}=fr(),_=j==null?void 0:j.find(we=>we.is_active),{data:S,isLoading:N,error:k}=sye(),{data:E,isLoading:P,error:T}=iye(),{data:D,isLoading:A,error:C}=Yt(),{data:R,isLoading:L,error:M}=Lu(),{data:I,isLoading:B,error:H}=Uw(),{data:q,isLoading:O,error:F}=Ar(),G=oye();xR();const Y=ZO(),Z=bR(),le=x.useMemo(()=>D?D.sort((we,ze)=>{const Ie=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"],gr=Ie.indexOf(we.level),Tn=Ie.indexOf(ze.level);return gr!==Tn?gr-Tn:we.name.localeCompare(ze.name)}):[],[D]),V=x.useMemo(()=>{if(console.log(" Filtering KBM subjects...",{matrixSubjectsCount:(S==null?void 0:S.length)||0,sessionCategoriesCount:(q==null?void 0:q.length)||0,timestamp:new Date().toISOString()}),!S||!q)return console.log(" Missing data for KBM filtering:",{hasMatrixSubjects:!!S,hasSessionCategories:!!q}),[];const we=q.find(Ie=>Ie.name==="KBM");if(console.log(" KBM Category found:",{found:!!we,category:we?{id:we.id,name:we.name}:null,allCategories:q.map(Ie=>({id:Ie.id,name:Ie.name}))}),!we)return console.log(" No KBM category found"),[];const ze=S.filter(Ie=>Ie.session_category_id===we.id);return console.log(" KBM subjects filtering result:",{totalMatrixSubjects:S.length,kbmCategoryId:we.id,filteredCount:ze.length,allSubjects:S.map(Ie=>({id:Ie.id,name:Ie.name,session_category_id:Ie.session_category_id,category_name:Ie.category_name})),filteredSubjects:ze.map(Ie=>({id:Ie.id,name:Ie.name,session_category_id:Ie.session_category_id,category_name:Ie.category_name}))}),ze},[S,q]),Q=x.useMemo(()=>["bg-purple-400/10 border-purple-400/20 text-purple-400","bg-orange-400/10 border-orange-400/20 text-orange-400","bg-blue-400/10 border-blue-400/20 text-blue-400","bg-green-400/10 border-green-400/20 text-green-400","bg-cyan-400/10 border-cyan-400/20 text-cyan-400","bg-pink-400/10 border-pink-400/20 text-pink-400","bg-yellow-400/10 border-yellow-400/20 text-yellow-400","bg-red-400/10 border-red-400/20 text-red-400"],[]),ce=x.useMemo(()=>["bg-orange-400/10 border-orange-400/20 text-orange-400","bg-amber-400/10 border-amber-400/20 text-amber-400","bg-yellow-400/10 border-yellow-400/20 text-yellow-400","bg-lime-400/10 border-lime-400/20 text-lime-400","bg-emerald-400/10 border-emerald-400/20 text-emerald-400","bg-teal-400/10 border-teal-400/20 text-teal-400","bg-cyan-400/10 border-cyan-400/20 text-cyan-400","bg-sky-400/10 border-sky-400/20 text-sky-400"],[]);x.useMemo(()=>we=>Q[we%Q.length],[Q]),x.useMemo(()=>we=>ce[we%ce.length],[ce]);const xe=x.useMemo(()=>{if(!E)return()=>{};const we=new Map;return E.forEach(ze=>{const Ie=`${ze.subject_id}-${ze.class_id}`;we.set(Ie,ze)}),(ze,Ie)=>we.get(`${ze}-${Ie}`)},[E]);x.useMemo(()=>{if(!I)return()=>{};const we=new Map;return I.forEach(ze=>{const Ie=`${ze.extracurricular_id}-${ze.class_id}`;we.set(Ie,ze)}),(ze,Ie)=>we.get(`${ze}-${Ie}`)},[I]);const ae=(we,ze)=>{xe(we.id,ze.id)||G.mutate({subject_id:we.id,class_id:ze.id,hours_per_year:72})},ee=(we,ze,Ie)=>{d(we),h(ze),m(Ie),p(!1),s(!0)},J=we=>{confirm("Apakah Anda yakin ingin menghapus assignment ini?")&&Z.mutate(we.id)},re=(we,ze,Ie)=>{d(we),h(ze),m(Ie),p(!0),s(!0)},ue=we=>{y(we),e(!0)},pe=we=>{w(we),l(!0)},ve=()=>{b&&(Y.mutate(b.id),w(null))},ke=we=>{e(we),we||y(null)},ot=k||T||C||M||H||F,dt=N||P||A||L||B||O;return ot?(console.error("Errors in SubjectsContentPage:",{matrixSubjectsError:k,matrixClassSubjectsError:T,classesError:C,extracurricularsError:M,extracurricularClassesError:H,sessionCategoriesError:F}),i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsxs("div",{className:"text-foreground",children:[i.jsx("h2",{className:"text-xl mb-4",children:" Error Loading Data"}),i.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[k&&i.jsxs("p",{children:["Matrix Subjects: ",k.message]}),T&&i.jsxs("p",{children:["Matrix Class Subjects: ",T.message]}),C&&i.jsxs("p",{children:["Classes: ",C.message]}),F&&i.jsxs("p",{children:["Session Categories: ",F.message]}),M&&i.jsxs("p",{children:["Extracurriculars: ",M.message]})]})]})})):dt?i.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:i.jsx("div",{className:"text-foreground",children:"Memuat data..."})}):i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsx("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Kt,{className:"h-8 w-8 text-lime-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Mata Pelajaran"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola penugasan mata pelajaran untuk setiap kelas"})]})}),i.jsxs(mo,{defaultValue:"subjects",className:"w-full",children:[i.jsxs(Gs,{className:"bg-muted/30 border-border/30",children:[i.jsxs(jr,{value:"subjects",className:"data-[state=active]:bg-lime-400/20 data-[state=active]:text-lime-400",children:[i.jsx(Kt,{className:"mr-2 h-4 w-4"}),"Mata Pelajaran"]}),i.jsxs(jr,{value:"extracurriculars",className:"data-[state=active]:bg-orange-400/20 data-[state=active]:text-orange-400",children:[i.jsx(EA,{className:"mr-2 h-4 w-4"}),"Ekstrakurikuler"]})]}),i.jsxs(Sr,{value:"subjects",className:"bg-transparent",children:[i.jsx("div",{className:"flex justify-end",children:i.jsxs(K,{onClick:()=>e(!0),className:"bg-lime-500 hover:bg-lime-600 text-gray-900 font-semibold shadow-lg transition-all duration-300 transform hover:scale-105",children:[i.jsx(ct,{className:"mr-2 h-5 w-5"}),"Tambah Mata Pelajaran"]})}),i.jsx(ie,{className:"bg-card backdrop-blur-sm border-border",children:i.jsx(oe,{className:"p-6",children:le.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Belum ada kelas"}),i.jsx("p",{className:"text-muted-foreground",children:"Silakan tambah kelas terlebih dahulu di menu Kelas"})]}):i.jsx(gye,{subjects:V||[],extracurriculars:[],sortedClasses:le,getSubjectColor:()=>"",getClassSubject:xe,handleAddSubjectToClass:ae,handleEditAssignment:ee,handleDeleteAssignment:J,createClassSubject:G,onAddSubject:()=>e(!0),onAddExtracurricular:()=>{},onEditSubject:ue,onDeleteSubject:pe})})})]}),i.jsxs(Sr,{value:"extracurriculars",className:"space-y-4",children:[i.jsx("div",{className:"flex justify-end",children:i.jsxs(K,{onClick:()=>n(!0),className:"bg-orange-500 hover:bg-orange-600 text-gray-900 font-semibold shadow-lg transition-all duration-300 transform hover:scale-105",children:[i.jsx(ct,{className:"mr-2 h-5 w-5"}),"Tambah Ekstrakurikuler"]})}),i.jsx(ie,{className:"bg-card backdrop-blur-sm border-border",children:i.jsx(oe,{className:"p-6",children:le.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(tr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Belum ada kelas"}),i.jsx("p",{className:"text-muted-foreground",children:"Silakan tambah kelas terlebih dahulu di menu Kelas"})]}):i.jsx(pye,{activeAcademicYear:_,onEditAssignment:re})})})]})]}),i.jsx(_R,{open:t,onOpenChange:ke,editingSubject:g}),i.jsx(jR,{open:r,onOpenChange:n}),i.jsx(mye,{open:a,onOpenChange:s,assignment:c,subjectName:u,className:f,isExtracurricular:v,isMatrixAssignment:!0}),i.jsx(ER,{open:o,onOpenChange:l,onConfirm:ve,title:"Hapus Mata Pelajaran",description:"Apakah Anda yakin ingin menghapus mata pelajaran ini? Semua data terkait akan ikut terhapus.",itemName:b==null?void 0:b.name,isLoading:Y.isPending})]})})},yye=()=>{const t=cc(),e=r=>{switch(r){case"dashboard":t("/dashboard");break;case"classes":t("/classes");break;case"teachers":t("/teachers");break;case"subjects":t("/subjects");break;case"time-sessions":t("/time-sessions");break;case"schedules":t("/schedules");break;case"events":t("/events");break;case"general-settings":t("/general-settings");break;case"school-info":t("/school-info");break;default:t("/dashboard")}};return i.jsx(o0,{children:i.jsxs("div",{className:"flex h-screen w-full",children:[i.jsx(VT,{activeItem:"subjects",onItemChange:e}),i.jsxs(c0,{className:"flex-1",children:[i.jsxs("header",{className:"flex h-16 shrink-0 items-center gap-2 bg-background border-b border-border px-4",children:[i.jsx(l0,{className:"text-foreground hover:text-foreground/80"}),i.jsxs("div",{className:"flex items-center space-x-2 text-xl font-semibold text-foreground ml-4",children:[i.jsx(Kt,{className:"h-6 w-6 text-lime-400"}),i.jsx(Mm,{className:"h-6 w-6 text-blue-400"}),i.jsx("span",{children:"Mata Pelajaran & Kelas"})]})]}),i.jsx(vye,{})]})]})})},Cc=()=>Ye({queryKey:["subjects"],queryFn:async()=>{console.log("Fetching subjects...");const{data:{user:t}}=await W.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:e,error:r}=await W.from("profiles").select("school_id").eq("id",t.id).single();if(r)throw console.error("Error fetching profile:",r),new Error("Failed to get user profile");const{data:n,error:a}=await W.from("academic_years").select("id").eq("school_id",e.school_id).eq("is_active",!0).single();if(a)throw console.error("Error fetching active year:",a),new Error("Failed to get active academic year");const{data:s,error:o}=await W.from("subjects").select(`
          *,
          session_categories (
            id,
            name,
            color
          )
        `).eq("school_id",e.school_id).eq("academic_year_id",n.id).order("created_at",{ascending:!1});if(o)throw console.error("Error fetching subjects:",o),o;return console.log("Subjects fetched:",s),s},staleTime:0,gcTime:0,retry:2,refetchOnWindowFocus:!0,refetchOnMount:!0}),bye=({open:t,onOpenChange:e})=>{const[r,n]=x.useState({class_id:"",subject_id:"",hours_per_year:36}),{data:a}=Yt(),{data:s}=Cc(),o=kR(),l=d=>{d.preventDefault(),o.mutate(r,{onSuccess:()=>{n({class_id:"",subject_id:"",hours_per_year:36}),e(!1)}})},c=o.isPending;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"bg-gray-800 border-gray-700 text-white",children:[i.jsx(wt,{children:i.jsx(_t,{className:"text-lime-400",children:"Assign Mata Pelajaran ke Kelas"})}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"class",className:"text-gray-300",children:"Kelas"}),i.jsxs(Re,{value:r.class_id,onValueChange:d=>n(u=>({...u,class_id:d})),children:[i.jsx(De,{className:"bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas"})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:a==null?void 0:a.map(d=>i.jsxs(he,{value:d.id,children:[d.level," ",d.name]},d.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"subject",className:"text-gray-300",children:"Mata Pelajaran"}),i.jsxs(Re,{value:r.subject_id,onValueChange:d=>n(u=>({...u,subject_id:d})),children:[i.jsx(De,{className:"bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih mata pelajaran"})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:s==null?void 0:s.map(d=>i.jsxs(he,{value:d.id,children:[d.name," (",d.code,")"]},d.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"hours",className:"text-gray-300",children:"JP per Tahun"}),i.jsx(me,{id:"hours",type:"number",min:"0",max:"360",value:r.hours_per_year,onChange:d=>n(u=>({...u,hours_per_year:parseInt(d.target.value)||36})),className:"bg-gray-700 border-gray-600 text-white",placeholder:"Contoh: 144 (atau 0 jika belum direncanakan)",required:!0}),i.jsx("p",{className:"text-xs text-gray-400",children:"Masukkan 0 jika belum ada perencanaan pasti. Nanti akan otomatis terhitung dari menu Jadwal."})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),className:"border-gray-600 text-gray-300",disabled:c,children:"Batal"}),i.jsx(K,{type:"submit",className:"bg-lime-400 hover:bg-lime-500 text-gray-900",disabled:c,children:c?"Menyimpan...":"Simpan"})]})]})]})})},xye=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(!1);x.useState(null),x.useState(null);const{data:a,isLoading:s}=Cc(),{data:o,isLoading:l}=Yt(),{data:c,isLoading:d}=SR(),u=kR(),h=NR(),f=["bg-purple-400/10 border-purple-400/20 text-purple-400","bg-orange-400/10 border-orange-400/20 text-orange-400","bg-blue-400/10 border-blue-400/20 text-blue-400","bg-green-400/10 border-green-400/20 text-green-400","bg-cyan-400/10 border-cyan-400/20 text-cyan-400","bg-pink-400/10 border-pink-400/20 text-pink-400","bg-yellow-400/10 border-yellow-400/20 text-yellow-400","bg-red-400/10 border-red-400/20 text-red-400"],m=b=>f[b%f.length],v=(b,w)=>c==null?void 0:c.find(j=>j.subject_id===b&&j.class_id===w),p=(b,w)=>{v(b.id,w.id)||u.mutate({subject_id:b.id,class_id:w.id,hours_per_week:2})},g=(b,w)=>{const j=v(b,w);j&&h.mutate(j.id)},y=(o==null?void 0:o.sort((b,w)=>{const j=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"],_=j.indexOf(b.level),S=j.indexOf(w.level);return _!==S?_-S:b.name.localeCompare(w.name)}))||[];return s||l||d?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center",children:i.jsx("div",{className:"text-white",children:"Memuat data..."})}):i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Daftar Mata Pelajaran KBM per Kelas"}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola penugasan mata pelajaran untuk setiap kelas"})]}),i.jsxs(K,{onClick:()=>e(!0),className:"bg-gradient-to-r from-lime-400 to-lime-600 hover:from-lime-500 hover:to-lime-700 text-gray-900 font-semibold shadow-lg shadow-lime-400/25 transition-all duration-300 transform hover:scale-105",children:[i.jsx(ct,{className:"mr-2 h-5 w-5"}),"Tambah Mata Pelajaran"]})]}),i.jsxs(ie,{className:"bg-gray-800/40 backdrop-blur-sm border-gray-600/30",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-white flex items-center",children:[i.jsx(Kt,{className:"mr-2 h-5 w-5 text-lime-400"}),"Matrix Mata Pelajaran & Kelas"]})}),i.jsx(oe,{className:"p-0",children:y.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(tr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Belum ada kelas"}),i.jsx("p",{className:"text-gray-400",children:"Silakan tambah kelas terlebih dahulu di menu Kelas"})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("div",{className:"min-w-max",children:[i.jsxs("div",{className:"grid grid-cols-[250px_repeat(auto-fit,minmax(150px,1fr))] gap-2 p-4 border-b border-gray-600/30",children:[i.jsx("div",{className:"text-gray-400 font-medium",children:"Mata Pelajaran"}),y.map(b=>i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-white font-medium text-sm",children:["Kelas ",b.level]}),i.jsx("div",{className:"text-gray-400 text-xs",children:b.name})]},b.id))]}),i.jsxs("div",{className:"space-y-2 p-4",children:[a==null?void 0:a.map((b,w)=>i.jsxs("div",{className:"grid grid-cols-[250px_repeat(auto-fit,minmax(150px,1fr))] gap-2 items-center",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(st,{className:`${m(w)} border text-xs px-2 py-1`,children:b.code}),i.jsx("span",{className:"text-white text-sm font-medium truncate",children:b.name})]}),y.map(j=>{const _=v(b.id,j.id);return i.jsx("div",{className:"flex justify-center",children:_?i.jsxs("div",{className:"group relative",children:[i.jsxs(st,{className:`${m(w)} border text-xs px-2 py-1 cursor-pointer hover:opacity-80`,children:[_.hours_per_week," JP/Minggu"]}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>g(b.id,j.id),className:"absolute -top-2 -right-2 h-4 w-4 p-0 bg-red-500 hover:bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx(Ut,{className:"h-2 w-2"})})]}):i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>p(b,j),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20 border border-dashed border-blue-400/30 rounded",disabled:u.isPending,children:i.jsx(ct,{className:"h-4 w-4"})})},j.id)})]},b.id)),(!a||a.length===0)&&i.jsxs("div",{className:"col-span-full text-center py-8",children:[i.jsx(Kt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Belum ada mata pelajaran"}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Mulai dengan menambahkan mata pelajaran pertama"}),i.jsxs(K,{onClick:()=>e(!0),className:"bg-gradient-to-r from-lime-400 to-lime-600 hover:from-lime-500 hover:to-lime-700 text-gray-900 font-semibold",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Tambah Mata Pelajaran"]})]})]})]})})})]}),i.jsx(_R,{open:t,onOpenChange:e}),i.jsx(bye,{open:r,onOpenChange:n})]})})},wye=({month:t,holidays:e,onDateClick:r,onEventClick:n})=>{const a=Qt(t),s=Ua(t),o=Cr(a,{weekStartsOn:1}),l=oo(s,{weekStartsOn:1}),c=Hn({start:o,end:l}),d=h=>e.filter(f=>{const m=hr(f.start_date),v=hr(f.end_date);return Xm(h,{start:m,end:v})}),u=e.filter(h=>Ca(hr(h.start_date),t)||Ca(hr(h.end_date),t)).sort((h,f)=>new Date(h.start_date).getTime()-new Date(f.start_date).getTime());return i.jsxs("div",{className:"bg-card border border-lime-400/20 rounded-xl p-4 shadow-lg flex flex-col h-full",children:[i.jsx("h4",{className:"text-lg font-semibold text-center mb-3 text-card-foreground",children:be(t,"MMMM yyyy",{locale:bt})}),i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sen","Sel","Rab","Kam","Jum","Sab","Min"].map(h=>i.jsx("div",{className:"text-xs font-medium text-muted-foreground text-center p-1",children:h},h))}),i.jsx("div",{className:"grid grid-cols-7 gap-1",children:c.map((h,f)=>{const m=d(h),v=Ca(h,t),p=rr(h,new Date),g=m.length>0,y=g?{backgroundColor:m[0].color}:{};return i.jsx("div",{className:se("relative h-10 w-10 text-xs cursor-pointer rounded-full transition-colors flex items-center justify-center","hover:bg-primary/10 border border-transparent hover:border-primary/30",v?"text-foreground":"text-muted-foreground/50",p&&!g&&"bg-primary/20 border-primary/50",g&&"text-white font-bold shadow-inner"),style:y,onClick:()=>g?n(m[0]):r(h),title:g?m.map(b=>b.name).join(", "):"",children:be(h,"d")},`${be(h,"yyyy-MM-dd")}-${f}`)})}),u.length>0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-border/50 flex-grow min-h-0",children:i.jsx("div",{className:"space-y-1.5 max-h-28 overflow-y-auto pr-2",children:u.map(h=>{const f=hr(h.start_date),m=hr(h.end_date),v=!rr(f,m);return i.jsxs("div",{className:"flex items-start gap-2 text-xs cursor-pointer hover:bg-muted/50 p-1.5 rounded-md",onClick:()=>n(h),children:[i.jsx("div",{className:"w-2 h-2 rounded-full mt-1 flex-shrink-0",style:{backgroundColor:h.color}}),i.jsxs("div",{className:"flex-grow",children:[i.jsxs("span",{className:"font-semibold",children:[v?`${be(f,"d")} - ${be(m,"d")}`:be(f,"d"),":"]}),i.jsx("span",{className:"ml-1.5 text-muted-foreground",children:h.name})]})]},h.id)})})})]})},_ye=({year:t,holidays:e,selectedClassId:r,onDateClick:n,onEventClick:a})=>{const s=e.filter(h=>!r||r==="all"||!h.class_ids||h.class_ids.length===0?!0:h.class_ids.includes(r)),l=(h=>{const f=[];for(let m=6;m<12;m++)f.push(new Date(h,m,1));for(let m=0;m<6;m++)f.push(new Date(h+1,m,1));return f})(t),c=l.slice(0,6),d=l.slice(6,12),u=(h,f)=>i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4 text-center",children:f}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.map((m,v)=>i.jsx(wye,{month:m,holidays:s,onDateClick:n,onEventClick:a},`${be(m,"yyyy-MM")}-${v}`))})]});return i.jsxs("div",{className:"space-y-8",children:[u(c,"Semester 1"),u(d,"Semester 2")]})},qn=x.forwardRef(({className:t,...e},r)=>i.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));qn.displayName="Textarea";var zw="Checkbox",[jye,GAe]=Kn(zw),[Sye,kye]=jye(zw),CR=x.forwardRef((t,e)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:s,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=t,[f,m]=x.useState(null),v=cr(e,j=>m(j)),p=x.useRef(!1),g=f?u||!!f.closest("form"):!0,[y=!1,b]=Fs({prop:a,defaultProp:s,onChange:d}),w=x.useRef(y);return x.useEffect(()=>{const j=f==null?void 0:f.form;if(j){const _=()=>b(w.current);return j.addEventListener("reset",_),()=>j.removeEventListener("reset",_)}},[f,b]),i.jsxs(Sye,{scope:r,state:y,disabled:l,children:[i.jsx(it.button,{type:"button",role:"checkbox","aria-checked":Cs(y)?"mixed":y,"aria-required":o,"data-state":DR(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onKeyDown:je(t.onKeyDown,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:je(t.onClick,j=>{b(_=>Cs(_)?!0:!_),g&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})}),g&&i.jsx(Nye,{control:f,bubbles:!p.current,name:n,value:c,checked:y,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Cs(s)?!1:s})]})});CR.displayName=zw;var AR="CheckboxIndicator",TR=x.forwardRef((t,e)=>{const{__scopeCheckbox:r,forceMount:n,...a}=t,s=kye(AR,r);return i.jsx(Nn,{present:n||Cs(s.state)||s.state===!0,children:i.jsx(it.span,{"data-state":DR(s.state),"data-disabled":s.disabled?"":void 0,...a,ref:e,style:{pointerEvents:"none",...t.style}})})});TR.displayName=AR;var Nye=t=>{const{control:e,checked:r,bubbles:n=!0,defaultChecked:a,...s}=t,o=x.useRef(null),l=WC(r),c=KC(e);x.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==r&&m){const v=new Event("click",{bubbles:n});u.indeterminate=Cs(r),m.call(u,Cs(r)?!1:r),u.dispatchEvent(v)}},[l,r,n]);const d=x.useRef(Cs(r)?!1:r);return i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...s,tabIndex:-1,ref:o,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Cs(t){return t==="indeterminate"}function DR(t){return Cs(t)?"indeterminate":t?"checked":"unchecked"}var PR=CR,Eye=TR;const kr=x.forwardRef(({className:t,...e},r)=>i.jsx(PR,{ref:r,className:se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:i.jsx(Eye,{className:se("flex items-center justify-center text-current"),children:i.jsx(Pm,{className:"h-4 w-4"})})}));kr.displayName=PR.displayName;var Fe=function(){return Fe=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fe.apply(this,arguments)};function Cye(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)e.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(r[n[a]]=t[n[a]]);return r}function MR(t,e,r){for(var n=0,a=e.length,s;n<a;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function Fu(t){return t.mode==="multiple"}function Bu(t){return t.mode==="range"}function Jg(t){return t.mode==="single"}var Aye={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Tye(t,e){return be(t,"LLLL y",e)}function Dye(t,e){return be(t,"d",e)}function Pye(t,e){return be(t,"LLLL",e)}function Mye(t){return"".concat(t)}function Oye(t,e){return be(t,"cccccc",e)}function Rye(t,e){return be(t,"yyyy",e)}var $ye=Object.freeze({__proto__:null,formatCaption:Tye,formatDay:Dye,formatMonthCaption:Pye,formatWeekNumber:Mye,formatWeekdayName:Oye,formatYearCaption:Rye}),Iye=function(t,e,r){return be(t,"do MMMM (EEEE)",r)},Lye=function(){return"Month: "},Fye=function(){return"Go to next month"},Bye=function(){return"Go to previous month"},qye=function(t,e){return be(t,"cccc",e)},Uye=function(t){return"Week n. ".concat(t)},zye=function(){return"Year: "},Hye=Object.freeze({__proto__:null,labelDay:Iye,labelMonthDropdown:Lye,labelNext:Fye,labelPrevious:Bye,labelWeekNumber:Uye,labelWeekday:qye,labelYearDropdown:zye});function Wye(){var t="buttons",e=Aye,r=s2,n={},a={},s=1,o={},l=new Date;return{captionLayout:t,classNames:e,formatters:$ye,labels:Hye,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:s,styles:o,today:l,mode:"default"}}function Kye(t){var e=t.fromYear,r=t.toYear,n=t.fromMonth,a=t.toMonth,s=t.fromDate,o=t.toDate;return n?s=Qt(n):e&&(s=new Date(e,0,1)),a?o=Ua(a):r&&(o=new Date(r,11,31)),{fromDate:s?la(s):void 0,toDate:o?la(o):void 0}}var OR=x.createContext(void 0);function Gye(t){var e,r=t.initialProps,n=Wye(),a=Kye(r),s=a.fromDate,o=a.toDate,l=(e=r.captionLayout)!==null&&e!==void 0?e:n.captionLayout;l!=="buttons"&&(!s||!o)&&(l="buttons");var c;(Jg(r)||Fu(r)||Bu(r))&&(c=r.onSelect);var d=Fe(Fe(Fe({},n),r),{captionLayout:l,classNames:Fe(Fe({},n.classNames),r.classNames),components:Fe({},r.components),formatters:Fe(Fe({},n.formatters),r.formatters),fromDate:s,labels:Fe(Fe({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:Fe(Fe({},n.modifiers),r.modifiers),modifiersClassNames:Fe(Fe({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Fe(Fe({},n.styles),r.styles),toDate:o});return i.jsx(OR.Provider,{value:d,children:t.children})}function Mt(){var t=x.useContext(OR);if(!t)throw new Error("useDayPicker must be used within a DayPickerProvider.");return t}function RR(t){var e=Mt(),r=e.locale,n=e.classNames,a=e.styles,s=e.formatters.formatCaption;return i.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:t.id,children:s(t.displayMonth,{locale:r})})}function Vye(t){return i.jsx("svg",Fe({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},t,{children:i.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function $R(t){var e,r,n=t.onChange,a=t.value,s=t.children,o=t.caption,l=t.className,c=t.style,d=Mt(),u=(r=(e=d.components)===null||e===void 0?void 0:e.IconDropdown)!==null&&r!==void 0?r:Vye;return i.jsxs("div",{className:l,style:c,children:[i.jsx("span",{className:d.classNames.vhidden,children:t["aria-label"]}),i.jsx("select",{name:t.name,"aria-label":t["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:n,children:s}),i.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,i.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function Qye(t){var e,r=Mt(),n=r.fromDate,a=r.toDate,s=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!n)return i.jsx(i.Fragment,{});if(!a)return i.jsx(i.Fragment,{});var h=[];if(wH(n,a))for(var f=Qt(n),m=n.getMonth();m<=a.getMonth();m++)h.push(Op(f,m));else for(var f=Qt(new Date),m=0;m<=11;m++)h.push(Op(f,m));var v=function(g){var y=Number(g.target.value),b=Op(Qt(t.displayMonth),y);t.onChange(b)},p=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:$R;return i.jsx(p,{name:"months","aria-label":u(),className:c.dropdown_month,style:s.dropdown_month,onChange:v,value:t.displayMonth.getMonth(),caption:l(t.displayMonth,{locale:o}),children:h.map(function(g){return i.jsx("option",{value:g.getMonth(),children:l(g,{locale:o})},g.getMonth())})})}function Jye(t){var e,r=t.displayMonth,n=Mt(),a=n.fromDate,s=n.toDate,o=n.locale,l=n.styles,c=n.classNames,d=n.components,u=n.formatters.formatYearCaption,h=n.labels.labelYearDropdown,f=[];if(!a)return i.jsx(i.Fragment,{});if(!s)return i.jsx(i.Fragment,{});for(var m=a.getFullYear(),v=s.getFullYear(),p=m;p<=v;p++)f.push(qj(r2(new Date),p));var g=function(b){var w=qj(Qt(r),Number(b.target.value));t.onChange(w)},y=(e=d==null?void 0:d.Dropdown)!==null&&e!==void 0?e:$R;return i.jsx(y,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:g,value:r.getFullYear(),caption:u(r,{locale:o}),children:f.map(function(b){return i.jsx("option",{value:b.getFullYear(),children:u(b,{locale:o})},b.getFullYear())})})}function Yye(t,e){var r=x.useState(t),n=r[0],a=r[1],s=e===void 0?n:e;return[s,a]}function Xye(t){var e=t.month,r=t.defaultMonth,n=t.today,a=e||r||n||new Date,s=t.toDate,o=t.fromDate,l=t.numberOfMonths,c=l===void 0?1:l;if(s&&Sd(s,a)<0){var d=-1*(c-1);a=zn(s,d)}return o&&Sd(a,o)<0&&(a=o),Qt(a)}function Zye(){var t=Mt(),e=Xye(t),r=Yye(e,t.month),n=r[0],a=r[1],s=function(o){var l;if(!t.disableNavigation){var c=Qt(o);a(c),(l=t.onMonthChange)===null||l===void 0||l.call(t,c)}};return[n,s]}function ebe(t,e){for(var r=e.reverseMonths,n=e.numberOfMonths,a=Qt(t),s=Qt(zn(a,n)),o=Sd(s,a),l=[],c=0;c<o;c++){var d=zn(a,c);l.push(d)}return r&&(l=l.reverse()),l}function tbe(t,e){if(!e.disableNavigation){var r=e.toDate,n=e.pagedNavigation,a=e.numberOfMonths,s=a===void 0?1:a,o=n?s:1,l=Qt(t);if(!r)return zn(l,o);var c=Sd(r,t);if(!(c<s))return zn(l,o)}}function rbe(t,e){if(!e.disableNavigation){var r=e.fromDate,n=e.pagedNavigation,a=e.numberOfMonths,s=a===void 0?1:a,o=n?s:1,l=Qt(t);if(!r)return zn(l,-o);var c=Sd(l,r);if(!(c<=0))return zn(l,-o)}}var IR=x.createContext(void 0);function nbe(t){var e=Mt(),r=Zye(),n=r[0],a=r[1],s=ebe(n,e),o=tbe(n,e),l=rbe(n,e),c=function(h){return s.some(function(f){return Ca(h,f)})},d=function(h,f){c(h)||(f&&d2(h,f)?a(zn(h,1+e.numberOfMonths*-1)):a(h))},u={currentMonth:n,displayMonths:s,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return i.jsx(IR.Provider,{value:u,children:t.children})}function qu(){var t=x.useContext(IR);if(!t)throw new Error("useNavigation must be used within a NavigationProvider");return t}function qN(t){var e,r=Mt(),n=r.classNames,a=r.styles,s=r.components,o=qu().goToMonth,l=function(u){o(zn(u,t.displayIndex?-t.displayIndex:0))},c=(e=s==null?void 0:s.CaptionLabel)!==null&&e!==void 0?e:RR,d=i.jsx(c,{id:t.id,displayMonth:t.displayMonth});return i.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[i.jsx("div",{className:n.vhidden,children:d}),i.jsx(Qye,{onChange:l,displayMonth:t.displayMonth}),i.jsx(Jye,{onChange:l,displayMonth:t.displayMonth})]})}function abe(t){return i.jsx("svg",Fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function sbe(t){return i.jsx("svg",Fe({width:"16px",height:"16px",viewBox:"0 0 120 120"},t,{children:i.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var im=x.forwardRef(function(t,e){var r=Mt(),n=r.classNames,a=r.styles,s=[n.button_reset,n.button];t.className&&s.push(t.className);var o=s.join(" "),l=Fe(Fe({},a.button_reset),a.button);return t.style&&Object.assign(l,t.style),i.jsx("button",Fe({},t,{ref:e,type:"button",className:o,style:l}))});function ibe(t){var e,r,n=Mt(),a=n.dir,s=n.locale,o=n.classNames,l=n.styles,c=n.labels,d=c.labelPrevious,u=c.labelNext,h=n.components;if(!t.nextMonth&&!t.previousMonth)return i.jsx(i.Fragment,{});var f=d(t.previousMonth,{locale:s}),m=[o.nav_button,o.nav_button_previous].join(" "),v=u(t.nextMonth,{locale:s}),p=[o.nav_button,o.nav_button_next].join(" "),g=(e=h==null?void 0:h.IconRight)!==null&&e!==void 0?e:sbe,y=(r=h==null?void 0:h.IconLeft)!==null&&r!==void 0?r:abe;return i.jsxs("div",{className:o.nav,style:l.nav,children:[!t.hidePrevious&&i.jsx(im,{name:"previous-month","aria-label":f,className:m,style:l.nav_button_previous,disabled:!t.previousMonth,onClick:t.onPreviousClick,children:a==="rtl"?i.jsx(g,{className:o.nav_icon,style:l.nav_icon}):i.jsx(y,{className:o.nav_icon,style:l.nav_icon})}),!t.hideNext&&i.jsx(im,{name:"next-month","aria-label":v,className:p,style:l.nav_button_next,disabled:!t.nextMonth,onClick:t.onNextClick,children:a==="rtl"?i.jsx(y,{className:o.nav_icon,style:l.nav_icon}):i.jsx(g,{className:o.nav_icon,style:l.nav_icon})})]})}function UN(t){var e=Mt().numberOfMonths,r=qu(),n=r.previousMonth,a=r.nextMonth,s=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(v){return Ca(t.displayMonth,v)}),c=l===0,d=l===o.length-1,u=e>1&&(c||!d),h=e>1&&(d||!c),f=function(){n&&s(n)},m=function(){a&&s(a)};return i.jsx(ibe,{displayMonth:t.displayMonth,hideNext:u,hidePrevious:h,nextMonth:a,previousMonth:n,onPreviousClick:f,onNextClick:m})}function obe(t){var e,r=Mt(),n=r.classNames,a=r.disableNavigation,s=r.styles,o=r.captionLayout,l=r.components,c=(e=l==null?void 0:l.CaptionLabel)!==null&&e!==void 0?e:RR,d;return a?d=i.jsx(c,{id:t.id,displayMonth:t.displayMonth}):o==="dropdown"?d=i.jsx(qN,{displayMonth:t.displayMonth,id:t.id}):o==="dropdown-buttons"?d=i.jsxs(i.Fragment,{children:[i.jsx(qN,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id}),i.jsx(UN,{displayMonth:t.displayMonth,displayIndex:t.displayIndex,id:t.id})]}):d=i.jsxs(i.Fragment,{children:[i.jsx(c,{id:t.id,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(UN,{displayMonth:t.displayMonth,id:t.id})]}),i.jsx("div",{className:n.caption,style:s.caption,children:d})}function lbe(t){var e=Mt(),r=e.footer,n=e.styles,a=e.classNames.tfoot;return r?i.jsx("tfoot",{className:a,style:n.tfoot,children:i.jsx("tr",{children:i.jsx("td",{colSpan:8,children:r})})}):i.jsx(i.Fragment,{})}function cbe(t,e,r){for(var n=r?zi(new Date):Cr(new Date,{locale:t,weekStartsOn:e}),a=[],s=0;s<7;s++){var o=yr(n,s);a.push(o)}return a}function dbe(){var t=Mt(),e=t.classNames,r=t.styles,n=t.showWeekNumber,a=t.locale,s=t.weekStartsOn,o=t.ISOWeek,l=t.formatters.formatWeekdayName,c=t.labels.labelWeekday,d=cbe(a,s,o);return i.jsxs("tr",{style:r.head_row,className:e.head_row,children:[n&&i.jsx("td",{style:r.head_cell,className:e.head_cell}),d.map(function(u,h){return i.jsx("th",{scope:"col",className:e.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},h)})]})}function ube(){var t,e=Mt(),r=e.classNames,n=e.styles,a=e.components,s=(t=a==null?void 0:a.HeadRow)!==null&&t!==void 0?t:dbe;return i.jsx("thead",{style:n.head,className:r.head,children:i.jsx(s,{})})}function hbe(t){var e=Mt(),r=e.locale,n=e.formatters.formatDay;return i.jsx(i.Fragment,{children:n(t.date,{locale:r})})}var Hw=x.createContext(void 0);function fbe(t){if(!Fu(t.initialProps)){var e={selected:void 0,modifiers:{disabled:[]}};return i.jsx(Hw.Provider,{value:e,children:t.children})}return i.jsx(mbe,{initialProps:t.initialProps,children:t.children})}function mbe(t){var e=t.initialProps,r=t.children,n=e.selected,a=e.min,s=e.max,o=function(d,u,h){var f,m;(f=e.onDayClick)===null||f===void 0||f.call(e,d,u,h);var v=!!(u.selected&&a&&(n==null?void 0:n.length)===a);if(!v){var p=!!(!u.selected&&s&&(n==null?void 0:n.length)===s);if(!p){var g=n?MR([],n):[];if(u.selected){var y=g.findIndex(function(b){return rr(d,b)});g.splice(y,1)}else g.push(d);(m=e.onSelect)===null||m===void 0||m.call(e,g,d,u,h)}}},l={disabled:[]};n&&l.disabled.push(function(d){var u=s&&n.length>s-1,h=n.some(function(f){return rr(f,d)});return!!(u&&!h)});var c={selected:n,onDayClick:o,modifiers:l};return i.jsx(Hw.Provider,{value:c,children:r})}function Ww(){var t=x.useContext(Hw);if(!t)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return t}function gbe(t,e){var r=e||{},n=r.from,a=r.to;return n&&a?rr(a,t)&&rr(n,t)?void 0:rr(a,t)?{from:a,to:void 0}:rr(n,t)?void 0:_y(n,t)?{from:t,to:a}:{from:n,to:t}:a?_y(t,a)?{from:a,to:t}:{from:t,to:a}:n?d2(t,n)?{from:t,to:n}:{from:n,to:t}:{from:t,to:void 0}}var Kw=x.createContext(void 0);function pbe(t){if(!Bu(t.initialProps)){var e={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return i.jsx(Kw.Provider,{value:e,children:t.children})}return i.jsx(vbe,{initialProps:t.initialProps,children:t.children})}function vbe(t){var e=t.initialProps,r=t.children,n=e.selected,a=n||{},s=a.from,o=a.to,l=e.min,c=e.max,d=function(m,v,p){var g,y;(g=e.onDayClick)===null||g===void 0||g.call(e,m,v,p);var b=gbe(m,n);(y=e.onSelect)===null||y===void 0||y.call(e,b,m,v,p)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(s?(u.range_start=[s],o?(u.range_end=[o],rr(s,o)||(u.range_middle=[{after:s,before:o}])):u.range_end=[s]):o&&(u.range_start=[o],u.range_end=[o]),l&&(s&&!o&&u.disabled.push({after:Pp(s,l-1),before:yr(s,l-1)}),s&&o&&u.disabled.push({after:s,before:yr(s,l-1)}),!s&&o&&u.disabled.push({after:Pp(o,l-1),before:yr(o,l-1)})),c){if(s&&!o&&(u.disabled.push({before:yr(s,-c+1)}),u.disabled.push({after:yr(s,c-1)})),s&&o){var h=aa(o,s)+1,f=c-h;u.disabled.push({before:Pp(s,f)}),u.disabled.push({after:yr(o,f)})}!s&&o&&(u.disabled.push({before:yr(o,-c+1)}),u.disabled.push({after:yr(o,c-1)}))}return i.jsx(Kw.Provider,{value:{selected:n,onDayClick:d,modifiers:u},children:r})}function Gw(){var t=x.useContext(Kw);if(!t)throw new Error("useSelectRange must be used within a SelectRangeProvider");return t}function zh(t){return Array.isArray(t)?MR([],t):t!==void 0?[t]:[]}function ybe(t){var e={};return Object.entries(t).forEach(function(r){var n=r[0],a=r[1];e[n]=zh(a)}),e}var Wn;(function(t){t.Outside="outside",t.Disabled="disabled",t.Selected="selected",t.Hidden="hidden",t.Today="today",t.RangeStart="range_start",t.RangeEnd="range_end",t.RangeMiddle="range_middle"})(Wn||(Wn={}));var bbe=Wn.Selected,ya=Wn.Disabled,xbe=Wn.Hidden,wbe=Wn.Today,dv=Wn.RangeEnd,uv=Wn.RangeMiddle,hv=Wn.RangeStart,_be=Wn.Outside;function jbe(t,e,r){var n,a=(n={},n[bbe]=zh(t.selected),n[ya]=zh(t.disabled),n[xbe]=zh(t.hidden),n[wbe]=[t.today],n[dv]=[],n[uv]=[],n[hv]=[],n[_be]=[],n);return t.fromDate&&a[ya].push({before:t.fromDate}),t.toDate&&a[ya].push({after:t.toDate}),Fu(t)?a[ya]=a[ya].concat(e.modifiers[ya]):Bu(t)&&(a[ya]=a[ya].concat(r.modifiers[ya]),a[hv]=r.modifiers[hv],a[uv]=r.modifiers[uv],a[dv]=r.modifiers[dv]),a}var LR=x.createContext(void 0);function Sbe(t){var e=Mt(),r=Ww(),n=Gw(),a=jbe(e,r,n),s=ybe(e.modifiers),o=Fe(Fe({},a),s);return i.jsx(LR.Provider,{value:o,children:t.children})}function FR(){var t=x.useContext(LR);if(!t)throw new Error("useModifiers must be used within a ModifiersProvider");return t}function kbe(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function Nbe(t){return!!(t&&typeof t=="object"&&"from"in t)}function Ebe(t){return!!(t&&typeof t=="object"&&"after"in t)}function Cbe(t){return!!(t&&typeof t=="object"&&"before"in t)}function Abe(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Tbe(t,e){var r,n=e.from,a=e.to;if(n&&a){var s=aa(a,n)<0;s&&(r=[a,n],n=r[0],a=r[1]);var o=aa(t,n)>=0&&aa(a,t)>=0;return o}return a?rr(a,t):n?rr(n,t):!1}function Dbe(t){return C0(t)}function Pbe(t){return Array.isArray(t)&&t.every(C0)}function Mbe(t,e){return e.some(function(r){if(typeof r=="boolean")return r;if(Dbe(r))return rr(t,r);if(Pbe(r))return r.includes(t);if(Nbe(r))return Tbe(t,r);if(Abe(r))return r.dayOfWeek.includes(t.getDay());if(kbe(r)){var n=aa(r.before,t),a=aa(r.after,t),s=n>0,o=a<0,l=_y(r.before,r.after);return l?o&&s:s||o}return Ebe(r)?aa(t,r.after)>0:Cbe(r)?aa(r.before,t)>0:typeof r=="function"?r(t):!1})}function Vw(t,e,r){var n=Object.keys(e).reduce(function(s,o){var l=e[o];return Mbe(t,l)&&s.push(o),s},[]),a={};return n.forEach(function(s){return a[s]=!0}),r&&!Ca(t,r)&&(a.outside=!0),a}function Obe(t,e){for(var r=Qt(t[0]),n=Ua(t[t.length-1]),a,s,o=r;o<=n;){var l=Vw(o,e),c=!l.disabled&&!l.hidden;if(!c){o=yr(o,1);continue}if(l.selected)return o;l.today&&!s&&(s=o),a||(a=o),o=yr(o,1)}return s||a}var Rbe=365;function BR(t,e){var r=e.moveBy,n=e.direction,a=e.context,s=e.modifiers,o=e.retry,l=o===void 0?{count:0,lastFocused:t}:o,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,h=a.locale,f={day:yr,week:Tl,month:zn,year:vz,startOfWeek:function(g){return a.ISOWeek?zi(g):Cr(g,{locale:h,weekStartsOn:c})},endOfWeek:function(g){return a.ISOWeek?n2(g):oo(g,{locale:h,weekStartsOn:c})}},m=f[r](t,n==="after"?1:-1);n==="before"&&d?m=yz([d,m]):n==="after"&&u&&(m=bz([u,m]));var v=!0;if(s){var p=Vw(m,s);v=!p.disabled&&!p.hidden}return v?m:l.count>Rbe?l.lastFocused:BR(m,{moveBy:r,direction:n,context:a,modifiers:s,retry:Fe(Fe({},l),{count:l.count+1})})}var qR=x.createContext(void 0);function $be(t){var e=qu(),r=FR(),n=x.useState(),a=n[0],s=n[1],o=x.useState(),l=o[0],c=o[1],d=Obe(e.displayMonths,r),u=a??(l&&e.isDateDisplayed(l))?l:d,h=function(){c(a),s(void 0)},f=function(g){s(g)},m=Mt(),v=function(g,y){if(a){var b=BR(a,{moveBy:g,direction:y,context:m,modifiers:r});rr(a,b)||(e.goToDate(b,a),f(b))}},p={focusedDay:a,focusTarget:u,blur:h,focus:f,focusDayAfter:function(){return v("day","after")},focusDayBefore:function(){return v("day","before")},focusWeekAfter:function(){return v("week","after")},focusWeekBefore:function(){return v("week","before")},focusMonthBefore:function(){return v("month","before")},focusMonthAfter:function(){return v("month","after")},focusYearBefore:function(){return v("year","before")},focusYearAfter:function(){return v("year","after")},focusStartOfWeek:function(){return v("startOfWeek","before")},focusEndOfWeek:function(){return v("endOfWeek","after")}};return i.jsx(qR.Provider,{value:p,children:t.children})}function Qw(){var t=x.useContext(qR);if(!t)throw new Error("useFocusContext must be used within a FocusProvider");return t}function Ibe(t,e){var r=FR(),n=Vw(t,r,e);return n}var Jw=x.createContext(void 0);function Lbe(t){if(!Jg(t.initialProps)){var e={selected:void 0};return i.jsx(Jw.Provider,{value:e,children:t.children})}return i.jsx(Fbe,{initialProps:t.initialProps,children:t.children})}function Fbe(t){var e=t.initialProps,r=t.children,n=function(s,o,l){var c,d,u;if((c=e.onDayClick)===null||c===void 0||c.call(e,s,o,l),o.selected&&!e.required){(d=e.onSelect)===null||d===void 0||d.call(e,void 0,s,o,l);return}(u=e.onSelect)===null||u===void 0||u.call(e,s,s,o,l)},a={selected:e.selected,onDayClick:n};return i.jsx(Jw.Provider,{value:a,children:r})}function UR(){var t=x.useContext(Jw);if(!t)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return t}function Bbe(t,e){var r=Mt(),n=UR(),a=Ww(),s=Gw(),o=Qw(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,h=o.blur,f=o.focus,m=o.focusMonthBefore,v=o.focusMonthAfter,p=o.focusYearBefore,g=o.focusYearAfter,y=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function(M){var I,B,H,q;Jg(r)?(I=n.onDayClick)===null||I===void 0||I.call(n,t,e,M):Fu(r)?(B=a.onDayClick)===null||B===void 0||B.call(a,t,e,M):Bu(r)?(H=s.onDayClick)===null||H===void 0||H.call(s,t,e,M):(q=r.onDayClick)===null||q===void 0||q.call(r,t,e,M)},j=function(M){var I;f(t),(I=r.onDayFocus)===null||I===void 0||I.call(r,t,e,M)},_=function(M){var I;h(),(I=r.onDayBlur)===null||I===void 0||I.call(r,t,e,M)},S=function(M){var I;(I=r.onDayMouseEnter)===null||I===void 0||I.call(r,t,e,M)},N=function(M){var I;(I=r.onDayMouseLeave)===null||I===void 0||I.call(r,t,e,M)},k=function(M){var I;(I=r.onDayPointerEnter)===null||I===void 0||I.call(r,t,e,M)},E=function(M){var I;(I=r.onDayPointerLeave)===null||I===void 0||I.call(r,t,e,M)},P=function(M){var I;(I=r.onDayTouchCancel)===null||I===void 0||I.call(r,t,e,M)},T=function(M){var I;(I=r.onDayTouchEnd)===null||I===void 0||I.call(r,t,e,M)},D=function(M){var I;(I=r.onDayTouchMove)===null||I===void 0||I.call(r,t,e,M)},A=function(M){var I;(I=r.onDayTouchStart)===null||I===void 0||I.call(r,t,e,M)},C=function(M){var I;(I=r.onDayKeyUp)===null||I===void 0||I.call(r,t,e,M)},R=function(M){var I;switch(M.key){case"ArrowLeft":M.preventDefault(),M.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":M.preventDefault(),M.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":M.preventDefault(),M.stopPropagation(),d();break;case"ArrowUp":M.preventDefault(),M.stopPropagation(),u();break;case"PageUp":M.preventDefault(),M.stopPropagation(),M.shiftKey?p():m();break;case"PageDown":M.preventDefault(),M.stopPropagation(),M.shiftKey?g():v();break;case"Home":M.preventDefault(),M.stopPropagation(),y();break;case"End":M.preventDefault(),M.stopPropagation(),b();break}(I=r.onDayKeyDown)===null||I===void 0||I.call(r,t,e,M)},L={onClick:w,onFocus:j,onBlur:_,onKeyDown:R,onKeyUp:C,onMouseEnter:S,onMouseLeave:N,onPointerEnter:k,onPointerLeave:E,onTouchCancel:P,onTouchEnd:T,onTouchMove:D,onTouchStart:A};return L}function qbe(){var t=Mt(),e=UR(),r=Ww(),n=Gw(),a=Jg(t)?e.selected:Fu(t)?r.selected:Bu(t)?n.selected:void 0;return a}function Ube(t){return Object.values(Wn).includes(t)}function zbe(t,e){var r=[t.classNames.day];return Object.keys(e).forEach(function(n){var a=t.modifiersClassNames[n];if(a)r.push(a);else if(Ube(n)){var s=t.classNames["day_".concat(n)];s&&r.push(s)}}),r}function Hbe(t,e){var r=Fe({},t.styles.day);return Object.keys(e).forEach(function(n){var a;r=Fe(Fe({},r),(a=t.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function Wbe(t,e,r){var n,a,s,o=Mt(),l=Qw(),c=Ibe(t,e),d=Bbe(t,c),u=qbe(),h=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var S;c.outside||l.focusedDay&&h&&rr(l.focusedDay,t)&&((S=r.current)===null||S===void 0||S.focus())},[l.focusedDay,t,r,h,c.outside]);var f=zbe(o,c).join(" "),m=Hbe(o,c),v=!!(c.outside&&!o.showOutsideDays||c.hidden),p=(s=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&s!==void 0?s:hbe,g=i.jsx(p,{date:t,displayMonth:e,activeModifiers:c}),y={style:m,className:f,children:g,role:"gridcell"},b=l.focusTarget&&rr(l.focusTarget,t)&&!c.outside,w=l.focusedDay&&rr(l.focusedDay,t),j=Fe(Fe(Fe({},y),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||b?0:-1,n)),d),_={isButton:h,isHidden:v,activeModifiers:c,selectedDays:u,buttonProps:j,divProps:y};return _}function Kbe(t){var e=x.useRef(null),r=Wbe(t.date,t.displayMonth,e);return r.isHidden?i.jsx("div",{role:"gridcell"}):r.isButton?i.jsx(im,Fe({name:"day",ref:e},r.buttonProps)):i.jsx("div",Fe({},r.divProps))}function Gbe(t){var e=t.number,r=t.dates,n=Mt(),a=n.onWeekNumberClick,s=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,d=n.formatters.formatWeekNumber,u=d(Number(e),{locale:l});if(!a)return i.jsx("span",{className:o.weeknumber,style:s.weeknumber,children:u});var h=c(Number(e),{locale:l}),f=function(m){a(e,r,m)};return i.jsx(im,{name:"week-number","aria-label":h,className:o.weeknumber,style:s.weeknumber,onClick:f,children:u})}function Vbe(t){var e,r,n=Mt(),a=n.styles,s=n.classNames,o=n.showWeekNumber,l=n.components,c=(e=l==null?void 0:l.Day)!==null&&e!==void 0?e:Kbe,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:Gbe,u;return o&&(u=i.jsx("td",{className:s.cell,style:a.cell,children:i.jsx(d,{number:t.weekNumber,dates:t.dates})})),i.jsxs("tr",{className:s.row,style:a.row,children:[u,t.dates.map(function(h){return i.jsx("td",{className:s.cell,style:a.cell,role:"presentation",children:i.jsx(c,{displayMonth:t.displayMonth,date:h})},yH(h))})]})}function zN(t,e,r){for(var n=r!=null&&r.ISOWeek?n2(e):oo(e,r),a=r!=null&&r.ISOWeek?zi(t):Cr(t,r),s=aa(n,a),o=[],l=0;l<=s;l++)o.push(yr(a,l));var c=o.reduce(function(d,u){var h=r!=null&&r.ISOWeek?i2(u):l2(u,r),f=d.find(function(m){return m.weekNumber===h});return f?(f.dates.push(u),d):(d.push({weekNumber:h,dates:[u]}),d)},[]);return c}function Qbe(t,e){var r=zN(Qt(t),Ua(t),e);if(e!=null&&e.useFixedWeeks){var n=xH(t,e);if(n<6){var a=r[r.length-1],s=a.dates[a.dates.length-1],o=Tl(s,6-n),l=zN(Tl(s,1),o,e);r.push.apply(r,l)}}return r}function Jbe(t){var e,r,n,a=Mt(),s=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,h=a.weekStartsOn,f=a.firstWeekContainsDate,m=a.ISOWeek,v=Qbe(t.displayMonth,{useFixedWeeks:!!d,ISOWeek:m,locale:s,weekStartsOn:h,firstWeekContainsDate:f}),p=(e=u==null?void 0:u.Head)!==null&&e!==void 0?e:ube,g=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:Vbe,y=(n=u==null?void 0:u.Footer)!==null&&n!==void 0?n:lbe;return i.jsxs("table",{id:t.id,className:o.table,style:l.table,role:"grid","aria-labelledby":t["aria-labelledby"],children:[!c&&i.jsx(p,{}),i.jsx("tbody",{className:o.tbody,style:l.tbody,children:v.map(function(b){return i.jsx(g,{displayMonth:t.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),i.jsx(y,{displayMonth:t.displayMonth})]})}function Ybe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Xbe=Ybe()?x.useLayoutEffect:x.useEffect,fv=!1,Zbe=0;function HN(){return"react-day-picker-".concat(++Zbe)}function exe(t){var e,r=t??(fv?HN():null),n=x.useState(r),a=n[0],s=n[1];return Xbe(function(){a===null&&s(HN())},[]),x.useEffect(function(){fv===!1&&(fv=!0)},[]),(e=t??a)!==null&&e!==void 0?e:void 0}function txe(t){var e,r,n=Mt(),a=n.dir,s=n.classNames,o=n.styles,l=n.components,c=qu().displayMonths,d=exe(n.id?"".concat(n.id,"-").concat(t.displayIndex):void 0),u=n.id?"".concat(n.id,"-grid-").concat(t.displayIndex):void 0,h=[s.month],f=o.month,m=t.displayIndex===0,v=t.displayIndex===c.length-1,p=!m&&!v;a==="rtl"&&(e=[m,v],v=e[0],m=e[1]),m&&(h.push(s.caption_start),f=Fe(Fe({},f),o.caption_start)),v&&(h.push(s.caption_end),f=Fe(Fe({},f),o.caption_end)),p&&(h.push(s.caption_between),f=Fe(Fe({},f),o.caption_between));var g=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:obe;return i.jsxs("div",{className:h.join(" "),style:f,children:[i.jsx(g,{id:d,displayMonth:t.displayMonth,displayIndex:t.displayIndex}),i.jsx(Jbe,{id:u,"aria-labelledby":d,displayMonth:t.displayMonth})]},t.displayIndex)}function rxe(t){var e=Mt(),r=e.classNames,n=e.styles;return i.jsx("div",{className:r.months,style:n.months,children:t.children})}function nxe(t){var e,r,n=t.initialProps,a=Mt(),s=Qw(),o=qu(),l=x.useState(!1),c=l[0],d=l[1];x.useEffect(function(){a.initialFocus&&s.focusTarget&&(c||(s.focus(s.focusTarget),d(!0)))},[a.initialFocus,c,s.focus,s.focusTarget,s]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var h=Fe(Fe({},a.styles.root),a.style),f=Object.keys(n).filter(function(v){return v.startsWith("data-")}).reduce(function(v,p){var g;return Fe(Fe({},v),(g={},g[p]=n[p],g))},{}),m=(r=(e=n.components)===null||e===void 0?void 0:e.Months)!==null&&r!==void 0?r:rxe;return i.jsx("div",Fe({className:u.join(" "),style:h,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},f,{children:i.jsx(m,{children:o.displayMonths.map(function(v,p){return i.jsx(txe,{displayIndex:p,displayMonth:v},p)})})}))}function axe(t){var e=t.children,r=Cye(t,["children"]);return i.jsx(Gye,{initialProps:r,children:i.jsx(nbe,{children:i.jsx(Lbe,{initialProps:r,children:i.jsx(fbe,{initialProps:r,children:i.jsx(pbe,{initialProps:r,children:i.jsx(Sbe,{children:i.jsx($be,{children:e})})})})})})})}function sxe(t){return i.jsx(axe,Fe({},t,{children:i.jsx(nxe,{initialProps:t})}))}function Jb({className:t,classNames:e,showOutsideDays:r=!0,...n}){return i.jsx(sxe,{showOutsideDays:r,className:se("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:se(wd({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:se(wd({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...e},components:{IconLeft:({...a})=>i.jsx(kl,{className:"h-4 w-4"}),IconRight:({...a})=>i.jsx(Oa,{className:"h-4 w-4"})},...n})}Jb.displayName="Calendar";var Yw="Popover",[zR,VAe]=Kn(Yw,[lc]),Uu=lc(),[ixe,Vs]=zR(Yw),HR=t=>{const{__scopePopover:e,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!1}=t,l=Uu(e),c=x.useRef(null),[d,u]=x.useState(!1),[h=!1,f]=Fs({prop:n,defaultProp:a,onChange:s});return i.jsx(MC,{...l,children:i.jsx(ixe,{scope:e,contentId:xu(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:d,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:r})})};HR.displayName=Yw;var WR="PopoverAnchor",oxe=x.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=Vs(WR,r),s=Uu(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return x.useEffect(()=>(o(),()=>l()),[o,l]),i.jsx(Cm,{...s,...n,ref:e})});oxe.displayName=WR;var KR="PopoverTrigger",GR=x.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=Vs(KR,r),s=Uu(r),o=cr(e,a.triggerRef),l=i.jsx(it.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":XR(a.open),...n,ref:o,onClick:je(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:i.jsx(Cm,{asChild:!0,...s,children:l})});GR.displayName=KR;var Xw="PopoverPortal",[lxe,cxe]=zR(Xw,{forceMount:void 0}),VR=t=>{const{__scopePopover:e,forceMount:r,children:n,container:a}=t,s=Vs(Xw,e);return i.jsx(lxe,{scope:e,forceMount:r,children:i.jsx(Nn,{present:r||s.open,children:i.jsx(Nx,{asChild:!0,container:a,children:n})})})};VR.displayName=Xw;var tc="PopoverContent",QR=x.forwardRef((t,e)=>{const r=cxe(tc,t.__scopePopover),{forceMount:n=r.forceMount,...a}=t,s=Vs(tc,t.__scopePopover);return i.jsx(Nn,{present:n||s.open,children:s.modal?i.jsx(dxe,{...a,ref:e}):i.jsx(uxe,{...a,ref:e})})});QR.displayName=tc;var dxe=x.forwardRef((t,e)=>{const r=Vs(tc,t.__scopePopover),n=x.useRef(null),a=cr(e,n),s=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return Mx(o)},[]),i.jsx(IC,{as:Bs,allowPinchZoom:!0,children:i.jsx(JR,{...t,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(t.onCloseAutoFocus,o=>{var l;o.preventDefault(),s.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:je(t.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;s.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:je(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),uxe=x.forwardRef((t,e)=>{const r=Vs(tc,t.__scopePopover),n=x.useRef(!1),a=x.useRef(!1);return i.jsx(JR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),s.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:s=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=s.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}})}),JR=x.forwardRef((t,e)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=t,f=Vs(tc,r),m=Uu(r);return OC(),i.jsx(RC,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s,children:i.jsx(Ex,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:i.jsx(Cx,{"data-state":XR(f.open),role:"dialog",id:f.contentId,...m,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),YR="PopoverClose",hxe=x.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=Vs(YR,r);return i.jsx(it.button,{type:"button",...n,ref:e,onClick:je(t.onClick,()=>a.onOpenChange(!1))})});hxe.displayName=YR;var fxe="PopoverArrow",mxe=x.forwardRef((t,e)=>{const{__scopePopover:r,...n}=t,a=Uu(r);return i.jsx(Ax,{...a,...n,ref:e})});mxe.displayName=fxe;function XR(t){return t?"open":"closed"}var gxe=HR,pxe=GR,vxe=VR,ZR=QR;const Yb=gxe,Xb=pxe,om=x.forwardRef(({className:t,align:e="center",sideOffset:r=4,...n},a)=>i.jsx(vxe,{children:i.jsx(ZR,{ref:a,align:e,sideOffset:r,className:se("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));om.displayName=ZR.displayName;const Zw=[{id:"event-sekolah",name:"Event Sekolah",color:"#3b82f6"},{id:"liburan-semester",name:"Liburan Semester",color:"#10b981"},{id:"sumatif-akhir",name:"Sumatif Akhir",color:"#f59e0b"},{id:"ujian",name:"Ujian",color:"#ef4444"},{id:"libur-nasional",name:"Libur Nasional",color:"#8b5cf6"},{id:"kegiatan-khusus",name:"Kegiatan Khusus",color:"#ec4899"}],yxe=[{id:"tahun-baru-2024",name:"Tahun Baru 2024",date:"2024-01-01"},{id:"imlek-2024",name:"Tahun Baru Imlek",date:"2024-02-10"},{id:"nyepi-2024",name:"Hari Raya Nyepi",date:"2024-03-11"},{id:"wafat-isa-2024",name:"Wafat Isa Al Masih",date:"2024-03-29"},{id:"idul-fitri-2024-1",name:"Idul Fitri 1445 H",date:"2024-04-10"},{id:"idul-fitri-2024-2",name:"Idul Fitri 1445 H",date:"2024-04-11"},{id:"buruh-2024",name:"Hari Buruh",date:"2024-05-01"},{id:"kenaikan-isa-2024",name:"Kenaikan Isa Al Masih",date:"2024-05-09"},{id:"waisak-2024",name:"Hari Raya Waisak",date:"2024-05-23"},{id:"pancasila-2024",name:"Hari Lahir Pancasila",date:"2024-06-01"},{id:"idul-adha-2024",name:"Idul Adha 1445 H",date:"2024-06-17"},{id:"muharram-2024",name:"Tahun Baru Islam 1446 H",date:"2024-07-07"},{id:"kemerdekaan-2024",name:"Hari Kemerdekaan RI",date:"2024-08-17"},{id:"maulid-2024",name:"Maulid Nabi Muhammad SAW",date:"2024-09-16"},{id:"natal-2024",name:"Hari Raya Natal",date:"2024-12-25"}],bxe=[{id:"tahun-baru-2025",name:"Tahun Baru 2025",date:"2025-01-01"},{id:"imlek-2025",name:"Tahun Baru Imlek",date:"2025-01-29"},{id:"nyepi-2025",name:"Hari Raya Nyepi",date:"2025-03-29"},{id:"wafat-isa-2025",name:"Wafat Isa Al Masih",date:"2025-04-18"},{id:"idul-fitri-2025-1",name:"Idul Fitri 1446 H",date:"2025-03-31"},{id:"idul-fitri-2025-2",name:"Idul Fitri 1446 H",date:"2025-04-01"},{id:"buruh-2025",name:"Hari Buruh",date:"2025-05-01"},{id:"kenaikan-isa-2025",name:"Kenaikan Isa Al Masih",date:"2025-05-29"},{id:"waisak-2025",name:"Hari Raya Waisak",date:"2025-05-12"},{id:"pancasila-2025",name:"Hari Lahir Pancasila",date:"2025-06-01"},{id:"idul-adha-2025",name:"Idul Adha 1446 H",date:"2025-06-07"},{id:"muharram-2025",name:"Tahun Baru Islam 1447 H",date:"2025-06-26"},{id:"kemerdekaan-2025",name:"Hari Kemerdekaan RI",date:"2025-08-17"},{id:"maulid-2025",name:"Maulid Nabi Muhammad SAW",date:"2025-09-05"},{id:"natal-2025",name:"Hari Raya Natal",date:"2025-12-25"}],e_=()=>{const{profile:t}=tt(),{data:e}=fr(),r=Ne(),n=e==null?void 0:e.find(u=>u.is_active),{data:a=[],isLoading:s}=Ye({queryKey:["event-categories",t==null?void 0:t.school_id,n==null?void 0:n.id],queryFn:async()=>{if(!(t!=null&&t.school_id)||!(n!=null&&n.id))return[];const{data:u,error:h}=await W.from("event_categories").select("*").eq("school_id",t.school_id).eq("academic_year_id",n.id).order("name");return h?(console.error("Error fetching event categories:",h),[]):u||[]},enabled:!!(t!=null&&t.school_id)&&!!(n!=null&&n.id)}),o=[...Zw,...a],l=Se({mutationFn:async u=>{if(!(t!=null&&t.school_id)||!(n!=null&&n.id))throw new Error("Missing school or academic year data");const{data:h,error:f}=await W.from("event_categories").insert([{name:u.name,color:u.color,school_id:t.school_id,academic_year_id:n.id}]).select().single();if(f)throw f;return h},onSuccess:()=>{r.invalidateQueries({queryKey:["event-categories"]}),nt({title:"Berhasil",description:"Kategori baru telah ditambahkan"})},onError:u=>{console.error("Error creating category:",u),nt({title:"Error",description:"Gagal menambahkan kategori",variant:"destructive"})}}),c=Se({mutationFn:async({id:u,...h})=>{const{data:f,error:m}=await W.from("event_categories").update(h).eq("id",u).select().single();if(m)throw m;return f},onSuccess:()=>{r.invalidateQueries({queryKey:["event-categories"]}),nt({title:"Berhasil",description:"Kategori telah diperbarui"})},onError:u=>{console.error("Error updating category:",u),nt({title:"Error",description:"Gagal memperbarui kategori",variant:"destructive"})}}),d=Se({mutationFn:async u=>{const{error:h}=await W.from("event_categories").delete().eq("id",u);if(h)throw h},onSuccess:()=>{r.invalidateQueries({queryKey:["event-categories"]}),nt({title:"Berhasil",description:"Kategori telah dihapus"})},onError:u=>{console.error("Error deleting category:",u),nt({title:"Error",description:"Gagal menghapus kategori",variant:"destructive"})}});return{categories:o,customCategories:a,isLoading:s,createCategory:l.mutate,updateCategory:c.mutate,deleteCategory:d.mutate,isCreating:l.isPending,isUpdating:c.isPending,isDeleting:d.isPending}},xxe=({open:t,onOpenChange:e})=>{const[r,n]=x.useState(""),[a,s]=x.useState("#3b82f6"),[o,l]=x.useState(null),[c,d]=x.useState(""),[u,h]=x.useState(""),{customCategories:f,createCategory:m,updateCategory:v,deleteCategory:p,isCreating:g,isUpdating:y,isDeleting:b}=e_(),w=()=>{r.trim()&&(m({name:r.trim(),color:a}),n(""),s("#3b82f6"))},j=k=>{l(k),d(k.name),h(k.color)},_=()=>{!o||!c.trim()||(v({id:o.id,name:c.trim(),color:u}),l(null),d(""),h(""))},S=k=>{confirm("Apakah Anda yakin ingin menghapus kategori ini?")&&p(k)},N=()=>{l(null),d(""),h("")};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(wt,{children:i.jsx(_t,{children:"Kelola Kategori Event"})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg border",children:[i.jsx("h3",{className:"font-medium mb-3",children:"Tambah Kategori Baru"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"new-name",children:"Nama Kategori"}),i.jsx(me,{id:"new-name",value:r,onChange:k=>n(k.target.value),placeholder:"Masukkan nama kategori"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"new-color",children:"Warna"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{id:"new-color",type:"color",value:a,onChange:k=>s(k.target.value),className:"w-12 h-10 border rounded cursor-pointer"}),i.jsx(me,{value:a,onChange:k=>s(k.target.value),placeholder:"#3b82f6"})]})]}),i.jsxs(K,{onClick:w,disabled:!r.trim()||g,className:"w-full",children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),g?"Menambahkan...":"Tambah Kategori"]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium mb-3",children:"Kategori Default"}),i.jsx("div",{className:"space-y-2",children:Zw.map(k=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded border border-muted/30",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:k.color}}),i.jsx("span",{className:"text-muted-foreground",children:k.name})]}),i.jsx("span",{className:"text-muted-foreground text-sm",children:"Default"})]},k.id))})]}),f.length>0&&i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium mb-3",children:"Kategori Kustom"}),i.jsx("div",{className:"space-y-2",children:f.map(k=>i.jsx("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded border",children:(o==null?void 0:o.id)===k.id?i.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[i.jsx("input",{type:"color",value:u,onChange:E=>h(E.target.value),className:"w-8 h-8 border rounded cursor-pointer"}),i.jsx(me,{value:c,onChange:E=>d(E.target.value),className:"flex-1"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(K,{size:"sm",onClick:_,disabled:!c.trim()||y,children:"Simpan"}),i.jsx(K,{size:"sm",variant:"outline",onClick:N,children:"Batal"})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:k.color}}),i.jsx("span",{className:"text-white",children:k.name})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(K,{size:"sm",variant:"outline",onClick:()=>j(k),children:i.jsx(Xh,{className:"h-3 w-3"})}),i.jsx(K,{size:"sm",variant:"destructive",onClick:()=>S(k.id),disabled:b,children:i.jsx(Ut,{className:"h-3 w-3"})})]})]})},k.id))})]})]}),i.jsx(Tr,{children:i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),children:"Tutup"})})]})})},wh=["#ef4444","#f97316","#eab308","#84cc16","#22c55e","#10b981","#06b6d4","#3b82f6","#8b5cf6","#d946ef","#ec4899","#78716c"],wxe=({open:t,onOpenChange:e,event:r,initialDate:n,onSave:a,onUpdate:s,onDelete:o})=>{const[l,c]=x.useState(""),[d,u]=x.useState(),[h,f]=x.useState(),[m,v]=x.useState(""),[p,g]=x.useState(""),[y,b]=x.useState(wh[0]),[w,j]=x.useState(!1),[_,S]=x.useState([]),[N,k]=x.useState(!0),[E,P]=x.useState(!1),{data:T=[]}=Yt(),{categories:D}=e_();x.useEffect(()=>{r?(c(r.name),u(new Date(r.start_date)),f(new Date(r.end_date)),v(r.category_id),g(r.description||""),b(r.color||wh[0]),j(r.is_national_holiday||!1),S(r.class_ids||[]),k(!r.class_ids||r.class_ids.length===0)):(c(""),u(n),f(n),v(""),g(""),b(wh[0]),j(!1),S([]),k(!0))},[r,n,t]);const A=()=>{if(!l||!d||!h||!m||!y)return;const M={name:l,start_date:be(d,"yyyy-MM-dd"),end_date:be(h,"yyyy-MM-dd"),description:p,color:y,category_id:m,is_national_holiday:w,class_ids:N?[]:_};r&&s?s({id:r.id,...M}):a(M),e(!1)},C=()=>{r&&o&&(o(r.id),e(!1))},R=(M,I)=>{S(I?B=>[...B,M]:B=>B.filter(H=>H!==M))},L=l&&d&&h&&m&&y&&h>=d;return i.jsxs(i.Fragment,{children:[i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Event":"Tambah Event Baru"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"name",children:"Nama Event *"}),i.jsx(me,{id:"name",value:l,onChange:M=>c(M.target.value),placeholder:"Masukkan nama event"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ne,{children:"Tanggal Mulai *"}),i.jsxs(Yb,{children:[i.jsx(Xb,{asChild:!0,children:i.jsxs(K,{variant:"outline",className:se("w-full justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[i.jsx(Ve,{className:"mr-2 h-4 w-4"}),d?be(d,"dd MMMM yyyy",{locale:bt}):"Pilih tanggal"]})}),i.jsx(om,{className:"w-auto p-0",children:i.jsx(Jb,{mode:"single",selected:d,onSelect:u,initialFocus:!0})})]})]}),i.jsxs("div",{children:[i.jsx(ne,{children:"Tanggal Selesai *"}),i.jsxs(Yb,{children:[i.jsx(Xb,{asChild:!0,children:i.jsxs(K,{variant:"outline",className:se("w-full justify-start text-left font-normal",!h&&"text-gray-400"),children:[i.jsx(Ve,{className:"mr-2 h-4 w-4"}),h?be(h,"dd MMMM yyyy",{locale:bt}):"Pilih tanggal"]})}),i.jsx(om,{className:"w-auto p-0",children:i.jsx(Jb,{mode:"single",selected:h,onSelect:f,disabled:M=>d?M<d:!1,initialFocus:!0})})]})]})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Kategori *"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(Re,{value:m,onValueChange:v,children:[i.jsx(De,{children:i.jsx($e,{placeholder:"Pilih kategori"})}),i.jsx(Pe,{children:D.map(M=>i.jsx(he,{value:M.id,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:M.color}}),M.name]})},M.id))})]}),i.jsx(K,{type:"button",size:"icon",onClick:()=>P(!0),variant:"outline",children:i.jsx(ct,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{children:[i.jsx(ne,{children:"Warna *"}),i.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:wh.map(M=>i.jsx("button",{type:"button",onClick:()=>b(M),className:se("h-8 w-8 rounded-full border-2 transition-all",y===M?"ring-2 ring-offset-2 ring-ring":"ring-offset-background"),style:{backgroundColor:M},"aria-label":`Select color ${M}`},M))})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"description",children:"Deskripsi"}),i.jsx(qn,{id:"description",value:p,onChange:M=>g(M.target.value),placeholder:"Deskripsi event (opsional)",rows:3})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"national",checked:w,onCheckedChange:M=>j(M===!0)}),i.jsx(ne,{htmlFor:"national",children:"Libur Nasional"})]}),i.jsxs("div",{children:[i.jsx(ne,{children:"Kelas yang Terlibat"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"all-classes",checked:N,onCheckedChange:M=>{k(M===!0),M&&S([])}}),i.jsx(ne,{htmlFor:"all-classes",className:"font-medium",children:"Semua Kelas"})]}),!N&&i.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto p-2 bg-muted rounded border",children:T.map(M=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:`class-${M.id}`,checked:_.includes(M.id),onCheckedChange:I=>R(M.id,I===!0)}),i.jsx(ne,{htmlFor:`class-${M.id}`,className:"text-sm",children:M.name})]},M.id))})]})]})]}),i.jsxs(Tr,{className:"flex gap-2",children:[r&&o&&i.jsx(K,{type:"button",variant:"destructive",onClick:C,className:"mr-auto",children:"Hapus"}),i.jsx(K,{type:"button",onClick:()=>e(!1),variant:"outline",children:"Batal"}),i.jsx(K,{type:"button",onClick:A,disabled:!L,children:r?"Perbarui":"Simpan"})]})]})}),i.jsx(xxe,{open:E,onOpenChange:P})]})},_xe=({open:t,onOpenChange:e,currentYear:r,onSave:n,existingHolidays:a})=>{const[s,o]=x.useState([]),[l,c]=x.useState(!1),d=r===2024?yxe:bxe,u=Zw.find(g=>g.id==="libur-nasional"),h=d.filter(g=>!a.includes(g.id)),f=(g,y)=>{y?o(b=>[...b,g]):(o(b=>b.filter(w=>w!==g)),c(!1))},m=g=>{c(g),o(g?h.map(y=>y.id):[])},v=()=>{const g=h.filter(y=>s.includes(y.id)).map(y=>({name:y.name,start_date:y.date,end_date:y.date,description:y.description,color:(u==null?void 0:u.color)||"#8b5cf6",category_id:"libur-nasional",is_national_holiday:!0,class_ids:[]}));n(g),o([]),c(!1),e(!1)},p=s.length>0;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-gray-800/95 via-gray-800/90 to-gray-900/95 border-lime-400/20",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"text-white flex items-center gap-2",children:[i.jsx(Ve,{className:"h-5 w-5 text-lime-400"}),"Tambah Libur Nasional ",r]})}),i.jsx("div",{className:"space-y-4",children:h.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Ve,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsxs("p",{className:"text-gray-400",children:["Semua libur nasional untuk tahun ",r," sudah ditambahkan."]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center space-x-2 pb-2 border-b border-gray-600",children:[i.jsx(kr,{id:"select-all",checked:l,onCheckedChange:m,className:"border-lime-400/30"}),i.jsxs(ne,{htmlFor:"select-all",className:"text-white font-medium",children:["Pilih Semua (",h.length," libur)"]})]}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:h.map(g=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900/50 rounded border border-gray-600/30 hover:border-lime-400/30 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(kr,{id:g.id,checked:s.includes(g.id),onCheckedChange:y=>f(g.id,y),className:"border-lime-400/30"}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:g.id,className:"text-white font-medium cursor-pointer",children:g.name}),g.description&&i.jsx("p",{className:"text-gray-400 text-sm",children:g.description})]})]}),i.jsx("div",{className:"text-lime-400 text-sm",children:be(hr(g.date),"dd MMMM yyyy",{locale:bt})})]},g.id))}),s.length>0&&i.jsx("div",{className:"p-3 bg-lime-400/10 border border-lime-400/30 rounded",children:i.jsxs("p",{className:"text-lime-400 text-sm",children:[s.length," libur nasional akan ditambahkan ke kalender"]})})]})}),i.jsxs(Tr,{children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Batal"}),h.length>0&&i.jsxs(K,{type:"button",onClick:v,disabled:!p,className:"bg-gradient-to-r from-lime-400 to-lime-500 hover:from-lime-500 hover:to-lime-600 text-gray-900",children:["Tambah ",s.length," Libur"]})]})]})})},Os=x.forwardRef(({className:t,...e},r)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:r,className:se("w-full caption-bottom text-sm",t),...e})}));Os.displayName="Table";const Rs=x.forwardRef(({className:t,...e},r)=>i.jsx("thead",{ref:r,className:se("[&_tr]:border-b",t),...e}));Rs.displayName="TableHeader";const $s=x.forwardRef(({className:t,...e},r)=>i.jsx("tbody",{ref:r,className:se("[&_tr:last-child]:border-0",t),...e}));$s.displayName="TableBody";const jxe=x.forwardRef(({className:t,...e},r)=>i.jsx("tfoot",{ref:r,className:se("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));jxe.displayName="TableFooter";const lr=x.forwardRef(({className:t,...e},r)=>i.jsx("tr",{ref:r,className:se("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));lr.displayName="TableRow";const qe=x.forwardRef(({className:t,...e},r)=>i.jsx("th",{ref:r,className:se("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));qe.displayName="TableHead";const Le=x.forwardRef(({className:t,...e},r)=>i.jsx("td",{ref:r,className:se("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Le.displayName="TableCell";const Sxe=x.forwardRef(({className:t,...e},r)=>i.jsx("caption",{ref:r,className:se("mt-4 text-sm text-muted-foreground",t),...e}));Sxe.displayName="TableCaption";const kxe=({holidays:t,onEdit:e,onDelete:r,selectedClassId:n="all",onClassFilterChange:a})=>{const[s,o]=x.useState("start_date"),[l,c]=x.useState("asc"),{data:d=[]}=Yt(),{categories:u}=e_(),h=x.useMemo(()=>{let g=t.filter(y=>n==="all"||!y.class_ids||y.class_ids.length===0?!0:y.class_ids.includes(n));return g.sort((y,b)=>{let w,j;switch(s){case"name":w=y.name.toLowerCase(),j=b.name.toLowerCase();break;case"start_date":w=new Date(y.start_date),j=new Date(b.start_date);break;case"end_date":w=new Date(y.end_date),j=new Date(b.end_date);break;case"category":const _=u.find(N=>N.id===y.category_id),S=u.find(N=>N.id===b.category_id);w=(_==null?void 0:_.name.toLowerCase())||"",j=(S==null?void 0:S.name.toLowerCase())||"";break;default:w=y.name.toLowerCase(),j=b.name.toLowerCase()}return w<j?l==="asc"?-1:1:w>j?l==="asc"?1:-1:0}),g},[t,n,s,l,u]),f=g=>{s===g?c(l==="asc"?"desc":"asc"):(o(g),c("asc"))},m=({field:g})=>s!==g?null:l==="asc"?i.jsx(Ei,{className:"h-4 w-4"}):i.jsx(Fn,{className:"h-4 w-4"}),v=g=>{const y=u.find(b=>b.id===g);return(y==null?void 0:y.name)||"Unknown"},p=g=>{if(!g||g.length===0)return"Semua Kelas";const y=g.map(b=>{const w=d.find(j=>j.id===b);return(w==null?void 0:w.name)||""}).filter(Boolean);return y.length>0?y.join(", "):"Semua Kelas"};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-4 p-4 bg-card rounded-lg border",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qa,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"text-foreground",children:"Filter Kelas:"})]}),i.jsxs(Re,{value:n,onValueChange:a,children:[i.jsx(De,{className:"w-48",children:i.jsx($e,{})}),i.jsxs(Pe,{children:[i.jsx(he,{value:"all",children:"Semua Kelas"}),d.map(g=>i.jsx(he,{value:g.id,children:g.name},g.id))]})]}),i.jsxs("span",{className:"text-muted-foreground text-sm",children:["Menampilkan ",h.length," dari ",t.length," event"]})]}),i.jsx("div",{className:"overflow-x-auto rounded-lg border bg-card",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{children:[i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>f("name"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Nama Event",i.jsx(m,{field:"name"})]})}),i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>f("category"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Kategori",i.jsx(m,{field:"category"})]})}),i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>f("start_date"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Tanggal Mulai",i.jsx(m,{field:"start_date"})]})}),i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>f("end_date"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Tanggal Selesai",i.jsx(m,{field:"end_date"})]})}),i.jsx(qe,{children:"Kelas"}),i.jsx(qe,{children:"Keterangan"}),i.jsx(qe,{className:"text-center",children:"Aksi"})]})}),i.jsx($s,{children:h.length===0?i.jsx(lr,{children:i.jsx(Le,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"Tidak ada event yang ditemukan"})}):h.map(g=>i.jsxs(lr,{className:"hover:bg-muted/50",children:[i.jsx(Le,{className:"font-medium text-foreground",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:g.color}}),g.name,g.is_national_holiday&&i.jsx(st,{variant:"secondary",className:"text-xs",children:"Nasional"})]})}),i.jsx(Le,{className:"text-muted-foreground",children:v(g.category_id)}),i.jsx(Le,{className:"text-muted-foreground",children:be(hr(g.start_date),"dd MMM yyyy",{locale:bt})}),i.jsx(Le,{className:"text-muted-foreground",children:be(hr(g.end_date),"dd MMM yyyy",{locale:bt})}),i.jsx(Le,{className:"text-muted-foreground text-sm",children:p(g.class_ids)}),i.jsx(Le,{className:"text-muted-foreground text-sm max-w-xs truncate",children:g.description||"-"}),i.jsx(Le,{children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx(K,{size:"icon",variant:"outline",onClick:()=>e(g),className:"h-8 w-8",children:i.jsx(Xh,{className:"h-4 w-4"})}),i.jsx(K,{size:"icon",variant:"destructive",onClick:()=>r(g.id),className:"h-8 w-8",children:i.jsx(Ut,{className:"h-4 w-4"})})]})})]},g.id))})]})})]})},Nxe=()=>{const[t,e]=x.useState(),[r,n]=x.useState(null),[a,s]=x.useState(!1),[o,l]=x.useState(!1),[c,d]=x.useState("all"),[u,h]=x.useState(()=>localStorage.getItem("events-show-list")==="true"),{data:f}=fr(),{data:m=[]}=Yt(),{holidays:v,isLoading:p,createHoliday:g,updateHoliday:y,deleteHoliday:b,createMultipleHolidays:w}=$w(),j=f==null?void 0:f.find(R=>R.is_active),_=j?new Date(j.start_date).getFullYear():new Date().getFullYear(),{effectiveDaysCount:S,totalDays:N}=x.useMemo(()=>{const R=f==null?void 0:f.find(F=>F.is_active);if(!R||!v)return{effectiveDaysCount:0,totalDays:0};const L=new Date(R.start_date),M=new Date(R.end_date),I=Hn({start:L,end:M}),B=new Set;I.forEach(F=>{ks(F)===0&&B.add(F.toISOString().split("T")[0])}),v.filter(F=>!c||c==="all"||!F.class_ids||F.class_ids.length===0?!0:F.class_ids.includes(c)).forEach(F=>{const G=la(new Date(F.start_date)),Y=la(new Date(F.end_date));Hn({start:G,end:Y}).forEach(le=>{B.add(le.toISOString().split("T")[0])})});const q=I.length;return{effectiveDaysCount:q-B.size,totalDays:q}},[f,v,c]);x.useEffect(()=>{localStorage.setItem("events-show-list",u.toString())},[u]);const k=R=>{e(R),n(null),s(!0)},E=R=>{n(R),e(void 0),s(!0)},P=R=>{g(R)},T=R=>{y(R)},D=R=>{confirm("Apakah Anda yakin ingin menghapus event ini?")&&b(R)},A=R=>{w(R)},C=v.filter(R=>R.is_national_holiday).map(R=>{const L=R.name.toLowerCase();return L.includes("tahun baru")&&L.includes("2024")?"tahun-baru-2024":L.includes("tahun baru")&&L.includes("2025")?"tahun-baru-2025":L.includes("imlek")&&L.includes("2024")?"imlek-2024":L.includes("imlek")&&L.includes("2025")?"imlek-2025":""}).filter(Boolean);return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(cn,{className:"h-8 w-8 text-lime-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Event"})]})}),i.jsxs("p",{className:"text-muted-foreground",children:["Kelola event dan kegiatan tahun akademik ",_,"/",String(_+1).slice(-2)]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(K,{onClick:()=>l(!0),className:"bg-red-400/10 border border-red-400/20 hover:bg-red-400/20 flex items-center justify-center space-x-2 text-red-400",children:[i.jsx(oL,{className:"h-4 w-4 mr-2"}),"Libur Nasional"]}),i.jsxs(K,{onClick:()=>{e(new Date),n(null),s(!0)},className:"bg-lime-400/10 border border-lime-400/20 text-lime-400 hover:bg-lime-400/20 flex items-center justify-center space-x-2",children:[i.jsx(ct,{className:"h-5 w-5 mr-2"}),"Tambah Event"]})]})]}),i.jsx(ie,{className:"bg-card border-border rounded-2xl p-6",children:i.jsx(oe,{className:"p-0",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{className:"h-5 w-5 text-lime-400"}),i.jsx("span",{className:"text-foreground",children:"Filter Kelas:"})]}),i.jsxs(Re,{value:c,onValueChange:d,children:[i.jsx(De,{className:"w-48 bg-background border-lime-400/30 text-foreground",children:i.jsx($e,{})}),i.jsxs(Pe,{children:[i.jsx(he,{value:"all",children:"Semua Kelas"}),m.map(R=>i.jsx(he,{value:R.id,children:R.name},R.id))]})]})]}),i.jsxs(K,{variant:"outline",onClick:()=>h(!u),className:"bg-lime-400/10 border border-lime-400/20 text-lime-400 hover:bg-lime-400/20 flex items-center justify-center space-x-2",children:[i.jsx(Ux,{className:"h-4 w-4 mr-2"}),u?"Sembunyikan":"Tampilkan"," Daftar Event"]})]})})}),i.jsxs(ie,{className:"bg-card border-border rounded-2xl p-2",children:[i.jsxs(_e,{className:"p-6 flex flex-row items-start justify-between",children:[i.jsxs("div",{children:[i.jsx(Ee,{className:"text-card-foreground text-xl",children:"Kalender Event Tahunan"}),i.jsx(Hr,{className:"text-muted-foreground mt-1",children:"Klik tanggal kosong untuk menambah event, klik event untuk mengedit"})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-lime-500",children:[i.jsx($i,{className:"h-5 w-5"}),i.jsx("span",{children:"Hari Efektif"})]}),i.jsxs("div",{className:"text-2xl font-bold text-foreground mt-1",children:[S," ",i.jsxs("span",{className:"text-base font-normal text-muted-foreground",children:["/ ",N," hari"]})]})]})]}),i.jsx(oe,{className:"p-6 bg-transparent",children:p?i.jsx("div",{className:"flex items-center justify-center py-16",children:i.jsxs("div",{className:"text-center",children:[i.jsx(cn,{className:"h-12 w-12 animate-pulse text-lime-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Memuat kalender event..."})]})}):i.jsx(_ye,{year:_,holidays:v,selectedClassId:c,onDateClick:k,onEventClick:E})})]}),i.jsx(qi,{open:u,onOpenChange:h,children:i.jsx(Ui,{children:i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{className:"pb-4",children:[i.jsx(Ee,{className:"text-card-foreground text-xl",children:"Daftar Event"}),i.jsx(Hr,{className:"text-muted-foreground",children:"Kelola semua event dengan mudah melalui tabel di bawah ini"})]}),i.jsx(oe,{className:"pt-0",children:i.jsx(kxe,{holidays:v,onEdit:E,onDelete:D,selectedClassId:c,onClassFilterChange:d})})]})})})]}),i.jsx(wxe,{open:a,onOpenChange:s,event:r,initialDate:t,onSave:P,onUpdate:T,onDelete:D}),i.jsx(_xe,{open:o,onOpenChange:l,currentYear:_,onSave:A,existingHolidays:C})]})},Ac=()=>{const{profile:t}=tt();return Ye({queryKey:["schools",t==null?void 0:t.school_id],queryFn:async()=>{if(!(t!=null&&t.school_id))return null;const{data:e,error:r}=await W.from("schools").select("*").eq("id",t.school_id).maybeSingle();if(r)throw r;return e},enabled:!!(t!=null&&t.school_id)})},e$=()=>{const t=Ne(),{profile:e}=tt();return Se({mutationFn:async r=>{if(!(e!=null&&e.school_id))throw new Error("No school ID found");const{data:n,error:a}=await W.from("schools").update(r).eq("id",e.school_id).select().single();if(a)throw a;return n},onSuccess:()=>{t.invalidateQueries({queryKey:["schools"]}),nt({title:"Berhasil",description:"Informasi sekolah berhasil diperbarui"})},onError:r=>{console.error("Error updating school:",r),nt({title:"Error",description:"Gagal memperbarui informasi sekolah",variant:"destructive"})}})},Exe=()=>{const t=Ne(),{profile:e}=tt(),r=e$();return Se({mutationFn:async n=>{if(!(e!=null&&e.school_id))throw new Error("No school ID found");const a=n.name.split(".").pop(),s=`${e.school_id}-${Date.now()}.${a}`,{data:o,error:l}=await W.storage.from("school-logos").upload(s,n,{cacheControl:"3600",upsert:!0});if(l)throw l;const{data:{publicUrl:c}}=W.storage.from("school-logos").getPublicUrl(s);return await r.mutateAsync({logo_url:c}),c},onSuccess:()=>{t.invalidateQueries({queryKey:["schools"]})},onError:n=>{console.error("Error uploading logo:",n),nt({title:"Error",description:"Gagal mengupload logo sekolah",variant:"destructive"})}})},t$=()=>{const{profile:t}=tt();return Ye({queryKey:["semesters"],queryFn:async()=>{if(!(t!=null&&t.school_id))return[];const{data:e,error:r}=await W.from("semesters").select(`
          *,
          academic_years (
            id,
            year_name,
            start_date,
            end_date,
            is_active
          )
        `).eq("school_id",t.school_id).order("academic_year_id",{ascending:!1}).order("semester_number",{ascending:!0});if(r)throw r;return e},enabled:!!(t!=null&&t.school_id)})},r$=()=>{const{profile:t}=tt();return Ye({queryKey:["active-semester"],queryFn:async()=>{if(!(t!=null&&t.school_id))return null;const{data:e,error:r}=await W.from("semesters").select(`
          *,
          academic_years (
            id,
            year_name,
            start_date,
            end_date,
            is_active
          )
        `).eq("school_id",t.school_id).eq("is_active",!0).single();if(r&&r.code!=="PGRST116")throw r;return e},enabled:!!(t!=null&&t.school_id)})},Cxe=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");const{data:a,error:s}=await W.from("semesters").insert({...n,school_id:r.school_id,is_active:!1}).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["semesters"]}),e({title:"Berhasil",description:"Semester baru berhasil ditambahkan"})},onError:n=>{e({title:"Error",description:"Gagal menambahkan semester",variant:"destructive"}),console.error("Error creating semester:",n)}})},Axe=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async({id:n,...a})=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");const{data:s,error:o}=await W.from("semesters").update(a).eq("id",n).eq("school_id",r.school_id).select().single();if(o)throw o;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["semesters"]}),t.invalidateQueries({queryKey:["active-semester"]}),e({title:"Berhasil",description:"Semester berhasil diperbarui"})},onError:n=>{e({title:"Error",description:"Gagal memperbarui semester",variant:"destructive"}),console.error("Error updating semester:",n)}})},n$=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");await W.from("semesters").update({is_active:!1}).eq("school_id",r.school_id);const{data:a,error:s}=await W.from("semesters").update({is_active:!0}).eq("id",n).eq("school_id",r.school_id).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["semesters"]}),t.invalidateQueries({queryKey:["active-semester"]}),e({title:"Berhasil",description:"Semester aktif berhasil diperbarui"})},onError:n=>{e({title:"Error",description:"Gagal mengaktifkan semester",variant:"destructive"}),console.error("Error updating active semester:",n)}})},Txe=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");const{error:a}=await W.from("semesters").delete().eq("id",n).eq("school_id",r.school_id);if(a)throw a},onSuccess:()=>{t.invalidateQueries({queryKey:["semesters"]}),t.invalidateQueries({queryKey:["active-semester"]}),e({title:"Berhasil",description:"Semester berhasil dihapus"})},onError:n=>{e({title:"Error",description:"Gagal menghapus semester",variant:"destructive"}),console.error("Error deleting semester:",n)}})},_h={SEMESTER_1:{number:1,name:"Semester 1",description:"Juli - Desember"},SEMESTER_2:{number:2,name:"Semester 2",description:"Januari - Juni"}},Zb=t=>t===1?"Juli - Desember":"Januari - Juni",WN=(t=new Date)=>t.getMonth()+1>=7?1:2,Dxe=(t,e)=>{const r=new Date(t).getFullYear();return e===1?{start_date:`${r}-07-01`,end_date:`${r}-12-31`}:{start_date:`${r+1}-01-01`,end_date:`${r+1}-06-30`}},t_=()=>{const{data:t,isLoading:e}=ma(),{data:r,isLoading:n}=r$(),a=e||n,s=x.useMemo(()=>r?r.semester_number:WN(),[r]),o=x.useMemo(()=>{if(!r)return!1;const h=new Date,f=new Date(r.start_date),m=new Date(r.end_date);return h>=f&&h<=m},[r]),l=x.useMemo(()=>{if(!t)return null;const h=new Date(t.start_date).getFullYear(),f=new Date(t.end_date).getFullYear();return{startYear:h,endYear:f,displayName:`${h}/${f}`,isActive:t.is_active}},[t]),c=x.useMemo(()=>r?{number:r.semester_number,name:r.name,startDate:r.start_date,endDate:r.end_date,isActive:r.is_active,isInPeriod:o}:null,[r,o]),d=x.useMemo(()=>!!(t&&r),[t,r]),u=x.useMemo(()=>!l||!c?"Belum ada periode akademik":`${c.name} - ${l.displayName}`,[l,c]);return{activeAcademicYear:t,activeSemester:r,isLoading:a,isLoadingYear:e,isLoadingSemester:n,academicYearInfo:l,semesterInfo:c,currentSemesterNumber:s,isInCorrectSemesterPeriod:o,isAcademicSetupComplete:d,academicPeriodDisplay:u,getCurrentSemester:()=>WN(),hasActiveAcademicYear:!!t,hasActiveSemester:!!r,isAcademicYearActive:(t==null?void 0:t.is_active)||!1,isSemesterActive:(r==null?void 0:r.is_active)||!1}},Pxe=()=>{var w;const[t,e]=x.useState(""),{data:r=[]}=Yt(),{holidays:n}=$w();fr();const{data:a}=Ac(),{activeAcademicYear:s,academicPeriodDisplay:o}=t_(),l=s?new Date(s.start_date).getFullYear():new Date().getFullYear(),c=x.useMemo(()=>t?n.filter(j=>!j.class_ids||j.class_ids.length===0?!0:j.class_ids.includes(t)):[],[n,t]),u=(j=>{const _=[];for(let S=6;S<12;S++)_.push(new Date(j,S,1));for(let S=0;S<6;S++)_.push(new Date(j+1,S,1));return _})(l),h=u.slice(0,6),f=u.slice(6,12),m=()=>{if(!t){alert("Silakan pilih kelas terlebih dahulu");return}v()},v=()=>{const j=r.find(N=>N.id===t),_=p(j),S=window.open("","_blank");S&&(S.document.write(_),S.document.close(),S.onload=()=>{S.print()})},p=j=>{const _=g(),S=b();return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Kalender Akademik Kelas ${(j==null?void 0:j.name)||""}</title>
        <style>
          @page {
            size: A4 landscape;
            margin: 0.5cm;
          }

          body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-size: 10px;
            line-height: 1.2;
            margin: 0;
            padding: 0;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          }

          .container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
          }

          .header {
            text-align: center;
            margin-bottom: 20px;
            background: white;
            color: #333;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
          }

          .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
          }

          .logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
          }

          .school-info {
            flex: 1;
            text-align: center;
          }

          .school-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
          }

          .calendar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
          }

          .semester-section {
            display: contents;
          }

          .semester-title {
            grid-column: span 2;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            padding: 8px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
          }

          .semester-1-title {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
          }

          .semester-2-title {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
          }

          .month-container {
            border-radius: 12px;
            padding: 10px;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid transparent;
            background-clip: padding-box;
            position: relative;
          }

          .month-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 12px;
            padding: 2px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: exclude;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
          }

          .month-container.blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
          }

          .month-container.yellow {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
          }

          .month-container.green {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #333;
          }

          .month-container.purple {
            background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);
            color: #333;
          }

          .month-container.orange {
            background: linear-gradient(135deg, #fad0c4 0%, #ffd1ff 100%);
            color: #333;
          }

          .month-container.pink {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            color: #333;
          }

          .month-header {
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            padding: 8px;
            margin-bottom: 8px;
            border-radius: 8px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
          }

          .month-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            justify-items: center;
            align-items: center;
          }

          .day-header {
            text-align: center;
            font-size: 10px;
            font-weight: bold;
            padding: 4px 2px;
            border-radius: 4px;
            background: rgba(255,255,255,0.3);
            backdrop-filter: blur(5px);
          }

          .day-cell {
            text-align: center;
            font-size: 10px;
            padding: 4px 2px;
            min-height: 20px;
            border-radius: 50%;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(5px);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            width: 20px;
            height: 20px;
          }

          .day-cell.other-month {
            color: #bbb;
            background: rgba(255,255,255,0.3);
          }

          .day-cell.holiday {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            font-weight: bold;
            box-shadow: 0 2px 8px rgba(255,107,107,0.3);
            border-radius: 50%;
          }

          .day-cell.sunday {
            background: linear-gradient(135deg, #ffa726, #ff7043);
            color: white;
            font-weight: bold;
            border-radius: 50%;
          }

          .events-section {
            margin-top: 20px;
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
          }

          .events-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px;
            text-align: center;
            border-radius: 8px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
          }

          .info-box {
            margin-top: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
          }

          .info-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 12px;
          }

          table {
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
          }

          th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
          }

          td {
            background: rgba(255,255,255,0.9);
            transition: background 0.2s ease;
          }

          td:hover {
            background: rgba(255,255,255,1);
          }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <div class="header-top">
              ${a!=null&&a.logo_url?`<img src="${a.logo_url}" alt="Logo Sekolah" class="logo" />`:'<div class="logo" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 10px;">LOGO</div>'}
              <div class="school-info">
                <div class="school-name">KALENDER AKADEMIK KELAS ${(j==null?void 0:j.name)||""}</div>
                <div class="school-name">${(a==null?void 0:a.name)||"SMA IT HSI IDN"}</div>
                <div style="font-size: 12px; margin-top: 5px;">Tahun Akademik ${o}</div>
              </div>
              <div class="logo" style="background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%); display: flex; align-items: center; justify-content: center; color: #333; font-weight: bold; font-size: 8px;">KEMENDIKBUD</div>
            </div>
          </div>

          <div class="calendar-grid">
            ${_}
          </div>

          <div class="events-section">
            <div class="events-title">KETERANGAN KEGIATAN</div>
            ${S}
          </div>

          <div class="info-box">
            <div class="info-title">Keterangan:</div>
            <div style="display: flex; gap: 20px; margin-bottom: 10px;">
              <div style="display: flex; align-items: center; gap: 5px;">
                <div style="width: 15px; height: 15px; background: linear-gradient(135deg, #ff6b6b, #ee5a52); border-radius: 3px;"></div>
                <span style="font-size: 10px;">Kegiatan Kelas ${(j==null?void 0:j.name)||""}</span>
              </div>
              <div style="display: flex; align-items: center; gap: 5px;">
                <div style="width: 15px; height: 15px; background: linear-gradient(135deg, #ffa726, #ff7043); border-radius: 3px;"></div>
                <span style="font-size: 10px;">Hari Minggu</span>
              </div>
            </div>
            <div style="display: flex; justify-content: space-between; align-items: flex-end;">
              <div style="font-size: 10px;">
                <strong>Penanggung Jawab:</strong> 62 Juli 2024<br>
                <strong>Waktu Efektif Kurikulum</strong><br>
                <strong>SMA IT HSI IDN</strong>
              </div>
              <div style="text-align: center; font-size: 10px;">
                <div style="margin-bottom: 40px;">Mengetahui,<br>Kepala Sekolah</div>
                <div style="border-top: 2px solid white; padding-top: 5px; width: 150px;">
                  <strong>Fauzi M. Noor, S.Sy</strong><br>
                  Direktur
                </div>
              </div>
            </div>
          </div>
        </div>
      </body>
      </html>
    `},g=()=>{let j="";const _=["blue","yellow","green","purple","orange","pink","blue","yellow","green","purple","orange","pink"];return j+='<div class="semester-title semester-1-title"> SEMESTER 1</div>',j+='<div class="semester-title semester-2-title"> SEMESTER 2</div>',j+=y(h[0],_[0]),j+=y(h[1],_[1]),j+=y(f[0],_[6]),j+=y(f[1],_[7]),j+=y(h[2],_[2]),j+=y(h[3],_[3]),j+=y(f[2],_[8]),j+=y(f[3],_[9]),j+=y(h[4],_[4]),j+=y(h[5],_[5]),j+=y(f[4],_[10]),j+=y(f[5],_[11]),j},y=(j,_="blue")=>{const S=Qt(j),N=Ua(j),k=be(j,"MMMM",{locale:bt}),E=be(j,"yyyy"),P=new Date(S),T=ks(P),D=T===0?6:T-1;P.setDate(P.getDate()-D);const A=new Date(N),C=ks(A),R=C===0?0:7-C;A.setDate(A.getDate()+R);const L=Hn({start:P,end:A});let M=`
      <div class="month-container ${_}">
        <div class="month-header">${k} ${E}</div>
        <div class="month-grid">
          <div class="day-header">AHD</div>
          <div class="day-header">SEN</div>
          <div class="day-header">SEL</div>
          <div class="day-header">RAB</div>
          <div class="day-header">KAM</div>
          <div class="day-header">JUM</div>
          <div class="day-header">SAB</div>
    `;return L.forEach(I=>{const B=be(I,"d"),H=I.getMonth()===j.getMonth(),q=ks(I)===0,O=c.some(G=>{const Y=new Date(G.start_date),Z=new Date(G.end_date);return I>=Y&&I<=Z});let F="day-cell";H||(F+=" other-month"),q&&(F+=" sunday"),O&&(F+=" holiday"),M+=`<div class="${F}">${B}</div>`}),M+="</div></div>",M},b=()=>{const j=c.filter(S=>{const N=new Date(S.start_date);return N.getMonth()>=6||N.getFullYear()===l}),_=c.filter(S=>{const N=new Date(S.start_date);return N.getMonth()<6&&N.getFullYear()===l+1});return`
      <table style="width: 100%; border-collapse: collapse; font-size: 10px; border-radius: 8px; overflow: hidden;">
        <thead>
          <tr>
            <th style="border: none; padding: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 5%; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">NO</th>
            <th style="border: none; padding: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 15%; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">TANGGAL</th>
            <th style="border: none; padding: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 30%; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">KEGIATAN</th>
            <th style="border: none; padding: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 5%; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">NO</th>
            <th style="border: none; padding: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 15%; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">TANGGAL</th>
            <th style="border: none; padding: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; width: 30%; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);">KEGIATAN</th>
          </tr>
          <tr>
            <th colspan="3" style="border: none; padding: 6px; background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; font-size: 11px; text-shadow: 1px 1px 2px rgba(0,0,0,0.3);"> SEMESTER 1</th>
            <th colspan="3" style="border: none; padding: 6px; background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); color: #333; font-size: 11px;"> SEMESTER 2</th>
          </tr>
        </thead>
        <tbody>
          ${Math.max(j.length,_.length,12)>0?Array.from({length:Math.max(j.length,_.length,12)},(S,N)=>{const k=j[N],E=_[N];return`
                <tr style="background: ${N%2===0?"rgba(255,255,255,0.9)":"rgba(240,248,255,0.9)"};">
                  <td style="border: none; padding: 6px; text-align: center; font-weight: 500;">${k?N+1:""}</td>
                  <td style="border: none; padding: 6px; text-align: center; font-weight: 500;">${k?be(new Date(k.start_date),"dd/MM/yyyy",{locale:bt}):""}</td>
                  <td style="border: none; padding: 6px; font-weight: 500;">${k?k.name:""}</td>
                  <td style="border: none; padding: 6px; text-align: center; font-weight: 500;">${E?N+1:""}</td>
                  <td style="border: none; padding: 6px; text-align: center; font-weight: 500;">${E?be(new Date(E.start_date),"dd/MM/yyyy",{locale:bt}):""}</td>
                  <td style="border: none; padding: 6px; font-weight: 500;">${E?E.name:""}</td>
                </tr>
              `}).join(""):""}
        </tbody>
      </table>
    `};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[i.jsx(ie,{className:"bg-gradient-to-r from-blue-600 to-purple-600 border-0 shadow-2xl",children:i.jsxs(_e,{className:"text-center py-8",children:[i.jsxs(Ee,{className:"text-3xl font-bold text-white flex items-center justify-center gap-4",children:[i.jsx("div",{className:"p-3 bg-white/20 rounded-full backdrop-blur-sm",children:i.jsx(Nl,{className:"h-8 w-8 text-white"})}),"Print Kalender Akademik"]}),i.jsx("p",{className:"text-blue-100 text-lg max-w-2xl mx-auto mt-4",children:"Cetak kalender akademik dengan desain yang menarik dan profesional. Format landscape dengan warna-warna eye-catching untuk tahun ajaran lengkap."})]})}),i.jsxs(ie,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-xl text-gray-800 flex items-center gap-3",children:[i.jsx(Ve,{className:"h-6 w-6 text-blue-600"}),"Pengaturan Print"]})}),i.jsxs(oe,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Pilih Kelas"}),i.jsxs(Re,{value:t,onValueChange:e,children:[i.jsx(De,{className:"h-12 border-2 border-blue-200 focus:border-blue-500 bg-white",children:i.jsx($e,{placeholder:"Pilih kelas untuk dicetak"})}),i.jsx(Pe,{children:r.map(j=>i.jsx(he,{value:j.id,children:j.name},j.id))})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Tahun Akademik"}),i.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border-2 border-blue-200 h-12 flex items-center",children:i.jsx("span",{className:"font-medium text-gray-800",children:o})})]})]}),t&&i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-6 rounded-xl border-2 border-green-200",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Preview Kalender"]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Kelas:"}),i.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:(w=r.find(j=>j.id===t))==null?void 0:w.name})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Tahun Akademik:"}),i.jsx("span",{className:"text-gray-800",children:o})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium text-gray-600",children:"Total Event:"}),i.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:[c.length," kegiatan"]})]})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(ie,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-xl",children:i.jsxs(oe,{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Ve,{className:"h-6 w-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:"12 Bulan Lengkap"}),i.jsx("p",{className:"text-blue-100 text-sm",children:"Tahun akademik lengkap dalam satu halaman dengan warna berbeda setiap bulan"})]})}),i.jsx(ie,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-xl",children:i.jsxs(oe,{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Nl,{className:"h-6 w-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Format Landscape"}),i.jsx("p",{className:"text-purple-100 text-sm",children:"Desain landscape A4 dengan layout yang optimal dan eye-catching"})]})}),i.jsx(ie,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-xl",children:i.jsxs(oe,{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Gv,{className:"h-6 w-6"})}),i.jsx("h3",{className:"font-semibold mb-2",children:"Siap Print"}),i.jsx("p",{className:"text-green-100 text-sm",children:"Langsung bisa dicetak dengan kualitas tinggi dan warna yang menarik"})]})})]}),i.jsx(ie,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-xl",children:i.jsxs(oe,{className:"p-8 text-center",children:[i.jsxs(K,{onClick:m,className:"h-14 px-8 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold text-lg shadow-xl transform transition-all duration-200 hover:scale-105",disabled:!t,children:[i.jsx(Gv,{className:"h-5 w-5 mr-3"}),"Print Kalender Akademik"]}),!t&&i.jsx("p",{className:"text-gray-500 text-sm mt-3",children:"Silakan pilih kelas terlebih dahulu"})]})})]})})},Mxe=()=>i.jsxs("div",{className:"p-6",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Share Event"}),i.jsx("p",{className:"text-muted-foreground",children:"Fitur share event akan segera tersedia."})]}),Oxe=()=>i.jsxs(Rx,{children:[i.jsx(vt,{index:!0,element:i.jsx(Nxe,{})}),i.jsx(vt,{path:"print",element:i.jsx(Pxe,{})}),i.jsx(vt,{path:"share",element:i.jsx(Mxe,{})})]});var Yg,Ae,a$,s$,rc,di,KN,i$,o$,lm={},l$=[],Rxe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function xs(t,e){for(var r in e)t[r]=e[r];return t}function c$(t){var e=t.parentNode;e&&e.removeChild(t)}function U(t,e,r){var n,a,s,o={};for(s in e)s=="key"?n=e[s]:s=="ref"?a=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Yg.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)o[s]===void 0&&(o[s]=t.defaultProps[s]);return Hh(t,o,n,a,null)}function Hh(t,e,r,n,a){var s={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++a$};return a==null&&Ae.vnode!=null&&Ae.vnode(s),s}function Ir(){return{current:null}}function Tt(t){return t.children}function $xe(t,e,r,n,a){var s;for(s in r)s==="children"||s==="key"||s in e||cm(t,s,null,r[s],n);for(s in e)a&&typeof e[s]!="function"||s==="children"||s==="key"||s==="value"||s==="checked"||r[s]===e[s]||cm(t,s,e[s],r[s],n)}function GN(t,e,r){e[0]==="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||Rxe.test(e)?r:r+"px"}function cm(t,e,r,n,a){var s;e:if(e==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||GN(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||GN(t.style,e,r[e])}else if(e[0]==="o"&&e[1]==="n")s=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=r,r?n||t.addEventListener(e,s?QN:VN,s):t.removeEventListener(e,s?QN:VN,s);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,r))}}function VN(t){rc=!0;try{return this.l[t.type+!1](Ae.event?Ae.event(t):t)}finally{rc=!1}}function QN(t){rc=!0;try{return this.l[t.type+!0](Ae.event?Ae.event(t):t)}finally{rc=!1}}function un(t,e){this.props=t,this.context=e}function ou(t,e){if(e==null)return t.__?ou(t.__,t.__.__k.indexOf(t)+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?ou(t):null}function d$(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return d$(t)}}function Ixe(t){rc?setTimeout(t):i$(t)}function ex(t){(!t.__d&&(t.__d=!0)&&di.push(t)&&!dm.__r++||KN!==Ae.debounceRendering)&&((KN=Ae.debounceRendering)||Ixe)(dm)}function dm(){var t,e,r,n,a,s,o,l;for(di.sort(function(c,d){return c.__v.__b-d.__v.__b});t=di.shift();)t.__d&&(e=di.length,n=void 0,a=void 0,o=(s=(r=t).__v).__e,(l=r.__P)&&(n=[],(a=xs({},s)).__v=s.__v+1,r_(l,s,a,r.__n,l.ownerSVGElement!==void 0,s.__h!=null?[o]:null,n,o??ou(s),s.__h),g$(n,s),s.__e!=o&&d$(s)),di.length>e&&di.sort(function(c,d){return c.__v.__b-d.__v.__b}));dm.__r=0}function u$(t,e,r,n,a,s,o,l,c,d){var u,h,f,m,v,p,g,y=n&&n.__k||l$,b=y.length;for(r.__k=[],u=0;u<e.length;u++)if((m=r.__k[u]=(m=e[u])==null||typeof m=="boolean"?null:typeof m=="string"||typeof m=="number"||typeof m=="bigint"?Hh(null,m,null,null,m):Array.isArray(m)?Hh(Tt,{children:m},null,null,null):m.__b>0?Hh(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)!=null){if(m.__=r,m.__b=r.__b+1,(f=y[u])===null||f&&m.key==f.key&&m.type===f.type)y[u]=void 0;else for(h=0;h<b;h++){if((f=y[h])&&m.key==f.key&&m.type===f.type){y[h]=void 0;break}f=null}r_(t,m,f=f||lm,a,s,o,l,c,d),v=m.__e,(h=m.ref)&&f.ref!=h&&(g||(g=[]),f.ref&&g.push(f.ref,null,m),g.push(h,m.__c||v,m)),v!=null?(p==null&&(p=v),typeof m.type=="function"&&m.__k===f.__k?m.__d=c=h$(m,c,t):c=f$(t,m,f,y,v,c),typeof r.type=="function"&&(r.__d=c)):c&&f.__e==c&&c.parentNode!=t&&(c=ou(f))}for(r.__e=p,u=b;u--;)y[u]!=null&&(typeof r.type=="function"&&y[u].__e!=null&&y[u].__e==r.__d&&(r.__d=m$(n).nextSibling),v$(y[u],y[u]));if(g)for(u=0;u<g.length;u++)p$(g[u],g[++u],g[++u])}function h$(t,e,r){for(var n,a=t.__k,s=0;a&&s<a.length;s++)(n=a[s])&&(n.__=t,e=typeof n.type=="function"?h$(n,e,r):f$(r,n,n,a,n.__e,e));return e}function um(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(r){um(r,e)}):e.push(t)),e}function f$(t,e,r,n,a,s){var o,l,c;if(e.__d!==void 0)o=e.__d,e.__d=void 0;else if(r==null||a!=s||a.parentNode==null)e:if(s==null||s.parentNode!==t)t.appendChild(a),o=null;else{for(l=s,c=0;(l=l.nextSibling)&&c<n.length;c+=1)if(l==a)break e;t.insertBefore(a,s),o=s}return o!==void 0?o:a.nextSibling}function m$(t){var e,r,n;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((r=t.__k[e])&&(n=m$(r)))return n}return null}function r_(t,e,r,n,a,s,o,l,c){var d,u,h,f,m,v,p,g,y,b,w,j,_,S,N,k=e.type;if(e.constructor!==void 0)return null;r.__h!=null&&(c=r.__h,l=e.__e=r.__e,e.__h=null,s=[l]),(d=Ae.__b)&&d(e);try{e:if(typeof k=="function"){if(g=e.props,y=(d=k.contextType)&&n[d.__c],b=d?y?y.props.value:d.__:n,r.__c?p=(u=e.__c=r.__c).__=u.__E:("prototype"in k&&k.prototype.render?e.__c=u=new k(g,b):(e.__c=u=new un(g,b),u.constructor=k,u.render=Fxe),y&&y.sub(u),u.props=g,u.state||(u.state={}),u.context=b,u.__n=n,h=u.__d=!0,u.__h=[],u._sb=[]),u.__s==null&&(u.__s=u.state),k.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=xs({},u.__s)),xs(u.__s,k.getDerivedStateFromProps(g,u.__s))),f=u.props,m=u.state,u.__v=e,h)k.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(k.getDerivedStateFromProps==null&&g!==f&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(g,b),!u.__e&&u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(g,u.__s,b)===!1||e.__v===r.__v){for(e.__v!==r.__v&&(u.props=g,u.state=u.__s,u.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.forEach(function(E){E&&(E.__=e)}),w=0;w<u._sb.length;w++)u.__h.push(u._sb[w]);u._sb=[],u.__h.length&&o.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(g,u.__s,b),u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(f,m,v)})}if(u.context=b,u.props=g,u.__P=t,j=Ae.__r,_=0,"prototype"in k&&k.prototype.render){for(u.state=u.__s,u.__d=!1,j&&j(e),d=u.render(u.props,u.state,u.context),S=0;S<u._sb.length;S++)u.__h.push(u._sb[S]);u._sb=[]}else do u.__d=!1,j&&j(e),d=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++_<25);u.state=u.__s,u.getChildContext!=null&&(n=xs(xs({},n),u.getChildContext())),h||u.getSnapshotBeforeUpdate==null||(v=u.getSnapshotBeforeUpdate(f,m)),N=d!=null&&d.type===Tt&&d.key==null?d.props.children:d,u$(t,Array.isArray(N)?N:[N],e,r,n,a,s,o,l,c),u.base=e.__e,e.__h=null,u.__h.length&&o.push(u),p&&(u.__E=u.__=null),u.__e=!1}else s==null&&e.__v===r.__v?(e.__k=r.__k,e.__e=r.__e):e.__e=Lxe(r.__e,e,r,n,a,s,o,c);(d=Ae.diffed)&&d(e)}catch(E){e.__v=null,(c||s!=null)&&(e.__e=l,e.__h=!!c,s[s.indexOf(l)]=null),Ae.__e(E,e,r)}}function g$(t,e){Ae.__c&&Ae.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(n){n.call(r)})}catch(n){Ae.__e(n,r.__v)}})}function Lxe(t,e,r,n,a,s,o,l){var c,d,u,h=r.props,f=e.props,m=e.type,v=0;if(m==="svg"&&(a=!0),s!=null){for(;v<s.length;v++)if((c=s[v])&&"setAttribute"in c==!!m&&(m?c.localName===m:c.nodeType===3)){t=c,s[v]=null;break}}if(t==null){if(m===null)return document.createTextNode(f);t=a?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,f.is&&f),s=null,l=!1}if(m===null)h===f||l&&t.data===f||(t.data=f);else{if(s=s&&Yg.call(t.childNodes),d=(h=r.props||lm).dangerouslySetInnerHTML,u=f.dangerouslySetInnerHTML,!l){if(s!=null)for(h={},v=0;v<t.attributes.length;v++)h[t.attributes[v].name]=t.attributes[v].value;(u||d)&&(u&&(d&&u.__html==d.__html||u.__html===t.innerHTML)||(t.innerHTML=u&&u.__html||""))}if($xe(t,f,h,a,l),u)e.__k=[];else if(v=e.props.children,u$(t,Array.isArray(v)?v:[v],e,r,n,a&&m!=="foreignObject",s,o,s?s[0]:r.__k&&ou(r,0),l),s!=null)for(v=s.length;v--;)s[v]!=null&&c$(s[v]);l||("value"in f&&(v=f.value)!==void 0&&(v!==t.value||m==="progress"&&!v||m==="option"&&v!==h.value)&&cm(t,"value",v,h.value,!1),"checked"in f&&(v=f.checked)!==void 0&&v!==t.checked&&cm(t,"checked",v,h.checked,!1))}return t}function p$(t,e,r){try{typeof t=="function"?t(e):t.current=e}catch(n){Ae.__e(n,r)}}function v$(t,e,r){var n,a;if(Ae.unmount&&Ae.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||p$(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){Ae.__e(s,e)}n.base=n.__P=null,t.__c=void 0}if(n=t.__k)for(a=0;a<n.length;a++)n[a]&&v$(n[a],e,r||typeof t.type!="function");r||t.__e==null||c$(t.__e),t.__=t.__e=t.__d=void 0}function Fxe(t,e,r){return this.constructor(t,r)}function lu(t,e,r){var n,a,s;Ae.__&&Ae.__(t,e),a=(n=typeof r=="function")?null:e.__k,s=[],r_(e,t=(!n&&r||e).__k=U(Tt,null,[t]),a||lm,lm,e.ownerSVGElement!==void 0,!n&&r?[r]:a?null:e.firstChild?Yg.call(e.childNodes):null,s,!n&&r?r:a?a.__e:e.firstChild,n),g$(s,t)}function Bxe(t,e){var r={__c:e="__cC"+o$++,__:t,Consumer:function(n,a){return n.children(a)},Provider:function(n){var a,s;return this.getChildContext||(a=[],(s={})[e]=this,this.getChildContext=function(){return s},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&a.some(function(l){l.__e=!0,ex(l)})},this.sub=function(o){a.push(o);var l=o.componentWillUnmount;o.componentWillUnmount=function(){a.splice(a.indexOf(o),1),l&&l.call(o)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}Yg=l$.slice,Ae={__e:function(t,e,r,n){for(var a,s,o;e=e.__;)if((a=e.__c)&&!a.__)try{if((s=a.constructor)&&s.getDerivedStateFromError!=null&&(a.setState(s.getDerivedStateFromError(t)),o=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,n||{}),o=a.__d),o)return a.__E=a}catch(l){t=l}throw t}},a$=0,s$=function(t){return t!=null&&t.constructor===void 0},rc=!1,un.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=xs({},this.state),typeof t=="function"&&(t=t(xs({},r),this.props)),t&&xs(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),ex(this))},un.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ex(this))},un.prototype.render=Tt,di=[],i$=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,dm.__r=0,o$=0;var ta,mv,JN,y$=[],gv=[],YN=Ae.__b,XN=Ae.__r,ZN=Ae.diffed,eE=Ae.__c,tE=Ae.unmount;function qxe(){for(var t;t=y$.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Wh),t.__H.__h.forEach(tx),t.__H.__h=[]}catch(e){t.__H.__h=[],Ae.__e(e,t.__v)}}Ae.__b=function(t){ta=null,YN&&YN(t)},Ae.__r=function(t){XN&&XN(t);var e=(ta=t.__c).__H;e&&(mv===ta?(e.__h=[],ta.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=gv,r.__N=r.i=void 0})):(e.__h.forEach(Wh),e.__h.forEach(tx),e.__h=[])),mv=ta},Ae.diffed=function(t){ZN&&ZN(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(y$.push(e)!==1&&JN===Ae.requestAnimationFrame||((JN=Ae.requestAnimationFrame)||Uxe)(qxe)),e.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==gv&&(r.__=r.__V),r.i=void 0,r.__V=gv})),mv=ta=null},Ae.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Wh),r.__h=r.__h.filter(function(n){return!n.__||tx(n)})}catch(n){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Ae.__e(n,r.__v)}}),eE&&eE(t,e)},Ae.unmount=function(t){tE&&tE(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{Wh(n)}catch(a){e=a}}),r.__H=void 0,e&&Ae.__e(e,r.__v))};var rE=typeof requestAnimationFrame=="function";function Uxe(t){var e,r=function(){clearTimeout(n),rE&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(r,100);rE&&(e=requestAnimationFrame(r))}function Wh(t){var e=ta,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),ta=e}function tx(t){var e=ta;t.__c=t.__(),ta=e}function zxe(t,e){for(var r in e)t[r]=e[r];return t}function nE(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var n in e)if(n!=="__source"&&t[n]!==e[n])return!0;return!1}function aE(t){this.props=t}(aE.prototype=new un).isPureReactComponent=!0,aE.prototype.shouldComponentUpdate=function(t,e){return nE(this.props,t)||nE(this.state,e)};var sE=Ae.__b;Ae.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),sE&&sE(t)};var Hxe=Ae.__e;Ae.__e=function(t,e,r,n){if(t.then){for(var a,s=e;s=s.__;)if((a=s.__c)&&a.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),a.__c(t,e)}Hxe(t,e,r,n)};var iE=Ae.unmount;function b$(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),t.__c.__H=null),(t=zxe({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(n){return b$(n,e,r)})),t}function x$(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(n){return x$(n,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}function pv(){this.__u=0,this.t=null,this.__b=null}function w$(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function jh(){this.u=null,this.o=null}Ae.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),iE&&iE(t)},(pv.prototype=new un).__c=function(t,e){var r=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var a=w$(n.__v),s=!1,o=function(){s||(s=!0,r.__R=null,a?a(l):l())};r.__R=o;var l=function(){if(!--n.__u){if(n.state.__a){var d=n.state.__a;n.__v.__k[0]=x$(d,d.__c.__P,d.__c.__O)}var u;for(n.setState({__a:n.__b=null});u=n.t.pop();)u.forceUpdate()}},c=e.__h===!0;n.__u++||c||n.setState({__a:n.__b=n.__v.__k[0]}),t.then(o,o)},pv.prototype.componentWillUnmount=function(){this.t=[]},pv.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=b$(this.__b,r,n.__O=n.__P)}this.__b=null}var a=e.__a&&U(Tt,null,t.fallback);return a&&(a.__h=null),[U(Tt,null,e.__a?null:t.children),a]};var oE=function(t,e,r){if(++r[1]===r[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(r=t.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.u=r=r[2]}};function Wxe(t){return this.getChildContext=function(){return t.context},t.children}function Kxe(t){var e=this,r=t.i;e.componentWillUnmount=function(){lu(null,e.l),e.l=null,e.i=null},e.i&&e.i!==r&&e.componentWillUnmount(),t.__v?(e.l||(e.i=r,e.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),e.i.appendChild(n)},insertBefore:function(n,a){this.childNodes.push(n),e.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.i.removeChild(n)}}),lu(U(Wxe,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function Gxe(t,e){var r=U(Kxe,{__v:t,i:e});return r.containerInfo=e,r}(jh.prototype=new un).__a=function(t){var e=this,r=w$(e.__v),n=e.o.get(t);return n[0]++,function(a){var s=function(){e.props.revealOrder?(n.push(a),oE(e,t,n)):a()};r?r(s):s()}},jh.prototype.render=function(t){this.u=null,this.o=new Map;var e=um(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.o.set(e[r],this.u=[1,0,this.u]);return t.children},jh.prototype.componentDidUpdate=jh.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,r){oE(t,r,e)})};var Vxe=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Qxe=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Jxe=typeof document<"u",Yxe=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};un.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(un.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var lE=Ae.event;function Xxe(){}function Zxe(){return this.cancelBubble}function e0e(){return this.defaultPrevented}Ae.event=function(t){return lE&&(t=lE(t)),t.persist=Xxe,t.isPropagationStopped=Zxe,t.isDefaultPrevented=e0e,t.nativeEvent=t};var cE={configurable:!0,get:function(){return this.class}},dE=Ae.vnode;Ae.vnode=function(t){var e=t.type,r=t.props,n=r;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var s in n={},r){var o=r[s];Jxe&&s==="children"&&e==="noscript"||s==="value"&&"defaultValue"in r&&o==null||(s==="defaultValue"&&"value"in r&&r.value==null?s="value":s==="download"&&o===!0?o="":/ondoubleclick/i.test(s)?s="ondblclick":/^onchange(textarea|input)/i.test(s+e)&&!Yxe(r.type)?s="oninput":/^onfocus$/i.test(s)?s="onfocusin":/^onblur$/i.test(s)?s="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(s)?s=s.toLowerCase():a&&Qxe.test(s)?s=s.replace(/[A-Z0-9]/g,"-$&").toLowerCase():o===null&&(o=void 0),/^oninput$/i.test(s)&&(s=s.toLowerCase(),n[s]&&(s="oninputCapture")),n[s]=o)}e=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=um(r.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),e=="select"&&n.defaultValue!=null&&(n.value=um(r.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),t.props=n,r.class!=r.className&&(cE.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",cE))}t.$$typeof=Vxe,dE&&dE(t)};var uE=Ae.__r;Ae.__r=function(t){uE&&uE(t),t.__c};const _$=[],rx=new Map;function n_(t){_$.push(t),rx.forEach(e=>{S$(e,t)})}function t0e(t){t.isConnected&&t.getRootNode&&j$(t.getRootNode())}function j$(t){let e=rx.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const r=n0e();r&&(e.nonce=r);const n=t===document?document.head:t,a=t===document?n.querySelector("script,link[rel=stylesheet],link[as=style],style"):n.firstChild;n.insertBefore(e,a)}rx.set(t,e),r0e(e)}}function r0e(t){for(const e of _$)S$(t,e)}function S$(t,e){const{sheet:r}=t,n=r.cssRules.length;e.split("}").forEach((a,s)=>{a=a.trim(),a&&r.insertRule(a+"}",n+s)})}let vv;function n0e(){return vv===void 0&&(vv=a0e()),vv}function a0e(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&j$(document);var s0e=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';n_(s0e);class a_{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:r}=this;r[e]=(r[e]||0)+1,this.clearTimeout()}resume(e="",r){let{pauseDepths:n}=this;e in n&&(r?delete n[e]:(n[e]-=1,n[e]<=0&&delete n[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function s_(t){t.parentNode&&t.parentNode.removeChild(t)}function wr(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(k$(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function k$(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function i0e(t,e){let r=t instanceof HTMLElement?[t]:t,n=[];for(let a=0;a<r.length;a+=1){let s=r[a].querySelectorAll(e);for(let o=0;o<s.length;o+=1)n.push(s[o])}return n}const o0e=/(top|left|right|bottom|width|height)$/i;function vd(t,e){for(let r in e)N$(t,r,e[r])}function N$(t,e,r){r==null?t.style[e]="":typeof r=="number"&&o0e.test(e)?t.style[e]=`${r}px`:t.style[e]=r}function E$(t){var e,r;return(r=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&r!==void 0?r:t.target}let hE=0;function Xg(){return hE+=1,"fc-dom-"+hE}function Zg(t){t.preventDefault()}function l0e(t,e){return r=>{let n=wr(r.target,t);n&&e.call(n,r,n)}}function C$(t,e,r,n){let a=l0e(r,n);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function c0e(t,e,r,n){let a;return C$(t,"mouseover",e,(s,o)=>{if(o!==a){a=o,r(s,o);let l=c=>{a=null,n(c,o),o.removeEventListener("mouseleave",l)};o.addEventListener("mouseleave",l)}})}const fE=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function d0e(t,e){let r=n=>{e(n),fE.forEach(a=>{t.removeEventListener(a,r)})};fE.forEach(n=>{t.addEventListener(n,r)})}function A$(t){return Object.assign({onClick:t},T$(t))}function T$(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let mE=0;function go(){return mE+=1,String(mE)}function ep(){document.body.classList.add("fc-not-allowed")}function tp(){document.body.classList.remove("fc-not-allowed")}function u0e(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Zg)}function h0e(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Zg)}function f0e(t){t.addEventListener("contextmenu",Zg)}function m0e(t){t.removeEventListener("contextmenu",Zg)}function g0e(t){let e=[],r=[],n,a;for(typeof t=="string"?r=t.split(/\s*,\s*/):typeof t=="function"?r=[t]:Array.isArray(t)&&(r=t),n=0;n<r.length;n+=1)a=r[n],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function p0e(t,e,r){let n,a;for(n=0;n<r.length;n+=1)if(a=v0e(t,e,r[n]),a)return a;return 0}function v0e(t,e,r){return r.func?r.func(t,e):y0e(t[r.field],e[r.field])*(r.order||1)}function y0e(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function al(t,e){let r=String(t);return"000".substr(0,e-r.length)+r}function yd(t,e,r){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((n,a,s)=>n.replace("$"+s,a||""),t):r}function b0e(t,e){return t-e}function Kh(t){return t%1===0}function x0e(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),r=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!r)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+r.getBoundingClientRect().width}const gE=["years","months","days","milliseconds"],w0e=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function et(t,e){return typeof t=="string"?_0e(t):typeof t=="object"&&t?pE(t):typeof t=="number"?pE({[e||"milliseconds"]:t}):null}function _0e(t){let e=w0e.exec(t);if(e){let r=e[1]?-1:1;return{years:0,months:0,days:r*(e[2]?parseInt(e[2],10):0),milliseconds:r*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function pE(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},r=t.weeks||t.week;return r&&(e.days+=r*7,e.specifiedWeeks=!0),e}function j0e(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function nx(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function S0e(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function k0e(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function N0e(t){return sl(t)/365}function E0e(t){return sl(t)/30}function sl(t){return Ln(t)/864e5}function Ln(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function i_(t,e){let r=null;for(let n=0;n<gE.length;n+=1){let a=gE[n];if(e[a]){let s=t[a]/e[a];if(!Kh(s)||r!==null&&r!==s)return null;r=s}else if(t[a])return null}return r}function ax(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Is(t,e,r){if(t===e)return!0;let n=t.length,a;if(n!==e.length)return!1;for(a=0;a<n;a+=1)if(!(r?r(t[a],e[a]):t[a]===e[a]))return!1;return!0}const C0e=["sun","mon","tue","wed","thu","fri","sat"];function vE(t,e){let r=ws(t);return r[2]+=e*7,Vr(r)}function Nr(t,e){let r=ws(t);return r[2]+=e,Vr(r)}function Ls(t,e){let r=ws(t);return r[6]+=e,Vr(r)}function A0e(t,e){return po(t,e)/7}function po(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function T0e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function D0e(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function P0e(t,e){return(e.valueOf()-t.valueOf())/1e3}function M0e(t,e){let r=Pt(t),n=Pt(e);return{years:0,months:0,days:Math.round(po(r,n)),milliseconds:e.valueOf()-n.valueOf()-(t.valueOf()-r.valueOf())}}function O0e(t,e){let r=hm(t,e);return r!==null&&r%7===0?r/7:null}function hm(t,e){return _s(t)===_s(e)?Math.round(po(t,e)):null}function Pt(t){return Vr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function R0e(t){return Vr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function $0e(t){return Vr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function I0e(t){return Vr([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function L0e(t,e,r){let n=t.getUTCFullYear(),a=yv(t,n,e,r);if(a<1)return yv(t,n-1,e,r);let s=yv(t,n+1,e,r);return s>=1?Math.min(a,s):a}function yv(t,e,r,n){let a=Vr([e,0,1+F0e(e,r,n)]),s=Pt(t),o=Math.round(po(a,s));return Math.floor(o/7)+1}function F0e(t,e,r){let n=7+e-r;return-((7+Vr([t,0,n]).getUTCDay()-e)%7)+n-1}function yE(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function bE(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function ws(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function Vr(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function D$(t){return!isNaN(t.valueOf())}function _s(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function P$(t,e,r=!1){let n=t.toISOString();return n=n.replace(".000",""),r&&(n=n.replace("T00:00:00Z","")),n.length>10&&(e==null?n=n.replace("Z",""):e!==0&&(n=n.replace("Z",l_(e,!0)))),n}function o_(t){return t.toISOString().replace(/T.*$/,"")}function B0e(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function q0e(t){return al(t.getUTCHours(),2)+":"+al(t.getUTCMinutes(),2)+":"+al(t.getUTCSeconds(),2)}function l_(t,e=!1){let r=t<0?"-":"+",n=Math.abs(t),a=Math.floor(n/60),s=Math.round(n%60);return e?`${r+al(a,2)}:${al(s,2)}`:`GMT${r}${a}${s?`:${al(s,2)}`:""}`}function Oe(t,e,r){let n,a;return function(...s){if(!n)a=t.apply(this,s);else if(!Is(n,s)){let o=t.apply(this,s);(!e||!e(o,a))&&(a=o)}return n=s,a}}function Gh(t,e,r){let n,a;return s=>(n?ua(n,s)||(a=t.call(this,s)):a=t.call(this,s),n=s,a)}const bv={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},fm={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},Sh=/\s*([ap])\.?m\.?/i,U0e=/,/g,z0e=/\s+/g,H0e=/\u200e/g,W0e=/UTC|GMT/;class K0e{constructor(e){let r={},n={},a=9;for(let s in e)s in bv?(n[s]=e[s],bv[s]<9&&(a=Math.min(bv[s],a))):(r[s]=e[s],s in fm&&(a=Math.min(fm[s],a)));this.standardDateProps=r,this.extendedSettings=n,this.smallestUnitNum=a,this.buildFormattingFunc=Oe(xE)}format(e,r){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,r)(e)}formatRange(e,r,n,a){let{standardDateProps:s,extendedSettings:o}=this,l=X0e(e.marker,r.marker,n.calendarSystem);if(!l)return this.format(e,n);let c=l;c>1&&(s.year==="numeric"||s.year==="2-digit")&&(s.month==="numeric"||s.month==="2-digit")&&(s.day==="numeric"||s.day==="2-digit")&&(c=1);let d=this.format(e,n),u=this.format(r,n);if(d===u)return d;let h=Z0e(s,c),f=xE(h,o,n),m=f(e),v=f(r),p=ewe(d,m,u,v),g=o.separator||a||n.defaultSeparator||"";return p?p.before+m+g+v+p.after:d+g+u}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function xE(t,e,r){let n=Object.keys(t).length;return n===1&&t.timeZoneName==="short"?a=>l_(a.timeZoneOffset):n===0&&e.week?a=>Y0e(r.computeWeekNumber(a.marker),r.weekText,r.weekTextLong,r.locale,e.week):G0e(t,e,r)}function G0e(t,e,r){t=Object.assign({},t),e=Object.assign({},e),V0e(t,e),t.timeZone="UTC";let n=new Intl.DateTimeFormat(r.locale.codes,t),a;if(e.omitZeroMinute){let s=Object.assign({},t);delete s.minute,a=new Intl.DateTimeFormat(r.locale.codes,s)}return s=>{let{marker:o}=s,l;a&&!o.getUTCMinutes()?l=a:l=n;let c=l.format(o);return Q0e(c,s,t,e,r)}}function V0e(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function Q0e(t,e,r,n,a){return t=t.replace(H0e,""),r.timeZoneName==="short"&&(t=J0e(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":l_(e.timeZoneOffset))),n.omitCommas&&(t=t.replace(U0e,"").trim()),n.omitZeroMinute&&(t=t.replace(":00","")),n.meridiem===!1?t=t.replace(Sh,"").trim():n.meridiem==="narrow"?t=t.replace(Sh,(s,o)=>o.toLocaleLowerCase()):n.meridiem==="short"?t=t.replace(Sh,(s,o)=>`${o.toLocaleLowerCase()}m`):n.meridiem==="lowercase"&&(t=t.replace(Sh,s=>s.toLocaleLowerCase())),t=t.replace(z0e," "),t=t.trim(),t}function J0e(t,e){let r=!1;return t=t.replace(W0e,()=>(r=!0,e)),r||(t+=` ${e}`),t}function Y0e(t,e,r,n,a){let s=[];return a==="long"?s.push(r):(a==="short"||a==="narrow")&&s.push(e),(a==="long"||a==="short")&&s.push(" "),s.push(n.simpleNumberFormat.format(t)),n.options.direction==="rtl"&&s.reverse(),s.join("")}function X0e(t,e,r){return r.getMarkerYear(t)!==r.getMarkerYear(e)?5:r.getMarkerMonth(t)!==r.getMarkerMonth(e)?4:r.getMarkerDay(t)!==r.getMarkerDay(e)?2:_s(t)!==_s(e)?1:0}function Z0e(t,e){let r={};for(let n in t)(!(n in fm)||fm[n]<=e)&&(r[n]=t[n]);return r}function ewe(t,e,r,n){let a=0;for(;a<t.length;){let s=t.indexOf(e,a);if(s===-1)break;let o=t.substr(0,s);a=s+e.length;let l=t.substr(a),c=0;for(;c<r.length;){let d=r.indexOf(n,c);if(d===-1)break;let u=r.substr(0,d);c=d+n.length;let h=r.substr(c);if(o===u&&l===h)return{before:o,after:l}}}return null}function wE(t,e){let r=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:r,year:r[0],month:r[1],day:r[2],hour:r[3],minute:r[4],second:r[5],millisecond:r[6]}}function mm(t,e,r,n){let a=wE(t,r.calendarSystem),s=e?wE(e,r.calendarSystem):null;return{date:a,start:a,end:s,timeZone:r.timeZone,localeCodes:r.locale.codes,defaultSeparator:n||r.defaultSeparator}}class twe{constructor(e){this.cmdStr=e}format(e,r,n){return r.cmdFormatter(this.cmdStr,mm(e,null,r,n))}formatRange(e,r,n,a){return n.cmdFormatter(this.cmdStr,mm(e,r,n,a))}}class rwe{constructor(e){this.func=e}format(e,r,n){return this.func(mm(e,null,r,n))}formatRange(e,r,n,a){return this.func(mm(e,r,n,a))}}function qt(t){return typeof t=="object"&&t?new K0e(t):typeof t=="string"?new twe(t):typeof t=="function"?new rwe(t):null}const _E={navLinkDayClick:X,navLinkWeekClick:X,duration:et,bootstrapFontAwesome:X,buttonIcons:X,customButtons:X,defaultAllDayEventDuration:et,defaultTimedEventDuration:et,nextDayThreshold:et,scrollTime:et,scrollTimeReset:Boolean,slotMinTime:et,slotMaxTime:et,dayPopoverFormat:qt,slotDuration:et,snapDuration:et,headerToolbar:X,footerToolbar:X,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:qt,dayHeaderClassNames:X,dayHeaderContent:X,dayHeaderDidMount:X,dayHeaderWillUnmount:X,dayCellClassNames:X,dayCellContent:X,dayCellDidMount:X,dayCellWillUnmount:X,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:X,weekNumbers:Boolean,weekNumberClassNames:X,weekNumberContent:X,weekNumberDidMount:X,weekNumberWillUnmount:X,editable:Boolean,viewClassNames:X,viewDidMount:X,viewWillUnmount:X,nowIndicator:Boolean,nowIndicatorClassNames:X,nowIndicatorContent:X,nowIndicatorDidMount:X,nowIndicatorWillUnmount:X,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:X,locale:X,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:X,eventOrder:g0e,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:X,contentHeight:X,direction:String,weekNumberFormat:qt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:X,initialDate:X,now:X,eventDataTransform:X,stickyHeaderDates:X,stickyFooterScrollbar:X,viewHeight:X,defaultAllDay:Boolean,eventSourceFailure:X,eventSourceSuccess:X,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:X,eventConstraint:X,eventAllow:X,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:X,eventContent:X,eventDidMount:X,eventWillUnmount:X,selectConstraint:X,selectOverlap:X,selectAllow:X,droppable:Boolean,unselectCancel:String,slotLabelFormat:X,slotLaneClassNames:X,slotLaneContent:X,slotLaneDidMount:X,slotLaneWillUnmount:X,slotLabelClassNames:X,slotLabelContent:X,slotLabelDidMount:X,slotLabelWillUnmount:X,dayMaxEvents:X,dayMaxEventRows:X,dayMinWidth:Number,slotLabelInterval:et,allDayText:String,allDayClassNames:X,allDayContent:X,allDayDidMount:X,allDayWillUnmount:X,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:qt,rerenderDelay:Number,moreLinkText:X,moreLinkHint:X,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:X,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:et,hiddenDays:X,fixedWeekCount:Boolean,validRange:X,visibleRange:X,titleFormat:X,eventInteractive:Boolean,noEventsText:String,viewHint:X,navLinkHint:X,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:X,moreLinkClassNames:X,moreLinkContent:X,moreLinkDidMount:X,moreLinkWillUnmount:X,monthStartFormat:qt,handleCustomRendering:X,customRenderingMetaMap:X,customRenderingReplaces:Boolean},Ti={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},jE={datesSet:X,eventsSet:X,eventAdd:X,eventChange:X,eventRemove:X,windowResize:X,eventClick:X,eventMouseEnter:X,eventMouseLeave:X,select:X,unselect:X,loading:X,_unmount:X,_beforeprint:X,_afterprint:X,_noEventDrop:X,_noEventResize:X,_resize:X,_scrollRequest:X},SE={buttonText:X,buttonHints:X,views:X,plugins:X,initialEvents:X,events:X,eventSources:X},ii={headerToolbar:oi,footerToolbar:oi,buttonText:oi,buttonHints:oi,buttonIcons:oi,dateIncrement:oi,plugins:kh,events:kh,eventSources:kh,resources:kh};function oi(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?ua(t,e):t===e}function kh(t,e){return Array.isArray(t)&&Array.isArray(e)?Is(t,e):t===e}const nwe={type:String,component:X,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:X,usesMinMaxTime:Boolean,classNames:X,content:X,didMount:X,willUnmount:X};function xv(t){return c_(t,ii)}function rp(t,e){let r={},n={};for(let a in e)a in t&&(r[a]=e[a](t[a]));for(let a in t)a in e||(n[a]=t[a]);return{refined:r,extra:n}}function X(t){return t}const{hasOwnProperty:gm}=Object.prototype;function c_(t,e){let r={};if(e){for(let n in e)if(e[n]===oi){let a=[];for(let s=t.length-1;s>=0;s-=1){let o=t[s][n];if(typeof o=="object"&&o)a.unshift(o);else if(o!==void 0){r[n]=o;break}}a.length&&(r[n]=c_(a))}}for(let n=t.length-1;n>=0;n-=1){let a=t[n];for(let s in a)s in r||(r[s]=a[s])}return r}function Ji(t,e){let r={};for(let n in t)e(t[n],n)&&(r[n]=t[n]);return r}function Fa(t,e){let r={};for(let n in t)r[n]=e(t[n],n);return r}function M$(t){let e={};for(let r of t)e[r]=!0;return e}function d_(t){let e=[];for(let r in t)e.push(t[r]);return e}function ua(t,e){if(t===e)return!0;for(let r in t)if(gm.call(t,r)&&!(r in e))return!1;for(let r in e)if(gm.call(e,r)&&t[r]!==e[r])return!1;return!0}const awe=/^on[A-Z]/;function swe(t,e){const r=sx(t,e);for(let n of r)if(!awe.test(n))return!1;return!0}function sx(t,e){let r=[];for(let n in t)gm.call(t,n)&&(n in e||r.push(n));for(let n in e)gm.call(e,n)&&t[n]!==e[n]&&r.push(n);return r}function wv(t,e,r={}){if(t===e)return!0;for(let n in e)if(!(n in t&&iwe(t[n],e[n],r[n])))return!1;for(let n in t)if(!(n in e))return!1;return!0}function iwe(t,e,r){return t===e||r===!0?!0:r?r(t,e):!1}function owe(t,e=0,r,n=1){let a=[];r==null&&(r=Object.keys(t).length);for(let s=e;s<r;s+=n){let o=t[s];o!==void 0&&a.push(o)}return a}let O$={};function lwe(t,e){O$[t]=e}function cwe(t){return new O$[t]}class dwe{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Vr(e)}markerToArray(e){return ws(e)}}lwe("gregory",dwe);const uwe=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function hwe(t){let e=uwe.exec(t);if(e){let r=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(D$(r)){let n=null;return e[13]&&(n=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:r,isTimeUnspecified:!e[6],timeZoneOffset:n}}}return null}class fwe{constructor(e){let r=this.timeZone=e.timeZone,n=r!=="local"&&r!=="UTC";e.namedTimeZoneImpl&&n&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(r)),this.canComputeOffset=!!(!n||this.namedTimeZoneImpl),this.calendarSystem=cwe(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let r=this.createMarkerMeta(e);return r===null?null:r.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Vr(yE(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let r=null;return typeof e=="number"?r=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(r=this.timestampToMarker(e))):Array.isArray(e)&&(r=Vr(e)),r===null||!D$(r)?null:{marker:r,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let r=hwe(e);if(r===null)return null;let{marker:n}=r,a=null;return r.timeZoneOffset!==null&&(this.canComputeOffset?n=this.timestampToMarker(n.valueOf()-r.timeZoneOffset*60*1e3):a=r.timeZoneOffset),{marker:n,isTimeUnspecified:r.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,r){let n=this.calendarSystem.markerToArray(e);return n[0]+=r.years,n[1]+=r.months,n[2]+=r.days,n[6]+=r.milliseconds,this.calendarSystem.arrayToMarker(n)}subtract(e,r){let n=this.calendarSystem.markerToArray(e);return n[0]-=r.years,n[1]-=r.months,n[2]-=r.days,n[6]-=r.milliseconds,this.calendarSystem.arrayToMarker(n)}addYears(e,r){let n=this.calendarSystem.markerToArray(e);return n[0]+=r,this.calendarSystem.arrayToMarker(n)}addMonths(e,r){let n=this.calendarSystem.markerToArray(e);return n[1]+=r,this.calendarSystem.arrayToMarker(n)}diffWholeYears(e,r){let{calendarSystem:n}=this;return _s(e)===_s(r)&&n.getMarkerDay(e)===n.getMarkerDay(r)&&n.getMarkerMonth(e)===n.getMarkerMonth(r)?n.getMarkerYear(r)-n.getMarkerYear(e):null}diffWholeMonths(e,r){let{calendarSystem:n}=this;return _s(e)===_s(r)&&n.getMarkerDay(e)===n.getMarkerDay(r)?n.getMarkerMonth(r)-n.getMarkerMonth(e)+(n.getMarkerYear(r)-n.getMarkerYear(e))*12:null}greatestWholeUnit(e,r){let n=this.diffWholeYears(e,r);return n!==null?{unit:"year",value:n}:(n=this.diffWholeMonths(e,r),n!==null?{unit:"month",value:n}:(n=O0e(e,r),n!==null?{unit:"week",value:n}:(n=hm(e,r),n!==null?{unit:"day",value:n}:(n=T0e(e,r),Kh(n)?{unit:"hour",value:n}:(n=D0e(e,r),Kh(n)?{unit:"minute",value:n}:(n=P0e(e,r),Kh(n)?{unit:"second",value:n}:{unit:"millisecond",value:r.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,r,n){let a;return n.years&&(a=this.diffWholeYears(e,r),a!==null)?a/N0e(n):n.months&&(a=this.diffWholeMonths(e,r),a!==null)?a/E0e(n):n.days&&(a=hm(e,r),a!==null)?a/sl(n):(r.valueOf()-e.valueOf())/Ln(n)}startOf(e,r){return r==="year"?this.startOfYear(e):r==="month"?this.startOfMonth(e):r==="week"?this.startOfWeek(e):r==="day"?Pt(e):r==="hour"?R0e(e):r==="minute"?$0e(e):r==="second"?I0e(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):L0e(e,this.weekDow,this.weekDoy)}format(e,r,n={}){return r.format({marker:e,timeZoneOffset:n.forcedTzo!=null?n.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,r,n,a={}){return a.isEndExclusive&&(r=Ls(r,-1)),n.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:r,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(r)},this,a.defaultSeparator)}formatIso(e,r={}){let n=null;return r.omitTimeZoneOffset||(r.forcedTzo!=null?n=r.forcedTzo:n=this.offsetForMarker(e)),P$(e,n,r.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Vr(yE(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Vr(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-bE(ws(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(ws(e)):null}toDate(e,r){return this.timeZone==="local"?bE(ws(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(ws(e))*1e3*60):new Date(e.valueOf()-(r||0))}}class zu{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let r,n;if(typeof e=="object"&&e){r=Object.assign({},this.iconClasses);for(n in e)r[n]=this.applyIconOverridePrefix(e[n]);this.iconClasses=r}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let r=this.iconOverridePrefix;return r&&e.indexOf(r)!==0&&(e=r+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,r){let n;return r&&this.rtlIconClasses?n=this.rtlIconClasses[e]||this.iconClasses[e]:n=this.iconClasses[e],n?`${this.baseIconClass} ${n}`:""}getCustomButtonIconClass(e){let r;return this.iconOverrideCustomButtonOption&&(r=e[this.iconOverrideCustomButtonOption],r)?`${this.baseIconClass} ${this.applyIconOverridePrefix(r)}`:""}}zu.prototype.classes={};zu.prototype.iconClasses={};zu.prototype.baseIconClass="";zu.prototype.iconOverridePrefix="";function pm(t){t();let e=Ae.debounceRendering,r=[];function n(a){r.push(a)}for(Ae.debounceRendering=n,lu(U(mwe,{}),document.createElement("div"));r.length;)r.shift()();Ae.debounceRendering=e}class mwe extends un{render(){return U("div",{})}componentDidMount(){this.setState({})}}function R$(t){let e=Bxe(t),r=e.Provider;return e.Provider=function(){let n=!this.getChildContext,a=r.apply(this,arguments);if(n){let s=[];this.shouldComponentUpdate=o=>{this.props.value!==o.value&&s.forEach(l=>{l.context=o.value,l.forceUpdate()})},this.sub=o=>{s.push(o);let l=o.componentWillUnmount;o.componentWillUnmount=()=>{s.splice(s.indexOf(o),1),l&&l.call(o)}}}return a},e}class gwe{constructor(e,r,n,a){this.execFunc=e,this.emitter=r,this.scrollTime=n,this.scrollTimeReset=a,this.handleScrollRequest=s=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},s),this.drain()},r.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Ka=R$({});function pwe(t,e,r,n,a,s,o,l,c,d,u,h,f,m){return{dateEnv:a,nowManager:s,options:r,pluginHooks:l,emitter:u,dispatch:c,getCurrentData:d,calendarApi:h,viewSpec:t,viewApi:e,dateProfileGenerator:n,theme:o,isRtl:r.direction==="rtl",addResizeHandler(v){u.on("_resize",v)},removeResizeHandler(v){u.off("_resize",v)},createScrollResponder(v){return new gwe(v,u,et(r.scrollTime),r.scrollTimeReset)},registerInteractiveComponent:f,unregisterInteractiveComponent:m}}class vo extends un{shouldComponentUpdate(e,r){return this.debug&&console.log(sx(e,this.props),sx(r,this.state)),!wv(this.props,e,this.propEquality)||!wv(this.state,r,this.stateEquality)}safeSetState(e){wv(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}vo.addPropsEquality=vwe;vo.addStateEquality=ywe;vo.contextType=Ka;vo.prototype.propEquality={};vo.prototype.stateEquality={};class ft extends vo{}ft.contextType=Ka;function vwe(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function ywe(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Ba(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class u_ extends ft{constructor(){super(...arguments),this.id=go(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:r}=this.context,{generatorName:n}=this.props;(!r.customRenderingReplaces||!ix(n,r))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Ba(this.props.elRef,e)}}render(){const{props:e,context:r}=this,{options:n}=r,{customGenerator:a,defaultGenerator:s,renderProps:o}=e,l=$$(e,[],this.handleEl);let c=!1,d,u=[],h;if(a!=null){const f=typeof a=="function"?a(o,U):a;if(f===!0)c=!0;else{const m=f&&typeof f=="object";m&&"html"in f?l.dangerouslySetInnerHTML={__html:f.html}:m&&"domNodes"in f?u=Array.prototype.slice.call(f.domNodes):(m?s$(f):typeof f!="function")?d=f:h=f}}else c=!ix(e.generatorName,n);return c&&s&&(d=s(o)),this.queuedDomNodes=u,this.currentGeneratorMeta=h,U(e.elTag,l,d)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var r;const{props:n,context:a}=this,{handleCustomRendering:s,customRenderingMetaMap:o}=a.options;if(s){const l=(r=this.currentGeneratorMeta)!==null&&r!==void 0?r:o==null?void 0:o[n.generatorName];l&&s(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:l},n),{elClasses:(n.elClasses||[]).filter(bwe)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:r}=this,n=this.base;if(!Is(e,r)){r.forEach(s_);for(let a of e)n.appendChild(a);this.currentDomNodes=e}}}u_.addPropsEquality({elClasses:Is,elStyle:ua,elAttrs:swe,renderProps:ua});function ix(t,e){var r;return!!(e.handleCustomRendering&&t&&(!((r=e.customRenderingMetaMap)===null||r===void 0)&&r[t]))}function $$(t,e,r){const n=Object.assign(Object.assign({},t.elAttrs),{ref:r});return(t.elClasses||e)&&(n.className=(t.elClasses||[]).concat(e||[]).concat(n.className||[]).filter(Boolean).join(" ")),t.elStyle&&(n.style=t.elStyle),n}function bwe(t){return!!t}const I$=R$(0);class hn extends un{constructor(){super(...arguments),this.InnerContent=xwe.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Ba(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,r=wwe(e.classNameGenerator,e.renderProps);if(e.children){const n=$$(e,r,this.handleEl),a=e.children(this.InnerContent,e.renderProps,n);return e.elTag?U(e.elTag,n,a):a}else return U(u_,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(r),renderId:this.context}))}componentDidMount(){var e,r;this.el?(r=(e=this.props).didMount)===null||r===void 0||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,r;(r=(e=this.props).willUnmount)===null||r===void 0||r.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}hn.contextType=I$;function xwe(t,e){const r=t.props;return U(u_,Object.assign({renderProps:r.renderProps,generatorName:r.generatorName,customGenerator:r.customGenerator,defaultGenerator:r.defaultGenerator,renderId:t.context},e))}function wwe(t,e){const r=typeof t=="function"?t(e):t||[];return typeof r=="string"?[r]:r}class vm extends ft{render(){let{props:e,context:r}=this,{options:n}=r,a={view:r.viewApi};return U(hn,Object.assign({},e,{elTag:e.elTag||"div",elClasses:[...L$(e.viewSpec),...e.elClasses||[]],renderProps:a,classNameGenerator:n.viewClassNames,generatorName:void 0,didMount:n.viewDidMount,willUnmount:n.viewWillUnmount}),()=>e.children)}}function L$(t){return[`fc-${t.type}-view`,"fc-view"]}function _we(t,e){let r=null,n=null;return t.start&&(r=e.createMarker(t.start)),t.end&&(n=e.createMarker(t.end)),!r&&!n||r&&n&&n<r?null:{start:r,end:n}}function kE(t,e){let r=[],{start:n}=e,a,s;for(t.sort(jwe),a=0;a<t.length;a+=1)s=t[a],s.start>n&&r.push({start:n,end:s.start}),s.end>n&&(n=s.end);return n<e.end&&r.push({start:n,end:e.end}),r}function jwe(t,e){return t.start.valueOf()-e.start.valueOf()}function Yi(t,e){let{start:r,end:n}=t,a=null;return e.start!==null&&(r===null?r=e.start:r=new Date(Math.max(r.valueOf(),e.start.valueOf()))),e.end!=null&&(n===null?n=e.end:n=new Date(Math.min(n.valueOf(),e.end.valueOf()))),(r===null||n===null||r<n)&&(a={start:r,end:n}),a}function Swe(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function h_(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function np(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function Pa(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function kwe(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function F$(t){let e=Math.floor(po(t.start,t.end))||1,r=Pt(t.start),n=Nr(r,e);return{start:r,end:n}}function B$(t,e=et(0)){let r=null,n=null;if(t.end){n=Pt(t.end);let a=t.end.valueOf()-n.valueOf();a&&a>=Ln(e)&&(n=Nr(n,1))}return t.start&&(r=Pt(t.start),n&&n<=r&&(n=Nr(r,1))),{start:r,end:n}}function Wo(t,e,r,n){return n==="year"?et(r.diffWholeYears(t,e),"year"):n==="month"?et(r.diffWholeMonths(t,e),"month"):M0e(t,e)}class q${constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,r,n){let{dateEnv:a}=this.props,s=a.subtract(a.startOf(r,e.currentRangeUnit),e.dateIncrement);return this.build(s,-1,n)}buildNext(e,r,n){let{dateEnv:a}=this.props,s=a.add(a.startOf(r,e.currentRangeUnit),e.dateIncrement);return this.build(s,1,n)}build(e,r,n=!0){let{props:a}=this,s,o,l,c,d,u;return s=this.buildValidRange(),s=this.trimHiddenDays(s),n&&(e=kwe(e,s)),o=this.buildCurrentRangeInfo(e,r),l=/^(year|month|week|day)$/.test(o.unit),c=this.buildRenderRange(this.trimHiddenDays(o.range),o.unit,l),c=this.trimHiddenDays(c),d=c,a.showNonCurrentDates||(d=Yi(d,o.range)),d=this.adjustActiveRange(d),d=Yi(d,s),u=h_(o.range,s),Pa(c,e)||(e=c.start),{currentDate:e,validRange:s,currentRange:o.range,currentRangeUnit:o.unit,isRangeAllDay:l,activeRange:d,renderRange:c,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:u,dateIncrement:this.buildDateIncrement(o.duration)}}buildValidRange(){let e=this.props.validRangeInput,r=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(r)||{start:null,end:null}}buildCurrentRangeInfo(e,r){let{props:n}=this,a=null,s=null,o=null,l;return n.duration?(a=n.duration,s=n.durationUnit,o=this.buildRangeFromDuration(e,r,a,s)):(l=this.props.dayCount)?(s="day",o=this.buildRangeFromDayCount(e,r,l)):(o=this.buildCustomVisibleRange(e))?s=n.dateEnv.greatestWholeUnit(o.start,o.end).unit:(a=this.getFallbackDuration(),s=ax(a).unit,o=this.buildRangeFromDuration(e,r,a,s)),{duration:a,unit:s,range:o}}getFallbackDuration(){return et({day:1})}adjustActiveRange(e){let{dateEnv:r,usesMinMaxTime:n,slotMinTime:a,slotMaxTime:s}=this.props,{start:o,end:l}=e;return n&&(sl(a)<0&&(o=Pt(o),o=r.add(o,a)),sl(s)>1&&(l=Pt(l),l=Nr(l,-1),l=r.add(l,s))),{start:o,end:l}}buildRangeFromDuration(e,r,n,a){let{dateEnv:s,dateAlignment:o}=this.props,l,c,d;if(!o){let{dateIncrement:h}=this.props;h&&Ln(h)<Ln(n)?o=ax(h).unit:o=a}sl(n)<=1&&this.isHiddenDay(l)&&(l=this.skipHiddenDays(l,r),l=Pt(l));function u(){l=s.startOf(e,o),c=s.add(l,n),d={start:l,end:c}}return u(),this.trimHiddenDays(d)||(e=this.skipHiddenDays(e,r),u()),d}buildRangeFromDayCount(e,r,n){let{dateEnv:a,dateAlignment:s}=this.props,o=0,l=e,c;s&&(l=a.startOf(l,s)),l=Pt(l),l=this.skipHiddenDays(l,r),c=l;do c=Nr(c,1),this.isHiddenDay(c)||(o+=1);while(o<n);return{start:l,end:c}}buildCustomVisibleRange(e){let{props:r}=this,n=r.visibleRangeInput,a=typeof n=="function"?n.call(r.calendarApi,r.dateEnv.toDate(e)):n,s=this.refineRange(a);return s&&(s.start==null||s.end==null)?null:s}buildRenderRange(e,r,n){return e}buildDateIncrement(e){let{dateIncrement:r}=this.props,n;return r||((n=this.props.dateAlignment)?et(1,n):e||et({days:1}))}refineRange(e){if(e){let r=_we(e,this.props.dateEnv);return r&&(r=B$(r)),r}return null}initHiddenDays(){let e=this.props.hiddenDays||[],r=[],n=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(r[a]=e.indexOf(a)!==-1)||(n+=1);if(!n)throw new Error("invalid hiddenDays");this.isHiddenDayHash=r}trimHiddenDays(e){let{start:r,end:n}=e;return r&&(r=this.skipHiddenDays(r)),n&&(n=this.skipHiddenDays(n,-1,!0)),r==null||n==null||r<n?{start:r,end:n}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,r=1,n=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(n?r:0)+7)%7];)e=Nr(e,r);return e}}function ap(t,e,r,n){return{instanceId:go(),defId:t,range:e,forcedStartTzo:r??null,forcedEndTzo:n??null}}function Nwe(t,e,r,n){for(let a=0;a<n.length;a+=1){let s=n[a].parse(t,r);if(s){let{allDay:o}=t;return o==null&&(o=e,o==null&&(o=s.allDayGuess,o==null&&(o=!1))),{allDay:o,duration:s.duration,typeData:s.typeData,typeId:a}}}return null}function Xi(t,e,r){let{dateEnv:n,pluginHooks:a,options:s}=r,{defs:o,instances:l}=t;l=Ji(l,c=>!o[c.defId].recurringDef);for(let c in o){let d=o[c];if(d.recurringDef){let{duration:u}=d.recurringDef;u||(u=d.allDay?s.defaultAllDayEventDuration:s.defaultTimedEventDuration);let h=Ewe(d,u,e,n,a.recurringTypes);for(let f of h){let m=ap(c,{start:f,end:n.add(f,u)});l[m.instanceId]=m}}}return{defs:o,instances:l}}function Ewe(t,e,r,n,a){let o=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:n.subtract(r.start,e),end:r.end},n);return t.allDay&&(o=o.map(Pt)),o}const Vh={id:String,groupId:String,title:String,url:String,interactive:Boolean},U$={start:X,end:X,date:X,allDay:Boolean},Cwe=Object.assign(Object.assign(Object.assign({},Vh),U$),{extendedProps:X});function z$(t,e,r,n,a=m_(r),s,o){let{refined:l,extra:c}=f_(t,r,a),d=Twe(e,r),u=Nwe(l,d,r.dateEnv,r.pluginHooks.recurringTypes);if(u){let f=ym(l,c,e?e.sourceId:"",u.allDay,!!u.duration,r,s);return f.recurringDef={typeId:u.typeId,typeData:u.typeData,duration:u.duration},{def:f,instance:null}}let h=Awe(l,d,r,n);if(h){let f=ym(l,c,e?e.sourceId:"",h.allDay,h.hasEnd,r,s),m=ap(f.defId,h.range,h.forcedStartTzo,h.forcedEndTzo);return o&&f.publicId&&o[f.publicId]&&(m.instanceId=o[f.publicId]),{def:f,instance:m}}return null}function f_(t,e,r=m_(e)){return rp(t,r)}function m_(t){return Object.assign(Object.assign(Object.assign({},bm),Cwe),t.pluginHooks.eventRefiners)}function ym(t,e,r,n,a,s,o){let l={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(o&&t.id?o[t.id]:"")||go(),sourceId:r,allDay:n,hasEnd:a,interactive:t.interactive,ui:xm(t,s),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let c of s.pluginHooks.eventDefMemberAdders)Object.assign(l,c(t));return Object.freeze(l.ui.classNames),Object.freeze(l.extendedProps),l}function Awe(t,e,r,n){let{allDay:a}=t,s,o=null,l=!1,c,d=null,u=t.start!=null?t.start:t.date;if(s=r.dateEnv.createMarkerMeta(u),s)o=s.marker;else if(!n)return null;return t.end!=null&&(c=r.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!s||s.isTimeUnspecified)&&(!c||c.isTimeUnspecified)),a&&o&&(o=Pt(o)),c&&(d=c.marker,a&&(d=Pt(d)),o&&d<=o&&(d=null)),d?l=!0:n||(l=r.options.forceEventDuration||!1,d=r.dateEnv.add(o,a?r.options.defaultAllDayEventDuration:r.options.defaultTimedEventDuration)),{allDay:a,hasEnd:l,range:{start:o,end:d},forcedStartTzo:s?s.forcedTzo:null,forcedEndTzo:c?c.forcedTzo:null}}function Twe(t,e){let r=null;return t&&(r=t.defaultAllDay),r==null&&(r=e.options.defaultAllDay),r}function cu(t,e,r,n,a,s){let o=Er(),l=m_(r);for(let c of t){let d=z$(c,e,r,n,l,a,s);d&&du(d,o)}return o}function du(t,e=Er()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function g_(t,e){let r=t.instances[e];if(r){let n=t.defs[r.defId],a=sp(t,s=>Dwe(n,s));return a.defs[n.defId]=n,a.instances[r.instanceId]=r,a}return Er()}function Dwe(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function Er(){return{defs:{},instances:{}}}function p_(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function sp(t,e){let r=Ji(t.defs,e),n=Ji(t.instances,a=>r[a.defId]);return{defs:r,instances:n}}function Pwe(t,e){let{defs:r,instances:n}=t,a={},s={};for(let o in r)e.defs[o]||(a[o]=r[o]);for(let o in n)!e.instances[o]&&a[n[o].defId]&&(s[o]=n[o]);return{defs:a,instances:s}}function Mwe(t,e){return Array.isArray(t)?cu(t,null,e,!0):typeof t=="object"&&t?cu([t],null,e,!0):t!=null?String(t):null}function NE(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const bm={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:X,overlap:X,allow:X,className:NE,classNames:NE,color:String,backgroundColor:String,borderColor:String,textColor:String},Owe={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function xm(t,e){let r=Mwe(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:r!=null?[r]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function H$(t){return t.reduce(Rwe,Owe)}function Rwe(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const $we={id:String,defaultAllDay:Boolean,url:String,format:String,events:X,eventDataTransform:X,success:X,failure:X};function W$(t,e,r=K$(e)){let n;if(typeof t=="string"?n={url:t}:typeof t=="function"||Array.isArray(t)?n={events:t}:typeof t=="object"&&t&&(n=t),n){let{refined:a,extra:s}=rp(n,r),o=Iwe(a,e);if(o)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:go(),sourceDefId:o.sourceDefId,meta:o.meta,ui:xm(a,e),extendedProps:s}}return null}function K$(t){return Object.assign(Object.assign(Object.assign({},bm),$we),t.pluginHooks.eventSourceRefiners)}function Iwe(t,e){let r=e.pluginHooks.eventSourceDefs;for(let n=r.length-1;n>=0;n-=1){let s=r[n].parseMeta(t);if(s)return{sourceDefId:n,meta:s}}return null}function Lwe(t,e,r,n,a){switch(e.type){case"RECEIVE_EVENTS":return Fwe(t,r[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return Bwe(t,r[e.sourceId],e.rawEvents,n.activeRange,a);case"ADD_EVENTS":return qwe(t,e.eventStore,n?n.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return p_(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?Xi(t,n.activeRange,a):t;case"REMOVE_EVENTS":return Pwe(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return V$(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return sp(t,s=>!s.sourceId);case"REMOVE_ALL_EVENTS":return Er();default:return t}}function Fwe(t,e,r,n,a,s){if(e&&r===e.latestFetchId){let o=cu(G$(a,e,s),e,s);return n&&(o=Xi(o,n,s)),p_(V$(t,e.sourceId),o)}return t}function Bwe(t,e,r,n,a){const{defIdMap:s,instanceIdMap:o}=zwe(t);let l=cu(G$(r,e,a),e,a,!1,s,o);return Xi(l,n,a)}function G$(t,e,r){let n=r.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=EE(t,a)),n&&(t=EE(t,n)),t}function EE(t,e){let r;if(!e)r=t;else{r=[];for(let n of t){let a=e(n);a?r.push(a):a==null&&r.push(n)}}return r}function qwe(t,e,r,n){return r&&(e=Xi(e,r,n)),p_(t,e)}function CE(t,e,r){let{defs:n}=t,a=Fa(t.instances,s=>n[s.defId].allDay?s:Object.assign(Object.assign({},s),{range:{start:r.createMarker(e.toDate(s.range.start,s.forcedStartTzo)),end:r.createMarker(e.toDate(s.range.end,s.forcedEndTzo))},forcedStartTzo:r.canComputeOffset?null:s.forcedStartTzo,forcedEndTzo:r.canComputeOffset?null:s.forcedEndTzo}));return{defs:n,instances:a}}function V$(t,e){return sp(t,r=>r.sourceId!==e)}function Uwe(t,e){return{defs:t.defs,instances:Ji(t.instances,r=>!e[r.instanceId])}}function zwe(t){const{defs:e,instances:r}=t,n={},a={};for(let s in e){const o=e[s],{publicId:l}=o;l&&(n[l]=s)}for(let s in r){const o=r[s],l=e[o.defId],{publicId:c}=l;c&&(a[c]=s)}return{defIdMap:n,instanceIdMap:a}}class ip{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,r){Hwe(this.handlers,e,r)}off(e,r){Wwe(this.handlers,e,r)}trigger(e,...r){let n=this.handlers[e]||[],a=this.options&&this.options[e],s=[].concat(a||[],n);for(let o of s)o.apply(this.thisContext,r)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function Hwe(t,e,r){(t[e]||(t[e]=[])).push(r)}function Wwe(t,e,r){r?t[e]&&(t[e]=t[e].filter(n=>n!==r)):delete t[e]}const Kwe={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Gwe(t,e){return cu(Vwe(t),null,e)}function Vwe(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(r=>r.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(r=>Object.assign(Object.assign({},Kwe),r)),e}function Q$(t,e,r){r.emitter.trigger("select",Object.assign(Object.assign({},v_(t,r)),{jsEvent:e?e.origEvent:null,view:r.viewApi||r.calendarApi.view}))}function Qwe(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function v_(t,e){let r={};for(let n of e.pluginHooks.dateSpanTransforms)Object.assign(r,n(t,e));return Object.assign(r,c_e(t,e.dateEnv)),r}function ox(t,e,r){let{dateEnv:n,options:a}=r,s=e;return t?(s=Pt(s),s=n.add(s,a.defaultAllDayEventDuration)):s=n.add(s,a.defaultTimedEventDuration),s}function y_(t,e,r,n){let a=wm(t.defs,e),s=Er();for(let o in t.defs){let l=t.defs[o];s.defs[o]=Jwe(l,a[o],r,n)}for(let o in t.instances){let l=t.instances[o],c=s.defs[l.defId];s.instances[o]=Ywe(l,c,a[l.defId],r,n)}return s}function Jwe(t,e,r,n){let a=r.standardProps||{};a.hasEnd==null&&e.durationEditable&&(r.startDelta||r.endDelta)&&(a.hasEnd=!0);let s=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});r.extendedProps&&(s.extendedProps=Object.assign(Object.assign({},s.extendedProps),r.extendedProps));for(let o of n.pluginHooks.eventDefMutationAppliers)o(s,r,n);return!s.hasEnd&&n.options.forceEventDuration&&(s.hasEnd=!0),s}function Ywe(t,e,r,n,a){let{dateEnv:s}=a,o=n.standardProps&&n.standardProps.allDay===!0,l=n.standardProps&&n.standardProps.hasEnd===!1,c=Object.assign({},t);return o&&(c.range=F$(c.range)),n.datesDelta&&r.startEditable&&(c.range={start:s.add(c.range.start,n.datesDelta),end:s.add(c.range.end,n.datesDelta)}),n.startDelta&&r.durationEditable&&(c.range={start:s.add(c.range.start,n.startDelta),end:c.range.end}),n.endDelta&&r.durationEditable&&(c.range={start:c.range.start,end:s.add(c.range.end,n.endDelta)}),l&&(c.range={start:c.range.start,end:ox(e.allDay,c.range.start,a)}),e.allDay&&(c.range={start:Pt(c.range.start),end:Pt(c.range.end)}),c.range.end<c.range.start&&(c.range.end=ox(e.allDay,c.range.start,a)),c}class Io{constructor(e,r){this.context=e,this.internalEventSource=r}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Ft{constructor(e,r,n){this._context=e,this._def=r,this._instance=n||null}setProp(e,r){if(e in U$)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")r=Vh[e](r),this.mutate({standardProps:{publicId:r}});else if(e in Vh)r=Vh[e](r),this.mutate({standardProps:{[e]:r}});else if(e in bm){let n=bm[e](r);e==="color"?n={backgroundColor:r,borderColor:r}:e==="editable"?n={startEditable:r,durationEditable:r}:n={[e]:r},this.mutate({standardProps:{ui:n}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,r){this.mutate({extendedProps:{[e]:r}})}setStart(e,r={}){let{dateEnv:n}=this._context,a=n.createMarker(e);if(a&&this._instance){let s=this._instance.range,o=Wo(s.start,a,n,r.granularity);r.maintainDuration?this.mutate({datesDelta:o}):this.mutate({startDelta:o})}}setEnd(e,r={}){let{dateEnv:n}=this._context,a;if(!(e!=null&&(a=n.createMarker(e),!a))&&this._instance)if(a){let s=Wo(this._instance.range.end,a,n,r.granularity);this.mutate({endDelta:s})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,r,n={}){let{dateEnv:a}=this._context,s={allDay:n.allDay},o=a.createMarker(e),l;if(o&&!(r!=null&&(l=a.createMarker(r),!l))&&this._instance){let c=this._instance.range;n.allDay===!0&&(c=F$(c));let d=Wo(c.start,o,a,n.granularity);if(l){let u=Wo(c.end,l,a,n.granularity);j0e(d,u)?this.mutate({datesDelta:d,standardProps:s}):this.mutate({startDelta:d,endDelta:u,standardProps:s})}else s.hasEnd=!1,this.mutate({datesDelta:d,standardProps:s})}}moveStart(e){let r=et(e);r&&this.mutate({startDelta:r})}moveEnd(e){let r=et(e);r&&this.mutate({endDelta:r})}moveDates(e){let r=et(e);r&&this.mutate({datesDelta:r})}setAllDay(e,r={}){let n={allDay:e},{maintainDuration:a}=r;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(n.hasEnd=a),this.mutate({standardProps:n})}formatRange(e){let{dateEnv:r}=this._context,n=this._instance,a=qt(e);return this._def.hasEnd?r.formatRange(n.range.start,n.range.end,a,{forcedStartTzo:n.forcedStartTzo,forcedEndTzo:n.forcedEndTzo}):r.format(n.range.start,a,{forcedTzo:n.forcedStartTzo})}mutate(e){let r=this._instance;if(r){let n=this._def,a=this._context,{eventStore:s}=a.getCurrentData(),o=g_(s,r.instanceId);o=y_(o,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let c=new Ft(a,n,r);this._def=o.defs[n.defId],this._instance=o.instances[r.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:o}),a.emitter.trigger("eventChange",{oldEvent:c,event:this,relatedEvents:Di(o,a,r),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:s})}})}}remove(){let e=this._context,r=J$(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:r}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:r})}})}get source(){let{sourceId:e}=this._def;return e?new Io(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let r=this._def,{ui:n}=r,{startStr:a,endStr:s}=this,o={allDay:r.allDay};return r.title&&(o.title=r.title),a&&(o.start=a),s&&(o.end=s),r.publicId&&(o.id=r.publicId),r.groupId&&(o.groupId=r.groupId),r.url&&(o.url=r.url),n.display&&n.display!=="auto"&&(o.display=n.display),e.collapseColor&&n.backgroundColor&&n.backgroundColor===n.borderColor?o.color=n.backgroundColor:(n.backgroundColor&&(o.backgroundColor=n.backgroundColor),n.borderColor&&(o.borderColor=n.borderColor)),n.textColor&&(o.textColor=n.textColor),n.classNames.length&&(o.classNames=n.classNames),Object.keys(r.extendedProps).length&&(e.collapseExtendedProps?Object.assign(o,r.extendedProps):o.extendedProps=r.extendedProps),o}toJSON(){return this.toPlainObject()}}function J$(t){let e=t._def,r=t._instance;return{defs:{[e.defId]:e},instances:r?{[r.instanceId]:r}:{}}}function Di(t,e,r){let{defs:n,instances:a}=t,s=[],o=r?r.instanceId:"";for(let l in a){let c=a[l],d=n[c.defId];c.instanceId!==o&&s.push(new Ft(e,d,c))}return s}function AE(t,e,r,n){let a={},s={},o={},l=[],c=[],d=wm(t.defs,e);for(let u in t.defs){let h=t.defs[u];d[h.defId].display==="inverse-background"&&(h.groupId?(a[h.groupId]=[],o[h.groupId]||(o[h.groupId]=h)):s[u]=[])}for(let u in t.instances){let h=t.instances[u],f=t.defs[h.defId],m=d[f.defId],v=h.range,p=!f.allDay&&n?B$(v,n):v,g=Yi(p,r);g&&(m.display==="inverse-background"?f.groupId?a[f.groupId].push(g):s[h.defId].push(g):m.display!=="none"&&(m.display==="background"?l:c).push({def:f,ui:m,instance:h,range:g,isStart:p.start&&p.start.valueOf()===g.start.valueOf(),isEnd:p.end&&p.end.valueOf()===g.end.valueOf()}))}for(let u in a){let h=a[u],f=kE(h,r);for(let m of f){let v=o[u],p=d[v.defId];l.push({def:v,ui:p,instance:null,range:m,isStart:!1,isEnd:!1})}}for(let u in s){let h=s[u],f=kE(h,r);for(let m of f)l.push({def:t.defs[u],ui:d[u],instance:null,range:m,isStart:!1,isEnd:!1})}return{bg:l,fg:c}}function Xwe(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function TE(t,e){t.fcSeg=e}function nc(t){return t.fcSeg||t.parentNode.fcSeg||null}function wm(t,e){return Fa(t,r=>Y$(r,e))}function Y$(t,e){let r=[];return e[""]&&r.push(e[""]),e[t.defId]&&r.push(e[t.defId]),r.push(t.ui),H$(r)}function X$(t,e){let r=t.map(Zwe);return r.sort((n,a)=>p0e(n,a,e)),r.map(n=>n._seg)}function Zwe(t){let{eventRange:e}=t,r=e.def,n=e.instance?e.instance.range:e.range,a=n.start?n.start.valueOf():0,s=n.end?n.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},r.extendedProps),r),{id:r.publicId,start:a,end:s,duration:s-a,allDay:Number(r.allDay),_seg:t})}function e_e(t,e){let{pluginHooks:r}=e,n=r.isDraggableTransformers,{def:a,ui:s}=t.eventRange,o=s.startEditable;for(let l of n)o=l(o,a,s,e);return o}function t_e(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function r_e(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function Z$(t,e,r,n,a,s,o){let{dateEnv:l,options:c}=r,{displayEventTime:d,displayEventEnd:u}=c,h=t.eventRange.def,f=t.eventRange.instance;d==null&&(d=n!==!1),u==null&&(u=a!==!1);let m=f.range.start,v=f.range.end,p=t.start||t.eventRange.range.start,g=t.end||t.eventRange.range.end,y=Pt(m).valueOf()===Pt(p).valueOf(),b=Pt(Ls(v,-1)).valueOf()===Pt(Ls(g,-1)).valueOf();return d&&!h.allDay&&(y||b)?(p=y?m:p,g=b?v:g,u&&h.hasEnd?l.formatRange(p,g,e,{forcedStartTzo:f.forcedStartTzo,forcedEndTzo:f.forcedEndTzo}):l.format(p,e,{forcedTzo:f.forcedStartTzo})):""}function As(t,e,r){let n=t.eventRange.range;return{isPast:n.end<=(r||e.start),isFuture:n.start>=(r||e.end),isToday:e&&Pa(e,n.start)}}function n_e(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function eI(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function tI(t,e){let{def:r,instance:n}=t.eventRange,{url:a}=r;if(a)return{href:a};let{emitter:s,options:o}=e,{eventInteractive:l}=o;return l==null&&(l=r.interactive,l==null&&(l=!!s.hasHandlers("eventClick"))),l?T$(c=>{s.trigger("eventClick",{el:c.target,event:new Ft(e,r,n),jsEvent:c,view:e.viewApi})}):{}}const a_e={start:X,end:X,allDay:Boolean};function s_e(t,e,r){let n=i_e(t,e),{range:a}=n;if(!a.start)return null;if(!a.end){if(r==null)return null;a.end=e.add(a.start,r)}return n}function i_e(t,e){let{refined:r,extra:n}=rp(t,a_e),a=r.start?e.createMarkerMeta(r.start):null,s=r.end?e.createMarkerMeta(r.end):null,{allDay:o}=r;return o==null&&(o=a&&a.isTimeUnspecified&&(!s||s.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:s?s.marker:null},allDay:o},n)}function o_e(t,e){return Swe(t.range,e.range)&&t.allDay===e.allDay&&l_e(t,e)}function l_e(t,e){for(let r in e)if(r!=="range"&&r!=="allDay"&&t[r]!==e[r])return!1;for(let r in t)if(!(r in e))return!1;return!0}function c_e(t,e){return Object.assign(Object.assign({},nI(t.range,e,t.allDay)),{allDay:t.allDay})}function rI(t,e,r){return Object.assign(Object.assign({},nI(t,e,r)),{timeZone:e.timeZone})}function nI(t,e,r){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:r}),endStr:e.formatIso(t.end,{omitTime:r})}}function d_e(t,e,r){let n=f_({editable:!1},r),a=ym(n.refined,n.extra,"",t.allDay,!0,r);return{def:a,ui:Y$(a,e),instance:ap(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function u_e(t,e,r){let n=!1,a=function(l){n||(n=!0,e(l))},s=function(l){n||(n=!0,r(l))},o=t(a,s);o&&typeof o.then=="function"&&o.then(a,s)}class DE extends Error{constructor(e,r){super(e),this.response=r}}function h_e(t,e,r){t=t.toUpperCase();const n={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(r):(n.body=new URLSearchParams(r),n.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,n).then(a=>{if(a.ok)return a.json().then(s=>[s,a],()=>{throw new DE("Failure parsing JSON",a)});throw new DE("Request failed",a)})}let _v;function aI(){return _v==null&&(_v=f_e()),_v}function f_e(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let r=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),r}class m_e extends ft{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{pm(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{pm(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:r}=e,{forPrint:n}=this.state,a=n||r.height==="auto"||r.contentHeight==="auto",s=!a&&r.height!=null?r.height:"",o=["fc",n?"fc-media-print":"fc-media-screen",`fc-direction-${r.direction}`,e.theme.getClass("root")];return aI()||o.push("fc-liquid-hack"),e.children(o,s,a,n)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Tc{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function g_e(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function b_(t){return{[t.component.uid]:t}}const _m={};class Dc extends un{constructor(e,r){super(e,r),this.handleRefresh=()=>{let n=this.computeTiming();n.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(n.state),this.clearTimeout(),this.setTimeout(n.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:r}=this;return e.children(r.nowDate,r.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:r}=this,n=r.nowManager.getDateMarker(),a=r.dateEnv.startOf(n,e.unit),o=r.dateEnv.add(a,et(1,e.unit)).valueOf()-n.valueOf();return o=Math.min(1e3*60*60*24,o),{state:{nowDate:a,todayRange:p_e(a)},waitMs:o}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const r=this.computeTiming();this.setState(r.state,()=>{this.setTimeout(r.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Dc.contextType=Ka;function p_e(t){let e=Pt(t),r=Nr(e,1);return{start:e,end:r}}class v_e{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,r){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:r})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,r){let{currentDataManager:n}=this;n.currentCalendarOptionsRefiners[e]?n.emitter.on(e,r):console.warn(`Unknown listener name '${e}'`)}off(e,r){this.currentDataManager.emitter.off(e,r)}trigger(e,...r){this.currentDataManager.emitter.trigger(e,...r)}changeView(e,r){this.batchRendering(()=>{if(this.unselect(),r)if(r.start&&r.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:r});else{let{dateEnv:n}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:n.createMarker(r)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,r){let n=this.getCurrentData(),a;r=r||"day",a=n.viewSpecs[r]||this.getUnitViewSpec(r),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:r,toolbarConfig:n}=this.getCurrentData(),a=[].concat(n.header?n.header.viewsWithButtons:[],n.footer?n.footer.viewsWithButtons:[]),s,o;for(let l in r)a.push(l);for(s=0;s<a.length;s+=1)if(o=r[a[s]],o&&o.singleUnit===e)return o;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let r=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.createMarker(e)})}incrementDate(e){let r=this.getCurrentData(),n=et(e);n&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:r.dateEnv.add(r.currentDate,n)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,r){let{dateEnv:n}=this.getCurrentData();return n.format(n.createMarker(e),qt(r))}formatRange(e,r,n){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(r),qt(n),n)}formatIso(e,r){let{dateEnv:n}=this.getCurrentData();return n.formatIso(n.createMarker(e),{omitTime:r})}select(e,r){let n;r==null?e.start!=null?n=e:n={start:e,end:null}:n={start:e,end:r};let a=this.getCurrentData(),s=s_e(n,a.dateEnv,et({days:1}));s&&(this.dispatch({type:"SELECT_DATES",selection:s}),Q$(s,null,a))}unselect(e){let r=this.getCurrentData();r.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),Qwe(e,r))}addEvent(e,r){if(e instanceof Ft){let o=e._def,l=e._instance;return this.getCurrentData().eventStore.defs[o.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:du({def:o,instance:l})}),this.triggerEventAdd(e)),e}let n=this.getCurrentData(),a;if(r instanceof Io)a=r.internalEventSource;else if(typeof r=="boolean")r&&([a]=d_(n.eventSources));else if(r!=null){let o=this.getEventSourceById(r);if(!o)return console.warn(`Could not find an event source with ID "${r}"`),null;a=o.internalEventSource}let s=z$(e,a,n,!1);if(s){let o=new Ft(n,s.def,s.def.recurringDef?null:s.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:du(s)}),this.triggerEventAdd(o),o}return null}triggerEventAdd(e){let{emitter:r}=this.getCurrentData();r.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:J$(e)})}})}getEventById(e){let r=this.getCurrentData(),{defs:n,instances:a}=r.eventStore;e=String(e);for(let s in n){let o=n[s];if(o.publicId===e){if(o.recurringDef)return new Ft(r,o,null);for(let l in a){let c=a[l];if(c.defId===o.defId)return new Ft(r,o,c)}}}return null}getEvents(){let e=this.getCurrentData();return Di(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),r=e.eventSources,n=[];for(let a in r)n.push(new Io(e,r[a]));return n}getEventSourceById(e){let r=this.getCurrentData(),n=r.eventSources;e=String(e);for(let a in n)if(n[a].publicId===e)return new Io(r,n[a]);return null}addEventSource(e){let r=this.getCurrentData();if(e instanceof Io)return r.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let n=W$(e,r);return n?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[n]}),new Io(r,n)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let r=et(e);r&&this.trigger("_scrollRequest",{time:r})}}function y_e(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function sI(t,e){let r={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return r.left<r.right&&r.top<r.bottom?r:!1}function b_e(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function x_e(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function w_e(t,e){return{left:t.left-e.left,top:t.top-e.top}}const jv=Er();class __e{constructor(){this.getKeysForEventDefs=Oe(this._getKeysForEventDefs),this.splitDateSelection=Oe(this._splitDateSpan),this.splitEventStore=Oe(this._splitEventStore),this.splitIndividualUi=Oe(this._splitIndividualUi),this.splitEventDrag=Oe(this._splitInteraction),this.splitEventResize=Oe(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let r=this.getKeyInfo(e),n=this.getKeysForEventDefs(e.eventStore),a=this.splitDateSelection(e.dateSelection),s=this.splitIndividualUi(e.eventUiBases,n),o=this.splitEventStore(e.eventStore,n),l=this.splitEventDrag(e.eventDrag),c=this.splitEventResize(e.eventResize),d={};this.eventUiBuilders=Fa(r,(u,h)=>this.eventUiBuilders[h]||Oe(j_e));for(let u in r){let h=r[u],f=o[u]||jv,m=this.eventUiBuilders[u];d[u]={businessHours:h.businessHours||e.businessHours,dateSelection:a[u]||null,eventStore:f,eventUiBases:m(e.eventUiBases[""],h.ui,s[u]),eventSelection:f.instances[e.eventSelection]?e.eventSelection:"",eventDrag:l[u]||null,eventResize:c[u]||null}}return d}_splitDateSpan(e){let r={};if(e){let n=this.getKeysForDateSpan(e);for(let a of n)r[a]=e}return r}_getKeysForEventDefs(e){return Fa(e.defs,r=>this.getKeysForEventDef(r))}_splitEventStore(e,r){let{defs:n,instances:a}=e,s={};for(let o in n)for(let l of r[o])s[l]||(s[l]=Er()),s[l].defs[o]=n[o];for(let o in a){let l=a[o];for(let c of r[l.defId])s[c]&&(s[c].instances[o]=l)}return s}_splitIndividualUi(e,r){let n={};for(let a in e)if(a)for(let s of r[a])n[s]||(n[s]={}),n[s][a]=e[a];return n}_splitInteraction(e){let r={};if(e){let n=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),a=this._getKeysForEventDefs(e.mutatedEvents),s=this._splitEventStore(e.mutatedEvents,a),o=l=>{r[l]||(r[l]={affectedEvents:n[l]||jv,mutatedEvents:s[l]||jv,isEvent:e.isEvent})};for(let l in n)o(l);for(let l in s)o(l)}return r}}function j_e(t,e,r){let n=[];t&&n.push(t),e&&n.push(e);let a={"":H$(n)};return r&&Object.assign(a,r),a}function iI(t,e,r,n){return{dow:t.getUTCDay(),isDisabled:!!(n&&(!n.activeRange||!Pa(n.activeRange,t))),isOther:!!(n&&!Pa(n.currentRange,t)),isToday:!!(e&&Pa(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function x_(t,e){let r=["fc-day",`fc-day-${C0e[t.dow]}`];return t.isDisabled?r.push("fc-day-disabled"):(t.isToday&&(r.push("fc-day-today"),r.push(e.getClass("today"))),t.isPast&&r.push("fc-day-past"),t.isFuture&&r.push("fc-day-future"),t.isOther&&r.push("fc-day-other")),r}const S_e=qt({year:"numeric",month:"long",day:"numeric"}),k_e=qt({week:"long"});function jm(t,e,r="day",n=!0){const{dateEnv:a,options:s,calendarApi:o}=t;let l=a.format(e,r==="week"?k_e:S_e);if(s.navLinks){let c=a.toDate(e);const d=u=>{let h=r==="day"?s.navLinkDayClick:r==="week"?s.navLinkWeekClick:null;typeof h=="function"?h.call(o,a.toDate(e),u):(typeof h=="string"&&(r=h),o.zoomTo(e,r))};return Object.assign({title:yd(s.navLinkHint,[l,c],l),"data-navlink":""},n?A$(d):{onClick:d})}return{"aria-label":l}}let Sv=null;function N_e(){return Sv===null&&(Sv=E_e()),Sv}function E_e(){let t=document.createElement("div");vd(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let r=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return s_(t),r}let kv;function C_e(){return kv||(kv=A_e()),kv}function A_e(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=oI(t);return document.body.removeChild(t),e}function oI(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function T_e(t,e=!1){let r=window.getComputedStyle(t),n=parseInt(r.borderLeftWidth,10)||0,a=parseInt(r.borderRightWidth,10)||0,s=parseInt(r.borderTopWidth,10)||0,o=parseInt(r.borderBottomWidth,10)||0,l=oI(t),c=l.y-n-a,d=l.x-s-o,u={borderLeft:n,borderRight:a,borderTop:s,borderBottom:o,scrollbarBottom:d,scrollbarLeft:0,scrollbarRight:0};return N_e()&&r.direction==="rtl"?u.scrollbarLeft=c:u.scrollbarRight=c,e&&(u.paddingLeft=parseInt(r.paddingLeft,10)||0,u.paddingRight=parseInt(r.paddingRight,10)||0,u.paddingTop=parseInt(r.paddingTop,10)||0,u.paddingBottom=parseInt(r.paddingBottom,10)||0),u}function D_e(t,e=!1,r){let n=w_(t),a=T_e(t,e),s={left:n.left+a.borderLeft+a.scrollbarLeft,right:n.right-a.borderRight-a.scrollbarRight,top:n.top+a.borderTop,bottom:n.bottom-a.borderBottom-a.scrollbarBottom};return e&&(s.left+=a.paddingLeft,s.right-=a.paddingRight,s.top+=a.paddingTop,s.bottom-=a.paddingBottom),s}function w_(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function P_e(t){let e=lI(t),r=t.getBoundingClientRect();for(let n of e){let a=sI(r,n.getBoundingClientRect());if(a)r=a;else return null}return r}function lI(t){let e=[];for(;t instanceof HTMLElement;){let r=window.getComputedStyle(t);if(r.position==="fixed")break;/(auto|scroll)/.test(r.overflow+r.overflowY+r.overflowX)&&e.push(t),t=t.parentNode}return e}class ac{constructor(e,r,n,a){this.els=r;let s=this.originClientRect=e.getBoundingClientRect();n&&this.buildElHorizontals(s.left),a&&this.buildElVerticals(s.top)}buildElHorizontals(e){let r=[],n=[];for(let a of this.els){let s=a.getBoundingClientRect();r.push(s.left-e),n.push(s.right-e)}this.lefts=r,this.rights=n}buildElVerticals(e){let r=[],n=[];for(let a of this.els){let s=a.getBoundingClientRect();r.push(s.top-e),n.push(s.bottom-e)}this.tops=r,this.bottoms=n}leftToIndex(e){let{lefts:r,rights:n}=this,a=r.length,s;for(s=0;s<a;s+=1)if(e>=r[s]&&e<n[s])return s}topToIndex(e){let{tops:r,bottoms:n}=this,a=r.length,s;for(s=0;s<a;s+=1)if(e>=r[s]&&e<n[s])return s}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Nh(this.tops||[],e.tops||[])&&Nh(this.bottoms||[],e.bottoms||[])&&Nh(this.lefts||[],e.lefts||[])&&Nh(this.rights||[],e.rights||[])}}function Nh(t,e){const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(Math.round(t[n])!==Math.round(e[n]))return!1;return!0}class __{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class M_e extends __{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class O_e extends __{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class ga extends ft{constructor(){super(...arguments),this.uid=go()}prepareHits(){}queryHit(e,r,n,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!wr(e,".fc-event-mirror")}isValidDateDownEl(e){return!wr(e,".fc-event:not(.fc-bg-event)")&&!wr(e,".fc-more-link")&&!wr(e,"a[data-navlink]")&&!wr(e,".fc-popover")}}class cI{constructor(e=r=>r.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let r=[];for(let n of e)this.insertEntry(n,r);return r}insertEntry(e,r){let n=this.findInsertion(e);this.isInsertionValid(n,e)?this.insertEntryAt(e,n):this.handleInvalidInsertion(n,e,r)}isInsertionValid(e,r){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(r)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,r,n){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},r),{span:j_(r.span,e.touchingEntry.span)});n.push(a),this.splitEntry(r,e.touchingEntry,n)}else n.push(r)}splitEntry(e,r,n){let a=e.span,s=r.span;a.start<s.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:s.start}},n),a.end>s.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:s.end,end:a.end}},n)}insertEntryAt(e,r){let{entriesByLevel:n,levelCoords:a}=this;r.lateral===-1?(Nv(a,r.level,r.levelCoord),Nv(n,r.level,[e])):Nv(n[r.level],r.lateral,e),this.stackCnts[Pi(e)]=r.stackCnt}findInsertion(e){let{levelCoords:r,entriesByLevel:n,strictOrder:a,stackCnts:s}=this,o=r.length,l=0,c=-1,d=-1,u=null,h=0;for(let v=0;v<o;v+=1){const p=r[v];if(!a&&p>=l+this.getEntryThickness(e))break;let g=n[v],y,b=cx(g,e.span.start,lx),w=b[0]+b[1];for(;(y=g[w])&&y.span.start<e.span.end;){let j=p+this.getEntryThickness(y);j>l&&(l=j,u=y,c=v,d=w),j===l&&(h=Math.max(h,s[Pi(y)]+1)),w+=1}}let f=0;if(u)for(f=c+1;f<o&&r[f]<l;)f+=1;let m=-1;return f<o&&r[f]===l&&(m=cx(n[f],e.span.end,lx)[0]),{touchingLevel:c,touchingLateral:d,touchingEntry:u,stackCnt:h,levelCoord:l,level:f,lateral:m}}toRects(){let{entriesByLevel:e,levelCoords:r}=this,n=e.length,a=[];for(let s=0;s<n;s+=1){let o=e[s],l=r[s];for(let c of o)a.push(Object.assign(Object.assign({},c),{thickness:this.getEntryThickness(c),levelCoord:l}))}return a}}function lx(t){return t.span.end}function Pi(t){return t.index+":"+t.span.start}function R_e(t){let e=[];for(let r of t){let n=[],a={span:r.span,entries:[r]};for(let s of e)j_(s.span,a.span)?a={entries:s.entries.concat(a.entries),span:$_e(s.span,a.span)}:n.push(s);n.push(a),e=n}return e}function $_e(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function j_(t,e){let r=Math.max(t.start,e.start),n=Math.min(t.end,e.end);return r<n?{start:r,end:n}:null}function Nv(t,e,r){t.splice(e,0,r)}function cx(t,e,r){let n=0,a=t.length;if(!a||e<r(t[n]))return[0,0];if(e>r(t[a-1]))return[a,0];for(;n<a;){let s=Math.floor(n+(a-n)/2),o=r(t[s]);if(e<o)a=s;else if(e>o)n=s+1;else return[s,1]}return[n,0]}class I_e{constructor(e,r){this.emitter=new ip}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const op={},L_e={startTime:et,duration:et,create:Boolean,sourceId:String};function dx(t){let{refined:e,extra:r}=rp(t,L_e);return{startTime:e.startTime||null,duration:e.duration||null,create:e.create!=null?e.create:!0,sourceId:e.sourceId,leftoverProps:r}}function F_e(t,e){return!t||e>10?qt({weekday:"short"}):e>1?qt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):qt({weekday:"long"})}const dI="fc-col-header-cell";function uI(t){return t.text}class B_e extends ft{render(){let{dateEnv:e,options:r,theme:n,viewApi:a}=this.context,{props:s}=this,{date:o,dateProfile:l}=s,c=iI(o,s.todayRange,null,l),d=[dI].concat(x_(c,n)),u=e.format(o,s.dayHeaderFormat),h=!c.isDisabled&&s.colCnt>1?jm(this.context,o):{},f=e.toDate(o);e.namedTimeZoneImpl&&(f=Ls(f,36e5));let m=Object.assign(Object.assign(Object.assign({date:f,view:a},s.extraRenderProps),{text:u}),c);return U(hn,{elTag:"th",elClasses:d,elAttrs:Object.assign({role:"columnheader",colSpan:s.colSpan,"data-date":c.isDisabled?void 0:o_(o)},s.extraDataAttrs),renderProps:m,generatorName:"dayHeaderContent",customGenerator:r.dayHeaderContent,defaultGenerator:uI,classNameGenerator:r.dayHeaderClassNames,didMount:r.dayHeaderDidMount,willUnmount:r.dayHeaderWillUnmount},v=>U("div",{className:"fc-scrollgrid-sync-inner"},!c.isDisabled&&U(v,{elTag:"a",elAttrs:h,elClasses:["fc-col-header-cell-cushion",s.isSticky&&"fc-sticky"]})))}}const q_e=qt({weekday:"long"});class U_e extends ft{render(){let{props:e}=this,{dateEnv:r,theme:n,viewApi:a,options:s}=this.context,o=Nr(new Date(2592e5),e.dow),l={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},c=r.format(o,e.dayHeaderFormat),d=Object.assign(Object.assign(Object.assign(Object.assign({date:o},l),{view:a}),e.extraRenderProps),{text:c});return U(hn,{elTag:"th",elClasses:[dI,...x_(l,n),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:d,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:uI,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},u=>U("div",{className:"fc-scrollgrid-sync-inner"},U(u,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":r.format(o,q_e)}})))}}class hI extends ft{constructor(){super(...arguments),this.createDayHeaderFormatter=Oe(z_e)}render(){let{context:e}=this,{dates:r,dateProfile:n,datesRepDistinctDays:a,renderIntro:s}=this.props,o=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,r.length);return U(Dc,{unit:"day"},(l,c)=>U("tr",{role:"row"},s&&s("day"),r.map(d=>a?U(B_e,{key:d.toISOString(),date:d,dateProfile:n,todayRange:c,colCnt:r.length,dayHeaderFormat:o}):U(U_e,{key:d.getUTCDay(),dow:d.getUTCDay(),dayHeaderFormat:o}))))}}function z_e(t,e,r){return t||F_e(e,r)}class fI{constructor(e,r){let n=e.start,{end:a}=e,s=[],o=[],l=-1;for(;n<a;)r.isHiddenDay(n)?s.push(l+.5):(l+=1,s.push(l),o.push(n)),n=Nr(n,1);this.dates=o,this.indices=s,this.cnt=o.length}sliceRange(e){let r=this.getDateDayIndex(e.start),n=this.getDateDayIndex(Nr(e.end,-1)),a=Math.max(0,r),s=Math.min(this.cnt-1,n);return a=Math.ceil(a),s=Math.floor(s),a<=s?{firstIndex:a,lastIndex:s,isStart:r===a,isEnd:n===s}:null}getDateDayIndex(e){let{indices:r}=this,n=Math.floor(po(this.dates[0],e));return n<0?r[0]-1:n>=r.length?r[r.length-1]+1:r[n]}}class mI{constructor(e,r){let{dates:n}=e,a,s,o;if(r){for(s=n[0].getUTCDay(),a=1;a<n.length&&n[a].getUTCDay()!==s;a+=1);o=Math.ceil(n.length/a)}else o=1,a=n.length;this.rowCnt=o,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let r=0;r<this.rowCnt;r+=1){let n=[];for(let a=0;a<this.colCnt;a+=1)n.push(this.buildCell(r,a));e.push(n)}return e}buildCell(e,r){let n=this.daySeries.dates[e*this.colCnt+r];return{key:n.toISOString(),date:n}}buildHeaderDates(){let e=[];for(let r=0;r<this.colCnt;r+=1)e.push(this.cells[0][r].date);return e}sliceRange(e){let{colCnt:r}=this,n=this.daySeries.sliceRange(e),a=[];if(n){let{firstIndex:s,lastIndex:o}=n,l=s;for(;l<=o;){let c=Math.floor(l/r),d=Math.min((c+1)*r,o+1);a.push({row:c,firstCol:l%r,lastCol:(d-1)%r,isStart:n.isStart&&l===s,isEnd:n.isEnd&&d-1===o}),l=d}}return a}}class gI{constructor(){this.sliceBusinessHours=Oe(this._sliceBusinessHours),this.sliceDateSelection=Oe(this._sliceDateSpan),this.sliceEventStore=Oe(this._sliceEventStore),this.sliceEventDrag=Oe(this._sliceInteraction),this.sliceEventResize=Oe(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,r,n,a,...s){let{eventUiBases:o}=e,l=this.sliceEventStore(e.eventStore,o,r,n,...s);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,r,n,o,a,...s),businessHourSegs:this.sliceBusinessHours(e.businessHours,r,n,a,...s),fgEventSegs:l.fg,bgEventSegs:l.bg,eventDrag:this.sliceEventDrag(e.eventDrag,o,r,n,...s),eventResize:this.sliceEventResize(e.eventResize,o,r,n,...s),eventSelection:e.eventSelection}}sliceNowDate(e,r,n,a,...s){return this._sliceDateSpan({range:{start:e,end:Ls(e,1)},allDay:!1},r,n,{},a,...s)}_sliceBusinessHours(e,r,n,a,...s){return e?this._sliceEventStore(Xi(e,Eh(r,!!n),a),{},r,n,...s).bg:[]}_sliceEventStore(e,r,n,a,...s){if(e){let o=AE(e,r,Eh(n,!!a),a);return{bg:this.sliceEventRanges(o.bg,s),fg:this.sliceEventRanges(o.fg,s)}}return{bg:[],fg:[]}}_sliceInteraction(e,r,n,a,...s){if(!e)return null;let o=AE(e.mutatedEvents,r,Eh(n,!!a),a);return{segs:this.sliceEventRanges(o.fg,s),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,r,n,a,s,...o){if(!e)return[];let l=Eh(r,!!n),c=Yi(e.range,l);if(c){e=Object.assign(Object.assign({},e),{range:c});let d=d_e(e,a,s),u=this.sliceRange(e.range,...o);for(let h of u)h.eventRange=d;return u}return[]}sliceEventRanges(e,r){let n=[];for(let a of e)n.push(...this.sliceEventRange(a,r));return n}sliceEventRange(e,r){let n=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(n={start:n.start,end:Nr(n.start,1)});let a=this.sliceRange(n,...r);for(let s of a)s.eventRange=e,s.isStart=e.isStart&&s.isStart,s.isEnd=e.isEnd&&s.isEnd;return a}}function Eh(t,e){let r=t.activeRange;return e?r:{start:Ls(r.start,t.slotMinTime.milliseconds),end:Ls(r.end,t.slotMaxTime.milliseconds-864e5)}}function S_(t,e,r){let{instances:n}=t.mutatedEvents;for(let a in n)if(!np(e.validRange,n[a].range))return!1;return pI({eventDrag:t},r)}function H_e(t,e,r){return np(e.validRange,t.range)?pI({dateSelection:t},r):!1}function pI(t,e){let r=e.getCurrentData(),n=Object.assign({businessHours:r.businessHours,dateSelection:"",eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||W_e)(n,e)}function W_e(t,e,r={},n){return!(t.eventDrag&&!K_e(t,e,r,n)||t.dateSelection&&!G_e(t,e,r,n))}function K_e(t,e,r,n){let a=e.getCurrentData(),s=t.eventDrag,o=s.mutatedEvents,l=o.defs,c=o.instances,d=wm(l,s.isEvent?t.eventUiBases:{"":a.selectionConfig});n&&(d=Fa(d,n));let u=Uwe(t.eventStore,s.affectedEvents.instances),h=u.defs,f=u.instances,m=wm(h,t.eventUiBases);for(let v in c){let p=c[v],g=p.range,y=d[p.defId],b=l[p.defId];if(!vI(y.constraints,g,u,t.businessHours,e))return!1;let{eventOverlap:w}=e.options,j=typeof w=="function"?w:null;for(let S in f){let N=f[S];if(h_(g,N.range)&&(m[N.defId].overlap===!1&&s.isEvent||y.overlap===!1||j&&!j(new Ft(e,h[N.defId],N),new Ft(e,b,p))))return!1}let _=a.eventStore;for(let S of y.allows){let N=Object.assign(Object.assign({},r),{range:p.range,allDay:b.allDay}),k=_.defs[b.defId],E=_.instances[v],P;if(k?P=new Ft(e,k,E):P=new Ft(e,b),!S(v_(N,e),P))return!1}}return!0}function G_e(t,e,r,n){let a=t.eventStore,s=a.defs,o=a.instances,l=t.dateSelection,c=l.range,{selectionConfig:d}=e.getCurrentData();if(n&&(d=n(d)),!vI(d.constraints,c,a,t.businessHours,e))return!1;let{selectOverlap:u}=e.options,h=typeof u=="function"?u:null;for(let f in o){let m=o[f];if(h_(c,m.range)&&(d.overlap===!1||h&&!h(new Ft(e,s[m.defId],m),null)))return!1}for(let f of d.allows){let m=Object.assign(Object.assign({},r),l);if(!f(v_(m,e),null))return!1}return!0}function vI(t,e,r,n,a){for(let s of t)if(!Q_e(V_e(s,e,r,n,a),e))return!1;return!0}function V_e(t,e,r,n,a){return t==="businessHours"?Ev(Xi(n,e,a)):typeof t=="string"?Ev(sp(r,s=>s.groupId===t)):typeof t=="object"&&t?Ev(Xi(t,e,a)):[]}function Ev(t){let{instances:e}=t,r=[];for(let n in e)r.push(e[n].range);return r}function Q_e(t,e){for(let r of t)if(np(r,e))return!0;return!1}const Ch=/^(visible|hidden)$/;class J_e extends ft{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Ba(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:r,liquidIsAbsolute:n}=e,a=r&&n,s=["fc-scroller"];return r&&(n?s.push("fc-scroller-liquid-absolute"):s.push("fc-scroller-liquid")),U("div",{ref:this.handleEl,className:s.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Ch.test(this.props.overflowX))return!1;let{el:e}=this,r=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:n}=e;for(let a=0;a<n.length;a+=1)if(n[a].getBoundingClientRect().width>r)return!0;return!1}needsYScrolling(){if(Ch.test(this.props.overflowY))return!1;let{el:e}=this,r=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:n}=e;for(let a=0;a<n.length;a+=1)if(n[a].getBoundingClientRect().height>r)return!0;return!1}getXScrollbarWidth(){return Ch.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ch.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class Ea{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(r,n)=>{let{depths:a,currentMap:s}=this,o=!1,l=!1;r!==null?(o=n in s,s[n]=r,a[n]=(a[n]||0)+1,l=!0):(a[n]-=1,a[n]||(delete s[n],delete this.callbackMap[n],o=!0)),this.masterCallback&&(o&&this.masterCallback(null,String(n)),l&&this.masterCallback(r,String(n)))}}createRef(e){let r=this.callbackMap[e];return r||(r=this.callbackMap[e]=n=>{this.handleValue(n,String(e))}),r}collect(e,r,n){return owe(this.currentMap,e,r,n)}getAll(){return d_(this.currentMap)}}function Y_e(t){let e=i0e(t,".fc-scrollgrid-shrink"),r=0;for(let n of e)r=Math.max(r,x0e(n));return Math.ceil(r)}function yI(t,e){return t.liquid&&e.liquid}function X_e(t,e){return e.maxHeight!=null||yI(t,e)}function Z_e(t,e,r,n){let{expandRows:a}=r;return typeof e.content=="function"?e.content(r):U("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:r.tableMinWidth,width:r.clientWidth,height:a?r.clientHeight:""}},r.tableColGroupNode,U(n?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(r):e.rowContent))}function eje(t,e){return Is(t,e,ua)}function tje(t,e){let r=[];for(let n of t){let a=n.span||1;for(let s=0;s<a;s+=1)r.push(U("col",{style:{width:n.width==="shrink"?rje(e):n.width||"",minWidth:n.minWidth||""}}))}return U("colgroup",{},...r)}function rje(t){return t??4}function nje(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function aje(t,e){let r=["fc-scrollgrid",e.theme.getClass("table")];return t&&r.push("fc-scrollgrid-liquid"),r}function sje(t,e){let r=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&r.push("fc-scrollgrid-section-liquid"),t.isSticky&&r.push("fc-scrollgrid-section-sticky"),r}function ux(t){return U("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function Sm(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function bI(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class k_ extends ft{constructor(){super(...arguments),this.processCols=Oe(e=>e,eje),this.renderMicroColGroup=Oe(tje),this.scrollerRefs=new Ea,this.scrollerElRefs=new Ea(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:r,context:n}=this,a=e.sections||[],s=this.processCols(e.cols),o=this.renderMicroColGroup(s,r.shrinkWidth),l=aje(e.liquid,n);e.collapsibleWidth&&l.push("fc-scrollgrid-collapsible");let c=a.length,d=0,u,h=[],f=[],m=[];for(;d<c&&(u=a[d]).type==="header";)h.push(this.renderSection(u,o,!0)),d+=1;for(;d<c&&(u=a[d]).type==="body";)f.push(this.renderSection(u,o,!1)),d+=1;for(;d<c&&(u=a[d]).type==="footer";)m.push(this.renderSection(u,o,!0)),d+=1;let v=!aI();const p={role:"rowgroup"};return U("table",{role:"grid",className:l.join(" "),style:{height:e.height}},!!(!v&&h.length)&&U("thead",p,...h),!!(!v&&f.length)&&U("tbody",p,...f),!!(!v&&m.length)&&U("tfoot",p,...m),v&&U("tbody",p,...h,...f,...m))}renderSection(e,r,n){return"outerContent"in e?U(Tt,{key:e.key},e.outerContent):U("tr",{key:e.key,role:"presentation",className:sje(e,this.props.liquid).join(" ")},this.renderChunkTd(e,r,e.chunk,n))}renderChunkTd(e,r,n,a){if("outerContent"in n)return n.outerContent;let{props:s}=this,{forceYScrollbars:o,scrollerClientWidths:l,scrollerClientHeights:c}=this.state,d=X_e(s,e),u=yI(s,e),h=s.liquid?o?"scroll":d?"auto":"hidden":"visible",f=e.key,m=Z_e(e,n,{tableColGroupNode:r,tableMinWidth:"",clientWidth:!s.collapsibleWidth&&l[f]!==void 0?l[f]:null,clientHeight:c[f]!==void 0?c[f]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return U(a?"th":"td",{ref:n.elRef,role:"presentation"},U("div",{className:`fc-scroller-harness${u?" fc-scroller-harness-liquid":""}`},U(J_e,{ref:this.scrollerRefs.createRef(f),elRef:this.scrollerElRefs.createRef(f),overflowY:h,overflowX:s.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:u,liquidIsAbsolute:!0},m)))}_handleScrollerEl(e,r){let n=ije(this.props.sections,r);n&&Ba(n.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return nje(this.props.cols)?Y_e(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=C_e(),{scrollerRefs:r,scrollerElRefs:n}=this,a=!1,s={},o={};for(let l in r.currentMap){let c=r.currentMap[l];if(c&&c.needsYScrolling()){a=!0;break}}for(let l of this.props.sections){let c=l.key,d=n.currentMap[c];if(d){let u=d.parentNode;s[c]=Math.floor(u.getBoundingClientRect().width-(a?e.y:0)),o[c]=Math.floor(u.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:s,scrollerClientHeights:o}}}k_.addStateEquality({scrollerClientWidths:ua,scrollerClientHeights:ua});function ije(t,e){for(let r of t)if(r.key===e)return r;return null}class N_ extends ft{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,e&&TE(e,this.props.seg)}}render(){const{props:e,context:r}=this,{options:n}=r,{seg:a}=e,{eventRange:s}=a,{ui:o}=s,l={event:new Ft(r,s.def,s.instance),view:r.viewApi,timeText:e.timeText,textColor:o.textColor,backgroundColor:o.backgroundColor,borderColor:o.borderColor,isDraggable:!e.disableDragging&&e_e(a,r),isStartResizable:!e.disableResizing&&t_e(a,r),isEndResizable:!e.disableResizing&&r_e(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return U(hn,Object.assign({},e,{elRef:this.handleEl,elClasses:[...n_e(l),...a.eventRange.ui.classNames,...e.elClasses||[]],renderProps:l,generatorName:"eventContent",customGenerator:n.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:n.eventClassNames,didMount:n.eventDidMount,willUnmount:n.eventWillUnmount}))}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&TE(this.el,this.props.seg)}}class xI extends ft{render(){let{props:e,context:r}=this,{options:n}=r,{seg:a}=e,{ui:s}=a.eventRange,o=n.eventTimeFormat||e.defaultTimeFormat,l=Z$(a,o,r,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return U(N_,Object.assign({},e,{elTag:"a",elStyle:{borderColor:s.borderColor,backgroundColor:s.backgroundColor},elAttrs:tI(a,r),defaultGenerator:oje,timeText:l}),(c,d)=>U(Tt,null,U(c,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:d.textColor}}),!!d.isStartResizable&&U("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!d.isEndResizable&&U("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}function oje(t){return U("div",{className:"fc-event-main-frame"},t.timeText&&U("div",{className:"fc-event-time"},t.timeText),U("div",{className:"fc-event-title-container"},U("div",{className:"fc-event-title fc-sticky"},t.event.title||U(Tt,null,""))))}const E_=t=>U(Ka.Consumer,null,e=>{let{options:r}=e,n={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return U(hn,Object.assign({},t,{elTag:t.elTag||"div",renderProps:n,generatorName:"nowIndicatorContent",customGenerator:r.nowIndicatorContent,classNameGenerator:r.nowIndicatorClassNames,didMount:r.nowIndicatorDidMount,willUnmount:r.nowIndicatorWillUnmount}))}),lje=qt({day:"numeric"});class C_ extends ft{constructor(){super(...arguments),this.refineRenderProps=Gh(cje)}render(){let{props:e,context:r}=this,{options:n}=r,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:r.viewApi,dateEnv:r.dateEnv,monthStartFormat:n.monthStartFormat});return U(hn,Object.assign({},e,{elClasses:[...x_(a,r.theme),...e.elClasses||[]],elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":o_(e.date)}),renderProps:a,generatorName:"dayCellContent",customGenerator:n.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:n.dayCellClassNames,didMount:n.dayCellDidMount,willUnmount:n.dayCellWillUnmount}))}}function A_(t){return!!(t.dayCellContent||ix("dayCellContent",t))}function cje(t){let{date:e,dateEnv:r,dateProfile:n,isMonthStart:a}=t,s=iI(e,t.todayRange,null,n),o=t.showDayNumber?r.format(e,a?t.monthStartFormat:lje):"";return Object.assign(Object.assign(Object.assign({date:r.toDate(e),view:t.viewApi},s),{isMonthStart:a,dayNumberText:o}),t.extraRenderProps)}class wI extends ft{render(){let{props:e}=this,{seg:r}=e;return U(N_,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:r.eventRange.ui.backgroundColor},defaultGenerator:dje,seg:r,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function dje(t){let{title:e}=t.event;return e&&U("div",{className:"fc-event-title"},t.event.title)}function _I(t){return U("div",{className:`fc-${t}`})}const jI=t=>U(Ka.Consumer,null,e=>{let{dateEnv:r,options:n}=e,{date:a}=t,s=n.weekNumberFormat||t.defaultFormat,o=r.computeWeekNumber(a),l=r.format(a,s);return U(hn,Object.assign({},t,{renderProps:{num:o,text:l,date:a},generatorName:"weekNumberContent",customGenerator:n.weekNumberContent,defaultGenerator:uje,classNameGenerator:n.weekNumberClassNames,didMount:n.weekNumberDidMount,willUnmount:n.weekNumberWillUnmount}))});function uje(t){return t.text}const Cv=10;class hje extends ft{constructor(){super(...arguments),this.state={titleId:Xg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Ba(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const r=E$(e);this.rootEl.contains(r)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:r}=this.context,{props:n,state:a}=this,s=["fc-popover",e.getClass("popover")].concat(n.extraClassNames||[]);return Gxe(U("div",Object.assign({},n.extraAttrs,{id:n.id,className:s.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),U("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},U("span",{className:"fc-popover-title",id:a.titleId},n.title),U("span",{className:"fc-popover-close "+e.getIconClass("close"),title:r.closeHint,onClick:this.handleCloseClick})),U("div",{className:"fc-popover-body "+e.getClass("popoverContent")},n.children)),n.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:r,alignGridTop:n}=this.props,{rootEl:a}=this,s=P_e(r);if(s){let o=a.getBoundingClientRect(),l=n?wr(r,".fc-scrollgrid").getBoundingClientRect().top:s.top,c=e?s.right-o.width:s.left;l=Math.max(l,Cv),c=Math.min(c,document.documentElement.clientWidth-Cv-o.width),c=Math.max(c,Cv);let d=a.offsetParent.getBoundingClientRect();vd(a,{top:l-d.top,left:c-d.left})}}}class fje extends ga{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:r}=this.context,{props:n}=this,{startDate:a,todayRange:s,dateProfile:o}=n,l=r.format(a,e.dayPopoverFormat);return U(C_,{elRef:this.handleRootEl,date:a,dateProfile:o,todayRange:s},(c,d,u)=>U(hje,{elRef:u.ref,id:n.id,title:l,extraClassNames:["fc-more-popover"].concat(u.className||[]),extraAttrs:u,parentEl:n.parentEl,alignmentEl:n.alignmentEl,alignGridTop:n.alignGridTop,onClose:n.onClose},A_(e)&&U(c,{elTag:"div",elClasses:["fc-more-popover-misc"]}),n.children))}queryHit(e,r,n,a){let{rootEl:s,props:o}=this;return e>=0&&e<n&&r>=0&&r<a?{dateProfile:o.dateProfile,dateSpan:Object.assign({allDay:!o.forceTimed,range:{start:o.startDate,end:o.endDate}},o.extraDateSpan),dayEl:s,rect:{left:0,top:0,right:n,bottom:a},layer:1}:null}}class SI extends ft{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Xg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Ba(this.props.elRef,e)},this.handleClick=e=>{let{props:r,context:n}=this,{moreLinkClick:a}=n.options,s=PE(r).start;function o(l){let{def:c,instance:d,range:u}=l.eventRange;return{event:new Ft(n,c,d),start:n.dateEnv.toDate(u.start),end:n.dateEnv.toDate(u.end),isStart:l.isStart,isEnd:l.isEnd}}typeof a=="function"&&(a=a({date:s,allDay:!!r.allDayDate,allSegs:r.allSegs.map(o),hiddenSegs:r.hiddenSegs.map(o),jsEvent:e,view:n.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&n.calendarApi.zoomTo(s,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:r}=this;return U(Ka.Consumer,null,n=>{let{viewApi:a,options:s,calendarApi:o}=n,{moreLinkText:l}=s,{moreCnt:c}=e,d=PE(e),u=typeof l=="function"?l.call(o,c):`+${c} ${l}`,h=yd(s.moreLinkHint,[c],u),f={num:c,shortText:`+${c}`,text:u,view:a};return U(Tt,null,!!e.moreCnt&&U(hn,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),A$(this.handleClick)),{title:h,"aria-expanded":r.isPopoverOpen,"aria-controls":r.isPopoverOpen?r.popoverId:""}),renderProps:f,generatorName:"moreLinkContent",customGenerator:s.moreLinkContent,defaultGenerator:e.defaultGenerator||mje,classNameGenerator:s.moreLinkClassNames,didMount:s.moreLinkDidMount,willUnmount:s.moreLinkWillUnmount},e.children),r.isPopoverOpen&&U(fje,{id:r.popoverId,startDate:d.start,endDate:d.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=wr(this.linkEl,".fc-view-harness"))}}function mje(t){return t.text}function PE(t){if(t.allDayDate)return{start:t.allDayDate,end:Nr(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:kI(e),end:pje(e)}}function kI(t){return t.reduce(gje).eventRange.range.start}function gje(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function pje(t){return t.reduce(vje).eventRange.range.end}function vje(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class yje{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let r of this.handlers)r(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class bje extends yje{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:r}=this;let n=!1;e.isActive?(r.set(e.id,e),n=!0):r.has(e.id)&&(r.delete(e.id),n=!0),n&&this.set(r)}}const xje=[],NI={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},EI=Object.assign(Object.assign({},NI),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function wje(t){let e=t.length>0?t[0].code:"en",r=xje.concat(t),n={en:EI};for(let a of r)n[a.code]=a;return{map:n,defaultCode:e}}function CI(t,e){return typeof t=="object"&&!Array.isArray(t)?AI(t.code,[t.code],t):_je(t,e)}function _je(t,e){let r=[].concat(t||[]),n=jje(r,e)||EI;return AI(t,r,n)}function jje(t,e){for(let r=0;r<t.length;r+=1){let n=t[r].toLocaleLowerCase().split("-");for(let a=n.length;a>0;a-=1){let s=n.slice(0,a).join("-");if(e[s])return e[s]}}return null}function AI(t,e,r){let n=c_([NI,r],["buttonText"]);delete n.code;let{week:a}=n;return delete n.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:n}}function Ga(t){return{id:go(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function Sje(t,e){let r={},n={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(s){for(let o of s){const l=o.name,c=r[l];c===void 0?(r[l]=o.id,a(o.deps),n=Nje(n,o)):c!==o.id&&console.warn(`Duplicate plugin '${l}'`)}}return t&&a(t),a(e),n}function kje(){let t=[],e=[],r;return(n,a)=>((!r||!Is(n,t)||!Is(a,e))&&(r=Sje(n,a)),t=n,e=a,r)}function Nje(t,e){return{premiumReleaseDate:Eje(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function Eje(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class Qs extends zu{}Qs.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};Qs.prototype.baseIconClass="fc-icon";Qs.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};Qs.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};Qs.prototype.iconOverrideOption="buttonIcons";Qs.prototype.iconOverrideCustomButtonOption="icon";Qs.prototype.iconOverridePrefix="fc-icon-";function Cje(t,e){let r={},n;for(n in t)hx(n,r,t,e);for(n in e)hx(n,r,t,e);return r}function hx(t,e,r,n){if(e[t])return e[t];let a=Aje(t,e,r,n);return a&&(e[t]=a),a}function Aje(t,e,r,n){let a=r[t],s=n[t],o=u=>a&&a[u]!==null?a[u]:s&&s[u]!==null?s[u]:null,l=o("component"),c=o("superType"),d=null;if(c){if(c===t)throw new Error("Can't have a custom view type that references itself");d=hx(c,e,r,n)}return!l&&d&&(l=d.component),l?{type:t,component:l,defaults:Object.assign(Object.assign({},d?d.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},d?d.overrides:{}),s?s.rawOptions:{})}:null}function ME(t){return Fa(t,Tje)}function Tje(t){let e=typeof t=="function"?{component:t}:t,{component:r}=e;return e.content?r=OE(e):r&&!(r.prototype instanceof ft)&&(r=OE(Object.assign(Object.assign({},e),{content:r}))),{superType:e.type,component:r,rawOptions:e}}function OE(t){return e=>U(Ka.Consumer,null,r=>U(hn,{elTag:"div",elClasses:L$(r.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:r.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function Dje(t,e,r,n){let a=ME(t),s=ME(e.views),o=Cje(a,s);return Fa(o,l=>Pje(l,s,e,r,n))}function Pje(t,e,r,n,a){let s=t.overrides.duration||t.defaults.duration||n.duration||r.duration,o=null,l="",c="",d={};if(s&&(o=Mje(s),o)){let f=ax(o);l=f.unit,f.value===1&&(c=l,d=e[l]?e[l].rawOptions:{})}let u=f=>{let m=f.buttonText||{},v=t.defaults.buttonTextKey;return v!=null&&m[v]!=null?m[v]:m[t.type]!=null?m[t.type]:m[c]!=null?m[c]:null},h=f=>{let m=f.buttonHints||{},v=t.defaults.buttonTextKey;return v!=null&&m[v]!=null?m[v]:m[t.type]!=null?m[t.type]:m[c]!=null?m[c]:null};return{type:t.type,component:t.component,duration:o,durationUnit:l,singleUnit:c,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},d),t.overrides),buttonTextOverride:u(n)||u(r)||t.overrides.buttonText,buttonTextDefault:u(a)||t.defaults.buttonText||u(Ti)||t.type,buttonTitleOverride:h(n)||h(r)||t.overrides.buttonHint,buttonTitleDefault:h(a)||t.defaults.buttonHint||h(Ti)}}let RE={};function Mje(t){let e=JSON.stringify(t),r=RE[e];return r===void 0&&(r=et(t),RE[e]=r),r}function Oje(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function Rje(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function $je(t,e,r){let n=t.initialDate;return n!=null?e.createMarker(n):r.getDateMarker()}function Ije(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function Lje(t,e,r,n){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return n.build(e.dateMarker||r);case"CHANGE_DATE":return n.build(e.dateMarker);case"PREV":if(a=n.buildPrev(t,r),a.isValid)return a;break;case"NEXT":if(a=n.buildNext(t,r),a.isValid)return a;break}return t}function Fje(t,e,r){let n=e?e.activeRange:null;return DI({},Kje(t,r),n,r)}function Bje(t,e,r,n){let a=r?r.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return DI(t,e.sources,a,n);case"REMOVE_EVENT_SOURCE":return Uje(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?PI(t,a,n):t;case"FETCH_EVENT_SOURCES":return T_(t,e.sourceIds?M$(e.sourceIds):MI(t,n),a,e.isRefetch||!1,n);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return Wje(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function qje(t,e,r){let n=e?e.activeRange:null;return T_(t,MI(t,r),n,!0,r)}function TI(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function DI(t,e,r,n){let a={};for(let s of e)a[s.sourceId]=s;return r&&(a=PI(a,r,n)),Object.assign(Object.assign({},t),a)}function Uje(t,e){return Ji(t,r=>r.sourceId!==e)}function PI(t,e,r){return T_(t,Ji(t,n=>zje(n,e,r)),e,!1,r)}function zje(t,e,r){return OI(t,r)?!r.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function T_(t,e,r,n,a){let s={};for(let o in t){let l=t[o];e[o]?s[o]=Hje(l,r,n,a):s[o]=l}return s}function Hje(t,e,r,n){let{options:a,calendarApi:s}=n,o=n.pluginHooks.eventSourceDefs[t.sourceDefId],l=go();return o.fetch({eventSource:t,range:e,isRefetch:r,context:n},c=>{let{rawEvents:d}=c;a.eventSourceSuccess&&(d=a.eventSourceSuccess.call(s,d,c.response)||d),t.success&&(d=t.success.call(s,d,c.response)||d),n.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:l,fetchRange:e,rawEvents:d})},c=>{let d=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(s,c),d=!0),t.failure&&(t.failure(c),d=!0),d||console.warn(c.message,c),n.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:l,fetchRange:e,error:c})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:l})}function Wje(t,e,r,n){let a=t[e];return a&&r===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:n})}):t}function MI(t,e){return Ji(t,r=>OI(r,e))}function Kje(t,e){let r=K$(e),n=[].concat(t.eventSources||[]),a=[];t.initialEvents&&n.unshift(t.initialEvents),t.events&&n.unshift(t.events);for(let s of n){let o=W$(s,e,r);o&&a.push(o)}return a}function OI(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function Gje(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function Vje(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function Qje(t,e){let r;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return r=e.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return t}}function Jje(t,e){let r;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return r=e.state,{affectedEvents:r.affectedEvents,mutatedEvents:r.mutatedEvents,isEvent:r.isEvent};default:return t}}function Yje(t,e,r,n,a){let s=t.headerToolbar?$E(t.headerToolbar,t,e,r,n,a):null,o=t.footerToolbar?$E(t.footerToolbar,t,e,r,n,a):null;return{header:s,footer:o}}function $E(t,e,r,n,a,s){let o={},l=[],c=!1;for(let d in t){let u=t[d],h=Xje(u,e,r,n,a,s);o[d]=h.widgets,l.push(...h.viewsWithButtons),c=c||h.hasTitle}return{sectionWidgets:o,viewsWithButtons:l,hasTitle:c}}function Xje(t,e,r,n,a,s){let o=e.direction==="rtl",l=e.customButtons||{},c=r.buttonText||{},d=e.buttonText||{},u=r.buttonHints||{},h=e.buttonHints||{},f=t?t.split(" "):[],m=[],v=!1;return{widgets:f.map(g=>g.split(",").map(y=>{if(y==="title")return v=!0,{buttonName:y};let b,w,j,_,S,N;if(b=l[y])j=k=>{b.click&&b.click.call(k.target,k,k.target)},(_=n.getCustomButtonIconClass(b))||(_=n.getIconClass(y,o))||(S=b.text),N=b.hint||b.text;else if(w=a[y]){m.push(y),j=()=>{s.changeView(y)},(S=w.buttonTextOverride)||(_=n.getIconClass(y,o))||(S=w.buttonTextDefault);let k=w.buttonTextOverride||w.buttonTextDefault;N=yd(w.buttonTitleOverride||w.buttonTitleDefault||e.viewHint,[k,y],k)}else if(s[y])if(j=()=>{s[y]()},(S=c[y])||(_=n.getIconClass(y,o))||(S=d[y]),y==="prevYear"||y==="nextYear"){let k=y==="prevYear"?"prev":"next";N=yd(u[k]||h[k],[d.year||"year","year"],d[y])}else N=k=>yd(u[y]||h[y],[d[k]||k,k],d[y]);return{buttonName:y,buttonClick:j,buttonIcon:_,buttonText:S,buttonHint:N}})),viewsWithButtons:m,hasTitle:v}}class Zje{constructor(e,r,n){this.type=e,this.getCurrentData=r,this.dateEnv=n}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let e1e={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const t1e=Ga({name:"array-event-source",eventSourceDefs:[e1e]});let r1e={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,r){const{dateEnv:n}=t.context,a=t.eventSource.meta;u_e(a.bind(null,rI(t.range,n)),s=>e({rawEvents:s}),r)}};const n1e=Ga({name:"func-event-source",eventSourceDefs:[r1e]}),a1e={method:String,extraParams:X,startParam:String,endParam:String,timeZoneParam:String};let s1e={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,r){const{meta:n}=t.eventSource,a=o1e(n,t.range,t.context);h_e(n.method,n.url,a).then(([s,o])=>{e({rawEvents:s,response:o})},r)}};const i1e=Ga({name:"json-event-source",eventSourceRefiners:a1e,eventSourceDefs:[s1e]});function o1e(t,e,r){let{dateEnv:n,options:a}=r,s,o,l,c,d={};return s=t.startParam,s==null&&(s=a.startParam),o=t.endParam,o==null&&(o=a.endParam),l=t.timeZoneParam,l==null&&(l=a.timeZoneParam),typeof t.extraParams=="function"?c=t.extraParams():c=t.extraParams||{},Object.assign(d,c),d[s]=n.formatIso(e.start),d[o]=n.formatIso(e.end),n.timeZone!=="local"&&(d[l]=n.timeZone),d}const l1e={daysOfWeek:X,startTime:et,endTime:et,duration:et,startRecur:X,endRecur:X};let c1e={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let r={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},n;return t.duration&&(n=t.duration),!n&&t.startTime&&t.endTime&&(n=S0e(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:n,typeData:r}}return null},expand(t,e,r){let n=Yi(e,{start:t.startRecur,end:t.endRecur});return n?u1e(t.daysOfWeek,t.startTime,t.dateEnv,r,n):[]}};const d1e=Ga({name:"simple-recurring-event",recurringTypes:[c1e],eventRefiners:l1e});function u1e(t,e,r,n,a){let s=t?M$(t):null,o=Pt(a.start),l=a.end,c=[];for(;o<l;){let d;(!s||s[o.getUTCDay()])&&(e?d=n.add(o,e):d=o,c.push(n.createMarker(r.toDate(d)))),o=Nr(o,1)}return c}const h1e=Ga({name:"change-handler",optionChangeHandlers:{events(t,e){IE([t],e)},eventSources:IE}});function IE(t,e){let r=d_(e.getCurrentData().eventSources);if(r.length===1&&t.length===1&&Array.isArray(r[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:r[0].sourceId,rawEvents:t[0]});return}let n=[];for(let a of t){let s=!1;for(let o=0;o<r.length;o+=1)if(r[o]._raw===a){r.splice(o,1),s=!0;break}s||n.push(a)}for(let a of r)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of n)e.calendarApi.addEventSource(a)}function f1e(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},rI(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function m1e(t,e){let{emitter:r}=e;r.hasHandlers("eventsSet")&&r.trigger("eventsSet",Di(t,e))}const g1e=[t1e,n1e,i1e,d1e,h1e,Ga({name:"misc",isLoadingFuncs:[t=>TI(t.eventSources)],propSetHandlers:{dateProfile:f1e,eventStore:m1e}})];class p1e{constructor(e,r){this.runTaskOption=e,this.drainedOption=r,this.queue=[],this.delayedRunner=new a_(this.drain.bind(this))}request(e,r){this.queue.push(e),this.delayedRunner.request(r)}pause(e){this.delayedRunner.pause(e)}resume(e,r){this.delayedRunner.resume(e,r)}drain(){let{queue:e}=this;for(;e.length;){let r=[],n;for(;n=e.shift();)this.runTask(n),r.push(n);this.drained(r)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function v1e(t,e,r){let n;return/^(year|month)$/.test(t.currentRangeUnit)?n=t.currentRange:n=t.activeRange,r.formatRange(n.start,n.end,qt(e.titleFormat||y1e(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function y1e(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let r=hm(t.currentRange.start,t.currentRange.end);return r!==null&&r>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class LE{constructor(){this.resetListeners=new Set}handleInput(e,r){const n=this.dateEnv;if(e!==n&&(typeof r=="function"?this.nowFn=r:n||(this.nowAnchorDate=e.toDate(r?e.createMarker(r):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,n))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class b1e{constructor(e){this.computeCurrentViewData=Oe(this._computeCurrentViewData),this.organizeRawLocales=Oe(wje),this.buildLocale=Oe(CI),this.buildPluginHooks=kje(),this.buildDateEnv=Oe(x1e),this.buildTheme=Oe(w1e),this.parseToolbars=Oe(Yje),this.buildViewSpecs=Oe(Dje),this.buildDateProfileGenerator=Gh(_1e),this.buildViewApi=Oe(j1e),this.buildViewUiProps=Gh(N1e),this.buildEventUiBySource=Oe(S1e,ua),this.buildEventUiBases=Oe(k1e),this.parseContextBusinessHours=Gh(E1e),this.buildTitle=Oe(v1e),this.nowManager=new LE,this.emitter=new ip,this.actionRunner=new p1e(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=f=>{this.actionRunner.request(f)},this.props=e,this.actionRunner.pause(),this.nowManager=new LE;let r={},n=this.computeOptionsData(e.optionOverrides,r,e.calendarApi),a=n.calendarOptions.initialView||n.pluginHooks.initialView,s=this.computeCurrentViewData(a,n,e.optionOverrides,r);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(s.options);let o={nowManager:this.nowManager,dateEnv:n.dateEnv,options:n.calendarOptions,pluginHooks:n.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},l=$je(n.calendarOptions,n.dateEnv,this.nowManager),c=s.dateProfileGenerator.build(l);Pa(c.activeRange,l)||(l=c.currentRange.start);for(let f of n.pluginHooks.contextInit)f(o);let d=Fje(n.calendarOptions,c,o),u={dynamicOptionOverrides:r,currentViewType:a,currentDate:l,dateProfile:c,businessHours:this.parseContextBusinessHours(o),eventSources:d,eventUiBases:{},eventStore:Er(),renderableEventStore:Er(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(o).selectionConfig},h=Object.assign(Object.assign({},o),u);for(let f of n.pluginHooks.reducers)Object.assign(u,f(null,null,h));Av(u,o)&&this.emitter.trigger("loading",!0),this.state=u,this.updateData(),this.actionRunner.resume()}resetOptions(e,r){let{props:n}=this;r===void 0?n.optionOverrides=e:(n.optionOverrides=Object.assign(Object.assign({},n.optionOverrides||{}),e),this.optionsForRefining.push(...r)),(r===void 0||r.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:r,state:n,emitter:a}=this,s=Ije(n.dynamicOptionOverrides,e),o=this.computeOptionsData(r.optionOverrides,s,r.calendarApi),l=Oje(n.currentViewType,e),c=this.computeCurrentViewData(l,o,r.optionOverrides,s);r.calendarApi.currentDataManager=this,a.setThisContext(r.calendarApi),a.setOptions(c.options);let d={nowManager:this.nowManager,dateEnv:o.dateEnv,options:o.calendarOptions,pluginHooks:o.pluginHooks,calendarApi:r.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:u,dateProfile:h}=n;this.data&&this.data.dateProfileGenerator!==c.dateProfileGenerator&&(h=c.dateProfileGenerator.build(u)),u=Rje(u,e),h=Lje(h,e,u,c.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!Pa(h.currentRange,u))&&(u=h.currentRange.start);let f=Bje(n.eventSources,e,h,d),m=Lwe(n.eventStore,e,f,h,d),p=TI(f)&&!c.options.progressiveEventRendering&&n.renderableEventStore||m,{eventUiSingleBase:g,selectionConfig:y}=this.buildViewUiProps(d),b=this.buildEventUiBySource(f),w=this.buildEventUiBases(p.defs,g,b),j={dynamicOptionOverrides:s,currentViewType:l,currentDate:u,dateProfile:h,eventSources:f,eventStore:m,renderableEventStore:p,selectionConfig:y,eventUiBases:w,businessHours:this.parseContextBusinessHours(d),dateSelection:Gje(n.dateSelection,e),eventSelection:Vje(n.eventSelection,e),eventDrag:Qje(n.eventDrag,e),eventResize:Jje(n.eventResize,e)},_=Object.assign(Object.assign({},d),j);for(let k of o.pluginHooks.reducers)Object.assign(j,k(n,e,_));let S=Av(n,d),N=Av(j,d);!S&&N?a.trigger("loading",!0):S&&!N&&a.trigger("loading",!1),this.state=j,r.onAction&&r.onAction(e)}updateData(){let{props:e,state:r}=this,n=this.data,a=this.computeOptionsData(e.optionOverrides,r.dynamicOptionOverrides,e.calendarApi),s=this.computeCurrentViewData(r.currentViewType,a,e.optionOverrides,r.dynamicOptionOverrides),o=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(r.dateProfile,s.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),s),r),l=a.pluginHooks.optionChangeHandlers,c=n&&n.calendarOptions,d=a.calendarOptions;if(c&&c!==d){c.timeZone!==d.timeZone&&(r.eventSources=o.eventSources=qje(o.eventSources,r.dateProfile,o),r.eventStore=o.eventStore=CE(o.eventStore,n.dateEnv,o.dateEnv),r.renderableEventStore=o.renderableEventStore=CE(o.renderableEventStore,n.dateEnv,o.dateEnv));for(let u in l)(this.optionsForHandling.indexOf(u)!==-1||c[u]!==d[u])&&l[u](d[u],o)}this.optionsForHandling=[],e.onData&&e.onData(o)}computeOptionsData(e,r,n){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&r===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:s,localeDefaults:o,availableLocaleData:l,extra:c}=this.processRawCalendarOptions(e,r);FE(c);let d=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,s,l,a.defaultRangeSeparator),u=this.buildViewSpecs(s.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,o),h=this.buildTheme(a,s),f=this.parseToolbars(a,this.stableOptionOverrides,h,u,n);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:s,dateEnv:d,viewSpecs:u,theme:h,toolbarConfig:f,localeDefaults:o,availableRawLocales:l.map}}processRawCalendarOptions(e,r){let{locales:n,locale:a}=xv([Ti,e,r]),s=this.organizeRawLocales(n),o=s.map,l=this.buildLocale(a||s.defaultCode,o).options,c=this.buildPluginHooks(e.plugins||[],g1e),d=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_E),jE),SE),c.listenerRefiners),c.optionRefiners),u={},h=xv([Ti,l,e,r]),f={},m=this.currentCalendarOptionsInput,v=this.currentCalendarOptionsRefined,p=!1;for(let g in h)this.optionsForRefining.indexOf(g)===-1&&(h[g]===m[g]||ii[g]&&g in m&&ii[g](m[g],h[g]))?f[g]=v[g]:d[g]?(f[g]=d[g](h[g]),p=!0):u[g]=m[g];return p&&(this.currentCalendarOptionsInput=h,this.currentCalendarOptionsRefined=f,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=r),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:c,availableLocaleData:s,localeDefaults:l,extra:u}}_computeCurrentViewData(e,r,n,a){let s=r.viewSpecs[e];if(!s)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:o,extra:l}=this.processRawViewOptions(s,r.pluginHooks,r.localeDefaults,n,a);FE(l),this.nowManager.handleInput(r.dateEnv,o.now);let c=this.buildDateProfileGenerator({dateProfileGeneratorClass:s.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:s.duration,durationUnit:s.durationUnit,usesMinMaxTime:s.optionDefaults.usesMinMaxTime,dateEnv:r.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:o.slotMinTime,slotMaxTime:o.slotMaxTime,showNonCurrentDates:o.showNonCurrentDates,dayCount:o.dayCount,dateAlignment:o.dateAlignment,dateIncrement:o.dateIncrement,hiddenDays:o.hiddenDays,weekends:o.weekends,validRangeInput:o.validRange,visibleRangeInput:o.visibleRange,fixedWeekCount:o.fixedWeekCount}),d=this.buildViewApi(e,this.getCurrentData,r.dateEnv);return{viewSpec:s,options:o,dateProfileGenerator:c,viewApi:d}}processRawViewOptions(e,r,n,a,s){let o=xv([Ti,e.optionDefaults,n,a,e.optionOverrides,s]),l=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_E),jE),SE),nwe),r.listenerRefiners),r.optionRefiners),c={},d=this.currentViewOptionsInput,u=this.currentViewOptionsRefined,h=!1,f={};for(let m in o)o[m]===d[m]||ii[m]&&ii[m](o[m],d[m])?c[m]=u[m]:(o[m]===this.currentCalendarOptionsInput[m]||ii[m]&&ii[m](o[m],this.currentCalendarOptionsInput[m])?m in this.currentCalendarOptionsRefined&&(c[m]=this.currentCalendarOptionsRefined[m]):l[m]?c[m]=l[m](o[m]):f[m]=o[m],h=!0);return h&&(this.currentViewOptionsInput=o,this.currentViewOptionsRefined=c),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:f}}}function x1e(t,e,r,n,a,s,o,l){let c=CI(e||o.defaultCode,o.map);return new fwe({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:s.namedTimeZonedImpl,locale:c,weekNumberCalculation:r,firstDay:n,weekText:a,cmdFormatter:s.cmdFormatter,defaultSeparator:l})}function w1e(t,e){let r=e.themeClasses[t.themeSystem]||Qs;return new r(t)}function _1e(t){let e=t.dateProfileGeneratorClass||q$;return new e(t)}function j1e(t,e,r){return new Zje(t,e,r)}function S1e(t){return Fa(t,e=>e.ui)}function k1e(t,e,r){let n={"":e};for(let a in t){let s=t[a];s.sourceId&&r[s.sourceId]&&(n[a]=r[s.sourceId])}return n}function N1e(t){let{options:e}=t;return{eventUiSingleBase:xm({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:xm({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Av(t,e){for(let r of e.pluginHooks.isLoadingFuncs)if(r(t))return!0;return!1}function E1e(t){return Gwe(t.options.businessHours,t)}function FE(t,e){for(let r in t)console.warn(`Unknown option '${r}'`)}class C1e extends ft{render(){let e=this.props.widgetGroups.map(r=>this.renderWidgetGroup(r));return U("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:r}=this,{theme:n}=this.context,a=[],s=!0;for(let o of e){let{buttonName:l,buttonClick:c,buttonText:d,buttonIcon:u,buttonHint:h}=o;if(l==="title")s=!1,a.push(U("h2",{className:"fc-toolbar-title",id:r.titleId},r.title));else{let f=l===r.activeButton,m=!r.isTodayEnabled&&l==="today"||!r.isPrevEnabled&&l==="prev"||!r.isNextEnabled&&l==="next",v=[`fc-${l}-button`,n.getClass("button")];f&&v.push(n.getClass("buttonActive")),a.push(U("button",{type:"button",title:typeof h=="function"?h(r.navUnit):h,disabled:m,"aria-pressed":f,className:v.join(" "),onClick:c},d||(u?U("span",{className:u,role:"img"}):"")))}}if(a.length>1){let o=s&&n.getClass("buttonGroup")||"";return U("div",{className:o},...a)}return a[0]}}class BE extends ft{render(){let{model:e,extraClassName:r}=this.props,n=!1,a,s,o=e.sectionWidgets,l=o.center;return o.left?(n=!0,a=o.left):a=o.start,o.right?(n=!0,s=o.right):s=o.end,U("div",{className:[r||"","fc-toolbar",n?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",l||[]),this.renderSection("end",s||[]))}renderSection(e,r){let{props:n}=this;return U(C1e,{key:e,widgetGroups:r,title:n.title,navUnit:n.navUnit,activeButton:n.activeButton,isTodayEnabled:n.isTodayEnabled,isPrevEnabled:n.isPrevEnabled,isNextEnabled:n.isNextEnabled,titleId:n.titleId})}}class A1e extends ft{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Ba(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:r}=this,{aspectRatio:n}=e,a=["fc-view-harness",n||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],s="",o="";return n?r.availableWidth!==null?s=r.availableWidth/n:o=`${1/n*100}%`:s=e.height||"",U("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:s,paddingBottom:o}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class T1e extends Tc{constructor(e){super(e),this.handleSegClick=(r,n)=>{let{component:a}=this,{context:s}=a,o=nc(n);if(o&&a.isValidSegDownEl(r.target)){let l=wr(r.target,".fc-event-forced-url"),c=l?l.querySelector("a[href]").href:"";s.emitter.trigger("eventClick",{el:n,event:new Ft(a.context,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:s.viewApi}),c&&!r.defaultPrevented&&(window.location.href=c)}},this.destroy=C$(e.el,"click",".fc-event",this.handleSegClick)}}class D1e extends Tc{constructor(e){super(e),this.handleEventElRemove=r=>{r===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(r,n)=>{nc(n)&&(this.currentSegEl=n,this.triggerEvent("eventMouseEnter",r,n))},this.handleSegLeave=(r,n)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",r,n))},this.removeHoverListeners=c0e(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,r,n){let{component:a}=this,{context:s}=a,o=nc(n);(!r||a.isValidSegDownEl(r.target))&&s.emitter.trigger(e,{el:n,event:new Ft(s,o.eventRange.def,o.eventRange.instance),jsEvent:r,view:s.viewApi})}}class P1e extends vo{constructor(){super(...arguments),this.buildViewContext=Oe(pwe),this.buildViewPropTransformers=Oe(O1e),this.buildToolbarProps=Oe(M1e),this.headerRef=Ir(),this.footerRef=Ir(),this.interactionsStore={},this.state={viewLabelId:Xg()},this.registerInteractiveComponent=(e,r)=>{let n=g_e(e,r),o=[T1e,D1e].concat(this.props.pluginHooks.componentInteractions).map(l=>new l(n));this.interactionsStore[e.uid]=o,_m[e.uid]=n},this.unregisterInteractiveComponent=e=>{let r=this.interactionsStore[e.uid];if(r){for(let n of r)n.destroy();delete this.interactionsStore[e.uid]}delete _m[e.uid]},this.resizeRunner=new a_(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:r}=this.props;r.handleWindowResize&&e.target===window&&this.resizeRunner.request(r.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:r,options:n}=e,a=!1,s="",o;e.isHeightAuto||e.forPrint?s="":n.height!=null?a=!0:n.contentHeight!=null?s=n.contentHeight:o=Math.max(n.aspectRatio,.5);let l=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),c=r.header&&r.header.hasTitle?this.state.viewLabelId:void 0;return U(Ka.Provider,{value:l},U(Dc,{unit:"day"},d=>{let u=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,d,e.viewTitle);return U(Tt,null,r.header&&U(BE,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:r.header,titleId:c},u)),U(A1e,{liquid:a,height:s,aspectRatio:o,labeledById:c},this.renderView(e),this.buildAppendContent()),r.footer&&U(BE,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:r.footer,titleId:""},u)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(n=>new n(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:r}=e.pluginHooks;for(let n in r)r[n](e[n],e)}componentDidUpdate(e){let{props:r}=this,{propSetHandlers:n}=r.pluginHooks;for(let a in n)r[a]!==e[a]&&n[a](r[a],r)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,r=e.pluginHooks.viewContainerAppends.map(n=>n(e));return U(Tt,{},...r)}renderView(e){let{pluginHooks:r}=e,{viewSpec:n}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},s=this.buildViewPropTransformers(r.viewPropsTransformers);for(let l of s)Object.assign(a,l.transform(a,e));let o=n.component;return U(o,Object.assign({},a))}}function M1e(t,e,r,n,a,s){let o=r.build(a,void 0,!1),l=r.buildPrev(e,n,!1),c=r.buildNext(e,n,!1);return{title:s,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:o.isValid&&!Pa(e.currentRange,a),isPrevEnabled:l.isValid,isNextEnabled:c.isValid}}function O1e(t){return t.map(e=>new e)}class R1e extends v_e{constructor(e,r={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=n=>{switch(n.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=n=>{this.currentData=n,this.renderRunner.request(n.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:n}=this;pm(()=>{lu(U(m_e,{options:n.calendarOptions,theme:n.theme,emitter:n.emitter},(a,s,o,l)=>(this.setClassNames(a),this.setHeight(s),U(I$.Provider,{value:this.customContentRenderId},U(P1e,Object.assign({isHeightAuto:o,forPrint:l},n))))),this.el)})}else this.isRendered&&(this.isRendered=!1,lu(null,this.el),this.setClassNames([]),this.setHeight(""))},t0e(e),this.el=e,this.renderRunner=new a_(this.handleRenderRequest),new b1e({optionOverrides:r,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){pm(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,r){this.currentDataManager.resetOptions(e,r)}setClassNames(e){if(!Is(e,this.currentClassNames)){let{classList:r}=this.el;for(let n of this.currentClassNames)r.remove(n);for(let n of e)r.add(n);this.currentClassNames=e}}setHeight(e){N$(this.el,"height",e)}}const $1e=parseInt(String($.version).split(".")[0]),I1e=$1e<18;class yo extends x.Component{constructor(){super(...arguments),this.elRef=x.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const r of this.state.customRenderingMap.values())e.push($.createElement(L1e,{key:r.id,customRendering:r}));return $.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new bje;this.handleCustomRendering=e.handle.bind(e),this.calendar=new R1e(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Ri.flushSync(()=>{})});let r;e.subscribe(n=>{const a=Date.now(),s=!r;(I1e||s||this.isUpdating||this.isUnmounting||a-r<100?RI:Ri.flushSync)(()=>{this.setState({customRenderingMap:n},()=>{r=a,s?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}yo.act=RI;class L1e extends x.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:r}=e,n=typeof r=="function"?r(e.renderProps):r;return Ri.createPortal(n,e.containerEl)}}function RI(t){t()}class F1e extends ga{constructor(){super(...arguments),this.headerElRef=Ir()}renderSimpleLayout(e,r){let{props:n,context:a}=this,s=[],o=Sm(a.options);return e&&s.push({type:"header",key:"header",isSticky:o,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s.push({type:"body",key:"body",liquid:!0,chunk:{content:r}}),U(vm,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},U(k_,{liquid:!n.isHeightAuto&&!n.forPrint,collapsibleWidth:n.forPrint,cols:[],sections:s}))}renderHScrollLayout(e,r,n,a){let s=this.context.pluginHooks.scrollGridImpl;if(!s)throw new Error("No ScrollGrid implementation");let{props:o,context:l}=this,c=!o.forPrint&&Sm(l.options),d=!o.forPrint&&bI(l.options),u=[];return e&&u.push({type:"header",key:"header",isSticky:c,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),u.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:r}]}),d&&u.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:ux}]}),U(vm,{elClasses:["fc-daygrid"],viewSpec:l.viewSpec},U(s,{liquid:!o.isHeightAuto&&!o.forPrint,forPrint:o.forPrint,collapsibleWidth:o.forPrint,colGroups:[{cols:[{span:n,minWidth:a}]}],sections:u}))}}function Ah(t,e){let r=[];for(let n=0;n<e;n+=1)r[n]=[];for(let n of t)r[n.row].push(n);return r}function Th(t,e){let r=[];for(let n=0;n<e;n+=1)r[n]=[];for(let n of t)r[n.firstCol].push(n);return r}function qE(t,e){let r=[];if(t){for(let n=0;n<e;n+=1)r[n]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let n of t.segs)r[n.row].segs.push(n)}else for(let n=0;n<e;n+=1)r[n]=null;return r}const $I=qt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function II(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class LI extends ft{render(){let{props:e}=this;return U(xI,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:$I,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class FI extends ft{render(){let{props:e,context:r}=this,{options:n}=r,{seg:a}=e,s=n.eventTimeFormat||$I,o=Z$(a,s,r,!0,e.defaultDisplayEventEnd);return U(N_,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:tI(e.seg,r),defaultGenerator:B1e,timeText:o,isResizing:!1,isDateSelecting:!1}))}}function B1e(t){return U(Tt,null,U("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&U("div",{className:"fc-event-time"},t.timeText),U("div",{className:"fc-event-title"},t.event.title||U(Tt,null,"")))}class q1e extends ft{constructor(){super(...arguments),this.compileSegs=Oe(U1e)}render(){let{props:e}=this,{allSegs:r,invisibleSegs:n}=this.compileSegs(e.singlePlacements);return U(SI,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:r,hiddenSegs:n,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return U(Tt,null,r.map(s=>{let o=s.eventRange.instance.instanceId;return U("div",{className:"fc-daygrid-event-harness",key:o,style:{visibility:a[o]?"hidden":""}},II(s)?U(FI,Object.assign({seg:s,isDragging:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},As(s,e.todayRange))):U(LI,Object.assign({seg:s,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:o===e.eventSelection,defaultDisplayEventEnd:!1},As(s,e.todayRange))))}))}})}}function U1e(t){let e=[],r=[];for(let n of t)e.push(n.seg),n.isVisible||r.push(n.seg);return{allSegs:e,invisibleSegs:r}}const z1e=qt({week:"narrow"});class H1e extends ga{constructor(){super(...arguments),this.rootElRef=Ir(),this.state={dayNumberId:Xg()},this.handleRootEl=e=>{Ba(this.rootElRef,e),Ba(this.props.elRef,e)}}render(){let{context:e,props:r,state:n,rootElRef:a}=this,{options:s,dateEnv:o}=e,{date:l,dateProfile:c}=r;const d=r.showDayNumber&&K1e(l,c.currentRange,o);return U(C_,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...r.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},r.extraDataAttrs),r.showDayNumber?{"aria-labelledby":n.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:W1e,date:l,dateProfile:c,todayRange:r.todayRange,showDayNumber:r.showDayNumber,isMonthStart:d,extraRenderProps:r.extraRenderProps},(u,h)=>U("div",{ref:r.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:r.minHeight}},r.showWeekNumber&&U(jI,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:jm(e,l,"week"),date:l,defaultFormat:z1e}),!h.isDisabled&&(r.showDayNumber||A_(s)||r.forceDayTop)?U("div",{className:"fc-daygrid-day-top"},U(u,{elTag:"a",elClasses:["fc-daygrid-day-number",d&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},jm(e,l)),{id:n.dayNumberId})})):r.showDayNumber?U("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},U("a",{className:"fc-daygrid-day-number"},"")):void 0,U("div",{className:"fc-daygrid-day-events",ref:r.fgContentElRef},r.fgContent,U("div",{className:"fc-daygrid-day-bottom",style:{marginTop:r.moreMarginTop}},U(q1e,{allDayDate:l,singlePlacements:r.singlePlacements,moreCnt:r.moreCnt,alignmentElRef:a,alignGridTop:!r.showDayNumber,extraDateSpan:r.extraDateSpan,dateProfile:r.dateProfile,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,todayRange:r.todayRange}))),U("div",{className:"fc-daygrid-day-bg"},r.bgContent)))}}function W1e(t){return t.dayNumberText||U(Tt,null,"")}function K1e(t,e,r){const{start:n,end:a}=e,s=Ls(a,-1),o=r.getYear(n),l=r.getMonth(n),c=r.getYear(s),d=r.getMonth(s);return!(o===c&&l===d)&&(t.valueOf()===n.valueOf()||r.getDay(t)===1&&t.valueOf()<a.valueOf())}function BI(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function qI(t){return BI(t)+":"+t.lastCol}function G1e(t,e,r,n,a,s,o){let l=new J1e(y=>{let b=t[y.index].eventRange.instance.instanceId+":"+y.span.start+":"+(y.span.end-1);return a[b]||1});l.allowReslicing=!0,l.strictOrder=n,e===!0||r===!0?(l.maxCoord=s,l.hiddenConsumes=!0):typeof e=="number"?l.maxStackCnt=e:typeof r=="number"&&(l.maxStackCnt=r,l.hiddenConsumes=!0);let c=[],d=[];for(let y=0;y<t.length;y+=1){let b=t[y],w=qI(b);a[w]!=null?c.push({index:y,span:{start:b.firstCol,end:b.lastCol+1}}):d.push(b)}let u=l.addSegs(c),h=l.toRects(),{singleColPlacements:f,multiColPlacements:m,leftoverMargins:v}=V1e(h,t,o),p=[],g=[];for(let y of d){m[y.firstCol].push({seg:y,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let b=y.firstCol;b<=y.lastCol;b+=1)f[b].push({seg:il(y,b,b+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<o.length;y+=1)p.push(0);for(let y of u){let b=t[y.index],w=y.span;m[w.start].push({seg:il(b,w.start,w.end,o),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let j=w.start;j<w.end;j+=1)p[j]+=1,f[j].push({seg:il(b,j,j+1,o),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let y=0;y<o.length;y+=1)g.push(v[y]);return{singleColPlacements:f,multiColPlacements:m,moreCnts:p,moreMarginTops:g}}function V1e(t,e,r){let n=Q1e(t,r.length),a=[],s=[],o=[];for(let l=0;l<r.length;l+=1){let c=n[l],d=[],u=0,h=0;for(let m of c){let v=e[m.index];d.push({seg:il(v,l,l+1,r),isVisible:!0,isAbsolute:!1,absoluteTop:m.levelCoord,marginTop:m.levelCoord-u}),u=m.levelCoord+m.thickness}let f=[];u=0,h=0;for(let m of c){let v=e[m.index],p=m.span.end-m.span.start>1,g=m.span.start===l;h+=m.levelCoord-u,u=m.levelCoord+m.thickness,p?(h+=m.thickness,g&&f.push({seg:il(v,m.span.start,m.span.end,r),isVisible:!0,isAbsolute:!0,absoluteTop:m.levelCoord,marginTop:0})):g&&(f.push({seg:il(v,m.span.start,m.span.end,r),isVisible:!0,isAbsolute:!1,absoluteTop:m.levelCoord,marginTop:h}),h=0)}a.push(d),s.push(f),o.push(h)}return{singleColPlacements:a,multiColPlacements:s,leftoverMargins:o}}function Q1e(t,e){let r=[];for(let n=0;n<e;n+=1)r.push([]);for(let n of t)for(let a=n.span.start;a<n.span.end;a+=1)r[a].push(n);return r}function il(t,e,r,n){if(t.firstCol===e&&t.lastCol===r-1)return t;let a=t.eventRange,s=a.range,o=Yi(s,{start:n[e].date,end:Nr(n[r-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:r-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:o},isStart:t.isStart&&o.start.valueOf()===s.start.valueOf(),isEnd:t.isEnd&&o.end.valueOf()===s.end.valueOf()})}class J1e extends cI{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const r=super.addSegs(e),{entriesByLevel:n}=this,a=s=>!this.forceHidden[Pi(s)];for(let s=0;s<n.length;s+=1)n[s]=n[s].filter(a);return r}handleInvalidInsertion(e,r,n){const{entriesByLevel:a,forceHidden:s}=this,{touchingEntry:o,touchingLevel:l,touchingLateral:c}=e;if(this.hiddenConsumes&&o){const d=Pi(o);if(!s[d])if(this.allowReslicing){const u=Object.assign(Object.assign({},o),{span:j_(o.span,r.span)}),h=Pi(u);s[h]=!0,a[l][c]=u,n.push(u),this.splitEntry(o,r,n)}else s[d]=!0,n.push(o)}super.handleInvalidInsertion(e,r,n)}}class UI extends ga{constructor(){super(...arguments),this.cellElRefs=new Ea,this.frameElRefs=new Ea,this.fgElRefs=new Ea,this.segHarnessRefs=new Ea,this.rootElRef=Ir(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:r,context:n}=this,{options:a}=n,s=e.cells.length,o=Th(e.businessHourSegs,s),l=Th(e.bgEventSegs,s),c=Th(this.getHighlightSegs(),s),d=Th(this.getMirrorSegs(),s),{singleColPlacements:u,multiColPlacements:h,moreCnts:f,moreMarginTops:m}=G1e(X$(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,r.segHeights,r.maxContentHeight,e.cells),v=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return U("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((p,g)=>{let y=this.renderFgSegs(g,e.forPrint?u[g]:h[g],e.todayRange,v),b=this.renderFgSegs(g,Y1e(d[g],h),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return U(H1e,{key:p.key,elRef:this.cellElRefs.createRef(p.key),innerElRef:this.frameElRefs.createRef(p.key),dateProfile:e.dateProfile,date:p.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&g===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:p.extraRenderProps,extraDataAttrs:p.extraDataAttrs,extraClassNames:p.extraClassNames,extraDateSpan:p.extraDateSpan,moreCnt:f[g],moreMarginTop:m[g],singlePlacements:u[g],fgContentElRef:this.fgElRefs.createRef(p.key),fgContent:U(Tt,null,U(Tt,null,y),U(Tt,null,b)),bgContent:U(Tt,null,this.renderFillSegs(c[g],"highlight"),this.renderFillSegs(o[g],"non-business"),this.renderFillSegs(l[g],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,r){let n=this.props;this.updateSizing(!ua(e,n))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,r,n,a,s,o,l){let{context:c}=this,{eventSelection:d}=this.props,{framePositions:u}=this.state,h=this.props.cells.length===1,f=s||o||l,m=[];if(u)for(let v of r){let{seg:p}=v,{instanceId:g}=p.eventRange.instance,y=v.isVisible&&!a[g],b=v.isAbsolute,w="",j="";b&&(c.isRtl?(j=0,w=u.lefts[p.lastCol]-u.lefts[p.firstCol]):(w=0,j=u.rights[p.firstCol]-u.rights[p.lastCol])),m.push(U("div",{className:"fc-daygrid-event-harness"+(b?" fc-daygrid-event-harness-abs":""),key:BI(p),ref:f?null:this.segHarnessRefs.createRef(qI(p)),style:{visibility:y?"":"hidden",marginTop:b?"":v.marginTop,top:b?v.absoluteTop:"",left:w,right:j}},II(p)?U(FI,Object.assign({seg:p,isDragging:s,isSelected:g===d,defaultDisplayEventEnd:h},As(p,n))):U(LI,Object.assign({seg:p,isDragging:s,isResizing:o,isDateSelecting:l,isSelected:g===d,defaultDisplayEventEnd:h},As(p,n)))))}return m}renderFillSegs(e,r){let{isRtl:n}=this.context,{todayRange:a}=this.props,{framePositions:s}=this.state,o=[];if(s)for(let l of e){let c=n?{right:0,left:s.lefts[l.lastCol]-s.lefts[l.firstCol]}:{left:0,right:s.rights[l.firstCol]-s.rights[l.lastCol]};o.push(U("div",{key:eI(l.eventRange),className:"fc-daygrid-bg-harness",style:c},r==="bg-event"?U(wI,Object.assign({seg:l},As(l,a))):_I(r)))}return U(Tt,{},...o)}updateSizing(e){let{props:r,state:n,frameElRefs:a}=this;if(!r.forPrint&&r.clientWidth!==null){if(e){let c=r.cells.map(d=>a.currentMap[d.key]);if(c.length){let d=this.rootElRef.current,u=new ac(d,c,!0,!1);(!n.framePositions||!n.framePositions.similarTo(u))&&this.setState({framePositions:new ac(d,c,!0,!1)})}}const s=this.state.segHeights,o=this.querySegHeights(),l=r.dayMaxEvents===!0||r.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},s),o),maxContentHeight:l?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,r={};for(let n in e){let a=Math.round(e[n].getBoundingClientRect().height);r[n]=Math.max(r[n]||0,a)}return r}computeMaxContentHeight(){let e=this.props.cells[0].key,r=this.cellElRefs.currentMap[e],n=this.fgElRefs.currentMap[e];return r.getBoundingClientRect().bottom-n.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(r=>e[r.key])}}UI.addStateEquality({segHeights:ua});function Y1e(t,e){if(!t.length)return[];let r=X1e(e);return t.map(n=>({seg:n,isVisible:!0,isAbsolute:!0,absoluteTop:r[n.eventRange.instance.instanceId],marginTop:0}))}function X1e(t){let e={};for(let r of t)for(let n of r)e[n.seg.eventRange.instance.instanceId]=n.absoluteTop;return e}class Z1e extends ga{constructor(){super(...arguments),this.splitBusinessHourSegs=Oe(Ah),this.splitBgEventSegs=Oe(Ah),this.splitFgEventSegs=Oe(Ah),this.splitDateSelectionSegs=Oe(Ah),this.splitEventDrag=Oe(qE),this.splitEventResize=Oe(qE),this.rowRefs=new Ea}render(){let{props:e,context:r}=this,n=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,n),s=this.splitBgEventSegs(e.bgEventSegs,n),o=this.splitFgEventSegs(e.fgEventSegs,n),l=this.splitDateSelectionSegs(e.dateSelectionSegs,n),c=this.splitEventDrag(e.eventDrag,n),d=this.splitEventResize(e.eventResize,n),u=n>=7&&e.clientWidth?e.clientWidth/r.options.aspectRatio/6:null;return U(Dc,{unit:"day"},(h,f)=>U(Tt,null,e.cells.map((m,v)=>U(UI,{ref:this.rowRefs.createRef(v),key:m.length?m[0].date.toISOString():v,showDayNumbers:n>1,showWeekNumbers:e.showWeekNumbers,todayRange:f,dateProfile:e.dateProfile,cells:m,renderIntro:e.renderRowIntro,businessHourSegs:a[v],eventSelection:e.eventSelection,bgEventSegs:s[v].filter(eSe),fgEventSegs:o[v],dateSelectionSegs:l[v],eventDrag:c[v],eventResize:d[v],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:u,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],r=e?e.closest(".fc-daygrid-body"):null;r&&(this.rootEl=r,this.context.registerInteractiveComponent(this,{el:r,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new ac(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new ac(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,r){let{colPositions:n,rowPositions:a}=this,s=n.leftToIndex(e),o=a.topToIndex(r);if(o!=null&&s!=null){let l=this.props.cells[o][s];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(o,s),allDay:!0},l.extraDateSpan),dayEl:this.getCellEl(o,s),rect:{left:n.lefts[s],right:n.rights[s],top:a.tops[o],bottom:a.bottoms[o]},layer:0}}return null}getCellEl(e,r){return this.rowRefs.currentMap[e].getCellEls()[r]}getCellRange(e,r){let n=this.props.cells[e][r].date,a=Nr(n,1);return{start:n,end:a}}}function eSe(t){return t.eventRange.def.allDay}class tSe extends ga{constructor(){super(...arguments),this.elRef=Ir(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:r,dayMaxEvents:n,expandRows:a}=e,s=n===!0||r===!0;s&&!a&&(s=!1,r=null,n=null);let o=["fc-daygrid-body",s?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return U("div",{ref:this.elRef,className:o.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},U("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,U("tbody",{role:"presentation"},U(Z1e,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:n,dayMaxEventRows:r,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=rSe(this.elRef.current,this.props.dateProfile);if(e){const r=e.closest(".fc-daygrid-body"),n=r.closest(".fc-scroller"),a=e.getBoundingClientRect().top-r.getBoundingClientRect().top;n.scrollTop=a?a+1:0}this.needsScrollReset=!1}}}function rSe(t,e){let r;return e.currentRangeUnit.match(/year|month/)&&(r=t.querySelector(`[data-date="${B0e(e.currentDate)}-01"]`)),r||(r=t.querySelector(`[data-date="${o_(e.currentDate)}"]`)),r}class nSe extends gI{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,r){return r.sliceRange(e)}}class zI extends ga{constructor(){super(...arguments),this.slicer=new nSe,this.tableRef=Ir()}render(){let{props:e,context:r}=this;return U(tSe,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,r,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class aSe extends F1e{constructor(){super(...arguments),this.buildDayTableModel=Oe(sSe),this.headerRef=Ir(),this.tableRef=Ir()}render(){let{options:e,dateProfileGenerator:r}=this.context,{props:n}=this,a=this.buildDayTableModel(n.dateProfile,r),s=e.dayHeaders&&U(hI,{ref:this.headerRef,dateProfile:n.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),o=l=>U(zI,{ref:this.tableRef,dateProfile:n.dateProfile,dayTableModel:a,businessHours:n.businessHours,dateSelection:n.dateSelection,eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:l.tableColGroupNode,tableMinWidth:l.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!n.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:l.clientWidth,clientHeight:l.clientHeight,forPrint:n.forPrint});return e.dayMinWidth?this.renderHScrollLayout(s,o,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(s,o)}}function sSe(t,e){let r=new fI(t.renderRange,e);return new mI(r,/year|month|week/.test(t.currentRangeUnit))}class iSe extends q${buildRenderRange(e,r,n){let a=super.buildRenderRange(e,r,n),{props:s}=this;return oSe({currentRange:a,snapToWeek:/^(year|month)$/.test(r),fixedWeekCount:s.fixedWeekCount,dateEnv:s.dateEnv})}}function oSe(t){let{dateEnv:e,currentRange:r}=t,{start:n,end:a}=r,s;if(t.snapToWeek&&(n=e.startOfWeek(n),s=e.startOfWeek(a),s.valueOf()!==a.valueOf()&&(a=vE(s,1))),t.fixedWeekCount){let o=e.startOfWeek(e.startOfMonth(Nr(r.end,-1))),l=Math.ceil(A0e(o,a));a=vE(a,6-l)}return{start:n,end:a}}var lSe=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';n_(lSe);class cSe extends __e{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?Xwe(e)?["timed","allDay"]:["allDay"]:["timed"]}}const dSe=qt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function HI(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return U(Ka.Consumer,null,r=>{if(!t.isLabeled)return U("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:n,options:a,viewApi:s}=r,o=a.slotLabelFormat==null?dSe:Array.isArray(a.slotLabelFormat)?qt(a.slotLabelFormat[0]):qt(a.slotLabelFormat),l={level:0,time:t.time,date:n.toDate(t.date),view:s,text:n.format(t.date,o)};return U(hn,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:l,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:uSe,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},c=>U("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},U(c,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function uSe(t){return t.text}class hSe extends ft{render(){return this.props.slatMetas.map(e=>U("tr",{key:e.key},U(HI,Object.assign({},e))))}}const fSe=qt({week:"short"}),mSe=5;class gSe extends ga{constructor(){super(...arguments),this.allDaySplitter=new cSe,this.headerElRef=Ir(),this.rootElRef=Ir(),this.scrollerElRef=Ir(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let r=this.scrollerElRef.current;r&&(r.scrollTop=e)},this.renderHeadAxis=(e,r="")=>{let{options:n}=this.context,{dateProfile:a}=this.props,s=a.renderRange,l=po(s.start,s.end)===1?jm(this.context,s.start,"week"):{};return n.weekNumbers&&e==="day"?U(jI,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:s.start,defaultFormat:fSe},c=>U("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:r}},U(c,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:l}))):U("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},U("div",{className:"fc-timegrid-axis-frame",style:{height:r}}))},this.renderTableRowAxis=e=>{let{options:r,viewApi:n}=this.context,a={text:r.allDayText,view:n};return U(hn,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:a,generatorName:"allDayContent",customGenerator:r.allDayContent,defaultGenerator:pSe,classNameGenerator:r.allDayClassNames,didMount:r.allDayDidMount,willUnmount:r.allDayWillUnmount},s=>U("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},U(s,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,r,n){let{context:a,props:s}=this,o=[],l=Sm(a.options);return e&&o.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),r&&(o.push({type:"body",key:"all-day",chunk:{content:r}}),o.push({type:"body",key:"all-day-divider",outerContent:U("tr",{role:"presentation",className:"fc-scrollgrid-section"},U("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),o.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:n}}),U(vm,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},U(k_,{liquid:!s.isHeightAuto&&!s.forPrint,collapsibleWidth:s.forPrint,cols:[{width:"shrink"}],sections:o}))}renderHScrollLayout(e,r,n,a,s,o,l){let c=this.context.pluginHooks.scrollGridImpl;if(!c)throw new Error("No ScrollGrid implementation");let{context:d,props:u}=this,h=!u.forPrint&&Sm(d.options),f=!u.forPrint&&bI(d.options),m=[];e&&m.push({type:"header",key:"header",isSticky:h,syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>U("tr",{role:"presentation"},this.renderHeadAxis("day",p.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),r&&(m.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:p=>U("tr",{role:"presentation"},this.renderTableRowAxis(p.rowSyncHeights[0]))},{key:"cols",content:r}]}),m.push({key:"all-day-divider",type:"body",outerContent:U("tr",{role:"presentation",className:"fc-scrollgrid-section"},U("td",{colSpan:2,className:"fc-timegrid-divider "+d.theme.getClass("tableCellShaded")}))}));let v=d.options.nowIndicator;return m.push({type:"body",key:"body",liquid:!0,expandRows:!!d.options.expandRows,chunks:[{key:"axis",content:p=>U("div",{className:"fc-timegrid-axis-chunk"},U("table",{"aria-hidden":!0,style:{height:p.expandRows?p.clientHeight:""}},p.tableColGroupNode,U("tbody",null,U(hSe,{slatMetas:o}))),U("div",{className:"fc-timegrid-now-indicator-container"},U(Dc,{unit:v?"minute":"day"},g=>{let y=v&&l&&l.safeComputeTop(g);return typeof y=="number"?U(E_,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:y},isAxis:!0,date:g}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:n}]}),f&&m.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:ux},{key:"cols",content:ux}]}),U(vm,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:d.viewSpec},U(c,{liquid:!u.isHeightAuto&&!u.forPrint,forPrint:u.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:s}]}],sections:m}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:r}=this.context.options;return(e===!0||r===!0)&&(e=void 0,r=mSe),{dayMaxEvents:e,dayMaxEventRows:r}}}function pSe(t){return t.text}class vSe{constructor(e,r,n){this.positions=e,this.dateProfile=r,this.slotDuration=n}safeComputeTop(e){let{dateProfile:r}=this;if(Pa(r.currentRange,e)){let n=Pt(e),a=e.valueOf()-n.valueOf();if(a>=Ln(r.slotMinTime)&&a<Ln(r.slotMaxTime))return this.computeTimeTop(et(a))}return null}computeDateTop(e,r){return r||(r=Pt(e)),this.computeTimeTop(et(e.valueOf()-r.valueOf()))}computeTimeTop(e){let{positions:r,dateProfile:n}=this,a=r.els.length,s=(e.milliseconds-Ln(n.slotMinTime))/Ln(this.slotDuration),o,l;return s=Math.max(0,s),s=Math.min(a,s),o=Math.floor(s),o=Math.min(o,a-1),l=s-o,r.tops[o]+r.getHeight(o)*l}}class ySe extends ft{render(){let{props:e,context:r}=this,{options:n}=r,{slatElRefs:a}=e;return U("tbody",null,e.slatMetas.map((s,o)=>{let l={time:s.time,date:r.dateEnv.toDate(s.date),view:r.viewApi};return U("tr",{key:s.key,ref:a.createRef(s.key)},e.axis&&U(HI,Object.assign({},s)),U(hn,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!s.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":s.isoTimeStr},renderProps:l,generatorName:"slotLaneContent",customGenerator:n.slotLaneContent,classNameGenerator:n.slotLaneClassNames,didMount:n.slotLaneDidMount,willUnmount:n.slotLaneWillUnmount}))}))}}class bSe extends ft{constructor(){super(...arguments),this.rootElRef=Ir(),this.slatElRefs=new Ea}render(){let{props:e,context:r}=this;return U("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},U("table",{"aria-hidden":!0,className:r.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,U(ySe,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:r}=this;r.onCoords&&r.clientWidth!==null&&this.rootElRef.current.offsetHeight&&r.onCoords(new vSe(new ac(this.rootElRef.current,xSe(this.slatElRefs.currentMap,r.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function xSe(t,e){return e.map(r=>t[r.key])}function Qc(t,e){let r=[],n;for(n=0;n<e;n+=1)r.push([]);if(t)for(n=0;n<t.length;n+=1)r[t[n].col].push(t[n]);return r}function UE(t,e){let r=[];if(t){for(let n=0;n<e;n+=1)r[n]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let n of t.segs)r[n.col].segs.push(n)}else for(let n=0;n<e;n+=1)r[n]=null;return r}class wSe extends ft{render(){let{props:e}=this;return U(SI,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>KI(e.hiddenSegs,e),defaultGenerator:_Se,forceTimed:!0},r=>U(r,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function _Se(t){return t.shortText}function jSe(t,e,r){let n=new cI;e!=null&&(n.strictOrder=e),r!=null&&(n.maxStackCnt=r);let a=n.addSegs(t),s=R_e(a),o=SSe(n);return o=CSe(o,1),{segRects:ASe(o),hiddenGroups:s}}function SSe(t){const{entriesByLevel:e}=t,r=D_((n,a)=>n+":"+a,(n,a)=>{let s=ESe(t,n,a),o=zE(s,r),l=e[n][a];return[Object.assign(Object.assign({},l),{nextLevelNodes:o[0]}),l.thickness+o[1]]});return zE(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,r)[0]}function zE(t,e){if(!t)return[[],0];let{level:r,lateralStart:n,lateralEnd:a}=t,s=n,o=[];for(;s<a;)o.push(e(r,s)),s+=1;return o.sort(kSe),[o.map(NSe),o[0][1]]}function kSe(t,e){return e[1]-t[1]}function NSe(t){return t[0]}function ESe(t,e,r){let{levelCoords:n,entriesByLevel:a}=t,s=a[e][r],o=n[e]+s.thickness,l=n.length,c=e;for(;c<l&&n[c]<o;c+=1);for(;c<l;c+=1){let d=a[c],u,h=cx(d,s.span.start,lx),f=h[0]+h[1],m=f;for(;(u=d[m])&&u.span.start<s.span.end;)m+=1;if(f<m)return{level:c,lateralStart:f,lateralEnd:m}}return null}function CSe(t,e){const r=D_((n,a,s)=>Pi(n),(n,a,s)=>{let{nextLevelNodes:o,thickness:l}=n,c=l+s,d=l/c,u,h=[];if(!o.length)u=e;else for(let m of o)if(u===void 0){let v=r(m,a,c);u=v[0],h.push(v[1])}else{let v=r(m,u,0);h.push(v[1])}let f=(u-a)*d;return[u-f,Object.assign(Object.assign({},n),{thickness:f,nextLevelNodes:h})]});return t.map(n=>r(n,0,0)[1])}function ASe(t){let e=[];const r=D_((a,s,o)=>Pi(a),(a,s,o)=>{let l=Object.assign(Object.assign({},a),{levelCoord:s,stackDepth:o,stackForward:0});return e.push(l),l.stackForward=n(a.nextLevelNodes,s+a.thickness,o+1)+1});function n(a,s,o){let l=0;for(let c of a)l=Math.max(r(c,s,o),l);return l}return n(t,0,0),e}function D_(t,e){const r={};return(...n)=>{let a=t(...n);return a in r?r[a]:r[a]=e(...n)}}function HE(t,e,r=null,n=0){let a=[];if(r)for(let s=0;s<t.length;s+=1){let o=t[s],l=r.computeDateTop(o.start,e),c=Math.max(l+(n||0),r.computeDateTop(o.end,e));a.push({start:Math.round(l),end:Math.round(c)})}return a}function TSe(t,e,r,n){let a=[],s=[];for(let d=0;d<t.length;d+=1){let u=e[d];u?a.push({index:d,thickness:1,span:u}):s.push(t[d])}let{segRects:o,hiddenGroups:l}=jSe(a,r,n),c=[];for(let d of o)c.push({seg:t[d.index],rect:d});for(let d of s)c.push({seg:d,rect:null});return{segPlacements:c,hiddenGroups:l}}const DSe=qt({hour:"numeric",minute:"2-digit",meridiem:!1});class WI extends ft{render(){return U(xI,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:DSe}))}}class PSe extends ft{constructor(){super(...arguments),this.sortEventSegs=Oe(X$)}render(){let{props:e,context:r}=this,{options:n}=r,a=n.selectMirror,s=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||a&&e.dateSelectionSegs||[],o=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},l=this.sortEventSegs(e.fgEventSegs,n.eventOrder);return U(C_,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},c=>U("div",{className:"fc-timegrid-col-frame"},U("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),U("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(l,o,!1,!1,!1)),U("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(s,{},!!e.eventDrag,!!e.eventResize,!!a,"mirror")),U("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),A_(n)&&U(c,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,r,n,a,s,o){let{props:l}=this;return l.forPrint?KI(e,l):this.renderPositionedFgSegs(e,r,n,a,s,o)}renderPositionedFgSegs(e,r,n,a,s,o){let{eventMaxStack:l,eventShortHeight:c,eventOrderStrict:d,eventMinHeight:u}=this.context.options,{date:h,slatCoords:f,eventSelection:m,todayRange:v,nowDate:p}=this.props,g=n||a||s,y=HE(e,h,f,u),{segPlacements:b,hiddenGroups:w}=TSe(e,y,d,l);return U(Tt,null,this.renderHiddenGroups(w,e),b.map(j=>{let{seg:_,rect:S}=j,N=_.eventRange.instance.instanceId,k=g||!!(!r[N]&&S),E=Tv(S&&S.span),P=!g&&S?this.computeSegHStyle(S):{left:0,right:0},T=!!S&&S.stackForward>0,D=!!S&&S.span.end-S.span.start<c;return U("div",{className:"fc-timegrid-event-harness"+(T?" fc-timegrid-event-harness-inset":""),key:o||N,style:Object.assign(Object.assign({visibility:k?"":"hidden"},E),P)},U(WI,Object.assign({seg:_,isDragging:n,isResizing:a,isDateSelecting:s,isSelected:N===m,isShort:D},As(_,v,p))))}))}renderHiddenGroups(e,r){let{extraDateSpan:n,dateProfile:a,todayRange:s,nowDate:o,eventSelection:l,eventDrag:c,eventResize:d}=this.props;return U(Tt,null,e.map(u=>{let h=Tv(u.span),f=MSe(u.entries,r);return U(wSe,{key:P$(kI(f)),hiddenSegs:f,top:h.top,bottom:h.bottom,extraDateSpan:n,dateProfile:a,todayRange:s,nowDate:o,eventSelection:l,eventDrag:c,eventResize:d})}))}renderFillSegs(e,r){let{props:n,context:a}=this,o=HE(e,n.date,n.slatCoords,a.options.eventMinHeight).map((l,c)=>{let d=e[c];return U("div",{key:eI(d.eventRange),className:"fc-timegrid-bg-harness",style:Tv(l)},r==="bg-event"?U(wI,Object.assign({seg:d},As(d,n.todayRange,n.nowDate))):_I(r))});return U(Tt,null,o)}renderNowIndicator(e){let{slatCoords:r,date:n}=this.props;return r?e.map((a,s)=>U(E_,{key:s,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:r.computeDateTop(a.start,n)},isAxis:!1,date:n})):null}computeSegHStyle(e){let{isRtl:r,options:n}=this.context,a=n.slotEventOverlap,s=e.levelCoord,o=e.levelCoord+e.thickness,l,c;a&&(o=Math.min(1,s+(o-s)*2)),r?(l=1-o,c=s):(l=s,c=1-o);let d={zIndex:e.stackDepth+1,left:l*100+"%",right:c*100+"%"};return a&&!e.stackForward&&(d[r?"marginLeft":"marginRight"]=10*2),d}}function KI(t,{todayRange:e,nowDate:r,eventSelection:n,eventDrag:a,eventResize:s}){let o=(a?a.affectedInstances:null)||(s?s.affectedInstances:null)||{};return U(Tt,null,t.map(l=>{let c=l.eventRange.instance.instanceId;return U("div",{key:c,style:{visibility:o[c]?"hidden":""}},U(WI,Object.assign({seg:l,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:c===n,isShort:!1},As(l,e,r))))}))}function Tv(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function MSe(t,e){return t.map(r=>e[r.index])}class OSe extends ft{constructor(){super(...arguments),this.splitFgEventSegs=Oe(Qc),this.splitBgEventSegs=Oe(Qc),this.splitBusinessHourSegs=Oe(Qc),this.splitNowIndicatorSegs=Oe(Qc),this.splitDateSelectionSegs=Oe(Qc),this.splitEventDrag=Oe(UE),this.splitEventResize=Oe(UE),this.rootElRef=Ir(),this.cellElRefs=new Ea}render(){let{props:e,context:r}=this,n=r.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,s=this.splitFgEventSegs(e.fgEventSegs,a),o=this.splitBgEventSegs(e.bgEventSegs,a),l=this.splitBusinessHourSegs(e.businessHourSegs,a),c=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),d=this.splitDateSelectionSegs(e.dateSelectionSegs,a),u=this.splitEventDrag(e.eventDrag,a),h=this.splitEventResize(e.eventResize,a);return U("div",{className:"fc-timegrid-cols",ref:this.rootElRef},U("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,U("tbody",{role:"presentation"},U("tr",{role:"row"},e.axis&&U("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},U("div",{className:"fc-timegrid-col-frame"},U("div",{className:"fc-timegrid-now-indicator-container"},typeof n=="number"&&U(E_,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:n},isAxis:!0,date:e.nowDate})))),e.cells.map((f,m)=>U(PSe,{key:f.key,elRef:this.cellElRefs.createRef(f.key),dateProfile:e.dateProfile,date:f.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:f.extraRenderProps,extraDataAttrs:f.extraDataAttrs,extraClassNames:f.extraClassNames,extraDateSpan:f.extraDateSpan,fgEventSegs:s[m],bgEventSegs:o[m],businessHourSegs:l[m],nowIndicatorSegs:c[m],dateSelectionSegs:d[m],eventDrag:u[m],eventResize:h[m],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new ac(this.rootElRef.current,RSe(this.cellElRefs.currentMap,e.cells),!0,!1))}}function RSe(t,e){return e.map(r=>t[r.key])}class $Se extends ga{constructor(){super(...arguments),this.processSlotOptions=Oe(ISe),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:r}=this.props,{slatCoords:n}=this.state;if(r&&n){if(e.time){let a=n.computeTimeTop(e.time);a=Math.ceil(a),a&&(a+=1),r(a)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:r}=this;return U("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},U(bSe,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),U(OSe,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:r.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,r){let{dateEnv:n,options:a}=this.context,{colCoords:s}=this,{dateProfile:o}=this.props,{slatCoords:l}=this.state,{snapDuration:c,snapsPerSlot:d}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),u=s.leftToIndex(e),h=l.positions.topToIndex(r);if(u!=null&&h!=null){let f=this.props.cells[u],m=l.positions.tops[h],v=l.positions.getHeight(h),p=(r-m)/v,g=Math.floor(p*d),y=h*d+g,b=this.props.cells[u].date,w=nx(o.slotMinTime,k0e(c,y)),j=n.add(b,w),_=n.add(j,c);return{dateProfile:o,dateSpan:Object.assign({range:{start:j,end:_},allDay:!1},f.extraDateSpan),dayEl:s.els[u],rect:{left:s.lefts[u],right:s.rights[u],top:m,bottom:m+v},layer:0}}return null}}function ISe(t,e){let r=e||t,n=i_(t,r);return n===null&&(r=t,n=1),{snapDuration:r,snapsPerSlot:n}}class LSe extends gI{sliceRange(e,r){let n=[];for(let a=0;a<r.length;a+=1){let s=Yi(e,r[a]);s&&n.push({start:s.start,end:s.end,isStart:s.start.valueOf()===e.start.valueOf(),isEnd:s.end.valueOf()===e.end.valueOf(),col:a})}return n}}class FSe extends ga{constructor(){super(...arguments),this.buildDayRanges=Oe(BSe),this.slicer=new LSe,this.timeColsRef=Ir()}render(){let{props:e,context:r}=this,{dateProfile:n,dayTableModel:a}=e,{nowIndicator:s,nextDayThreshold:o}=r.options,l=this.buildDayRanges(a,n,r.dateEnv);return U(Dc,{unit:s?"minute":"day"},(c,d)=>U($Se,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,n,null,r,l),{forPrint:e.forPrint,axis:e.axis,dateProfile:n,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:a.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:c,nowIndicatorSegs:s&&this.slicer.sliceNowDate(c,n,o,r,l),todayRange:d,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function BSe(t,e,r){let n=[];for(let a of t.headerDates)n.push({start:r.add(a,e.slotMinTime),end:r.add(a,e.slotMaxTime)});return n}const WE=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function qSe(t,e,r,n,a){let s=new Date(0),o=t,l=et(0),c=r||USe(n),d=[];for(;Ln(o)<Ln(e);){let u=a.add(s,o),h=i_(l,c)!==null;d.push({date:u,time:o,key:u.toISOString(),isoTimeStr:q0e(u),isLabeled:h}),o=nx(o,n),l=nx(l,n)}return d}function USe(t){let e,r,n;for(e=WE.length-1;e>=0;e-=1)if(r=et(WE[e]),n=i_(r,t),n!==null&&n>1)return r;return t}class zSe extends gSe{constructor(){super(...arguments),this.buildTimeColsModel=Oe(HSe),this.buildSlatMetas=Oe(qSe)}render(){let{options:e,dateEnv:r,dateProfileGenerator:n}=this.context,{props:a}=this,{dateProfile:s}=a,o=this.buildTimeColsModel(s,n),l=this.allDaySplitter.splitProps(a),c=this.buildSlatMetas(s.slotMinTime,s.slotMaxTime,e.slotLabelInterval,e.slotDuration,r),{dayMinWidth:d}=e,u=!d,h=d,f=e.dayHeaders&&U(hI,{dates:o.headerDates,dateProfile:s,datesRepDistinctDays:!0,renderIntro:u?this.renderHeadAxis:null}),m=e.allDaySlot!==!1&&(p=>U(zI,Object.assign({},l.allDay,{dateProfile:s,dayTableModel:o,nextDayThreshold:e.nextDayThreshold,tableMinWidth:p.tableMinWidth,colGroupNode:p.tableColGroupNode,renderRowIntro:u?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:p.clientWidth,clientHeight:p.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),v=p=>U(FSe,Object.assign({},l.timed,{dayTableModel:o,dateProfile:s,axis:u,slotDuration:e.slotDuration,slatMetas:c,forPrint:a.forPrint,tableColGroupNode:p.tableColGroupNode,tableMinWidth:p.tableMinWidth,clientWidth:p.clientWidth,clientHeight:p.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:p.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return h?this.renderHScrollLayout(f,m,v,o.colCnt,d,c,this.state.slatCoords):this.renderSimpleLayout(f,m,v)}}function HSe(t,e){let r=new fI(t.renderRange,e);return new mI(r,!1)}var WSe='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';n_(WSe);const KSe={allDaySlot:Boolean};var Pc=Ga({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:KSe,views:{timeGrid:{component:zSe,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}}),lp=Ga({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:aSe,dateProfileGeneratorClass:iSe},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});op.touchMouseIgnoreWait=500;let fx=0,km=0,mx=!1;class GI{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=r=>{if(!this.shouldIgnoreMouse()&&GSe(r)&&this.tryStart(r)){let n=this.createEventFromMouse(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=r=>{let n=this.createEventFromMouse(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleMouseUp=r=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(r)),this.cleanup()},this.handleTouchStart=r=>{if(this.tryStart(r)){this.isTouchDragging=!0;let n=this.createEventFromTouch(r,!0);this.emitter.trigger("pointerdown",n),this.initScrollWatch(n);let a=r.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=r=>{let n=this.createEventFromTouch(r);this.recordCoords(n),this.emitter.trigger("pointermove",n)},this.handleTouchEnd=r=>{if(this.isDragging){let n=r.target;n.removeEventListener("touchmove",this.handleTouchMove),n.removeEventListener("touchend",this.handleTouchEnd),n.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(r)),this.cleanup(),this.isTouchDragging=!1,VSe()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=r=>{if(!this.shouldIgnoreMove){let n=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:r,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:n,pageY:a,deltaX:n-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new ip,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),QSe()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),JSe()}tryStart(e){let r=this.querySubjectEl(e),n=e.target;return r&&(!this.handleSelector||wr(n,this.handleSelector))?(this.subjectEl=r,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){mx=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?wr(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return fx||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(mx=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,r){let n=0,a=0;return r?(this.origPageX=e.pageX,this.origPageY=e.pageY):(n=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:n,deltaY:a}}createEventFromTouch(e,r){let n=e.touches,a,s,o=0,l=0;return n&&n.length?(a=n[0].pageX,s=n[0].pageY):(a=e.pageX,s=e.pageY),r?(this.origPageX=a,this.origPageY=s):(o=a-this.origPageX,l=s-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:s,deltaX:o,deltaY:l}}}function GSe(t){return t.button===0&&!t.ctrlKey}function VSe(){fx+=1,setTimeout(()=>{fx-=1},op.touchMouseIgnoreWait)}function QSe(){km+=1,km===1&&window.addEventListener("touchmove",VI,{passive:!1})}function JSe(){km-=1,km||window.removeEventListener("touchmove",VI,{passive:!1})}function VI(t){mx&&t.preventDefault()}class YSe{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,r,n){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=r-window.scrollX,this.origScreenY=n-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,r){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=r-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,r){let n=()=>{this.cleanup(),r()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(n,this.revertDuration):setTimeout(n,0)}doRevertAnimation(e,r){let n=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();n.style.transition="top "+r+"ms,left "+r+"ms",vd(n,{left:a.left,top:a.top}),d0e(n,()=>{n.style.transition="",e()})}cleanup(){this.mirrorEl&&(s_(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&vd(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,r=this.mirrorEl;return r||(r=this.mirrorEl=this.sourceEl.cloneNode(!0),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.pointerEvents="none",r.classList.add("fc-event-dragging"),vd(r,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(r)),r}}class QI extends __{constructor(e,r){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=r,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class JI extends QI{constructor(e,r){super(new M_e(e),r)}getEventTarget(){return this.scrollController.el}computeClientRect(){return D_e(this.scrollController.el)}}class XSe extends QI{constructor(e){super(new O_e,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const KE=typeof performance=="function"?performance.now:Date.now;class ZSe{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let r=KE();this.handleSide(e,(r-this.msSinceRequest)/1e3),this.requestAnimation(r)}else this.isAnimating=!1}}}start(e,r,n){this.isEnabled&&(this.scrollCaches=this.buildCaches(n),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,r))}handleMove(e,r){if(this.isEnabled){let n=e-window.scrollX,a=r-window.scrollY,s=this.pointerScreenY===null?0:a-this.pointerScreenY,o=this.pointerScreenX===null?0:n-this.pointerScreenX;s<0?this.everMovedUp=!0:s>0&&(this.everMovedDown=!0),o<0?this.everMovedLeft=!0:o>0&&(this.everMovedRight=!0),this.pointerScreenX=n,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(KE()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,r){let{scrollCache:n}=e,{edgeThreshold:a}=this,s=a-e.distance,o=s*s/(a*a)*this.maxVelocity*r,l=1;switch(e.name){case"left":l=-1;case"right":n.setScrollLeft(n.getScrollLeft()+o*l);break;case"top":l=-1;case"bottom":n.setScrollTop(n.getScrollTop()+o*l);break}}computeBestEdge(e,r){let{edgeThreshold:n}=this,a=null,s=this.scrollCaches||[];for(let o of s){let l=o.clientRect,c=e-l.left,d=l.right-e,u=r-l.top,h=l.bottom-r;c>=0&&d>=0&&u>=0&&h>=0&&(u<=n&&this.everMovedUp&&o.canScrollUp()&&(!a||a.distance>u)&&(a={scrollCache:o,name:"top",distance:u}),h<=n&&this.everMovedDown&&o.canScrollDown()&&(!a||a.distance>h)&&(a={scrollCache:o,name:"bottom",distance:h}),c<=n&&this.everMovedLeft&&o.canScrollLeft()&&(!a||a.distance>c)&&(a={scrollCache:o,name:"left",distance:c}),d<=n&&this.everMovedRight&&o.canScrollRight()&&(!a||a.distance>d)&&(a={scrollCache:o,name:"right",distance:d}))}return a}buildCaches(e){return this.queryScrollEls(e).map(r=>r===window?new XSe(!1):new JI(r,!1))}queryScrollEls(e){let r=[];for(let n of this.scrollQuery)typeof n=="object"?r.push(n):r.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(n)));return r}}class Mc extends I_e{constructor(e,r){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,u0e(document.body),f0e(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let s=this.minDistance,o,{deltaX:l,deltaY:c}=a;o=l*l+c*c,o>=s*s&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,h0e(document.body),m0e(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let n=this.pointer=new GI(e);n.emitter.on("pointerdown",this.onPointerDown),n.emitter.on("pointermove",this.onPointerMove),n.emitter.on("pointerup",this.onPointerUp),r&&(n.selector=r),this.mirror=new YSe,this.autoScroller=new ZSe}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class eke{constructor(e){this.el=e,this.origRect=w_(e),this.scrollCaches=lI(e).map(r=>new JI(r,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let r of this.scrollCaches)e+=r.origScrollLeft-r.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let r of this.scrollCaches)e+=r.origScrollTop-r.getScrollTop();return e}isWithinClipping(e,r){let n={left:e,top:r};for(let a of this.scrollCaches)if(!tke(a.getEventTarget())&&!y_e(n,a.clientRect))return!1;return!0}}function tke(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Hu{constructor(e,r){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=n=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(n),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",n)):a.setIgnoreMove(!0)},this.handleDragStart=n=>{this.emitter.trigger("dragstart",n),this.handleMove(n,!0)},this.handleDragMove=n=>{this.emitter.trigger("dragmove",n),this.handleMove(n)},this.handlePointerUp=n=>{this.releaseHits(),this.emitter.trigger("pointerup",n)},this.handleDragEnd=n=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,n),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",n)},this.droppableStore=r,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new ip}processFirstCoord(e){let r={left:e.pageX,top:e.pageY},n=r,a=e.subjectEl,s;a instanceof HTMLElement&&(s=w_(a),n=b_e(n,s));let o=this.initialHit=this.queryHitForOffset(n.left,n.top);if(o){if(this.useSubjectCenter&&s){let l=sI(s,o.rect);l&&(n=x_e(l))}this.coordAdjust=w_e(n,r)}else this.coordAdjust={left:0,top:0}}handleMove(e,r){let n=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(r||!cp(this.movingHit,n))&&(this.movingHit=n,this.emitter.trigger("hitupdate",n,!1,e))}prepareHits(){this.offsetTrackers=Fa(this.droppableStore,e=>(e.component.prepareHits(),new eke(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let r in e)e[r].destroy();this.offsetTrackers={}}queryHitForOffset(e,r){let{droppableStore:n,offsetTrackers:a}=this,s=null;for(let o in n){let l=n[o].component,c=a[o];if(c&&c.isWithinClipping(e,r)){let d=c.computeLeft(),u=c.computeTop(),h=e-d,f=r-u,{origRect:m}=c,v=m.right-m.left,p=m.bottom-m.top;if(h>=0&&h<v&&f>=0&&f<p){let g=l.queryHit(h,f,v,p);g&&np(g.dateProfile.activeRange,g.dateSpan.range)&&(this.disablePointCheck||c.el.contains(c.el.getRootNode().elementFromPoint(h+d-window.scrollX,f+u-window.scrollY)))&&(!s||g.layer>s.layer)&&(g.componentId=o,g.context=l.context,g.rect.left+=d,g.rect.right+=d,g.rect.top+=u,g.rect.bottom+=u,s=g)}}}return s}}function cp(t,e){return!t&&!e?!0:!!t!=!!e?!1:o_e(t.dateSpan,e.dateSpan)}function P_(t,e){let r={};for(let n of e.pluginHooks.datePointTransforms)Object.assign(r,n(t,e));return Object.assign(r,rke(t,e.dateEnv)),r}function rke(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class nke extends Tc{constructor(e){super(e),this.handlePointerDown=n=>{let{dragging:a}=this,s=n.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(s))},this.handleDragEnd=n=>{let{component:a}=this,{pointer:s}=this.dragging;if(!s.wasTouchScroll){let{initialHit:o,finalHit:l}=this.hitDragging;if(o&&l&&cp(o,l)){let{context:c}=a,d=Object.assign(Object.assign({},P_(o.dateSpan,c)),{dayEl:o.dayEl,jsEvent:n.origEvent,view:c.viewApi||c.calendarApi.view});c.emitter.trigger("dateClick",d)}}},this.dragging=new Mc(e.el),this.dragging.autoScroller.isEnabled=!1;let r=this.hitDragging=new Hu(this.dragging,b_(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class ake extends Tc{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=o=>{let{component:l,dragging:c}=this,{options:d}=l.context,u=d.selectable&&l.isValidDateDownEl(o.origEvent.target);c.setIgnoreMove(!u),c.delay=o.isTouch?ske(l):null},this.handleDragStart=o=>{this.component.context.calendarApi.unselect(o)},this.handleHitUpdate=(o,l)=>{let{context:c}=this.component,d=null,u=!1;if(o){let h=this.hitDragging.initialHit;o.componentId===h.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(h,o)||(d=ike(h,o,c.pluginHooks.dateSelectionTransformers)),(!d||!H_e(d,o.dateProfile,c))&&(u=!0,d=null)}d?c.dispatch({type:"SELECT_DATES",selection:d}):l||c.dispatch({type:"UNSELECT_DATES"}),u?ep():tp(),l||(this.dragSelection=d)},this.handlePointerUp=o=>{this.dragSelection&&(Q$(this.dragSelection,o,this.component.context),this.dragSelection=null)};let{component:r}=e,{options:n}=r.context,a=this.dragging=new Mc(e.el);a.touchScrollAllowed=!1,a.minDistance=n.selectMinDistance||0,a.autoScroller.isEnabled=n.dragScroll;let s=this.hitDragging=new Hu(this.dragging,b_(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function ske(t){let{options:e}=t.context,r=e.selectLongPressDelay;return r==null&&(r=e.longPressDelay),r}function ike(t,e,r){let n=t.dateSpan,a=e.dateSpan,s=[n.range.start,n.range.end,a.range.start,a.range.end];s.sort(b0e);let o={};for(let l of r){let c=l(t,e);if(c===!1)return null;c&&Object.assign(o,c)}return o.range={start:s[0],end:s[3]},o.allDay=n.allDay,o}class Wu extends Tc{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let l=o.origEvent.target,{component:c,dragging:d}=this,{mirror:u}=d,{options:h}=c.context,f=c.context;this.subjectEl=o.subjectEl;let m=this.subjectSeg=nc(o.subjectEl),p=(this.eventRange=m.eventRange).instance.instanceId;this.relevantEvents=g_(f.getCurrentData().eventStore,p),d.minDistance=o.isTouch?0:h.eventDragMinDistance,d.delay=o.isTouch&&p!==c.props.eventSelection?lke(c):null,h.fixedMirrorParent?u.parentNode=h.fixedMirrorParent:u.parentNode=wr(l,".fc"),u.revertDuration=h.dragRevertDuration;let g=c.isValidSegDownEl(l)&&!wr(l,".fc-event-resizer");d.setIgnoreMove(!g),this.isDragging=g&&o.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=o=>{let l=this.component.context,c=this.eventRange,d=c.instance.instanceId;o.isTouch?d!==this.component.props.eventSelection&&l.dispatch({type:"SELECT_EVENT",eventInstanceId:d}):l.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(l.calendarApi.unselect(o),l.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Ft(l,c.def,c.instance),jsEvent:o.origEvent,view:l.viewApi}))},this.handleHitUpdate=(o,l)=>{if(!this.isDragging)return;let c=this.relevantEvents,d=this.hitDragging.initialHit,u=this.component.context,h=null,f=null,m=null,v=!1,p={affectedEvents:c,mutatedEvents:Er(),isEvent:!0};if(o){h=o.context;let g=h.options;u===h||g.editable&&g.droppable?(f=oke(d,o,this.eventRange.instance.range.start,h.getCurrentData().pluginHooks.eventDragMutationMassagers),f&&(m=y_(c,h.getCurrentData().eventUiBases,f,h),p.mutatedEvents=m,S_(p,o.dateProfile,h)||(v=!0,f=null,m=null,p.mutatedEvents=Er()))):h=null}this.displayDrag(h,p),v?ep():tp(),l||(u===h&&cp(d,o)&&(f=null),this.dragging.setMirrorNeedsRevert(!f),this.dragging.setMirrorIsVisible(!o||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=h,this.validMutation=f,this.mutatedRelevantEvents=m)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=o=>{if(this.isDragging){let l=this.component.context,c=l.viewApi,{receivingContext:d,validMutation:u}=this,h=this.eventRange.def,f=this.eventRange.instance,m=new Ft(l,h,f),v=this.relevantEvents,p=this.mutatedRelevantEvents,{finalHit:g}=this.hitDragging;if(this.clearDrag(),l.emitter.trigger("eventDragStop",{el:this.subjectEl,event:m,jsEvent:o.origEvent,view:c}),u){if(d===l){let y=new Ft(l,p.defs[h.defId],f?p.instances[f.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:p});let b={oldEvent:m,event:y,relatedEvents:Di(p,l,f),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:v})}},w={};for(let j of l.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(w,j(u,l));l.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},b),w),{el:o.subjectEl,delta:u.datesDelta,jsEvent:o.origEvent,view:c})),l.emitter.trigger("eventChange",b)}else if(d){let y={event:m,relatedEvents:Di(v,l,f),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:v})}};l.emitter.trigger("eventLeave",Object.assign(Object.assign({},y),{draggedEl:o.subjectEl,view:c})),l.dispatch({type:"REMOVE_EVENTS",eventStore:v}),l.emitter.trigger("eventRemove",y);let b=p.defs[h.defId],w=p.instances[f.instanceId],j=new Ft(d,b,w);d.dispatch({type:"MERGE_EVENTS",eventStore:p});let _={event:j,relatedEvents:Di(p,d,w),revert(){d.dispatch({type:"REMOVE_EVENTS",eventStore:p})}};d.emitter.trigger("eventAdd",_),o.isTouch&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:f.instanceId}),d.emitter.trigger("drop",Object.assign(Object.assign({},P_(g.dateSpan,d)),{draggedEl:o.subjectEl,jsEvent:o.origEvent,view:g.context.viewApi})),d.emitter.trigger("eventReceive",Object.assign(Object.assign({},_),{draggedEl:o.subjectEl,view:g.context.viewApi}))}}else l.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:r}=this,{options:n}=r.context,a=this.dragging=new Mc(e.el);a.pointer.selector=Wu.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=n.dragScroll;let s=this.hitDragging=new Hu(this.dragging,_m);s.useSubjectCenter=e.useEventCenter,s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragstart",this.handleDragStart),s.emitter.on("hitupdate",this.handleHitUpdate),s.emitter.on("pointerup",this.handlePointerUp),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,r){let n=this.component.context,a=this.receivingContext;a&&a!==e&&(a===n?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:r.affectedEvents,mutatedEvents:Er(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){let e=this.component.context,{receivingContext:r}=this;r&&r.dispatch({type:"UNSET_EVENT_DRAG"}),e!==r&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}Wu.SELECTOR=".fc-event-draggable, .fc-event-resizable";function oke(t,e,r,n){let a=t.dateSpan,s=e.dateSpan,o=a.range.start,l=s.range.start,c={};a.allDay!==s.allDay&&(c.allDay=s.allDay,c.hasEnd=e.context.options.allDayMaintainDuration,s.allDay?o=Pt(r):o=r);let d=Wo(o,l,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);d.milliseconds&&(c.allDay=!1);let u={datesDelta:d,standardProps:c};for(let h of n)h(u,t,e);return u}function lke(t){let{options:e}=t.context,r=e.eventLongPressDelay;return r==null&&(r=e.longPressDelay),r}class cke extends Tc{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=s=>{let{component:o}=this,l=this.querySegEl(s),c=nc(l),d=this.eventRange=c.eventRange;this.dragging.minDistance=o.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(s.origEvent.target)||s.isTouch&&this.component.props.eventSelection!==d.instance.instanceId)},this.handleDragStart=s=>{let{context:o}=this.component,l=this.eventRange;this.relevantEvents=g_(o.getCurrentData().eventStore,this.eventRange.instance.instanceId);let c=this.querySegEl(s);this.draggingSegEl=c,this.draggingSeg=nc(c),o.calendarApi.unselect(),o.emitter.trigger("eventResizeStart",{el:c,event:new Ft(o,l.def,l.instance),jsEvent:s.origEvent,view:o.viewApi})},this.handleHitUpdate=(s,o,l)=>{let{context:c}=this.component,d=this.relevantEvents,u=this.hitDragging.initialHit,h=this.eventRange.instance,f=null,m=null,v=!1,p={affectedEvents:d,mutatedEvents:Er(),isEvent:!0};s&&(s.componentId===u.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(u,s)||(f=dke(u,s,l.subjectEl.classList.contains("fc-event-resizer-start"),h.range))),f&&(m=y_(d,c.getCurrentData().eventUiBases,f,c),p.mutatedEvents=m,S_(p,s.dateProfile,c)||(v=!0,f=null,m=null,p.mutatedEvents=null)),m?c.dispatch({type:"SET_EVENT_RESIZE",state:p}):c.dispatch({type:"UNSET_EVENT_RESIZE"}),v?ep():tp(),o||(f&&cp(u,s)&&(f=null),this.validMutation=f,this.mutatedRelevantEvents=m)},this.handleDragEnd=s=>{let{context:o}=this.component,l=this.eventRange.def,c=this.eventRange.instance,d=new Ft(o,l,c),u=this.relevantEvents,h=this.mutatedRelevantEvents;if(o.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:d,jsEvent:s.origEvent,view:o.viewApi}),this.validMutation){let f=new Ft(o,h.defs[l.defId],c?h.instances[c.instanceId]:null);o.dispatch({type:"MERGE_EVENTS",eventStore:h});let m={oldEvent:d,event:f,relatedEvents:Di(h,o,c),revert(){o.dispatch({type:"MERGE_EVENTS",eventStore:u})}};o.emitter.trigger("eventResize",Object.assign(Object.assign({},m),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||et(0),endDelta:this.validMutation.endDelta||et(0),jsEvent:s.origEvent,view:o.viewApi})),o.emitter.trigger("eventChange",m)}else o.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:r}=e,n=this.dragging=new Mc(e.el);n.pointer.selector=".fc-event-resizer",n.touchScrollAllowed=!1,n.autoScroller.isEnabled=r.context.options.dragScroll;let a=this.hitDragging=new Hu(this.dragging,b_(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return wr(e.subjectEl,".fc-event")}}function dke(t,e,r,n){let a=t.context.dateEnv,s=t.dateSpan.range.start,o=e.dateSpan.range.start,l=Wo(s,o,a,t.largeUnit);if(r){if(a.add(n.start,l)<n.end)return{startDelta:l}}else if(a.add(n.end,l)>n.start)return{endDelta:l};return null}class uke{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=n=>{n.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=n=>{let a=this.context.options.unselectCancel,s=E$(n.origEvent);this.matchesCancel=!!wr(s,a),this.matchesEvent=!!wr(s,Wu.SELECTOR)},this.onDocumentPointerUp=n=>{let{context:a}=this,{documentPointer:s}=this,o=a.getCurrentData();if(!s.wasTouchScroll){if(o.dateSelection&&!this.isRecentPointerDateSelect){let l=a.options.unselectAuto;l&&(!l||!this.matchesCancel)&&a.calendarApi.unselect(n)}o.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let r=this.documentPointer=new GI(document);r.shouldIgnoreMove=!0,r.shouldWatchScroll=!1,r.emitter.on("pointerdown",this.onDocumentPointerDown),r.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const hke={fixedMirrorParent:X},fke={dateClick:X,eventDragStart:X,eventDragStop:X,eventDrop:X,eventResizeStart:X,eventResizeStop:X,eventResize:X,drop:X,eventReceive:X,eventLeave:X};class mke{constructor(e,r){this.receivingContext=null,this.droppableEvent=null,this.suppliedDragMeta=null,this.dragMeta=null,this.handleDragStart=a=>{this.dragMeta=this.buildDragMeta(a.subjectEl)},this.handleHitUpdate=(a,s,o)=>{let{dragging:l}=this.hitDragging,c=null,d=null,u=!1,h={affectedEvents:Er(),mutatedEvents:Er(),isEvent:this.dragMeta.create};a&&(c=a.context,this.canDropElOnCalendar(o.subjectEl,c)&&(d=gke(a.dateSpan,this.dragMeta,c),h.mutatedEvents=du(d),u=!S_(h,a.dateProfile,c),u&&(h.mutatedEvents=Er(),d=null))),this.displayDrag(c,h),l.setMirrorIsVisible(s||!d||!document.querySelector(".fc-event-mirror")),u?ep():tp(),s||(l.setMirrorNeedsRevert(!d),this.receivingContext=c,this.droppableEvent=d)},this.handleDragEnd=a=>{let{receivingContext:s,droppableEvent:o}=this;if(this.clearDrag(),s&&o){let l=this.hitDragging.finalHit,c=l.context.viewApi,d=this.dragMeta;if(s.emitter.trigger("drop",Object.assign(Object.assign({},P_(l.dateSpan,s)),{draggedEl:a.subjectEl,jsEvent:a.origEvent,view:c})),d.create){let u=du(o);s.dispatch({type:"MERGE_EVENTS",eventStore:u}),a.isTouch&&s.dispatch({type:"SELECT_EVENT",eventInstanceId:o.instance.instanceId}),s.emitter.trigger("eventReceive",{event:new Ft(s,o.def,o.instance),relatedEvents:[],revert(){s.dispatch({type:"REMOVE_EVENTS",eventStore:u})},draggedEl:a.subjectEl,view:c})}}this.receivingContext=null,this.droppableEvent=null};let n=this.hitDragging=new Hu(e,_m);n.requireInitial=!1,n.emitter.on("dragstart",this.handleDragStart),n.emitter.on("hitupdate",this.handleHitUpdate),n.emitter.on("dragend",this.handleDragEnd),this.suppliedDragMeta=r}buildDragMeta(e){return typeof this.suppliedDragMeta=="object"?dx(this.suppliedDragMeta):typeof this.suppliedDragMeta=="function"?dx(this.suppliedDragMeta(e)):pke(e)}displayDrag(e,r){let n=this.receivingContext;n&&n!==e&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e&&e.dispatch({type:"SET_EVENT_DRAG",state:r})}clearDrag(){this.receivingContext&&this.receivingContext.dispatch({type:"UNSET_EVENT_DRAG"})}canDropElOnCalendar(e,r){let n=r.options.dropAccept;return typeof n=="function"?n.call(r.calendarApi,e):typeof n=="string"&&n?!!k$(e,n):!0}}function gke(t,e,r){let n=Object.assign({},e.leftoverProps);for(let u of r.pluginHooks.externalDefTransforms)Object.assign(n,u(t,e));let{refined:a,extra:s}=f_(n,r),o=ym(a,s,e.sourceId,t.allDay,r.options.forceEventDuration||!!e.duration,r),l=t.range.start;t.allDay&&e.startTime&&(l=r.dateEnv.add(l,e.startTime));let c=e.duration?r.dateEnv.add(l,e.duration):ox(t.allDay,l,r),d=ap(o.defId,{start:l,end:c});return{def:o,instance:d}}function pke(t){let e=vke(t,"event"),r=e?JSON.parse(e):{create:!1};return dx(r)}op.dataAttrPrefix="";function vke(t,e){let r=op.dataAttrPrefix,n=(r?r+"-":"")+e;return t.getAttribute("data-"+n)||""}class yke{constructor(e,r={}){this.handlePointerDown=a=>{let{dragging:s}=this,{minDistance:o,longPressDelay:l}=this.settings;s.minDistance=o??(a.isTouch?0:Ti.eventDragMinDistance),s.delay=a.isTouch?l??Ti.longPressDelay:0},this.handleDragStart=a=>{a.isTouch&&this.dragging.delay&&a.subjectEl.classList.contains("fc-event")&&this.dragging.mirror.getMirrorEl().classList.add("fc-event-selected")},this.settings=r;let n=this.dragging=new Mc(e);n.touchScrollAllowed=!1,r.itemSelector!=null&&(n.pointer.selector=r.itemSelector),r.appendTo!=null&&(n.mirror.parentNode=r.appendTo),n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragstart",this.handleDragStart),new mke(n,r.eventData)}destroy(){this.dragging.destroy()}}var bke=Ga({name:"@fullcalendar/interaction",componentInteractions:[nke,ake,Wu,cke],calendarInteractions:[uke],elementDraggingImpl:Mc,optionRefiners:hke,listenerRefiners:fke}),Ku={code:"id",week:{dow:1,doy:7},buttonText:{prev:"mundur",next:"maju",today:"hari ini",year:"Tahun",month:"Bulan",week:"Minggu",day:"Hari",list:"Agenda"},weekText:"Mg",allDayText:"Sehari penuh",moreLinkText:"lebih",noEventsText:"Tidak ada acara untuk ditampilkan"};const{createElement:sc,createContext:xke,createRef:QAe,forwardRef:YI,useCallback:qr,useContext:XI,useEffect:Mi,useImperativeHandle:ZI,useLayoutEffect:wke,useMemo:_ke,useRef:Wr,useState:ol}=Ox,GE=Ox[`useId${Math.random()}`.slice(0,5)],jke=wke,dp=xke(null);dp.displayName="PanelGroupContext";const Oi=jke,Ske=typeof GE=="function"?GE:()=>null;let kke=0;function M_(t=null){const e=Ske(),r=Wr(t||e||null);return r.current===null&&(r.current=""+kke++),t??r.current}function e4({children:t,className:e="",collapsedSize:r,collapsible:n,defaultSize:a,forwardedRef:s,id:o,maxSize:l,minSize:c,onCollapse:d,onExpand:u,onResize:h,order:f,style:m,tagName:v="div",...p}){const g=XI(dp);if(g===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:b,getPanelSize:w,getPanelStyle:j,groupId:_,isPanelCollapsed:S,reevaluatePanelConstraints:N,registerPanel:k,resizePanel:E,unregisterPanel:P}=g,T=M_(o),D=Wr({callbacks:{onCollapse:d,onExpand:u,onResize:h},constraints:{collapsedSize:r,collapsible:n,defaultSize:a,maxSize:l,minSize:c},id:T,idIsFromProps:o!==void 0,order:f});Wr({didLogMissingDefaultSizeWarning:!1}),Oi(()=>{const{callbacks:C,constraints:R}=D.current,L={...R};D.current.id=T,D.current.idIsFromProps=o!==void 0,D.current.order=f,C.onCollapse=d,C.onExpand=u,C.onResize=h,R.collapsedSize=r,R.collapsible=n,R.defaultSize=a,R.maxSize=l,R.minSize=c,(L.collapsedSize!==R.collapsedSize||L.collapsible!==R.collapsible||L.maxSize!==R.maxSize||L.minSize!==R.minSize)&&N(D.current,L)}),Oi(()=>{const C=D.current;return k(C),()=>{P(C)}},[f,T,k,P]),ZI(s,()=>({collapse:()=>{y(D.current)},expand:C=>{b(D.current,C)},getId(){return T},getSize(){return w(D.current)},isCollapsed(){return S(D.current)},isExpanded(){return!S(D.current)},resize:C=>{E(D.current,C)}}),[y,b,w,S,T,E]);const A=j(D.current,a);return sc(v,{...p,children:t,className:e,id:o,style:{...A,...m},"data-panel":"","data-panel-collapsible":n||void 0,"data-panel-group-id":_,"data-panel-id":T,"data-panel-size":parseFloat(""+A.flexGrow).toFixed(1)})}const t4=YI((t,e)=>sc(e4,{...t,forwardedRef:e}));e4.displayName="Panel";t4.displayName="forwardRef(Panel)";let gx=null,yi=null;function Nke(t,e){if(e){const r=(e&i4)!==0,n=(e&o4)!==0,a=(e&l4)!==0,s=(e&c4)!==0;if(r)return a?"se-resize":s?"ne-resize":"e-resize";if(n)return a?"sw-resize":s?"nw-resize":"w-resize";if(a)return"s-resize";if(s)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Eke(){yi!==null&&(document.head.removeChild(yi),gx=null,yi=null)}function Dv(t,e){const r=Nke(t,e);gx!==r&&(gx=r,yi===null&&(yi=document.createElement("style"),document.head.appendChild(yi)),yi.innerHTML=`*{cursor: ${r}!important;}`)}function r4(t){return t.type==="keydown"}function n4(t){return t.type.startsWith("pointer")}function a4(t){return t.type.startsWith("mouse")}function up(t){if(n4(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(a4(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function Cke(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Ake(t,e,r){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function Tke(t,e){if(t===e)throw new Error("Cannot compare node with itself");const r={a:JE(t),b:JE(e)};let n;for(;r.a.at(-1)===r.b.at(-1);)t=r.a.pop(),e=r.b.pop(),n=t;Je(n,"Stacking order can only be calculated for elements with a common ancestor");const a={a:QE(VE(r.a)),b:QE(VE(r.b))};if(a.a===a.b){const s=n.childNodes,o={a:r.a.at(-1),b:r.b.at(-1)};let l=s.length;for(;l--;){const c=s[l];if(c===o.a)return 1;if(c===o.b)return-1}}return Math.sign(a.a-a.b)}const Dke=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Pke(t){var e;const r=getComputedStyle((e=s4(t))!==null&&e!==void 0?e:t).display;return r==="flex"||r==="inline-flex"}function Mke(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||Pke(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||Dke.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function VE(t){let e=t.length;for(;e--;){const r=t[e];if(Je(r,"Missing node"),Mke(r))return r}return null}function QE(t){return t&&Number(getComputedStyle(t).zIndex)||0}function JE(t){const e=[];for(;t;)e.push(t),t=s4(t);return e}function s4(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const i4=1,o4=2,l4=4,c4=8,Oke=Cke()==="coarse";let Un=[],ll=!1,cs=new Map,hp=new Map;const uu=new Set;function Rke(t,e,r,n,a){var s;const{ownerDocument:o}=e,l={direction:r,element:e,hitAreaMargins:n,setResizeHandlerState:a},c=(s=cs.get(o))!==null&&s!==void 0?s:0;return cs.set(o,c+1),uu.add(l),Nm(),function(){var u;hp.delete(t),uu.delete(l);const h=(u=cs.get(o))!==null&&u!==void 0?u:1;if(cs.set(o,h-1),Nm(),h===1&&cs.delete(o),Un.includes(l)){const f=Un.indexOf(l);f>=0&&Un.splice(f,1),R_(),a("up",!0,null)}}}function YE(t){const{target:e}=t,{x:r,y:n}=up(t);ll=!0,O_({target:e,x:r,y:n}),Nm(),Un.length>0&&(Em("down",t),t.preventDefault(),t.stopPropagation())}function Jc(t){const{x:e,y:r}=up(t);if(ll&&t.buttons===0&&(ll=!1,Em("up",t)),!ll){const{target:n}=t;O_({target:n,x:e,y:r})}Em("move",t),R_(),Un.length>0&&t.preventDefault()}function Co(t){const{target:e}=t,{x:r,y:n}=up(t);hp.clear(),ll=!1,Un.length>0&&t.preventDefault(),Em("up",t),O_({target:e,x:r,y:n}),R_(),Nm()}function O_({target:t,x:e,y:r}){Un.splice(0);let n=null;t instanceof HTMLElement&&(n=t),uu.forEach(a=>{const{element:s,hitAreaMargins:o}=a,l=s.getBoundingClientRect(),{bottom:c,left:d,right:u,top:h}=l,f=Oke?o.coarse:o.fine;if(e>=d-f&&e<=u+f&&r>=h-f&&r<=c+f){if(n!==null&&document.contains(n)&&s!==n&&!s.contains(n)&&!n.contains(s)&&Tke(n,s)>0){let v=n,p=!1;for(;v&&!v.contains(s);){if(Ake(v.getBoundingClientRect(),l)){p=!0;break}v=v.parentElement}if(p)return}Un.push(a)}})}function Pv(t,e){hp.set(t,e)}function R_(){let t=!1,e=!1;Un.forEach(n=>{const{direction:a}=n;a==="horizontal"?t=!0:e=!0});let r=0;hp.forEach(n=>{r|=n}),t&&e?Dv("intersection",r):t?Dv("horizontal",r):e?Dv("vertical",r):Eke()}function Nm(){cs.forEach((t,e)=>{const{body:r}=e;r.removeEventListener("contextmenu",Co),r.removeEventListener("pointerdown",YE),r.removeEventListener("pointerleave",Jc),r.removeEventListener("pointermove",Jc)}),window.removeEventListener("pointerup",Co),window.removeEventListener("pointercancel",Co),uu.size>0&&(ll?(Un.length>0&&cs.forEach((t,e)=>{const{body:r}=e;t>0&&(r.addEventListener("contextmenu",Co),r.addEventListener("pointerleave",Jc),r.addEventListener("pointermove",Jc))}),window.addEventListener("pointerup",Co),window.addEventListener("pointercancel",Co)):cs.forEach((t,e)=>{const{body:r}=e;t>0&&(r.addEventListener("pointerdown",YE,{capture:!0}),r.addEventListener("pointermove",Jc))}))}function Em(t,e){uu.forEach(r=>{const{setResizeHandlerState:n}=r,a=Un.includes(r);n(t,a,e)})}function $ke(){const[t,e]=ol(0);return qr(()=>e(r=>r+1),[])}function Je(t,e){if(!t)throw console.error(e),Error(e)}const $_=10;function Zi(t,e,r=$_){return t.toFixed(r)===e.toFixed(r)?0:t>e?1:-1}function ja(t,e,r=$_){return Zi(t,e,r)===0}function on(t,e,r){return Zi(t,e,r)===0}function Ike(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){const a=t[n],s=e[n];if(!on(a,s,r))return!1}return!0}function Ko({panelConstraints:t,panelIndex:e,size:r}){const n=t[e];Je(n!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:a=0,collapsible:s,maxSize:o=100,minSize:l=0}=n;if(Zi(r,l)<0)if(s){const c=(a+l)/2;Zi(r,c)<0?r=a:r=l}else r=l;return r=Math.min(o,r),r=parseFloat(r.toFixed($_)),r}function sd({delta:t,initialLayout:e,panelConstraints:r,pivotIndices:n,prevLayout:a,trigger:s}){if(on(t,0))return e;const o=[...e],[l,c]=n;Je(l!=null,"Invalid first pivot index"),Je(c!=null,"Invalid second pivot index");let d=0;if(s==="keyboard"){{const h=t<0?c:l,f=r[h];Je(f,`Panel constraints not found for index ${h}`);const{collapsedSize:m=0,collapsible:v,minSize:p=0}=f;if(v){const g=e[h];if(Je(g!=null,`Previous layout not found for panel index ${h}`),on(g,m)){const y=p-g;Zi(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}{const h=t<0?l:c,f=r[h];Je(f,`No panel constraints found for index ${h}`);const{collapsedSize:m=0,collapsible:v,minSize:p=0}=f;if(v){const g=e[h];if(Je(g!=null,`Previous layout not found for panel index ${h}`),on(g,p)){const y=g-m;Zi(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}}{const h=t<0?1:-1;let f=t<0?c:l,m=0;for(;;){const p=e[f];Je(p!=null,`Previous layout not found for panel index ${f}`);const y=Ko({panelConstraints:r,panelIndex:f,size:100})-p;if(m+=y,f+=h,f<0||f>=r.length)break}const v=Math.min(Math.abs(t),Math.abs(m));t=t<0?0-v:v}{let f=t<0?l:c;for(;f>=0&&f<r.length;){const m=Math.abs(t)-Math.abs(d),v=e[f];Je(v!=null,`Previous layout not found for panel index ${f}`);const p=v-m,g=Ko({panelConstraints:r,panelIndex:f,size:p});if(!on(v,g)&&(d+=v-g,o[f]=g,d.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?f--:f++}}if(Ike(a,o))return a;{const h=t<0?c:l,f=e[h];Je(f!=null,`Previous layout not found for panel index ${h}`);const m=f+d,v=Ko({panelConstraints:r,panelIndex:h,size:m});if(o[h]=v,!on(v,m)){let p=m-v,y=t<0?c:l;for(;y>=0&&y<r.length;){const b=o[y];Je(b!=null,`Previous layout not found for panel index ${y}`);const w=b+p,j=Ko({panelConstraints:r,panelIndex:y,size:w});if(on(b,j)||(p-=j-b,o[y]=j),on(p,0))break;t>0?y--:y++}}}const u=o.reduce((h,f)=>f+h,0);return on(u,100)?o:a}function Lke({layout:t,panelsArray:e,pivotIndices:r}){let n=0,a=100,s=0,o=0;const l=r[0];Je(l!=null,"No pivot index found"),e.forEach((h,f)=>{const{constraints:m}=h,{maxSize:v=100,minSize:p=0}=m;f===l?(n=p,a=v):(s+=p,o+=v)});const c=Math.min(a,100-s),d=Math.max(n,100-o),u=t[l];return{valueMax:c,valueMin:d,valueNow:u}}function hu(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function d4(t,e,r=document){const a=hu(t,r).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return a??null}function u4(t,e,r){const n=d4(t,e,r);return n!=null?[n,n+1]:[-1,-1]}function h4(t,e=document){var r;if(e instanceof HTMLElement&&(e==null||(r=e.dataset)===null||r===void 0?void 0:r.panelGroupId)==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function fp(t,e=document){const r=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return r||null}function Fke(t,e,r,n=document){var a,s,o,l;const c=fp(e,n),d=hu(t,n),u=c?d.indexOf(c):-1,h=(a=(s=r[u])===null||s===void 0?void 0:s.id)!==null&&a!==void 0?a:null,f=(o=(l=r[u+1])===null||l===void 0?void 0:l.id)!==null&&o!==void 0?o:null;return[h,f]}function Bke({committedValuesRef:t,eagerValuesRef:e,groupId:r,layout:n,panelDataArray:a,panelGroupElement:s,setLayout:o}){Wr({didWarnAboutMissingResizeHandle:!1}),Oi(()=>{if(!s)return;const l=hu(r,s);for(let c=0;c<a.length-1;c++){const{valueMax:d,valueMin:u,valueNow:h}=Lke({layout:n,panelsArray:a,pivotIndices:[c,c+1]}),f=l[c];if(f!=null){const m=a[c];Je(m,`No panel data found for index "${c}"`),f.setAttribute("aria-controls",m.id),f.setAttribute("aria-valuemax",""+Math.round(d)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",h!=null?""+Math.round(h):"")}}return()=>{l.forEach((c,d)=>{c.removeAttribute("aria-controls"),c.removeAttribute("aria-valuemax"),c.removeAttribute("aria-valuemin"),c.removeAttribute("aria-valuenow")})}},[r,n,a,s]),Mi(()=>{if(!s)return;const l=e.current;Je(l,"Eager values not found");const{panelDataArray:c}=l,d=h4(r,s);Je(d!=null,`No group found for id "${r}"`);const u=hu(r,s);Je(u,`No resize handles found for group id "${r}"`);const h=u.map(f=>{const m=f.getAttribute("data-panel-resize-handle-id");Je(m,"Resize handle element has no handle id attribute");const[v,p]=Fke(r,m,c,s);if(v==null||p==null)return()=>{};const g=y=>{if(!y.defaultPrevented)switch(y.key){case"Enter":{y.preventDefault();const b=c.findIndex(w=>w.id===v);if(b>=0){const w=c[b];Je(w,`No panel data found for index ${b}`);const j=n[b],{collapsedSize:_=0,collapsible:S,minSize:N=0}=w.constraints;if(j!=null&&S){const k=sd({delta:on(j,_)?N-_:_-j,initialLayout:n,panelConstraints:c.map(E=>E.constraints),pivotIndices:u4(r,m,s),prevLayout:n,trigger:"keyboard"});n!==k&&o(k)}}break}}};return f.addEventListener("keydown",g),()=>{f.removeEventListener("keydown",g)}});return()=>{h.forEach(f=>f())}},[s,t,e,r,n,a,o])}function XE(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function f4(t,e){const r=t==="horizontal",{x:n,y:a}=up(e);return r?n:a}function qke(t,e,r,n,a){const s=r==="horizontal",o=fp(e,a);Je(o,`No resize handle element found for id "${e}"`);const l=o.getAttribute("data-panel-group-id");Je(l,"Resize handle element has no group id attribute");let{initialCursorPosition:c}=n;const d=f4(r,t),u=h4(l,a);Je(u,`No group element found for id "${l}"`);const h=u.getBoundingClientRect(),f=s?h.width:h.height;return(d-c)/f*100}function Uke(t,e,r,n,a,s){if(r4(t)){const o=r==="horizontal";let l=0;t.shiftKey?l=100:a!=null?l=a:l=10;let c=0;switch(t.key){case"ArrowDown":c=o?0:l;break;case"ArrowLeft":c=o?-l:0;break;case"ArrowRight":c=o?l:0;break;case"ArrowUp":c=o?0:-l;break;case"End":c=100;break;case"Home":c=-100;break}return c}else return n==null?0:qke(t,e,r,n,s)}function zke({panelDataArray:t}){const e=Array(t.length),r=t.map(s=>s.constraints);let n=0,a=100;for(let s=0;s<t.length;s++){const o=r[s];Je(o,`Panel constraints not found for index ${s}`);const{defaultSize:l}=o;l!=null&&(n++,e[s]=l,a-=l)}for(let s=0;s<t.length;s++){const o=r[s];Je(o,`Panel constraints not found for index ${s}`);const{defaultSize:l}=o;if(l!=null)continue;const c=t.length-n,d=a/c;n++,e[s]=d,a-=d}return e}function Ao(t,e,r){e.forEach((n,a)=>{const s=t[a];Je(s,`Panel data not found for index ${a}`);const{callbacks:o,constraints:l,id:c}=s,{collapsedSize:d=0,collapsible:u}=l,h=r[c];if(h==null||n!==h){r[c]=n;const{onCollapse:f,onExpand:m,onResize:v}=o;v&&v(n,h),u&&(f||m)&&(m&&(h==null||ja(h,d))&&!ja(n,d)&&m(),f&&(h==null||!ja(h,d))&&ja(n,d)&&f())}})}function Dh(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!=e[r])return!1;return!0}function Hke({defaultSize:t,dragState:e,layout:r,panelData:n,panelIndex:a,precision:s=3}){const o=r[a];let l;return o==null?l=t!=null?t.toPrecision(s):"1":n.length===1?l="1":l=o.toPrecision(s),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function Wke(t,e=10){let r=null;return(...a)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>{t(...a)},e)}}function ZE(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,r)=>{localStorage.setItem(e,r)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function m4(t){return`react-resizable-panels:${t}`}function g4(t){return t.map(e=>{const{constraints:r,id:n,idIsFromProps:a,order:s}=e;return a?n:s?`${s}:${JSON.stringify(r)}`:JSON.stringify(r)}).sort((e,r)=>e.localeCompare(r)).join(",")}function p4(t,e){try{const r=m4(t),n=e.getItem(r);if(n){const a=JSON.parse(n);if(typeof a=="object"&&a!=null)return a}}catch{}return null}function Kke(t,e,r){var n,a;const s=(n=p4(t,r))!==null&&n!==void 0?n:{},o=g4(e);return(a=s[o])!==null&&a!==void 0?a:null}function Gke(t,e,r,n,a){var s;const o=m4(t),l=g4(e),c=(s=p4(t,a))!==null&&s!==void 0?s:{};c[l]={expandToSizes:Object.fromEntries(r.entries()),layout:n};try{a.setItem(o,JSON.stringify(c))}catch(d){console.error(d)}}function eC({layout:t,panelConstraints:e}){const r=[...t],n=r.reduce((s,o)=>s+o,0);if(r.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${r.map(s=>`${s}%`).join(", ")}`);if(!on(n,100)&&r.length>0)for(let s=0;s<e.length;s++){const o=r[s];Je(o!=null,`No layout data found for index ${s}`);const l=100/n*o;r[s]=l}let a=0;for(let s=0;s<e.length;s++){const o=r[s];Je(o!=null,`No layout data found for index ${s}`);const l=Ko({panelConstraints:e,panelIndex:s,size:o});o!=l&&(a+=o-l,r[s]=l)}if(!on(a,0))for(let s=0;s<e.length;s++){const o=r[s];Je(o!=null,`No layout data found for index ${s}`);const l=o+a,c=Ko({panelConstraints:e,panelIndex:s,size:l});if(o!==c&&(a-=c-o,r[s]=c,on(a,0)))break}return r}const Vke=100,id={getItem:t=>(ZE(id),id.getItem(t)),setItem:(t,e)=>{ZE(id),id.setItem(t,e)}},tC={};function v4({autoSaveId:t=null,children:e,className:r="",direction:n,forwardedRef:a,id:s=null,onLayout:o=null,keyboardResizeBy:l=null,storage:c=id,style:d,tagName:u="div",...h}){const f=M_(s),m=Wr(null),[v,p]=ol(null),[g,y]=ol([]),b=$ke(),w=Wr({}),j=Wr(new Map),_=Wr(0),S=Wr({autoSaveId:t,direction:n,dragState:v,id:f,keyboardResizeBy:l,onLayout:o,storage:c}),N=Wr({layout:g,panelDataArray:[],panelDataArrayChanged:!1});Wr({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),ZI(a,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:F}=N.current;return F},setLayout:F=>{const{onLayout:G}=S.current,{layout:Y,panelDataArray:Z}=N.current,le=eC({layout:F,panelConstraints:Z.map(V=>V.constraints)});XE(Y,le)||(y(le),N.current.layout=le,G&&G(le),Ao(Z,le,w.current))}}),[]),Oi(()=>{S.current.autoSaveId=t,S.current.direction=n,S.current.dragState=v,S.current.id=f,S.current.onLayout=o,S.current.storage=c}),Bke({committedValuesRef:S,eagerValuesRef:N,groupId:f,layout:g,panelDataArray:N.current.panelDataArray,setLayout:y,panelGroupElement:m.current}),Mi(()=>{const{panelDataArray:F}=N.current;if(t){if(g.length===0||g.length!==F.length)return;let G=tC[t];G==null&&(G=Wke(Gke,Vke),tC[t]=G);const Y=[...F],Z=new Map(j.current);G(t,Y,Z,g,c)}},[t,g,c]),Mi(()=>{});const k=qr(F=>{const{onLayout:G}=S.current,{layout:Y,panelDataArray:Z}=N.current;if(F.constraints.collapsible){const le=Z.map(xe=>xe.constraints),{collapsedSize:V=0,panelSize:Q,pivotIndices:ce}=ei(Z,F,Y);if(Je(Q!=null,`Panel size not found for panel "${F.id}"`),!ja(Q,V)){j.current.set(F.id,Q);const ae=Lo(Z,F)===Z.length-1?Q-V:V-Q,ee=sd({delta:ae,initialLayout:Y,panelConstraints:le,pivotIndices:ce,prevLayout:Y,trigger:"imperative-api"});Dh(Y,ee)||(y(ee),N.current.layout=ee,G&&G(ee),Ao(Z,ee,w.current))}}},[]),E=qr((F,G)=>{const{onLayout:Y}=S.current,{layout:Z,panelDataArray:le}=N.current;if(F.constraints.collapsible){const V=le.map(J=>J.constraints),{collapsedSize:Q=0,panelSize:ce=0,minSize:xe=0,pivotIndices:ae}=ei(le,F,Z),ee=G??xe;if(ja(ce,Q)){const J=j.current.get(F.id),re=J!=null&&J>=ee?J:ee,pe=Lo(le,F)===le.length-1?ce-re:re-ce,ve=sd({delta:pe,initialLayout:Z,panelConstraints:V,pivotIndices:ae,prevLayout:Z,trigger:"imperative-api"});Dh(Z,ve)||(y(ve),N.current.layout=ve,Y&&Y(ve),Ao(le,ve,w.current))}}},[]),P=qr(F=>{const{layout:G,panelDataArray:Y}=N.current,{panelSize:Z}=ei(Y,F,G);return Je(Z!=null,`Panel size not found for panel "${F.id}"`),Z},[]),T=qr((F,G)=>{const{panelDataArray:Y}=N.current,Z=Lo(Y,F);return Hke({defaultSize:G,dragState:v,layout:g,panelData:Y,panelIndex:Z})},[v,g]),D=qr(F=>{const{layout:G,panelDataArray:Y}=N.current,{collapsedSize:Z=0,collapsible:le,panelSize:V}=ei(Y,F,G);return Je(V!=null,`Panel size not found for panel "${F.id}"`),le===!0&&ja(V,Z)},[]),A=qr(F=>{const{layout:G,panelDataArray:Y}=N.current,{collapsedSize:Z=0,collapsible:le,panelSize:V}=ei(Y,F,G);return Je(V!=null,`Panel size not found for panel "${F.id}"`),!le||Zi(V,Z)>0},[]),C=qr(F=>{const{panelDataArray:G}=N.current;G.push(F),G.sort((Y,Z)=>{const le=Y.order,V=Z.order;return le==null&&V==null?0:le==null?-1:V==null?1:le-V}),N.current.panelDataArrayChanged=!0,b()},[b]);Oi(()=>{if(N.current.panelDataArrayChanged){N.current.panelDataArrayChanged=!1;const{autoSaveId:F,onLayout:G,storage:Y}=S.current,{layout:Z,panelDataArray:le}=N.current;let V=null;if(F){const ce=Kke(F,le,Y);ce&&(j.current=new Map(Object.entries(ce.expandToSizes)),V=ce.layout)}V==null&&(V=zke({panelDataArray:le}));const Q=eC({layout:V,panelConstraints:le.map(ce=>ce.constraints)});XE(Z,Q)||(y(Q),N.current.layout=Q,G&&G(Q),Ao(le,Q,w.current))}}),Oi(()=>{const F=N.current;return()=>{F.layout=[]}},[]);const R=qr(F=>function(Y){Y.preventDefault();const Z=m.current;if(!Z)return()=>null;const{direction:le,dragState:V,id:Q,keyboardResizeBy:ce,onLayout:xe}=S.current,{layout:ae,panelDataArray:ee}=N.current,{initialLayout:J}=V??{},re=u4(Q,F,Z);let ue=Uke(Y,F,le,V,ce,Z);const pe=le==="horizontal";document.dir==="rtl"&&pe&&(ue=-ue);const ve=ee.map(dt=>dt.constraints),ke=sd({delta:ue,initialLayout:J??ae,panelConstraints:ve,pivotIndices:re,prevLayout:ae,trigger:r4(Y)?"keyboard":"mouse-or-touch"}),ot=!Dh(ae,ke);(n4(Y)||a4(Y))&&_.current!=ue&&(_.current=ue,!ot&&ue!==0?pe?Pv(F,ue<0?i4:o4):Pv(F,ue<0?l4:c4):Pv(F,0)),ot&&(y(ke),N.current.layout=ke,xe&&xe(ke),Ao(ee,ke,w.current))},[]),L=qr((F,G)=>{const{onLayout:Y}=S.current,{layout:Z,panelDataArray:le}=N.current,V=le.map(J=>J.constraints),{panelSize:Q,pivotIndices:ce}=ei(le,F,Z);Je(Q!=null,`Panel size not found for panel "${F.id}"`);const ae=Lo(le,F)===le.length-1?Q-G:G-Q,ee=sd({delta:ae,initialLayout:Z,panelConstraints:V,pivotIndices:ce,prevLayout:Z,trigger:"imperative-api"});Dh(Z,ee)||(y(ee),N.current.layout=ee,Y&&Y(ee),Ao(le,ee,w.current))},[]),M=qr((F,G)=>{const{layout:Y,panelDataArray:Z}=N.current,{collapsedSize:le=0,collapsible:V}=G,{collapsedSize:Q=0,collapsible:ce,maxSize:xe=100,minSize:ae=0}=F.constraints,{panelSize:ee}=ei(Z,F,Y);ee!=null&&(V&&ce&&ja(ee,le)?ja(le,Q)||L(F,Q):ee<ae?L(F,ae):ee>xe&&L(F,xe))},[L]),I=qr((F,G)=>{const{direction:Y}=S.current,{layout:Z}=N.current;if(!m.current)return;const le=fp(F,m.current);Je(le,`Drag handle element not found for id "${F}"`);const V=f4(Y,G);p({dragHandleId:F,dragHandleRect:le.getBoundingClientRect(),initialCursorPosition:V,initialLayout:Z})},[]),B=qr(()=>{p(null)},[]),H=qr(F=>{const{panelDataArray:G}=N.current,Y=Lo(G,F);Y>=0&&(G.splice(Y,1),delete w.current[F.id],N.current.panelDataArrayChanged=!0,b())},[b]),q=_ke(()=>({collapsePanel:k,direction:n,dragState:v,expandPanel:E,getPanelSize:P,getPanelStyle:T,groupId:f,isPanelCollapsed:D,isPanelExpanded:A,reevaluatePanelConstraints:M,registerPanel:C,registerResizeHandle:R,resizePanel:L,startDragging:I,stopDragging:B,unregisterPanel:H,panelGroupElement:m.current}),[k,v,n,E,P,T,f,D,A,M,C,R,L,I,B,H]),O={display:"flex",flexDirection:n==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return sc(dp.Provider,{value:q},sc(u,{...h,children:e,className:r,id:s,ref:m,style:{...O,...d},"data-panel-group":"","data-panel-group-direction":n,"data-panel-group-id":f}))}const y4=YI((t,e)=>sc(v4,{...t,forwardedRef:e}));v4.displayName="PanelGroup";y4.displayName="forwardRef(PanelGroup)";function Lo(t,e){return t.findIndex(r=>r===e||r.id===e.id)}function ei(t,e,r){const n=Lo(t,e),s=n===t.length-1?[n-1,n]:[n,n+1],o=r[n];return{...e.constraints,panelSize:o,pivotIndices:s}}function Qke({disabled:t,handleId:e,resizeHandler:r,panelGroupElement:n}){Mi(()=>{if(t||r==null||n==null)return;const a=fp(e,n);if(a==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),r(o);break}case"F6":{o.preventDefault();const l=a.getAttribute("data-panel-group-id");Je(l,`No group element found for id "${l}"`);const c=hu(l,n),d=d4(l,e,n);Je(d!==null,`No resize element found for id "${e}"`);const u=o.shiftKey?d>0?d-1:c.length-1:d+1<c.length?d+1:0;c[u].focus();break}}};return a.addEventListener("keydown",s),()=>{a.removeEventListener("keydown",s)}},[n,t,e,r])}function b4({children:t=null,className:e="",disabled:r=!1,hitAreaMargins:n,id:a,onBlur:s,onDragging:o,onFocus:l,style:c={},tabIndex:d=0,tagName:u="div",...h}){var f,m;const v=Wr(null),p=Wr({onDragging:o});Mi(()=>{p.current.onDragging=o});const g=XI(dp);if(g===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:y,groupId:b,registerResizeHandle:w,startDragging:j,stopDragging:_,panelGroupElement:S}=g,N=M_(a),[k,E]=ol("inactive"),[P,T]=ol(!1),[D,A]=ol(null),C=Wr({state:k});Oi(()=>{C.current.state=k}),Mi(()=>{if(r)A(null);else{const I=w(N);A(()=>I)}},[r,N,w]);const R=(f=n==null?void 0:n.coarse)!==null&&f!==void 0?f:15,L=(m=n==null?void 0:n.fine)!==null&&m!==void 0?m:5;return Mi(()=>{if(r||D==null)return;const I=v.current;return Je(I,"Element ref not attached"),Rke(N,I,y,{coarse:R,fine:L},(H,q,O)=>{if(q)switch(H){case"down":{E("drag"),Je(O,'Expected event to be defined for "down" action'),j(N,O);const{onDragging:F}=p.current;F&&F(!0);break}case"move":{const{state:F}=C.current;F!=="drag"&&E("hover"),Je(O,'Expected event to be defined for "move" action'),D(O);break}case"up":{E("hover"),_();const{onDragging:F}=p.current;F&&F(!1);break}}else E("inactive")})},[R,y,r,L,w,N,D,j,_]),Qke({disabled:r,handleId:N,resizeHandler:D,panelGroupElement:S}),sc(u,{...h,children:t,className:e,id:a,onBlur:()=>{T(!1),s==null||s()},onFocus:()=>{T(!0),l==null||l()},ref:v,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...c},tabIndex:d,"data-panel-group-direction":y,"data-panel-group-id":b,"data-resize-handle":"","data-resize-handle-active":k==="drag"?"pointer":P?"keyboard":void 0,"data-resize-handle-state":k,"data-panel-resize-handle-enabled":!r,"data-panel-resize-handle-id":N})}b4.displayName="PanelResizeHandle";const Jke=({className:t,...e})=>i.jsx(y4,{className:se("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...e}),rC=t4,Yke=({withHandle:t,className:e,...r})=>i.jsx(b4,{className:se("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",e),...r,children:t&&i.jsx("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:i.jsx(_A,{className:"h-2.5 w-2.5"})})}),Mv=(t,e,r)=>{const n=d=>(Xke(d),"#FFFFFF");if(t!=null&&t.color&&t.color!=="#6B7280")return{background:t.color,text:n(t.color),border:px(t.color,-20)};if(e&&e!=="#6B7280")return{background:e,text:n(e),border:px(e,-20)};const a=(t==null?void 0:t.name)||(t==null?void 0:t.id)||"default",s=x4(a),o=[{bg:"#10B981",border:"#059669"},{bg:"#3B82F6",border:"#2563EB"},{bg:"#F59E0B",border:"#D97706"},{bg:"#8B5CF6",border:"#7C3AED"},{bg:"#EF4444",border:"#DC2626"},{bg:"#06B6D4",border:"#0891B2"},{bg:"#84CC16",border:"#65A30D"},{bg:"#F97316",border:"#EA580C"},{bg:"#EC4899",border:"#DB2777"},{bg:"#6366F1",border:"#4F46E5"},{bg:"#14B8A6",border:"#0F766E"},{bg:"#A855F7",border:"#9333EA"}],l=s%o.length,c=o[l];return{background:c.bg,text:n(c.bg),border:c.border}};function x4(t){let e=0;for(let r=0;r<t.length;r++){const n=t.charCodeAt(r);e=(e<<5)-e+n,e=e&e}return Math.abs(e)}function px(t,e){const r=parseInt(t.replace("#",""),16),n=Math.round(2.55*e),a=(r>>16)+n,s=(r>>8&255)+n,o=(r&255)+n;return"#"+(16777216+(a<255?a<1?0:a:255)*65536+(s<255?s<1?0:s:255)*256+(o<255?o<1?0:o:255)).toString(16).slice(1)}function Xke(t){const e=parseInt(t.replace("#",""),16),r=e>>16&255,n=e>>8&255,a=e&255;return(r*299+n*587+a*114)/1e3}const w4=(t,e)=>t!=null&&t.color&&t.color!=="#6B7280"?Mv(t):e!=null&&e.color&&e.color!=="#6B7280"?Mv(t,e.color):Mv(t),Zke=t=>{if(t!=null&&t.color&&t.color!=="#6B7280")return{background:t.color,text:"#FFFFFF",border:px(t.color,-20)};const e=(t==null?void 0:t.name)||"default",r=x4(e),n=[{bg:"#10B981",border:"#059669"},{bg:"#3B82F6",border:"#2563EB"},{bg:"#F59E0B",border:"#D97706"},{bg:"#8B5CF6",border:"#7C3AED"},{bg:"#EF4444",border:"#DC2626"},{bg:"#06B6D4",border:"#0891B2"},{bg:"#84CC16",border:"#65A30D"},{bg:"#F97316",border:"#EA580C"}],a=r%n.length,s=n[a];return{background:s.bg,text:"#FFFFFF",border:s.border}},ic=(t,e)=>{if(console.log(" calculateDurationMinutes input:",{startTime:t,endTime:e,startType:typeof t,endType:typeof e,startLength:t==null?void 0:t.length,endLength:e==null?void 0:e.length}),!t||!e||t.trim()===""||e.trim()==="")return console.log(" Empty or invalid time values"),0;try{const r=t.trim(),n=e.trim();console.log(" Cleaned times:",{cleanStart:r,cleanEnd:n});const a=h=>{console.log(" Parsing time:",h);let f=h;if(h.includes(":")&&h.split(":").length===3){const g=h.split(":");f=`${g[0]}:${g[1]}`,console.log(" Removed seconds, new format:",f)}const m=f.split(":");if(console.log(" Time parts:",m),m.length!==2)return console.log(" Invalid time format - not 2 parts"),null;const v=parseInt(m[0],10),p=parseInt(m[1],10);return console.log(" Parsed hours and minutes:",{hours:v,minutes:p}),isNaN(v)||isNaN(p)||v<0||v>23||p<0||p>59?(console.log(" Invalid time values"),null):{hours:v,minutes:p}},s=a(r),o=a(n);if(console.log(" Parsed times:",{startParsed:s,endParsed:o}),!s||!o)return console.log(" Failed to parse times"),0;const l=s.hours*60+s.minutes;let c=o.hours*60+o.minutes;console.log(" Minutes since midnight:",{startMinutes:l,endMinutes:c}),c<=l&&(c+=24*60,console.log(" Midnight crossing detected, adjusted endMinutes:",c));const d=c-l;console.log(" Duration calculation:",{startMinutes:l,endMinutes:c,durationMinutes:d});const u=Math.max(0,Math.min(d,1440));return console.log(" Final result:",u),u}catch(r){return console.error("Error calculating duration:",r),0}},oc=(t,e=45)=>!t||t<=0||!e||e<=0?0:parseFloat((t/e).toFixed(2)),ui=t=>{if(!t||t===0||isNaN(t))return"0 menit";if(t<60)return`${t} menit`;{const e=Math.floor(t/60),r=t%60;return r===0?`${e} jam`:`${e} jam ${r} menit`}},hi=t=>!t||t===0||isNaN(t)?"0 JP":`${parseFloat(t.toFixed(2))} JP`,_4=(t,e)=>!t||!e?!1:e<=t,To=t=>t?t.slice(0,5):"",nC=t=>{if(!t)return!1;try{const e=t.trim().split(":");if(e.length!==2)return!1;const r=parseInt(e[0],10),n=parseInt(e[1],10);return!isNaN(r)&&!isNaN(n)&&r>=0&&r<=23&&n>=0&&n<=59}catch{return!1}},eNe=()=>{console.log(" Running time calculation tests..."),[{start:"03:00",end:"03:15",expected:15},{start:"03:15",end:"04:00",expected:45},{start:"04:00",end:"06:00",expected:120},{start:"06:00",end:"07:30",expected:90},{start:"07:30",end:"08:00",expected:30},{start:"08:00",end:"09:30",expected:90},{start:"14:15",end:"16:45",expected:150},{start:"23:30",end:"01:00",expected:90},{start:"09:00",end:"10:00",expected:60}].forEach(({start:e,end:r,expected:n})=>{const a=ic(e,r),s=oc(a,45);console.log(` Test: ${e} - ${r}`),console.log(`   Expected: ${n} minutes`),console.log(`   Got: ${a} minutes`),console.log(`   JP: ${s}`),console.log(`   Formatted: ${ui(a)} | ${hi(s)}`),console.log(`    ${a===n?"PASS":"FAIL"}`),console.log("---")})};typeof window<"u"&&(window.testTimeCalculation=eNe);const j4=t=>(console.log(" useJPProgressSimple hook called with:",{classId:t,type:typeof t,isUndefined:t===void 0,isEmpty:t===""}),Ye({queryKey:["jp-progress-simple",t],queryFn:async()=>{if(console.log(" useJPProgressSimple - queryFn executing for classId:",t),!t)return console.log(" useJPProgressSimple - No classId provided, returning empty array"),[];console.log(" useJPProgressSimple - Starting query for classId:",t);const{data:{user:e}}=await W.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:r}=await W.from("profiles").select("school_id").eq("id",e.id).single();if(!(r!=null&&r.school_id))throw new Error("School not found");const{data:n}=await W.from("academic_years").select("id").eq("school_id",r.school_id).eq("is_active",!0).single();if(!(n!=null&&n.id))throw new Error("Active academic year not found");const{data:a,error:s}=await W.from("schedule_class_subjects").select(`
          schedule_subject_id,
          hours_per_year,
          schedule_subjects (
            id,
            name,
            code,
            color,
            session_category_id,
            session_categories (
              name
            )
          )
        `).eq("class_id",t);if(s)throw console.error(" Error fetching KBM targets:",s),s;const{data:o,error:l}=await W.from("extracurricular_classes").select(`
          extracurricular_id,
          hours_per_year,
          extracurriculars (
            id,
            name,
            color,
            session_category_id,
            session_categories (
              name
            )
          )
        `).eq("class_id",t);if(l)throw console.error(" Error fetching EKSKUL targets:",l),l;console.log(" KBM Targets fetched:",a),console.log(" EKSKUL Targets fetched:",o),console.log(" ALL SUBJECT IDs in targets:",{kbm_subject_ids:(a==null?void 0:a.map(g=>{var y;return{name:(y=g.schedule_subjects)==null?void 0:y.name,id:g.schedule_subject_id}}))||[],ekskul_subject_ids:(o==null?void 0:o.map(g=>{var y;return{name:(y=g.extracurriculars)==null?void 0:y.name,id:g.extracurricular_id}}))||[]});const{data:c,error:d}=await W.from("class_schedules").select(`
          id,
          subject_id,
          start_time,
          end_time,
          day_of_week,
          schedule_date
        `).eq("class_id",t).eq("school_id",r.school_id).eq("academic_year_id",n.id).not("day_of_week","is",null);if(d)throw console.error(" Error fetching realisasi:",d),d;console.log(" Realisasi fetched:",c);const u=[...new Set((c==null?void 0:c.map(g=>g.subject_id))||[])];console.log(" UNIQUE SUBJECT IDs in realisasi:",u);const h=(c==null?void 0:c.filter(g=>{const y=a==null?void 0:a.some(w=>{var j;return w.schedule_subject_id===g.subject_id&&((j=w.schedule_subjects)==null?void 0:j.name)==="Aqidatuna"}),b=o==null?void 0:o.some(w=>{var j;return w.extracurricular_id===g.subject_id&&((j=w.extracurriculars)==null?void 0:j.name)==="Aqidatuna"});return y||b}))||[],f=(c==null?void 0:c.filter(g=>{const y=a==null?void 0:a.some(w=>{var j;return w.schedule_subject_id===g.subject_id&&((j=w.schedule_subjects)==null?void 0:j.name)==="Nabiyuna"}),b=o==null?void 0:o.some(w=>{var j;return w.extracurricular_id===g.subject_id&&((j=w.extracurriculars)==null?void 0:j.name)==="Nabiyuna"});return y||b}))||[];console.log(" AQIDATUNA REALISASI FOUND:",h.length,h),console.log(" NABIYUNA REALISASI FOUND:",f.length,f);const m=(a==null?void 0:a.map(g=>{var _,S,N,k,E,P,T,D,A;const y=(c==null?void 0:c.filter(C=>C.subject_id===g.schedule_subject_id))||[];(((_=g.schedule_subjects)==null?void 0:_.name)==="Aqidatuna"||((S=g.schedule_subjects)==null?void 0:S.name)==="Nabiyuna")&&console.log(` DETAILED DEBUG for ${(N=g.schedule_subjects)==null?void 0:N.name}:`,{target_schedule_subject_id:g.schedule_subject_id,total_realisasi_records:(c==null?void 0:c.length)||0,filtered_schedules:y.length,filtered_schedules_detail:y.map(C=>({id:C.id,subject_id:C.subject_id,start_time:C.start_time,end_time:C.end_time,schedule_date:C.schedule_date,day_of_week:C.day_of_week}))});const b=y.reduce((C,R)=>{var I;if(!R.start_time||!R.end_time)return C;const L=ic(R.start_time,R.end_time),M=oc(L,45);return console.log(` KBM JP calculation for ${(I=g.schedule_subjects)==null?void 0:I.name}:`,{schedule_id:R.id||"unknown",start_time:R.start_time,end_time:R.end_time,durationMinutes:L,jp:M,day_of_week:R.day_of_week,schedule_date:R.schedule_date}),C+M},0),w=g.hours_per_year||0,j=w>0?b/w*100:0;return console.log(` Final KBM JP calculation for ${(k=g.schedule_subjects)==null?void 0:k.name}:`,{subject_id:g.schedule_subject_id,totalSchedules:y.length,totalRealizationJP:Math.round(b*100)/100,targetJP:w,progressPercentage:Math.round(j*100)/100}),{subject_id:g.schedule_subject_id,subject_name:((E=g.schedule_subjects)==null?void 0:E.name)||"Unknown",subject_code:(P=g.schedule_subjects)==null?void 0:P.code,subject_color:(T=g.schedule_subjects)==null?void 0:T.color,target_jp:w,realisasi_jp:Math.round(b*100)/100,progress_percentage:Math.min(Math.round(j*100)/100,100),category:((A=(D=g.schedule_subjects)==null?void 0:D.session_categories)==null?void 0:A.name)||"Unknown"}}))||[],v=(o==null?void 0:o.map(g=>{var _,S,N,k,E,P,T,D;const y=(c==null?void 0:c.filter(A=>A.subject_id===g.extracurricular_id))||[];(((_=g.extracurriculars)==null?void 0:_.name)==="Aqidatuna"||((S=g.extracurriculars)==null?void 0:S.name)==="Nabiyuna")&&console.log(` DETAILED DEBUG EKSKUL for ${(N=g.extracurriculars)==null?void 0:N.name}:`,{target_extracurricular_id:g.extracurricular_id,total_realisasi_records:(c==null?void 0:c.length)||0,filtered_schedules:y.length,filtered_schedules_detail:y.map(A=>({id:A.id,subject_id:A.subject_id,start_time:A.start_time,end_time:A.end_time,schedule_date:A.schedule_date,day_of_week:A.day_of_week}))});const b=y.reduce((A,C)=>{var M;if(!C.start_time||!C.end_time)return A;const R=ic(C.start_time,C.end_time),L=oc(R,45);return console.log(` EKSKUL JP calculation for ${(M=g.extracurriculars)==null?void 0:M.name}:`,{schedule_id:C.id||"unknown",start_time:C.start_time,end_time:C.end_time,durationMinutes:R,jp:L,day_of_week:C.day_of_week,schedule_date:C.schedule_date}),A+L},0),w=g.hours_per_year||0,j=w>0?b/w*100:0;return console.log(` Final EKSKUL JP calculation for ${(k=g.extracurriculars)==null?void 0:k.name}:`,{subject_id:g.extracurricular_id,totalSchedules:y.length,totalRealizationJP:Math.round(b*100)/100,targetJP:w,progressPercentage:Math.round(j*100)/100}),{subject_id:g.extracurricular_id,subject_name:((E=g.extracurriculars)==null?void 0:E.name)||"Unknown",subject_code:void 0,subject_color:(P=g.extracurriculars)==null?void 0:P.color,target_jp:w,realisasi_jp:Math.round(b*100)/100,progress_percentage:Math.min(Math.round(j*100)/100,100),category:((D=(T=g.extracurriculars)==null?void 0:T.session_categories)==null?void 0:D.name)||"EKSKUL"}}))||[],p=[...m,...v];return console.log(" JP Progress calculated (simple) - COMBINED:",{total:p.length,kbm:m.length,ekskul:v.length,data:p}),p},enabled:!!t,onSuccess:e=>{console.log(" useJPProgressSimple - Query successful:",{classId:t,dataLength:e.length,data:e})},onError:e=>{console.error(" useJPProgressSimple - Query error:",{classId:t,error:e})},staleTime:5e3,gcTime:3e5})),mp=t=>{console.log(" useScheduleSubjectsByCategory called with:",{selectedClassId:t,type:typeof t,isNull:t===null,isUndefined:t===void 0,isEmpty:t===""});const{data:e=[]}=Ar(),{data:r=[]}=Vg(),{data:n=[]}=eR(),{data:a=[]}=Cc(),{data:s=[]}=Lu(),{data:o=[]}=SR(),{data:l=[]}=Uw(),c=t||void 0,{data:d=[],isLoading:u,error:h}=j4(c);return console.log(" useScheduleSubjectsByCategory - JP Progress Data:",{selectedClassId:t,classIdForJP:c,jpProgressData:d.length,jpLoading:u,jpError:h,jpData:d}),Ye({queryKey:["schedule-subjects-by-category",t,e,r,n,a,s,o,l,d],queryFn:()=>{console.log(" Processing schedule subjects by category with JP data..."),console.log(" Data summary:",{sessionCategories:e.length,scheduleSubjects:r.length,mataPelajaran:a.length,ekstrakurikuler:s.length,jpProgressData:d.length,selectedClassId:t});const f=v=>{const p=d.find(y=>y.subject_id===v),g={target_jp:(p==null?void 0:p.target_jp)||0,realisasi_jp:(p==null?void 0:p.realisasi_jp)||0,progress_percentage:(p==null?void 0:p.progress_percentage)||0};return console.log(` JP Data lookup for subject ${v}:`,{found:!!p,jpData:p,result:g}),g},m=[];return e.forEach(v=>{console.log(` Processing session category: ${v.name} (${v.id})`);const p=[],g=r.filter(b=>b.session_category_id===v.id),y=a.filter(b=>b.session_categories_id===v.id);console.log(` Data for category ${v.name}:`,{scheduleSubjectsCount:g.length,subjectsCount:y.length,scheduleSubjects:g.map(b=>b.name),subjects:y.map(b=>b.name)}),g.forEach(b=>{if(t){if(n.some(j=>j.schedule_subject_id===b.id&&j.class_id===t)){const j=f(b.id),_={id:b.id,name:b.name,code:b.code,color:b.color,total_hours_per_year:b.total_hours_per_year||0,category:v.name,type:"schedule_subject",source:"schedule_subjects",session_category_id:b.session_category_id,target_jp:j.target_jp,realisasi_jp:j.realisasi_jp,progress_percentage:j.progress_percentage};console.log(` Adding subject "${b.name}" with JP data:`,_),p.push(_)}}else{const w=f(b.id);p.push({id:b.id,name:b.name,code:b.code,color:b.color,total_hours_per_year:b.total_hours_per_year||0,category:v.name,type:"schedule_subject",source:"schedule_subjects",session_category_id:b.session_category_id,target_jp:w.target_jp,realisasi_jp:w.realisasi_jp,progress_percentage:w.progress_percentage})}}),y.forEach(b=>{if(t){if(o.some(j=>j.subject_id===b.id&&j.class_id===t)){const j=f(b.id);p.push({id:b.id,name:b.name,code:b.code,color:b.color,total_hours_per_year:b.total_hours_per_year||0,category:v.name,type:"mata_pelajaran",source:"mata_pelajaran",session_category_id:b.session_categories_id,target_jp:j.target_jp,realisasi_jp:j.realisasi_jp,progress_percentage:j.progress_percentage})}}else{const w=f(b.id);p.push({id:b.id,name:b.name,code:b.code,color:b.color,total_hours_per_year:b.total_hours_per_year||0,category:v.name,type:"mata_pelajaran",source:"mata_pelajaran",session_category_id:b.session_categories_id,target_jp:w.target_jp,realisasi_jp:w.realisasi_jp,progress_percentage:w.progress_percentage})}}),v.name==="Ekskul"&&(console.log(" Processing Ekskul from ekstrakurikuler table"),s.forEach(b=>{if(t){if(l.some(j=>j.extracurricular_id===b.id&&j.class_id===t)){const j=f(b.id);p.push({id:b.id,name:b.name,color:b.color,total_hours_per_year:0,category:v.name,type:"ekstrakurikuler",source:"ekstrakurikuler",session_category_id:v.id,target_jp:j.target_jp,realisasi_jp:j.realisasi_jp,progress_percentage:j.progress_percentage})}}else{const w=f(b.id);p.push({id:b.id,name:b.name,color:b.color,total_hours_per_year:0,category:v.name,type:"ekstrakurikuler",source:"ekstrakurikuler",session_category_id:v.id,target_jp:w.target_jp,realisasi_jp:w.realisasi_jp,progress_percentage:w.progress_percentage})}})),console.log(` Session Category ${v.name} processed with ${p.length} subjects`),m.push({id:v.id,name:v.name,color:v.color,description:v.description,is_system_category:!1,subjects:p})}),console.log(" Final categories with subjects:",{totalCategories:m.length,categoriesWithData:m.filter(v=>v.subjects.length>0).length,totalSubjects:m.reduce((v,p)=>v+p.subjects.length,0),categories:m.map(v=>({name:v.name,is_system:v.is_system_category,subjectCount:v.subjects.length,subjects:v.subjects.map(p=>({name:p.name,type:p.type,source:p.source}))}))}),m},enabled:!!e&&!!r&&!!n&&!!a&&!!s&&!!o&&!!l&&!u,staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0})};var en=(t=>(t.SINGLE="single",t.MULTIPLE="multiple",t.ALL="all",t))(en||{});const vx=["#10B981","#F59E0B","#8B5CF6","#EF4444","#F97316","#3B82F6","#EC4899","#06B6D4","#84CC16","#6366F1"],tNe=({isOpen:t,onClose:e,selectedCategoryId:r,selectedClassId:n})=>{const a=Ne(),{data:s=[]}=Yt(),{data:o=[]}=Ar(),l=Iw(!1),c=()=>{var b;return r&&o.length>0?r:((b=o[0])==null?void 0:b.id)||""},d=()=>vx[0],[u,h]=x.useState({name:"",code:"",color:d(),total_hours_per_year:0,standard_duration:45,schedule_category_id:c(),selected_classes:n?[n]:[]});x.useEffect(()=>{t&&h({name:"",code:"",color:d(),total_hours_per_year:0,standard_duration:45,schedule_category_id:c(),selected_classes:n?[n]:[]})},[t,r,n,o]);const f=async()=>{var b;if(console.log(" === SCHEDULE SUBJECT MODAL SUBMIT ==="),console.log(" Form data:",u),!u.name.trim()){nt({title:"Error",description:"Nama mata pelajaran harus diisi",variant:"destructive"});return}if(u.name.trim().length<2){nt({title:"Error",description:"Nama mata pelajaran minimal 2 karakter",variant:"destructive"});return}if(!u.schedule_category_id){nt({title:"Error",description:"Kategori harus dipilih",variant:"destructive"});return}if(u.selected_classes.length===0){nt({title:"Error",description:"Minimal pilih satu kelas",variant:"destructive"});return}try{const w={name:u.name.trim(),code:((b=u.code)==null?void 0:b.trim())||void 0,color:u.color,total_hours_per_year:u.total_hours_per_year!==void 0?u.total_hours_per_year:0,standard_duration:u.standard_duration||45,schedule_category_id:u.schedule_category_id,selected_classes:u.selected_classes};console.log(" Subject data to be sent:",w),console.log(" Color being saved:",u.color);const j=await l.mutateAsync(w);console.log(" Schedule subject created successfully:",j),await a.invalidateQueries({queryKey:["schedule-subjects"]}),await a.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),nt({title:"Berhasil",description:`Mata pelajaran "${w.name}" berhasil ditambahkan ke ${u.selected_classes.length} kelas`}),console.log(" === SCHEDULE SUBJECT MODAL COMPLETED ==="),e()}catch(w){console.error(" === ERROR IN SCHEDULE SUBJECT MODAL ==="),console.error(" Error details:",w),nt({title:"Gagal",description:`Gagal menambahkan mata pelajaran: ${(w==null?void 0:w.message)||"Terjadi kesalahan tidak dikenal"}`,variant:"destructive"})}},m=(b,w)=>{h(j=>({...j,selected_classes:w?[...j.selected_classes,b]:j.selected_classes.filter(_=>_!==b)}))},v=()=>{const b=s.map(w=>w.id);h(w=>({...w,selected_classes:b}))},p=()=>{h(b=>({...b,selected_classes:[]}))},g=s.length>0&&u.selected_classes.length===s.length,y=o;return console.log(" ScheduleSubjectModal - Debug data:",{isOpen:t,sessionCategories:(o==null?void 0:o.length)||0,availableCategories:(y==null?void 0:y.length)||0,categories:o==null?void 0:o.map(b=>({id:b.id,name:b.name}))}),i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"bg-gray-900 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"text-xl font-bold text-white flex items-center justify-between",children:[i.jsx("span",{children:"Tambah Mata Pelajaran Manual"}),i.jsx(K,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-400 hover:text-white",children:i.jsx(Ds,{className:"h-4 w-4"})})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Nama Mata Pelajaran *"}),i.jsx(me,{value:u.name,onChange:b=>h(w=>({...w,name:b.target.value})),placeholder:"Masukkan nama mata pelajaran",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Kode Mata Pelajaran"}),i.jsx(me,{value:u.code,onChange:b=>h(w=>({...w,code:b.target.value})),placeholder:"Masukkan kode mata pelajaran (opsional)",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Kategori *"}),i.jsxs(Re,{value:u.schedule_category_id,onValueChange:b=>h(w=>({...w,schedule_category_id:b})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kategori"})}),i.jsx(Pe,{className:"bg-gray-800 border-gray-700",children:y.map(b=>i.jsx(he,{value:b.id,className:"text-white hover:bg-gray-700",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:b.color}}),i.jsx("span",{children:b.name})]})},b.id))})]}),y.length===0&&i.jsx("p",{className:"text-sm text-yellow-400 mt-1",children:"Tidak ada kategori tersedia. Buat kategori baru terlebih dahulu di menu Sesi dan Waktu."})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Warna"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:vx.map(b=>i.jsx("button",{type:"button",onClick:()=>h(w=>({...w,color:b})),className:`w-8 h-8 rounded-full border-2 ${u.color===b?"border-white":"border-gray-600"}`,style:{backgroundColor:b}},b))})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"JP/Tahun"}),i.jsx(me,{type:"number",value:u.total_hours_per_year,onChange:b=>h(w=>({...w,total_hours_per_year:parseInt(b.target.value)||0})),placeholder:"0",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Durasi Standar (menit)"}),i.jsx(me,{type:"number",value:u.standard_duration,onChange:b=>h(w=>({...w,standard_duration:parseInt(b.target.value)||45})),placeholder:"45",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ne,{className:"text-white",children:"Pilih Kelas *"}),i.jsx("div",{className:"flex space-x-2",children:i.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:g?p:v,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white text-xs",children:g?i.jsxs(i.Fragment,{children:[i.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Batal Semua"]}):i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-3 w-3 mr-1"}),"Pilih Semua"]})})})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto border border-gray-600 rounded-md p-2 bg-gray-800",children:s.map(b=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:b.id,checked:u.selected_classes.includes(b.id),onCheckedChange:w=>m(b.id,w),className:"border-gray-600 data-[state=checked]:bg-blue-600"}),i.jsx(ne,{htmlFor:b.id,className:"text-white text-sm cursor-pointer",children:b.name})]},b.id))}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[u.selected_classes.length," dari ",s.length," kelas dipilih"]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(K,{variant:"outline",onClick:e,className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Batal"}),i.jsx(K,{onClick:f,disabled:l.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:l.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Simpan"]})})]})]})]})})},rNe=({subject:t,selectedClassId:e})=>{const r=Ne(),{data:n=[]}=Yt(),{data:a=[]}=eR(),s=XO(!1),o=ZO(!1),l=tR(!1),c=Ive(!1),[d,u]=x.useState(!1),[h,f]=x.useState(!1),[m,v]=x.useState({name:t.name,code:t.code||"",color:t.color,total_hours_per_year:t.total_hours_per_year,assigned_classes:[]}),p=a.filter(k=>k.schedule_subject_id===t.id).map(k=>k.class_id),g=()=>{v({name:t.name,code:t.code||"",color:t.color,total_hours_per_year:t.total_hours_per_year,assigned_classes:p}),u(!0)},y=async()=>{var k;try{console.log(" Updating schedule subject:",m),await s.mutateAsync({id:t.id,name:m.name.trim(),code:((k=m.code)==null?void 0:k.trim())||void 0,color:m.color,total_hours_per_year:m.total_hours_per_year});const E=p,P=m.assigned_classes,T=P.filter(A=>!E.includes(A)),D=E.filter(A=>!P.includes(A));for(const A of T)await l.mutateAsync({schedule_subject_id:t.id,class_id:A,hours_per_week:0,hours_per_year:0});for(const A of D){const C=a.find(R=>R.schedule_subject_id===t.id&&R.class_id===A);C&&await c.mutateAsync(C.id)}await r.invalidateQueries({queryKey:["schedule-subjects"]}),await r.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),await r.invalidateQueries({queryKey:["schedule-class-subjects"]}),nt({title:"Berhasil",description:`Mata pelajaran "${m.name}" berhasil diperbarui`}),u(!1)}catch(E){console.error("Error updating subject:",E),nt({title:"Gagal",description:`Gagal memperbarui mata pelajaran: ${(E==null?void 0:E.message)||"Terjadi kesalahan"}`,variant:"destructive"})}},b=async()=>{try{console.log(" Deleting schedule subject:",t.id),await o.mutateAsync(t.id),nt({title:"Berhasil",description:`Mata pelajaran "${t.name}" berhasil dihapus`}),f(!1)}catch(k){console.error("Error deleting subject:",k),nt({title:"Gagal",description:`Gagal menghapus mata pelajaran: ${(k==null?void 0:k.message)||"Terjadi kesalahan"}`,variant:"destructive"})}},w=(k,E)=>{v(P=>({...P,assigned_classes:E?[...P.assigned_classes,k]:P.assigned_classes.filter(T=>T!==k)}))},j=()=>{const k=n.map(E=>E.id);v(E=>({...E,assigned_classes:k}))},_=()=>{v(k=>({...k,assigned_classes:[]}))},S=n.length>0&&m.assigned_classes.length===n.length;return t.source==="schedule"||t.type==="ekstrakurikuler"||t.type==="schedule_subject"||t.type==="mata_pelajaran"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex gap-1 bg-black/20 rounded-md p-1",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:g,className:"h-6 w-6 p-0 text-white/80 hover:text-white hover:bg-white/10 transition-all duration-200",title:"Edit",children:i.jsx(Ts,{className:"h-3 w-3"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>f(!0),className:"h-6 w-6 p-0 text-white/80 hover:text-red-400 hover:bg-red-500/10 transition-all duration-200",title:"Delete",children:i.jsx(Ut,{className:"h-3 w-3"})})]}),i.jsx(kt,{open:d,onOpenChange:u,children:i.jsxs(xt,{className:"bg-gray-900 border-gray-700 text-white max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"text-xl font-bold text-white flex items-center justify-between",children:[i.jsx("span",{children:"Edit Mata Pelajaran"}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>u(!1),className:"text-gray-400 hover:text-white",children:i.jsx(Ds,{className:"h-4 w-4"})})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Nama Mata Pelajaran *"}),i.jsx(me,{value:m.name,onChange:k=>v(E=>({...E,name:k.target.value})),placeholder:"Masukkan nama mata pelajaran",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Kode Mata Pelajaran"}),i.jsx(me,{value:m.code,onChange:k=>v(E=>({...E,code:k.target.value})),placeholder:"Masukkan kode mata pelajaran (opsional)",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Warna"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:vx.map(k=>i.jsx("button",{type:"button",onClick:()=>v(E=>({...E,color:k})),className:`w-8 h-8 rounded-full border-2 ${m.color===k?"border-white":"border-gray-600"}`,style:{backgroundColor:k}},k))})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"JP/Tahun"}),i.jsx(me,{type:"number",value:m.total_hours_per_year,onChange:k=>v(E=>({...E,total_hours_per_year:parseInt(k.target.value)||0})),placeholder:"0",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ne,{className:"text-white",children:"Pilih Kelas *"}),i.jsx("div",{className:"flex space-x-2",children:i.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:S?_:j,className:"border-gray-600 text-gray-300 hover:bg-gray-700 hover:text-white text-xs",children:S?i.jsxs(i.Fragment,{children:[i.jsx(Ds,{className:"h-3 w-3 mr-1"}),"Batal Semua"]}):i.jsxs(i.Fragment,{children:[i.jsx(ct,{className:"h-3 w-3 mr-1"}),"Pilih Semua"]})})})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto border border-gray-600 rounded-md p-2 bg-gray-800",children:n.map(k=>i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:`edit-${k.id}`,checked:m.assigned_classes.includes(k.id),onCheckedChange:E=>w(k.id,E),className:"border-gray-600 data-[state=checked]:bg-blue-600"}),i.jsx(ne,{htmlFor:`edit-${k.id}`,className:"text-white text-sm cursor-pointer",children:k.name})]},k.id))}),i.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[m.assigned_classes.length," dari ",n.length," kelas dipilih"]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(K,{variant:"outline",onClick:()=>u(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Batal"}),i.jsx(K,{onClick:y,disabled:s.isPending,className:"bg-blue-600 hover:bg-blue-700 text-white",children:s.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):i.jsxs(i.Fragment,{children:[i.jsx(dc,{className:"h-4 w-4 mr-2"}),"Simpan"]})})]})]})]})}),i.jsx(kt,{open:h,onOpenChange:f,children:i.jsxs(xt,{className:"bg-gray-900 border-gray-700 text-white",children:[i.jsx(wt,{children:i.jsx(_t,{className:"text-xl font-bold text-white",children:"Konfirmasi Hapus"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-gray-300",children:["Apakah Anda yakin ingin menghapus mata pelajaran ",i.jsxs("strong",{children:['"',t.name,'"']}),"?"]}),i.jsx("p",{className:"text-sm text-yellow-400",children:"Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data terkait."}),i.jsxs("div",{className:"flex justify-end space-x-2",children:[i.jsx(K,{variant:"outline",onClick:()=>f(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-800",children:"Batal"}),i.jsx(K,{onClick:b,disabled:o.isPending,className:"bg-red-600 hover:bg-red-700 text-white",children:o.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menghapus..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Hapus"]})})]})]})]})})]}):null},nNe=t=>Ye({queryKey:["jp-progress",t],queryFn:async()=>{if(!t)return[];const{data:{user:e}}=await W.auth.getUser();if(!e)throw new Error("User not authenticated");const{data:r}=await W.from("profiles").select("school_id").eq("id",e.id).single();if(!(r!=null&&r.school_id))throw new Error("School not found");const{data:n}=await W.from("academic_years").select("id").eq("school_id",r.school_id).eq("is_active",!0).single();if(!(n!=null&&n.id))throw new Error("Active academic year not found");const{data:a,error:s}=await W.from("class_schedules").select(`
          subject_id,
          hours_per_year,
          academic_year_id,
          schedule_subjects (
            id,
            name,
            code,
            color,
            session_categories (
              name
            )
          ),
          classes (
            id,
            name,
            level
          )
        `).eq("class_id",t).eq("school_id",r.school_id).is("day_of_week",null);if(s)return console.error(" useJPProgress error:",s),console.log(" Returning empty array to prevent errors"),[];const{data:o,error:l}=await W.from("schedules_view").select(`
          subject_id,
          jp_realisasi,
          academic_year_id
        `).eq("class_id",t).eq("school_id",r.school_id);if(l)throw l;const c=(a==null?void 0:a.reduce((u,h)=>{const f=u[h.subject_id];return(!f||h.hours_per_year>f.hours_per_year)&&(u[h.subject_id]=h),u},{}))||{},d=Object.values(c).map(u=>{var v,p,g,y,b,w,j;const h=((v=o==null?void 0:o.filter(_=>_.subject_id===u.subject_id))==null?void 0:v.reduce((_,S)=>_+(parseFloat(S.jp_realisasi)||0),0))||0,f=u.hours_per_year||0,m=f>0?h/f*100:0;return{subject_id:u.subject_id,subject_name:((p=u.schedule_subjects)==null?void 0:p.name)||"Unknown",subject_code:(g=u.schedule_subjects)==null?void 0:g.code,subject_color:(y=u.schedule_subjects)==null?void 0:y.color,class_id:t,class_name:((b=u.classes)==null?void 0:b.name)||"Unknown",target_jp:f,realisasi_jp:Math.round(h*100)/100,progress_percentage:Math.min(Math.round(m*100)/100,100),category:((j=(w=u.schedule_subjects)==null?void 0:w.session_categories)==null?void 0:j.name)||"Unknown"}});return console.log(" JP Progress calculated:",{classId:t,totalSubjects:d.length,progressData:d.map(u=>({subject:u.subject_name,target:u.target_jp,realisasi:u.realisasi_jp,percentage:u.progress_percentage}))}),console.log(" Raw targets data:",a),console.log(" Raw realisasi data:",o),d},enabled:!!t,staleTime:5e3,gcTime:3e5}),S4=({selectedClassId:t,selectedWeek:e}={})=>{const{data:r=[],isLoading:n,error:a}=Ks();Cc(),Ar();const{data:s=[]}=nNe(t),{data:o=[]}=j4(t),l=x.useMemo(()=>{if(!t)return[];console.log(" useJPCalculation (PAGINATED) - Processing JP Progress:",{jpProgress:s.length,jpProgressSimple:o.length,schedulesCount:r.length,selectedWeek:e,isLoading:n,error:a});const d=o.map(u=>({id:u.subject_id,name:u.subject_name,targetJP:u.target_jp,realizationJP:u.realisasi_jp,percentage:Math.round(u.progress_percentage),color:u.subject_color||"#8B5CF6",category:u.category,type:"subject"}));return console.log(" useJPCalculation - Final JP Results:",d),d},[o,t]),c=x.useMemo(()=>{const d=l.reduce((f,m)=>f+m.targetJP,0),u=l.reduce((f,m)=>f+m.realizationJP,0),h=d>0?Math.round(u/d*100):0;return{targetJP:d,realizationJP:Math.round(u*10)/10,percentage:h}},[l]);return{jpData:l,totalJP:c,isLoading:!1}},aNe=({selectedClassId:t,selectedWeek:e,onSubjectDrag:r})=>{console.log(" ExpandableCategorySidebar rendered with props:",{selectedClassId:t,selectedWeek:e,type:typeof t,isNull:t===null,isUndefined:t===void 0,isEmpty:t===""});const{data:n=[]}=mp(t),[a,s]=x.useState({}),[o,l]=x.useState(!1),[c,d]=x.useState(""),{jpData:u}=S4({selectedClassId:t||void 0,selectedWeek:e});console.log(" ExpandableCategorySidebar DEBUG:",{selectedClassId:t,scheduleSubjectsByCategory:n.length,jpData:u.length,categoriesWithJPData:n.map(g=>({name:g.name,subjects:g.subjects.map(y=>({name:y.name,target_jp:y.target_jp,realisasi_jp:y.realisasi_jp,progress_percentage:y.progress_percentage}))}))}),console.log(" All JP Data in sidebar:",u),console.log(" Selected Class ID:",t);const h=n;console.log(" ExpandableCategorySidebar - selectedClassId:",t),console.log(" ExpandableCategorySidebar - scheduleSubjectsByCategory:",n),console.log(" ExpandableCategorySidebar - categoriesToRender:",h),console.log(" Sidebar Categories to Render:",{selectedClassId:t,totalCategories:h.length,categories:h.map(g=>({name:g.name,subjectCount:g.subjects.length,subjects:g.subjects.map(y=>y.name)}))});const f=g=>{s(y=>({...y,[g]:!y[g]}))},m=(g,y)=>{if(!t){g.preventDefault();return}const b={...y,type:y.type||"schedule_subject",source:"sidebar",id:y.id,name:y.name,color:y.color||"#6B7280",session_category_id:y.session_category_id,original_data:y};console.log(" Drag Start - Enhanced Subject Data:",b),g.dataTransfer.setData("application/json",JSON.stringify(b)),g.dataTransfer.effectAllowed="copy",r(b)},v=g=>{d(g),l(!0)},p=()=>{l(!1),d("")};return i.jsxs("div",{id:"external-events-container",className:"h-full bg-muted/20 p-4 space-y-4 overflow-y-auto expandable-category-sidebar",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Mata Pelajaran"}),i.jsxs(K,{size:"sm",onClick:()=>v(""),className:"bg-primary hover:bg-primary/90 text-primary-foreground font-semibold shadow-lg transition-all duration-300",children:[i.jsx(ct,{className:"h-4 w-4 mr-1"}),"Mapel"]})]}),!t&&i.jsx("div",{className:"bg-lime-500/10 border border-lime-500/30 rounded-lg p-3 mb-4",children:i.jsx("p",{className:"text-lime-400 text-sm text-center",children:"Pilih kelas terlebih dahulu untuk menambahkan jadwal"})}),i.jsx("div",{className:"space-y-3",children:h.map(g=>{const y=a[g.id],b=g.subjects;return i.jsx(ie,{className:"border-border shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] overflow-hidden bg-card",style:{borderRadius:"20px",boxShadow:`0 4px 12px rgba(0, 0, 0, 0.1), 0 2px 6px rgba(0, 0, 0, 0.05), 0 0 0 1px ${g.color}40`},children:i.jsxs(qi,{open:y,onOpenChange:()=>f(g.id),children:[i.jsx(Al,{asChild:!0,children:i.jsx(_e,{className:"p-4 cursor-pointer transition-all duration-300 hover:bg-accent/10",children:i.jsxs(Ee,{className:"flex items-center justify-between w-full",children:[i.jsx("div",{className:"flex-1",children:i.jsx("div",{className:"text-foreground font-medium text-sm",children:g.name})}),i.jsx("div",{className:"bg-primary text-primary-foreground font-normal px-3 py-1 rounded-full text-sm min-w-[2.5rem] text-center mr-3",style:{},children:b.length}),i.jsx(Oa,{className:`h-5 w-5 text-white transition-transform duration-300 ${y?"rotate-90":""}`})]})})}),i.jsx(Ui,{children:i.jsxs(oe,{className:"pt-0 space-y-2",children:[b.map(w=>{const j=w4(w,g),_=Zke(g),S=u.find(k=>k.id===w.id);console.log(` SUBJECT DEBUG "${w.name}":`,{id:w.id,name:w.name,target_jp:w.target_jp,realisasi_jp:w.realisasi_jp,progress_percentage:w.progress_percentage,hasJPData:w.target_jp!==void 0,legacyJPInfo:S}),console.log(` Subject "${w.name}" - Category: ${g.name}`,{subjectColor:w.color,categoryColor:g.color,finalColors:j,categoryColors:_,jpInfo:S});const N={...w,type:w.type||"schedule_subject",source:"sidebar",session_category_id:w.session_category_id};return i.jsx("div",{className:`
                            fc-event fc-event-draggable rounded-lg border-2 p-3 transition-all duration-300 group backdrop-blur-sm shadow-lg hover:shadow-2xl select-none
                            ${t?"cursor-move hover:scale-105 hover:shadow-2xl hover:z-50 hover:-translate-y-1":"cursor-not-allowed opacity-50"}
                          `,style:{background:t?j.background:"linear-gradient(135deg, #4B556340, #37415040)",borderColor:t?j.border:"#6B728080",boxShadow:t?`0 4px 12px rgba(0,0,0,0.15), 0 0 0 1px ${j.border}30`:"0 2px 8px rgba(0,0,0,0.1)"},"data-subject":JSON.stringify(N),"data-subject-id":w.id,"data-subject-name":w.name,"data-subject-color":j.background,"data-category-name":g.name,"data-duration":"01:00",draggable:!!t,onDragStart:k=>m(k,w),children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(_A,{className:`h-5 w-5 transition-all duration-300 ${t?"group-hover:scale-125 group-hover:rotate-12":"text-gray-600"}`,style:{color:t?j.text:"#6B7280",filter:"none"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-bold truncate drop-shadow-sm",style:{color:t?j.text:"#9CA3AF",textShadow:"none"},children:w.name}),t&&w.target_jp!==void 0&&i.jsxs("div",{className:"text-xs font-semibold mt-1 space-y-1",children:[i.jsxs("div",{style:{color:t?j.text:"#9CA3AF"},children:[w.realisasi_jp||0,"/",w.target_jp||0," JP/Tahun"]}),i.jsx("div",{className:"w-full",children:i.jsx(N0,{value:w.progress_percentage||0,className:"h-2 bg-gray-700/50",indicatorClassName:(w.progress_percentage||0)>=100?"bg-green-500":(w.progress_percentage||0)>=75?"bg-blue-500":(w.progress_percentage||0)>=50?"bg-yellow-500":"bg-red-500"})}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"px-2 py-1 rounded text-xs font-bold",style:{backgroundColor:(w.progress_percentage||0)>=100?"#10B981":(w.progress_percentage||0)>=75?"#3B82F6":(w.progress_percentage||0)>=50?"#F59E0B":"#EF4444",color:"white"},children:[Math.round(w.progress_percentage||0),"%"]}),i.jsx("span",{className:"text-xs",style:{color:t?`${j.text}80`:"#6B7280"},children:(w.progress_percentage||0)>=100?"Tercapai":(w.progress_percentage||0)>=75?"Baik":(w.progress_percentage||0)>=50?"Cukup":"Kurang"})]})]}),w.code&&i.jsx("div",{className:"text-xs truncate font-semibold",style:{color:t?`${j.text}90`:"#6B7280"},children:w.code})]}),i.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-all duration-200 z-20",children:i.jsx(rNe,{subject:w,selectedClassId:t})})]})},w.id)}),b.length===0&&i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Belum ada mata pelajaran"}),i.jsxs(K,{size:"sm",variant:"outline",onClick:()=>v(g.id),className:"border-border text-muted-foreground hover:bg-accent hover:text-accent-foreground",children:[i.jsx(ct,{className:"h-3 w-3 mr-1"}),"Tambah"]})]})]})})]})},g.id)})}),i.jsx(tNe,{isOpen:o,onClose:p,selectedCategoryId:c,selectedClassId:t})]})};var aC=1,sNe=.9,iNe=.8,oNe=.17,Ov=.1,Rv=.999,lNe=.9999,cNe=.99,dNe=/[\\\/_+.#"@\[\(\{&]/,uNe=/[\\\/_+.#"@\[\(\{&]/g,hNe=/[\s-]/,k4=/[\s-]/g;function yx(t,e,r,n,a,s,o){if(s===e.length)return a===t.length?aC:cNe;var l=`${a},${s}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(s),d=r.indexOf(c,a),u=0,h,f,m,v;d>=0;)h=yx(t,e,r,n,d+1,s+1,o),h>u&&(d===a?h*=aC:dNe.test(t.charAt(d-1))?(h*=iNe,m=t.slice(a,d-1).match(uNe),m&&a>0&&(h*=Math.pow(Rv,m.length))):hNe.test(t.charAt(d-1))?(h*=sNe,v=t.slice(a,d-1).match(k4),v&&a>0&&(h*=Math.pow(Rv,v.length))):(h*=oNe,a>0&&(h*=Math.pow(Rv,d-a))),t.charAt(d)!==e.charAt(s)&&(h*=lNe)),(h<Ov&&r.charAt(d-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(d-1)!==n.charAt(s))&&(f=yx(t,e,r,n,d+1,s+2,o),f*Ov>h&&(h=f*Ov)),h>u&&(u=h),d=r.indexOf(c,d+1);return o[l]=u,u}function sC(t){return t.toLowerCase().replace(k4," ")}function fNe(t,e,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,yx(t,e,sC(t),sC(e),0,0,{})}function cl(t,e,{checkForDefaultPrevented:r=!0}={}){return function(a){if(t==null||t(a),r===!1||!a.defaultPrevented)return e==null?void 0:e(a)}}function mNe(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function N4(...t){return e=>t.forEach(r=>mNe(r,e))}function Gu(...t){return x.useCallback(N4(...t),t)}function gNe(t,e=[]){let r=[];function n(s,o){const l=x.createContext(o),c=r.length;r=[...r,o];function d(h){const{scope:f,children:m,...v}=h,p=(f==null?void 0:f[t][c])||l,g=x.useMemo(()=>v,Object.values(v));return x.createElement(p.Provider,{value:g},m)}function u(h,f){const m=(f==null?void 0:f[t][c])||l,v=x.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return d.displayName=s+"Provider",[d,u]}const a=()=>{const s=r.map(o=>x.createContext(o));return function(l){const c=(l==null?void 0:l[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return a.scopeName=t,[n,pNe(a,...e)]}function pNe(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const o=n.reduce((l,{useScope:c,scopeName:d})=>{const h=c(s)[`__scope${d}`];return{...l,...h}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}const bx=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},vNe=Ox.useId||(()=>{});let yNe=0;function $v(t){const[e,r]=x.useState(vNe());return bx(()=>{t||r(n=>n??String(yNe++))},[t]),t||(e?`radix-${e}`:"")}function eo(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...r)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...r)},[])}function bNe({prop:t,defaultProp:e,onChange:r=()=>{}}){const[n,a]=xNe({defaultProp:e,onChange:r}),s=t!==void 0,o=s?t:n,l=eo(r),c=x.useCallback(d=>{if(s){const h=typeof d=="function"?d(t):d;h!==t&&l(h)}else a(d)},[s,t,a,l]);return[o,c]}function xNe({defaultProp:t,onChange:e}){const r=x.useState(t),[n]=r,a=x.useRef(n),s=eo(e);return x.useEffect(()=>{a.current!==n&&(s(n),a.current=n)},[n,a,s]),r}const I_=x.forwardRef((t,e)=>{const{children:r,...n}=t,a=x.Children.toArray(r),s=a.find(_Ne);if(s){const o=s.props.children,l=a.map(c=>c===s?x.Children.count(o)>1?x.Children.only(null):x.isValidElement(o)?o.props.children:null:c);return x.createElement(xx,Lr({},n,{ref:e}),x.isValidElement(o)?x.cloneElement(o,void 0,l):null)}return x.createElement(xx,Lr({},n,{ref:e}),r)});I_.displayName="Slot";const xx=x.forwardRef((t,e)=>{const{children:r,...n}=t;return x.isValidElement(r)?x.cloneElement(r,{...jNe(n,r.props),ref:e?N4(e,r.ref):r.ref}):x.Children.count(r)>1?x.Children.only(null):null});xx.displayName="SlotClone";const wNe=({children:t})=>x.createElement(x.Fragment,null,t);function _Ne(t){return x.isValidElement(t)&&t.type===wNe}function jNe(t,e){const r={...e};for(const n in e){const a=t[n],s=e[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...l)=>{s(...l),a(...l)}:a&&(r[n]=a):n==="style"?r[n]={...a,...s}:n==="className"&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...t,...r}}const SNe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],An=SNe.reduce((t,e)=>{const r=x.forwardRef((n,a)=>{const{asChild:s,...o}=n,l=s?I_:e;return x.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),x.createElement(l,Lr({},o,{ref:a}))});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function kNe(t,e){t&&Ri.flushSync(()=>t.dispatchEvent(e))}function NNe(t,e=globalThis==null?void 0:globalThis.document){const r=eo(t);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[r,e])}const wx="dismissableLayer.update",ENe="dismissableLayer.pointerDownOutside",CNe="dismissableLayer.focusOutside";let iC;const ANe=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),TNe=x.forwardRef((t,e)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=t,u=x.useContext(ANe),[h,f]=x.useState(null),m=(r=h==null?void 0:h.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,v]=x.useState({}),p=Gu(e,k=>f(k)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),w=h?g.indexOf(h):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,_=w>=b,S=DNe(k=>{const E=k.target,P=[...u.branches].some(T=>T.contains(E));!_||P||(s==null||s(k),l==null||l(k),k.defaultPrevented||c==null||c())},m),N=PNe(k=>{const E=k.target;[...u.branches].some(T=>T.contains(E))||(o==null||o(k),l==null||l(k),k.defaultPrevented||c==null||c())},m);return NNe(k=>{w===u.layers.size-1&&(a==null||a(k),!k.defaultPrevented&&c&&(k.preventDefault(),c()))},m),x.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(iC=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),oC(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=iC)}},[h,m,n,u]),x.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),oC())},[h,u]),x.useEffect(()=>{const k=()=>v({});return document.addEventListener(wx,k),()=>document.removeEventListener(wx,k)},[]),x.createElement(An.div,Lr({},d,{ref:p,style:{pointerEvents:j?_?"auto":"none":void 0,...t.style},onFocusCapture:cl(t.onFocusCapture,N.onFocusCapture),onBlurCapture:cl(t.onBlurCapture,N.onBlurCapture),onPointerDownCapture:cl(t.onPointerDownCapture,S.onPointerDownCapture)}))});function DNe(t,e=globalThis==null?void 0:globalThis.document){const r=eo(t),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const s=l=>{if(l.target&&!n.current){let d=function(){E4(ENe,r,c,{discrete:!0})};const c={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",a.current),a.current=d,e.addEventListener("click",a.current,{once:!0})):d()}else e.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",a.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function PNe(t,e=globalThis==null?void 0:globalThis.document){const r=eo(t),n=x.useRef(!1);return x.useEffect(()=>{const a=s=>{s.target&&!n.current&&E4(CNe,r,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",a),()=>e.removeEventListener("focusin",a)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function oC(){const t=new CustomEvent(wx);document.dispatchEvent(t)}function E4(t,e,r,{discrete:n}){const a=r.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&a.addEventListener(t,e,{once:!0}),n?kNe(a,s):a.dispatchEvent(s)}const Iv="focusScope.autoFocusOnMount",Lv="focusScope.autoFocusOnUnmount",lC={bubbles:!1,cancelable:!0},MNe=x.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=t,[l,c]=x.useState(null),d=eo(a),u=eo(s),h=x.useRef(null),f=Gu(e,p=>c(p)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let p=function(w){if(m.paused||!l)return;const j=w.target;l.contains(j)?h.current=j:ns(h.current,{select:!0})},g=function(w){if(m.paused||!l)return;const j=w.relatedTarget;j!==null&&(l.contains(j)||ns(h.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&ns(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const b=new MutationObserver(y);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),b.disconnect()}}},[n,l,m.paused]),x.useEffect(()=>{if(l){dC.add(m);const p=document.activeElement;if(!l.contains(p)){const y=new CustomEvent(Iv,lC);l.addEventListener(Iv,d),l.dispatchEvent(y),y.defaultPrevented||(ONe(FNe(C4(l)),{select:!0}),document.activeElement===p&&ns(l))}return()=>{l.removeEventListener(Iv,d),setTimeout(()=>{const y=new CustomEvent(Lv,lC);l.addEventListener(Lv,u),l.dispatchEvent(y),y.defaultPrevented||ns(p??document.body,{select:!0}),l.removeEventListener(Lv,u),dC.remove(m)},0)}}},[l,d,u,m]);const v=x.useCallback(p=>{if(!r&&!n||m.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,y=document.activeElement;if(g&&y){const b=p.currentTarget,[w,j]=RNe(b);w&&j?!p.shiftKey&&y===j?(p.preventDefault(),r&&ns(w,{select:!0})):p.shiftKey&&y===w&&(p.preventDefault(),r&&ns(j,{select:!0})):y===b&&p.preventDefault()}},[r,n,m.paused]);return x.createElement(An.div,Lr({tabIndex:-1},o,{ref:f,onKeyDown:v}))});function ONe(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(ns(n,{select:e}),document.activeElement!==r)return}function RNe(t){const e=C4(t),r=cC(e,t),n=cC(e.reverse(),t);return[r,n]}function C4(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function cC(t,e){for(const r of t)if(!$Ne(r,{upTo:e}))return r}function $Ne(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function INe(t){return t instanceof HTMLInputElement&&"select"in t}function ns(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&INe(t)&&e&&t.select()}}const dC=LNe();function LNe(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=uC(t,e),t.unshift(e)},remove(e){var r;t=uC(t,e),(r=t[0])===null||r===void 0||r.resume()}}}function uC(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function FNe(t){return t.filter(e=>e.tagName!=="A")}const BNe=x.forwardRef((t,e)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...a}=t;return n?VC.createPortal(x.createElement(An.div,Lr({},a,{ref:e})),n):null});function qNe(t,e){return x.useReducer((r,n)=>{const a=e[r][n];return a??r},t)}const gp=t=>{const{present:e,children:r}=t,n=UNe(e),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),s=Gu(n.ref,a.ref);return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:s}):null};gp.displayName="Presence";function UNe(t){const[e,r]=x.useState(),n=x.useRef({}),a=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[l,c]=qNe(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const d=Ph(n.current);s.current=l==="mounted"?d:"none"},[l]),bx(()=>{const d=n.current,u=a.current;if(u!==t){const f=s.current,m=Ph(d);t?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,c]),bx(()=>{if(e){const d=h=>{const m=Ph(n.current).includes(h.animationName);h.target===e&&m&&Ri.flushSync(()=>c("ANIMATION_END"))},u=h=>{h.target===e&&(s.current=Ph(n.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(d=>{d&&(n.current=getComputedStyle(d)),r(d)},[])}}function Ph(t){return(t==null?void 0:t.animationName)||"none"}let Fv=0;function zNe(){x.useEffect(()=>{var t,e;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=r[0])!==null&&t!==void 0?t:hC()),document.body.insertAdjacentElement("beforeend",(e=r[1])!==null&&e!==void 0?e:hC()),Fv++,()=>{Fv===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Fv--}},[])}function hC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var A4=u3(),Bv=function(){},pp=x.forwardRef(function(t,e){var r=x.useRef(null),n=x.useState({onScrollCapture:Bv,onWheelCapture:Bv,onTouchMoveCapture:Bv}),a=n[0],s=n[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,u=t.enabled,h=t.shards,f=t.sideCar,m=t.noIsolation,v=t.inert,p=t.allowPinchZoom,g=t.as,y=g===void 0?"div":g,b=h3(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=f,j=f3([r,e]),_=Mo(Mo({},b),a);return x.createElement(x.Fragment,null,u&&x.createElement(w,{sideCar:A4,removeScrollBar:d,shards:h,noIsolation:m,inert:v,setCallbacks:s,allowPinchZoom:!!p,lockRef:r}),o?x.cloneElement(x.Children.only(l),Mo(Mo({},_),{ref:j})):x.createElement(y,Mo({},_,{className:c,ref:j}),l))});pp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pp.classNames={fullWidth:m3,zeroRight:g3};var _x=!1;if(typeof window<"u")try{var Mh=Object.defineProperty({},"passive",{get:function(){return _x=!0,!0}});window.addEventListener("test",Mh,Mh),window.removeEventListener("test",Mh,Mh)}catch{_x=!1}var Do=_x?{passive:!1}:!1,HNe=function(t){return t.tagName==="TEXTAREA"},T4=function(t,e){var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!HNe(t)&&r[e]==="visible")},WNe=function(t){return T4(t,"overflowY")},KNe=function(t){return T4(t,"overflowX")},fC=function(t,e){var r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=D4(t,r);if(n){var a=P4(t,r),s=a[1],o=a[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},GNe=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},VNe=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},D4=function(t,e){return t==="v"?WNe(e):KNe(e)},P4=function(t,e){return t==="v"?GNe(e):VNe(e)},QNe=function(t,e){return t==="h"&&e==="rtl"?-1:1},JNe=function(t,e,r,n,a){var s=QNe(t,window.getComputedStyle(e).direction),o=s*n,l=r.target,c=e.contains(l),d=!1,u=o>0,h=0,f=0;do{var m=P4(t,l),v=m[0],p=m[1],g=m[2],y=p-g-s*v;(v||y)&&D4(t,l)&&(h+=y,f+=v),l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(u&&(h===0||!a)||!u&&(f===0||!a))&&(d=!0),d},Oh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},mC=function(t){return[t.deltaX,t.deltaY]},gC=function(t){return t&&"current"in t?t.current:t},YNe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},XNe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},ZNe=0,Po=[];function eEe(t){var e=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(ZNe++)[0],s=x.useState(function(){return p3()})[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var p=v3([t.lockRef.current],(t.shards||[]).map(gC),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var l=x.useCallback(function(p,g){if("touches"in p&&p.touches.length===2)return!o.current.allowPinchZoom;var y=Oh(p),b=r.current,w="deltaX"in p?p.deltaX:b[0]-y[0],j="deltaY"in p?p.deltaY:b[1]-y[1],_,S=p.target,N=Math.abs(w)>Math.abs(j)?"h":"v";if("touches"in p&&N==="h"&&S.type==="range")return!1;var k=fC(N,S);if(!k)return!0;if(k?_=N:(_=N==="v"?"h":"v",k=fC(N,S)),!k)return!1;if(!n.current&&"changedTouches"in p&&(w||j)&&(n.current=_),!_)return!0;var E=n.current||_;return JNe(E,g,p,E==="h"?w:j,!0)},[]),c=x.useCallback(function(p){var g=p;if(!(!Po.length||Po[Po.length-1]!==s)){var y="deltaY"in g?mC(g):Oh(g),b=e.current.filter(function(_){return _.name===g.type&&_.target===g.target&&YNe(_.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(gC).filter(Boolean).filter(function(_){return _.contains(g.target)}),j=w.length>0?l(g,w[0]):!o.current.noIsolation;j&&g.cancelable&&g.preventDefault()}}},[]),d=x.useCallback(function(p,g,y,b){var w={name:p,delta:g,target:y,should:b};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(j){return j!==w})},1)},[]),u=x.useCallback(function(p){r.current=Oh(p),n.current=void 0},[]),h=x.useCallback(function(p){d(p.type,mC(p),p.target,l(p,t.lockRef.current))},[]),f=x.useCallback(function(p){d(p.type,Oh(p),p.target,l(p,t.lockRef.current))},[]);x.useEffect(function(){return Po.push(s),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,Do),document.addEventListener("touchmove",c,Do),document.addEventListener("touchstart",u,Do),function(){Po=Po.filter(function(p){return p!==s}),document.removeEventListener("wheel",c,Do),document.removeEventListener("touchmove",c,Do),document.removeEventListener("touchstart",u,Do)}},[]);var m=t.removeScrollBar,v=t.inert;return x.createElement(x.Fragment,null,v?x.createElement(s,{styles:XNe(a)}):null,m?x.createElement(y3,{gapMode:"margin"}):null)}const tEe=b3(A4,eEe);var M4=x.forwardRef(function(t,e){return x.createElement(pp,Mo({},t,{ref:e,sideCar:tEe}))});M4.classNames=pp.classNames;const O4="Dialog",[R4,JAe]=gNe(O4),[rEe,bo]=R4(O4),nEe=t=>{const{__scopeDialog:e,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!0}=t,l=x.useRef(null),c=x.useRef(null),[d=!1,u]=bNe({prop:n,defaultProp:a,onChange:s});return x.createElement(rEe,{scope:e,triggerRef:l,contentRef:c,contentId:$v(),titleId:$v(),descriptionId:$v(),open:d,onOpenChange:u,onOpenToggle:x.useCallback(()=>u(h=>!h),[u]),modal:o},r)},$4="DialogPortal",[aEe,I4]=R4($4,{forceMount:void 0}),sEe=t=>{const{__scopeDialog:e,forceMount:r,children:n,container:a}=t,s=bo($4,e);return x.createElement(aEe,{scope:e,forceMount:r},x.Children.map(n,o=>x.createElement(gp,{present:r||s.open},x.createElement(BNe,{asChild:!0,container:a},o))))},jx="DialogOverlay",iEe=x.forwardRef((t,e)=>{const r=I4(jx,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,s=bo(jx,t.__scopeDialog);return s.modal?x.createElement(gp,{present:n||s.open},x.createElement(oEe,Lr({},a,{ref:e}))):null}),oEe=x.forwardRef((t,e)=>{const{__scopeDialog:r,...n}=t,a=bo(jx,r);return x.createElement(M4,{as:I_,allowPinchZoom:!0,shards:[a.contentRef]},x.createElement(An.div,Lr({"data-state":F4(a.open)},n,{ref:e,style:{pointerEvents:"auto",...n.style}})))}),fu="DialogContent",lEe=x.forwardRef((t,e)=>{const r=I4(fu,t.__scopeDialog),{forceMount:n=r.forceMount,...a}=t,s=bo(fu,t.__scopeDialog);return x.createElement(gp,{present:n||s.open},s.modal?x.createElement(cEe,Lr({},a,{ref:e})):x.createElement(dEe,Lr({},a,{ref:e})))}),cEe=x.forwardRef((t,e)=>{const r=bo(fu,t.__scopeDialog),n=x.useRef(null),a=Gu(e,r.contentRef,n);return x.useEffect(()=>{const s=n.current;if(s)return Mx(s)},[]),x.createElement(L4,Lr({},t,{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cl(t.onCloseAutoFocus,s=>{var o;s.preventDefault(),(o=r.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:cl(t.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&s.preventDefault()}),onFocusOutside:cl(t.onFocusOutside,s=>s.preventDefault())}))}),dEe=x.forwardRef((t,e)=>{const r=bo(fu,t.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return x.createElement(L4,Lr({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var l;n.current||(l=r.triggerRef.current)===null||l===void 0||l.focus(),s.preventDefault()}n.current=!1,a.current=!1},onInteractOutside:s=>{var o,l;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=s.target;((l=r.triggerRef.current)===null||l===void 0?void 0:l.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&a.current&&s.preventDefault()}}))}),L4=x.forwardRef((t,e)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=t,l=bo(fu,r),c=x.useRef(null),d=Gu(e,c);return zNe(),x.createElement(x.Fragment,null,x.createElement(MNe,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s},x.createElement(TNe,Lr({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":F4(l.open)},o,{ref:d,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function F4(t){return t?"open":"closed"}const uEe=nEe,hEe=sEe,fEe=iEe,mEe=lEe;var Yc='[cmdk-group=""]',qv='[cmdk-group-items=""]',gEe='[cmdk-group-heading=""]',L_='[cmdk-item=""]',pC=`${L_}:not([aria-disabled="true"])`,Sx="cmdk-item-select",fi="data-value",pEe=(t,e,r)=>fNe(t,e,r),B4=x.createContext(void 0),Vu=()=>x.useContext(B4),q4=x.createContext(void 0),F_=()=>x.useContext(q4),U4=x.createContext(void 0),z4=x.forwardRef((t,e)=>{let r=Fo(()=>{var O,F;return{search:"",value:(F=(O=t.value)!=null?O:t.defaultValue)!=null?F:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=Fo(()=>new Set),a=Fo(()=>new Map),s=Fo(()=>new Map),o=Fo(()=>new Set),l=H4(t),{label:c,children:d,value:u,onValueChange:h,filter:f,shouldFilter:m,loop:v,disablePointerSelection:p=!1,vimBindings:g=!0,...y}=t,b=x.useId(),w=x.useId(),j=x.useId(),_=x.useRef(null),S=EEe();to(()=>{if(u!==void 0){let O=u.trim();r.current.value=O,N.emit()}},[u]),to(()=>{S(6,A)},[]);let N=x.useMemo(()=>({subscribe:O=>(o.current.add(O),()=>o.current.delete(O)),snapshot:()=>r.current,setState:(O,F,G)=>{var Y,Z,le;if(!Object.is(r.current[O],F)){if(r.current[O]=F,O==="search")D(),P(),S(1,T);else if(O==="value"&&(G||S(5,A),((Y=l.current)==null?void 0:Y.value)!==void 0)){let V=F??"";(le=(Z=l.current).onValueChange)==null||le.call(Z,V);return}N.emit()}},emit:()=>{o.current.forEach(O=>O())}}),[]),k=x.useMemo(()=>({value:(O,F,G)=>{var Y;F!==((Y=s.current.get(O))==null?void 0:Y.value)&&(s.current.set(O,{value:F,keywords:G}),r.current.filtered.items.set(O,E(F,G)),S(2,()=>{P(),N.emit()}))},item:(O,F)=>(n.current.add(O),F&&(a.current.has(F)?a.current.get(F).add(O):a.current.set(F,new Set([O]))),S(3,()=>{D(),P(),r.current.value||T(),N.emit()}),()=>{s.current.delete(O),n.current.delete(O),r.current.filtered.items.delete(O);let G=C();S(4,()=>{D(),(G==null?void 0:G.getAttribute("id"))===O&&T(),N.emit()})}),group:O=>(a.current.has(O)||a.current.set(O,new Set),()=>{s.current.delete(O),a.current.delete(O)}),filter:()=>l.current.shouldFilter,label:c||t["aria-label"],disablePointerSelection:p,listId:b,inputId:j,labelId:w,listInnerRef:_}),[]);function E(O,F){var G,Y;let Z=(Y=(G=l.current)==null?void 0:G.filter)!=null?Y:pEe;return O?Z(O,r.current.search,F):0}function P(){if(!r.current.search||l.current.shouldFilter===!1)return;let O=r.current.filtered.items,F=[];r.current.filtered.groups.forEach(Y=>{let Z=a.current.get(Y),le=0;Z.forEach(V=>{let Q=O.get(V);le=Math.max(Q,le)}),F.push([Y,le])});let G=_.current;R().sort((Y,Z)=>{var le,V;let Q=Y.getAttribute("id"),ce=Z.getAttribute("id");return((le=O.get(ce))!=null?le:0)-((V=O.get(Q))!=null?V:0)}).forEach(Y=>{let Z=Y.closest(qv);Z?Z.appendChild(Y.parentElement===Z?Y:Y.closest(`${qv} > *`)):G.appendChild(Y.parentElement===G?Y:Y.closest(`${qv} > *`))}),F.sort((Y,Z)=>Z[1]-Y[1]).forEach(Y=>{let Z=_.current.querySelector(`${Yc}[${fi}="${encodeURIComponent(Y[0])}"]`);Z==null||Z.parentElement.appendChild(Z)})}function T(){let O=R().find(G=>G.getAttribute("aria-disabled")!=="true"),F=O==null?void 0:O.getAttribute(fi);N.setState("value",F||void 0)}function D(){var O,F,G,Y;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let Z=0;for(let le of n.current){let V=(F=(O=s.current.get(le))==null?void 0:O.value)!=null?F:"",Q=(Y=(G=s.current.get(le))==null?void 0:G.keywords)!=null?Y:[],ce=E(V,Q);r.current.filtered.items.set(le,ce),ce>0&&Z++}for(let[le,V]of a.current)for(let Q of V)if(r.current.filtered.items.get(Q)>0){r.current.filtered.groups.add(le);break}r.current.filtered.count=Z}function A(){var O,F,G;let Y=C();Y&&(((O=Y.parentElement)==null?void 0:O.firstChild)===Y&&((G=(F=Y.closest(Yc))==null?void 0:F.querySelector(gEe))==null||G.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function C(){var O;return(O=_.current)==null?void 0:O.querySelector(`${L_}[aria-selected="true"]`)}function R(){var O;return Array.from((O=_.current)==null?void 0:O.querySelectorAll(pC))}function L(O){let F=R()[O];F&&N.setState("value",F.getAttribute(fi))}function M(O){var F;let G=C(),Y=R(),Z=Y.findIndex(V=>V===G),le=Y[Z+O];(F=l.current)!=null&&F.loop&&(le=Z+O<0?Y[Y.length-1]:Z+O===Y.length?Y[0]:Y[Z+O]),le&&N.setState("value",le.getAttribute(fi))}function I(O){let F=C(),G=F==null?void 0:F.closest(Yc),Y;for(;G&&!Y;)G=O>0?kEe(G,Yc):NEe(G,Yc),Y=G==null?void 0:G.querySelector(pC);Y?N.setState("value",Y.getAttribute(fi)):M(O)}let B=()=>L(R().length-1),H=O=>{O.preventDefault(),O.metaKey?B():O.altKey?I(1):M(1)},q=O=>{O.preventDefault(),O.metaKey?L(0):O.altKey?I(-1):M(-1)};return x.createElement(An.div,{ref:e,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:O=>{var F;if((F=y.onKeyDown)==null||F.call(y,O),!O.defaultPrevented)switch(O.key){case"n":case"j":{g&&O.ctrlKey&&H(O);break}case"ArrowDown":{H(O);break}case"p":case"k":{g&&O.ctrlKey&&q(O);break}case"ArrowUp":{q(O);break}case"Home":{O.preventDefault(),L(0);break}case"End":{O.preventDefault(),B();break}case"Enter":if(!O.nativeEvent.isComposing&&O.keyCode!==229){O.preventDefault();let G=C();if(G){let Y=new Event(Sx);G.dispatchEvent(Y)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:AEe},c),vp(t,O=>x.createElement(q4.Provider,{value:N},x.createElement(B4.Provider,{value:k},O))))}),vEe=x.forwardRef((t,e)=>{var r,n;let a=x.useId(),s=x.useRef(null),o=x.useContext(U4),l=Vu(),c=H4(t),d=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;to(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=W4(a,s,[t.value,t.children,s],t.keywords),h=F_(),f=ro(S=>S.value&&S.value===u.current),m=ro(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(a)>0:!0);x.useEffect(()=>{let S=s.current;if(!(!S||t.disabled))return S.addEventListener(Sx,v),()=>S.removeEventListener(Sx,v)},[m,t.onSelect,t.disabled]);function v(){var S,N;p(),(N=(S=c.current).onSelect)==null||N.call(S,u.current)}function p(){h.setState("value",u.current,!0)}if(!m)return null;let{disabled:g,value:y,onSelect:b,forceMount:w,keywords:j,..._}=t;return x.createElement(An.div,{ref:mu([s,e]),..._,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||l.disablePointerSelection?void 0:p,onClick:g?void 0:v},t.children)}),yEe=x.forwardRef((t,e)=>{let{heading:r,children:n,forceMount:a,...s}=t,o=x.useId(),l=x.useRef(null),c=x.useRef(null),d=x.useId(),u=Vu(),h=ro(m=>a||u.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);to(()=>u.group(o),[]),W4(o,l,[t.value,t.heading,c]);let f=x.useMemo(()=>({id:o,forceMount:a}),[a]);return x.createElement(An.div,{ref:mu([l,e]),...s,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},r&&x.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),vp(t,m=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},x.createElement(U4.Provider,{value:f},m))))}),bEe=x.forwardRef((t,e)=>{let{alwaysRender:r,...n}=t,a=x.useRef(null),s=ro(o=>!o.search);return!r&&!s?null:x.createElement(An.div,{ref:mu([a,e]),...n,"cmdk-separator":"",role:"separator"})}),xEe=x.forwardRef((t,e)=>{let{onValueChange:r,...n}=t,a=t.value!=null,s=F_(),o=ro(u=>u.search),l=ro(u=>u.value),c=Vu(),d=x.useMemo(()=>{var u;let h=(u=c.listInnerRef.current)==null?void 0:u.querySelector(`${L_}[${fi}="${encodeURIComponent(l)}"]`);return h==null?void 0:h.getAttribute("id")},[]);return x.useEffect(()=>{t.value!=null&&s.setState("search",t.value)},[t.value]),x.createElement(An.input,{ref:e,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:a?t.value:o,onChange:u=>{a||s.setState("search",u.target.value),r==null||r(u.target.value)}})}),wEe=x.forwardRef((t,e)=>{let{children:r,label:n="Suggestions",...a}=t,s=x.useRef(null),o=x.useRef(null),l=Vu();return x.useEffect(()=>{if(o.current&&s.current){let c=o.current,d=s.current,u,h=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=c.offsetHeight;d.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(u),h.unobserve(c)}}},[]),x.createElement(An.div,{ref:mu([s,e]),...a,"cmdk-list":"",role:"listbox","aria-label":n,id:l.listId},vp(t,c=>x.createElement("div",{ref:mu([o,l.listInnerRef]),"cmdk-list-sizer":""},c)))}),_Ee=x.forwardRef((t,e)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:s,container:o,...l}=t;return x.createElement(uEe,{open:r,onOpenChange:n},x.createElement(hEe,{container:o},x.createElement(fEe,{"cmdk-overlay":"",className:a}),x.createElement(mEe,{"aria-label":t.label,"cmdk-dialog":"",className:s},x.createElement(z4,{ref:e,...l}))))}),jEe=x.forwardRef((t,e)=>ro(r=>r.filtered.count===0)?x.createElement(An.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),SEe=x.forwardRef((t,e)=>{let{progress:r,children:n,label:a="Loading...",...s}=t;return x.createElement(An.div,{ref:e,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},vp(t,o=>x.createElement("div",{"aria-hidden":!0},o)))}),Zr=Object.assign(z4,{List:wEe,Item:vEe,Input:xEe,Group:yEe,Separator:bEe,Dialog:_Ee,Empty:jEe,Loading:SEe});function kEe(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return r;r=r.nextElementSibling}}function NEe(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return r;r=r.previousElementSibling}}function H4(t){let e=x.useRef(t);return to(()=>{e.current=t}),e}var to=typeof window>"u"?x.useEffect:x.useLayoutEffect;function Fo(t){let e=x.useRef();return e.current===void 0&&(e.current=t()),e}function mu(t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}function ro(t){let e=F_(),r=()=>t(e.snapshot());return x.useSyncExternalStore(e.subscribe,r,r)}function W4(t,e,r,n=[]){let a=x.useRef(),s=Vu();return to(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=n.map(d=>d.trim());s.value(t,l,c),(o=e.current)==null||o.setAttribute(fi,l),a.current=l}),a}var EEe=()=>{let[t,e]=x.useState(),r=Fo(()=>new Map);return to(()=>{r.current.forEach(n=>n()),r.current=new Map},[t]),(n,a)=>{r.current.set(n,a),e({})}};function CEe(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function vp({asChild:t,children:e},r){return t&&x.isValidElement(e)?x.cloneElement(CEe(e),{ref:e.ref},r(e.props.children)):r(e)}var AEe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const K4=x.forwardRef(({className:t,...e},r)=>i.jsx(Zr,{ref:r,className:se("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...e}));K4.displayName=Zr.displayName;const G4=x.forwardRef(({className:t,...e},r)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(Rm,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(Zr.Input,{ref:r,className:se("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...e})]}));G4.displayName=Zr.Input.displayName;const V4=x.forwardRef(({className:t,...e},r)=>i.jsx(Zr.List,{ref:r,className:se("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e}));V4.displayName=Zr.List.displayName;const Q4=x.forwardRef((t,e)=>i.jsx(Zr.Empty,{ref:e,className:"py-6 text-center text-sm",...t}));Q4.displayName=Zr.Empty.displayName;const J4=x.forwardRef(({className:t,...e},r)=>i.jsx(Zr.Group,{ref:r,className:se("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e}));J4.displayName=Zr.Group.displayName;const TEe=x.forwardRef(({className:t,...e},r)=>i.jsx(Zr.Separator,{ref:r,className:se("-mx-1 h-px bg-border",t),...e}));TEe.displayName=Zr.Separator.displayName;const Y4=x.forwardRef(({className:t,...e},r)=>i.jsx(Zr.Item,{ref:r,className:se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...e}));Y4.displayName=Zr.Item.displayName;const X4=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{var d;const{data:n}=await W.from("profiles").select("school_id").eq("id",(d=(await W.auth.getUser()).data.user)==null?void 0:d.id).single(),{data:a}=await W.from("academic_years").select("id").eq("school_id",n==null?void 0:n.school_id).eq("is_active",!0).single(),s=r.time_session_id&&typeof r.time_session_id=="string"&&!r.time_session_id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)?null:r.time_session_id,o={subject_id:r.subject_id,teacher_id:r.teacher_id||null,class_id:r.class_id,time_session_id:s,day_of_week:r.day_of_week,start_time:r.start_time,end_time:r.end_time||r.start_time,academic_week:r.academic_week,schedule_date:r.schedule_date,room:r.room||"",notes:r.notes||"",tujuan_pembelajaran:r.tujuan_pembelajaran||null,materi_pembelajaran:r.materi_pembelajaran||null,school_id:n==null?void 0:n.school_id,academic_year_id:a==null?void 0:a.id};console.log(" Creating schedule with data:",o),console.log(" Profile data:",n),console.log(" Active year data:",a);const{data:l,error:c}=await W.from("class_schedules").insert(o).select().single();if(c)throw console.error(" Schedule creation error:",c),console.error(" Error details:",{message:c.message,details:c.details,hint:c.hint,code:c.code}),c;return l},onSuccess:r=>{console.log(" Schedule created successfully:",r),console.log(" Invalidating all schedule-related queries after CREATE..."),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-simple"]}),t.invalidateQueries({queryKey:["schedules-paginated"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["schedules-week"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),console.log(" Force refetching critical queries after CREATE..."),t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-simple"]}),t.refetchQueries({queryKey:["schedules-complete"]}),t.refetchQueries({queryKey:["jp-progress-simple"]}),e({title:"Berhasil",description:"Jadwal berhasil ditambahkan"})},onError:r=>{console.error("Full error:",r),e({title:"Gagal",description:"Gagal menambahkan jadwal: "+r.message,variant:"destructive"})}})},Z4=()=>{const t=Ne();return Se({mutationFn:async({id:e,...r})=>{console.log(" Updating schedule:",e,r);const{data:n,error:a}=await W.from("class_schedules").update(r).eq("id",e).select().single();if(a)throw console.error(" Error updating schedule:",a),a;return console.log(" Schedule updated successfully:",n),n},onSuccess:e=>{console.log(" Schedule update mutation successful:",e),console.log(" Invalidating all schedule-related queries after UPDATE..."),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-simple"]}),t.invalidateQueries({queryKey:["schedules-paginated"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["schedules-week"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),console.log(" Force refetching critical queries after UPDATE..."),t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-simple"]}),t.refetchQueries({queryKey:["schedules-complete"]}),t.refetchQueries({queryKey:["jp-progress-simple"]})},onError:e=>{console.error(" Schedule update mutation failed:",e)}})},DEe=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{var d,u,h,f,m,v;console.log(" Deleting schedule:",r);const{data:n,error:a}=await W.auth.getSession();console.log(" Current user session:",{user:(u=(d=n==null?void 0:n.session)==null?void 0:d.user)==null?void 0:u.id,email:(f=(h=n==null?void 0:n.session)==null?void 0:h.user)==null?void 0:f.email,role:(v=(m=n==null?void 0:n.session)==null?void 0:m.user)==null?void 0:v.role,sessionError:a});const{data:s,error:o}=await W.from("class_schedules").select("id, class_id, subject_id, academic_week, day_of_week").eq("id",r).single();if(o)throw console.error(" Error checking schedule existence:",o),new Error(`Schedule not found: ${o.message}`);if(!s)throw console.error(" Schedule not found:",r),new Error("Schedule not found");console.log(" Schedule to delete:",s);const{data:l,error:c}=await W.from("class_schedules").delete().eq("id",r).select();if(c)if(console.error(" Error deleting schedule:",{error:c,code:c.code,message:c.message,details:c.details,hint:c.hint}),c.code==="42501"){console.log(" Trying alternative delete approach...");const{data:p,error:g}=await W.rpc("delete_schedule_by_id",{schedule_id:r});if(g)throw console.error(" Alternative delete also failed:",g),new Error("Tidak memiliki izin untuk menghapus jadwal ini. Hubungi administrator.");return console.log(" Alternative delete successful:",p),p}else throw c.code==="23503"?new Error("Jadwal tidak dapat dihapus karena masih terkait dengan data lain."):new Error(`Gagal menghapus jadwal: ${c.message}`);return console.log(" Schedule deleted successfully:",l),l},onSuccess:()=>{console.log(" Schedule delete mutation successful"),console.log(" Invalidating all schedule-related queries..."),t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-simple"]}),t.invalidateQueries({queryKey:["schedules-paginated"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["schedules-week"]}),t.invalidateQueries({queryKey:["schedule-subjects"]}),t.invalidateQueries({queryKey:["schedule-class-subjects"]}),t.invalidateQueries({queryKey:["jp-progress"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]}),console.log(" Force refetching critical queries..."),t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-simple"]}),t.refetchQueries({queryKey:["schedules-complete"]}),t.refetchQueries({queryKey:["jp-progress-simple"]}),e({title:"Berhasil",description:"Jadwal berhasil dihapus"})},onError:r=>{console.error(" Schedule delete mutation failed:",r),e({title:"Gagal",description:"Gagal menghapus jadwal: "+r.message,variant:"destructive"})}})};var B_="Radio",[PEe,e5]=Kn(B_),[MEe,OEe]=PEe(B_),t5=x.forwardRef((t,e)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:s,disabled:o,value:l="on",onCheck:c,form:d,...u}=t,[h,f]=x.useState(null),m=cr(e,g=>f(g)),v=x.useRef(!1),p=h?d||!!h.closest("form"):!0;return i.jsxs(MEe,{scope:r,checked:a,disabled:o,children:[i.jsx(it.button,{type:"button",role:"radio","aria-checked":a,"data-state":a5(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:je(t.onClick,g=>{a||c==null||c(),p&&(v.current=g.isPropagationStopped(),v.current||g.stopPropagation())})}),p&&i.jsx(REe,{control:h,bubbles:!v.current,name:n,value:l,checked:a,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});t5.displayName=B_;var r5="RadioIndicator",n5=x.forwardRef((t,e)=>{const{__scopeRadio:r,forceMount:n,...a}=t,s=OEe(r5,r);return i.jsx(Nn,{present:n||s.checked,children:i.jsx(it.span,{"data-state":a5(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:e})})});n5.displayName=r5;var REe=t=>{const{control:e,checked:r,bubbles:n=!0,...a}=t,s=x.useRef(null),o=WC(r),l=KC(e);return x.useEffect(()=>{const c=s.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&h){const f=new Event("click",{bubbles:n});h.call(c,r),c.dispatchEvent(f)}},[o,r,n]),i.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function a5(t){return t?"checked":"unchecked"}var $Ee=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],q_="RadioGroup",[IEe,YAe]=Kn(q_,[gc,e5]),s5=gc(),i5=e5(),[LEe,FEe]=IEe(q_),o5=x.forwardRef((t,e)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:s,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...f}=t,m=s5(r),v=Px(d),[p,g]=Fs({prop:s,defaultProp:a,onChange:h});return i.jsx(LEe,{scope:r,name:n,required:o,disabled:l,value:p,onValueChange:g,children:i.jsx(m0,{asChild:!0,...m,orientation:c,dir:v,loop:u,children:i.jsx(it.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:v,...f,ref:e})})})});o5.displayName=q_;var l5="RadioGroupItem",c5=x.forwardRef((t,e)=>{const{__scopeRadioGroup:r,disabled:n,...a}=t,s=FEe(l5,r),o=s.disabled||n,l=s5(r),c=i5(r),d=x.useRef(null),u=cr(e,d),h=s.value===a.value,f=x.useRef(!1);return x.useEffect(()=>{const m=p=>{$Ee.includes(p.key)&&(f.current=!0)},v=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",v)}},[]),i.jsx(g0,{asChild:!0,...l,focusable:!o,active:h,children:i.jsx(t5,{disabled:o,required:s.required,checked:h,...c,...a,name:s.name,ref:u,onCheck:()=>s.onValueChange(a.value),onKeyDown:je(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:je(a.onFocus,()=>{var m;f.current&&((m=d.current)==null||m.click())})})})});c5.displayName=l5;var BEe="RadioGroupIndicator",d5=x.forwardRef((t,e)=>{const{__scopeRadioGroup:r,...n}=t,a=i5(r);return i.jsx(n5,{...a,...n,ref:e})});d5.displayName=BEe;var u5=o5,h5=c5,qEe=d5;const f5=x.forwardRef(({className:t,...e},r)=>i.jsx(u5,{className:se("grid gap-2",t),...e,ref:r}));f5.displayName=u5.displayName;const Qh=x.forwardRef(({className:t,...e},r)=>i.jsx(h5,{ref:r,className:se("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:i.jsx(qEe,{className:"flex items-center justify-center",children:i.jsx(xA,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Qh.displayName=h5.displayName;const Uv=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16","#F97316","#6366F1"],UEe=({isOpen:t,onClose:e,selectedCategoryId:r,selectedClassId:n})=>{const a=Ne(),{data:s=[]}=Yt(),{data:o=[]}=Ar(),l=Iw(!1),c=tR(!1),[d,u]=x.useState({name:"",code:"",color:Uv[0],total_hours_per_year:0,standard_duration:45,schedule_category_id:r||"",selected_classes:n?[n]:[]}),[h,f]=x.useState(en.SINGLE);x.useEffect(()=>{t&&(u({name:"",code:"",color:Uv[0],total_hours_per_year:0,standard_duration:45,schedule_category_id:r||"",selected_classes:n?[n]:[]}),f(en.SINGLE))},[t,r,n]);const m=async()=>{var g;if(console.log("=== NEW MODAL SUBMIT PROCESS ==="),console.log("Form data:",d),!d.name.trim()){nt({title:"Error",description:"Nama pelajaran harus diisi",variant:"destructive"});return}if(d.name.trim().length<2){nt({title:"Error",description:"Nama pelajaran minimal 2 karakter",variant:"destructive"});return}if(!d.schedule_category_id){nt({title:"Error",description:"Kategori harus dipilih",variant:"destructive"});return}let p=[];if(h===en.ALL?p=s.map(y=>y.id):h===en.MULTIPLE?p=d.selected_classes:p=d.selected_classes.slice(0,1),p.length===0){nt({title:"Error",description:"Minimal pilih satu kelas",variant:"destructive"});return}console.log("Target classes:",p);try{console.log("=== CREATING SCHEDULE SUBJECT ===");const y={name:d.name.trim(),code:((g=d.code)==null?void 0:g.trim())||void 0,color:d.color,total_hours_per_year:d.total_hours_per_year,standard_duration:d.standard_duration,schedule_category_id:d.schedule_category_id,selected_classes:p};console.log("Subject data:",y);const b=await l.mutateAsync(y);console.log("Schedule subject created:",b),console.log("=== CREATING CLASS RELATIONS ===");for(let w=0;w<p.length;w++){const _={class_id:p[w],schedule_subject_id:b.id,hours_per_week:Math.round(d.total_hours_per_year/36)||0,hours_per_year:d.total_hours_per_year};console.log(`Creating class relation ${w+1}/${p.length}:`,_),await c.mutateAsync(_)}console.log("=== REFRESHING QUERIES ==="),await a.invalidateQueries({queryKey:["schedule-subjects"]}),await a.invalidateQueries({queryKey:["schedule-class-subjects"]}),await a.invalidateQueries({queryKey:["schedule-subjects-by-category"]}),nt({title:"Berhasil",description:`Mata pelajaran berhasil ditambahkan ke ${p.length} kelas`}),console.log("=== NEW MODAL SUBMIT COMPLETED ==="),e()}catch(y){console.error("=== ERROR IN NEW MODAL SUBMIT ==="),console.error("Error details:",y),nt({title:"Error",description:`Gagal menambahkan mata pelajaran: ${(y==null?void 0:y.message)||"Unknown error"}`,variant:"destructive"})}},v=(p,g)=>{u(g?y=>({...y,selected_classes:[...y.selected_classes,p]}):y=>({...y,selected_classes:y.selected_classes.filter(b=>b!==p)}))};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-md max-h-[90vh] overflow-y-auto bg-gray-900 border-gray-700",children:[i.jsx(wt,{children:i.jsx(_t,{className:"text-white",children:"+ Buat Pelajaran Baru"})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"name",className:"text-white",children:"Nama Pelajaran"}),i.jsx(me,{id:"name",value:d.name,onChange:p=>u(g=>({...g,name:p.target.value})),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Contoh: Fisika"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"code",className:"text-white",children:"Kode (Opsional)"}),i.jsx(me,{id:"code",value:d.code,onChange:p=>u(g=>({...g,code:p.target.value})),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Contoh: FIS (kosongkan untuk auto-generate)"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Kategori"}),i.jsxs(Re,{value:d.schedule_category_id,onValueChange:p=>u(g=>({...g,schedule_category_id:p})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kategori"})}),i.jsx(Pe,{className:"bg-gray-800 border-gray-700",children:o.map(p=>i.jsx(he,{value:p.id,className:"text-white hover:bg-gray-700",children:p.name},p.id))})]})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Warna"}),i.jsx("div",{className:"grid grid-cols-10 gap-2 mt-2",children:Uv.map(p=>i.jsx("button",{type:"button",className:`w-8 h-8 rounded-full border-2 transition-all ${d.color===p?"border-white scale-110":"border-gray-600"}`,style:{backgroundColor:p},onClick:()=>u(g=>({...g,color:p}))},p))})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"hours",className:"text-white",children:"JP/Tahun"}),i.jsx(me,{id:"hours",type:"number",value:d.total_hours_per_year,onChange:p=>u(g=>({...g,total_hours_per_year:parseInt(p.target.value)||0})),className:"bg-gray-800 border-gray-600 text-white",placeholder:"144",min:"0"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Mode Pemilihan Kelas"}),i.jsxs(f5,{value:h,onValueChange:p=>{f(p),u(g=>({...g,selected_classes:p===en.ALL?s.map(y=>y.id):[]}))},className:"mt-2 space-y-2",children:[i.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg border transition-all ${h===en.SINGLE?"border-blue-400 bg-blue-500/20 shadow-md":"border-gray-500 bg-gray-700/50 hover:bg-gray-700/70"}`,children:[i.jsx(Qh,{value:en.SINGLE,id:"single",className:"mt-1 border-white data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ne,{htmlFor:"single",className:"text-white font-medium cursor-pointer",children:"Satu Kelas"}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Pelajaran hanya akan ditambahkan ke satu kelas yang dipilih"})]})]}),i.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg border transition-all ${h===en.MULTIPLE?"border-blue-400 bg-blue-500/20 shadow-md":"border-gray-500 bg-gray-700/50 hover:bg-gray-700/70"}`,children:[i.jsx(Qh,{value:en.MULTIPLE,id:"multiple",className:"mt-1 border-white data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ne,{htmlFor:"multiple",className:"text-white font-medium cursor-pointer",children:"Beberapa Kelas"}),i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:"Pilih beberapa kelas tertentu untuk ditambahkan pelajaran"})]})]}),i.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg border transition-all ${h===en.ALL?"border-blue-400 bg-blue-500/20 shadow-md":"border-gray-500 bg-gray-700/50 hover:bg-gray-700/70"}`,children:[i.jsx(Qh,{value:en.ALL,id:"all",className:"mt-1 border-white data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ne,{htmlFor:"all",className:"text-white font-medium cursor-pointer",children:"Semua Kelas"}),i.jsxs("p",{className:"text-sm text-gray-300 mt-1",children:["Pelajaran akan ditambahkan ke semua ",s.length," kelas sekaligus"]})]})]})]})]}),h!==en.ALL&&i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Pilih Kelas"}),i.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-4 border border-gray-500 mt-2",children:[i.jsx("p",{className:"text-sm text-gray-200 mb-3",children:"Pilih kelas untuk pelajaran ini"}),i.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-32 overflow-y-auto",children:s.map(p=>i.jsxs("div",{className:`flex items-center space-x-3 p-2 rounded border transition-all ${d.selected_classes.includes(p.id)?"bg-blue-500/20 border-blue-400":"bg-gray-600/30 border-gray-500 hover:bg-gray-600/50"}`,children:[i.jsx(kr,{id:p.id,checked:d.selected_classes.includes(p.id),onCheckedChange:g=>v(p.id,g),className:"border-white data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-500"}),i.jsxs(ne,{htmlFor:p.id,className:"text-white text-sm cursor-pointer flex-1",children:[p.name," (",p.level," ",p.grade,")"]})]},p.id))})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(K,{variant:"outline",onClick:e,children:"Batal"}),i.jsx(K,{onClick:m,disabled:l.isPending||c.isPending,className:"bg-lime-500 hover:bg-lime-600",children:l.isPending||c.isPending?"Menyimpan...":"Simpan"})]})]})]})})},zEe=({isOpen:t,onClose:e,selectedTimeSlot:r,selectedDate:n,selectedClassId:a,onScheduleCreated:s})=>{var _,S,N;const[o,l]=x.useState({subject_id:"",teacher_id:"no-teacher",class_id:"",start_time:"",end_time:"",room:"",notes:"",tujuan_pembelajaran:"",materi_pembelajaran:""}),[c,d]=x.useState(!1),[u,h]=x.useState(""),[f,m]=x.useState(!1),{data:v=[]}=mp(a),{data:p}=Qg(),{data:g}=Yt(),y=$.useMemo(()=>{const k=v.flatMap(E=>E.subjects.map(P=>({id:P.id,name:P.name,code:P.code,category:E.name})));return console.log(" AddScheduleModal - Schedule subjects only:",{fromCategories:k.length,categories:v.length,subjects:k.map(E=>({name:E.name,category:E.category}))}),k},[v]),b=X4(),{toast:w}=Ce();x.useEffect(()=>{var k;if(t){const E={subject_id:"",teacher_id:"no-teacher",class_id:a||"",start_time:"",end_time:"",room:"",notes:"",tujuan_pembelajaran:"",materi_pembelajaran:""};if(r!=null&&r.subject&&(E.subject_id=r.subject.id),r){if(r.start_time&&r.end_time)E.start_time=r.start_time,E.end_time=r.end_time;else if((k=r.timeSlot)!=null&&k.time){const[P,T]=r.timeSlot.time.split(" - ");E.start_time=P,E.end_time=T}else if(r.time){E.start_time=r.time;const P=new Date(`2000-01-01 ${r.time}`),T=new Date(P.getTime()+60*60*1e3);E.end_time=T.toTimeString().slice(0,5)}}l(E),console.log(" Auto-populated form data:",{selectedClassId:a,selectedTimeSlot:r,formData:E})}},[t,r,a]);const j=async k=>{var E,P,T,D,A;if(k.preventDefault(),!(!r||!o.subject_id||!o.class_id)){if(o.start_time&&o.end_time&&o.start_time>=o.end_time){w({title:"Validasi Gagal",description:"Waktu mulai harus lebih awal dari waktu selesai",variant:"destructive"});return}try{const C={...o,teacher_id:o.teacher_id===""||o.teacher_id==="no-teacher"?null:o.teacher_id,time_session_id:((E=r.timeSlot)==null?void 0:E.id)||null,day_of_week:r.dayIndex,start_time:o.start_time||((T=(P=r.timeSlot)==null?void 0:P.time)==null?void 0:T.split(" - ")[0])||null,end_time:o.end_time||((A=(D=r.timeSlot)==null?void 0:D.time)==null?void 0:A.split(" - ")[1])||null,academic_week:r.academicWeek,schedule_date:r.date?r.date.toISOString().split("T")[0]:null};console.log(" Creating schedule with data:",C),await b.mutateAsync(C),console.log(" Schedule created successfully"),w({title:"Berhasil",description:"Jadwal berhasil ditambahkan"}),s&&s(),e(),l({subject_id:"",teacher_id:"no-teacher",class_id:"",start_time:"",end_time:"",room:"",notes:"",tujuan_pembelajaran:"",materi_pembelajaran:""})}catch(C){console.error("Error creating schedule:",C),w({title:"Gagal",description:"Gagal menambahkan jadwal. Silakan coba lagi.",variant:"destructive"})}}};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-gray-900 border-gray-700",children:[i.jsx(wt,{children:i.jsx(_t,{className:"text-white",children:"Tambah Jadwal Pelajaran"})}),i.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r&&i.jsx("div",{className:"p-3 bg-gray-700/50 rounded-lg border border-gray-500",children:i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-200",children:[i.jsx(Gt,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-medium",children:r.day}),r.timeSlot&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-gray-400",children:""}),i.jsx("span",{children:r.timeSlot.time})]}),i.jsx("span",{className:"text-gray-400",children:""}),i.jsxs("span",{children:["Minggu ",r.academicWeek]})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(ne,{className:"text-white",children:"Mata Pelajaran"}),i.jsxs(K,{type:"button",variant:"outline",size:"sm",onClick:()=>m(!0),className:"text-xs bg-gray-700 border-gray-600 text-white hover:bg-gray-600",children:[i.jsx(ct,{className:"h-3 w-3 mr-1"}),"Buat Baru"]})]}),y.length===0?i.jsxs("div",{className:"p-4 bg-gray-700/50 rounded-lg border border-gray-500 text-center",children:[i.jsx(nL,{className:"h-8 w-8 text-yellow-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:"Belum ada mata pelajaran tersedia"}),i.jsxs(K,{type:"button",onClick:()=>m(!0),className:"bg-lime-500 hover:bg-lime-600 text-white",size:"sm",children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Buat Mata Pelajaran Pertama"]})]}):i.jsxs(Yb,{open:c,onOpenChange:d,children:[i.jsx(Xb,{asChild:!0,children:i.jsxs(K,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between bg-gray-800 border-gray-600 text-white hover:bg-gray-700",children:[o.subject_id?(_=y.find(k=>k.id===o.subject_id))==null?void 0:_.name:"Ketik untuk mencari mata pelajaran...",i.jsx(rL,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),i.jsx(om,{className:"w-full p-0 bg-gray-800 border-gray-700",children:i.jsxs(K4,{className:"bg-gray-800",children:[i.jsx(G4,{placeholder:"Ketik nama mata pelajaran...",className:"text-white",value:u,onValueChange:h}),i.jsxs(V4,{children:[i.jsx(Q4,{className:"text-gray-400 p-4 text-center",children:i.jsxs("div",{children:[i.jsx("p",{className:"mb-2",children:"Mata pelajaran tidak ditemukan."}),i.jsxs(K,{type:"button",onClick:()=>{d(!1),m(!0)},className:"bg-lime-500 hover:bg-lime-600 text-white",size:"sm",children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Buat Mata Pelajaran Baru"]})]})}),i.jsx(J4,{children:y.filter(k=>k.name.toLowerCase().includes(u.toLowerCase())||k.code&&k.code.toLowerCase().includes(u.toLowerCase())).map(k=>i.jsxs(Y4,{value:k.name,onSelect:()=>{l(E=>({...E,subject_id:k.id})),d(!1),h("")},className:"text-white hover:bg-gray-700",children:[i.jsx(Pm,{className:se("mr-2 h-4 w-4",o.subject_id===k.id?"opacity-100":"opacity-0")}),i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsxs("span",{children:[k.name," ",k.code&&`(${k.code})`]}),i.jsx("span",{className:"text-xs text-gray-400 ml-2",children:k.category})]})]},k.id))})]})]})})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"teacher",className:"text-white",children:"Guru Pengajar"}),i.jsxs(Re,{value:o.teacher_id,onValueChange:k=>l(E=>({...E,teacher_id:k})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih guru"})}),i.jsxs(Pe,{className:"bg-gray-800 border-gray-700",children:[i.jsx(he,{value:"no-teacher",className:"text-gray-400 hover:bg-gray-700",children:"Tidak ada guru"}),p==null?void 0:p.map(k=>i.jsx(he,{value:k.id,className:"text-white hover:bg-gray-700",children:k.full_name},k.id))]})]})]}),a?i.jsxs("div",{children:[i.jsx(ne,{className:"text-white",children:"Kelas"}),i.jsxs("div",{className:"bg-gray-800 border border-gray-600 rounded-md px-3 py-2 text-white",children:[(S=g==null?void 0:g.find(k=>k.id===a))==null?void 0:S.name," - ",(N=g==null?void 0:g.find(k=>k.id===a))==null?void 0:N.level]})]}):i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"class",className:"text-white",children:"Kelas"}),i.jsxs(Re,{value:o.class_id,onValueChange:k=>l(E=>({...E,class_id:k})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas"})}),i.jsx(Pe,{className:"bg-gray-800 border-gray-700",children:g==null?void 0:g.map(k=>i.jsxs(he,{value:k.id,className:"text-white hover:bg-gray-700",children:[k.name," - ",k.level]},k.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"start_time",className:"text-white",children:"Waktu Mulai"}),i.jsx(me,{id:"start_time",type:"time",value:o.start_time,onChange:k=>l(E=>({...E,start_time:k.target.value})),className:"bg-gray-800 border-gray-600 text-white",placeholder:"HH:MM"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"end_time",className:"text-white",children:"Waktu Selesai"}),i.jsx(me,{id:"end_time",type:"time",value:o.end_time,onChange:k=>l(E=>({...E,end_time:k.target.value})),className:"bg-gray-800 border-gray-600 text-white",placeholder:"HH:MM"})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"room",className:"text-white",children:"Ruangan"}),i.jsx(me,{id:"room",value:o.room,onChange:k=>l(E=>({...E,room:k.target.value})),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Masukkan nama ruangan"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"notes",className:"text-white",children:"Catatan Guru"}),i.jsx(qn,{id:"notes",value:o.notes,onChange:k=>l(E=>({...E,notes:k.target.value})),className:"bg-gray-800 border-gray-600 text-white resize-none",placeholder:"Tambahkan catatan khusus",rows:4})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"tujuan_pembelajaran",className:"text-white",children:"Tujuan Pembelajaran"}),i.jsx(qn,{id:"tujuan_pembelajaran",value:o.tujuan_pembelajaran,onChange:k=>l(E=>({...E,tujuan_pembelajaran:k.target.value})),className:"bg-gray-800 border-gray-600 text-white resize-none",placeholder:"Masukkan tujuan pembelajaran",rows:4})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"materi_pembelajaran",className:"text-white",children:"Materi Pembelajaran"}),i.jsx(qn,{id:"materi_pembelajaran",value:o.materi_pembelajaran,onChange:k=>l(E=>({...E,materi_pembelajaran:k.target.value})),className:"bg-gray-800 border-gray-600 text-white resize-none",placeholder:"Masukkan materi pembelajaran",rows:4})]})]})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(K,{type:"button",variant:"outline",onClick:e,children:"Batal"}),i.jsx(K,{type:"submit",disabled:b.isPending||!o.subject_id||!o.class_id,className:"bg-lime-500 hover:bg-lime-600",children:b.isPending?"Menyimpan...":"Simpan"})]})]}),i.jsx(UEe,{isOpen:f,onClose:()=>m(!1),selectedClassId:a})]})})},HEe=({isOpen:t,onClose:e,schedule:r,onScheduleUpdated:n})=>{const{data:a}=Cc(),{data:s=[]}=mp(r==null?void 0:r.class_id),{data:o=[]}=Ar(),{data:l}=Qg(),{data:c}=Yt(),d=$.useMemo(()=>{const y=s.flatMap(_=>_.subjects.map(S=>({id:S.id,name:S.name,code:S.code,category:_.name}))),b=(a==null?void 0:a.map(_=>({id:_.id,name:_.name,code:_.code,category:_.category||"Lainnya"})))||[],w=[...y,...b],j=w.filter((_,S,N)=>S===N.findIndex(k=>k.id===_.id));return console.log(" EditScheduleModal - All subjects:",{fromCategories:y.length,fromTable:b.length,merged:w.length,unique:j.length,p5Subjects:j.filter(_=>_.category==="P5")}),j},[a,s]),u=Z4(),h=DEe(),{toast:f}=Ce(),[m,v]=x.useState({subject_id:"",teacher_id:"",class_id:"",session_category_id:"",start_time:"",end_time:"",room:"",notes:"",tujuan_pembelajaran:"",materi_pembelajaran:""});x.useEffect(()=>{r&&v({subject_id:r.subject_id||"",teacher_id:r.teacher_id||"no-teacher",class_id:r.class_id||"",session_category_id:r.session_category_id||"",start_time:r.start_time||"",end_time:r.end_time||"",room:r.room||"",notes:r.notes||"",tujuan_pembelajaran:r.tujuan_pembelajaran||"",materi_pembelajaran:r.materi_pembelajaran||""})},[r]);const p=async y=>{if(y.preventDefault(),!(r!=null&&r.id)){f({title:"Error",description:"ID jadwal tidak ditemukan",variant:"destructive"});return}if(!m.subject_id||!m.class_id){f({title:"Validasi Gagal",description:"Mata pelajaran dan kelas harus dipilih",variant:"destructive"});return}if(!m.start_time||!m.end_time){f({title:"Validasi Gagal",description:"Waktu mulai dan selesai harus diisi",variant:"destructive"});return}if(m.start_time>=m.end_time){f({title:"Validasi Gagal",description:"Waktu mulai harus lebih awal dari waktu selesai",variant:"destructive"});return}try{console.log(" Updating schedule with data:",{id:r.id,formData:m});const{session_category_id:b,...w}=m,j={...w,teacher_id:w.teacher_id===""||w.teacher_id==="no-teacher"?null:w.teacher_id};await u.mutateAsync({id:r.id,...j}),f({title:"Berhasil",description:"Jadwal berhasil diperbarui"}),n&&n(),e()}catch(b){console.error(" Error updating schedule:",b),f({title:"Gagal",description:`Gagal memperbarui jadwal: ${b.message}`,variant:"destructive"})}},g=async()=>{if(r!=null&&r.id&&confirm("Apakah Anda yakin ingin menghapus jadwal ini?"))try{await h.mutateAsync(r.id),f({title:"Berhasil",description:"Jadwal berhasil dihapus"}),n&&n(),e()}catch(y){console.error("Error deleting schedule:",y),f({title:"Gagal",description:"Gagal menghapus jadwal",variant:"destructive"})}};return r?i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"sm:max-w-[700px] w-[90vw] max-h-[90vh] overflow-y-auto bg-gray-900 border-gray-700",children:[i.jsx(wt,{children:i.jsx(_t,{className:"text-white",children:"Edit Jadwal"})}),i.jsxs("form",{onSubmit:p,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"subject",className:"text-white",children:"Mata Pelajaran"}),i.jsxs(Re,{value:m.subject_id,onValueChange:y=>v(b=>({...b,subject_id:y})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih mata pelajaran"})}),i.jsx(Pe,{className:"bg-gray-800 border-gray-600",children:d.map(y=>i.jsx(he,{value:y.id,className:"text-white hover:bg-gray-700",children:y.name},y.id))})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"category",className:"text-white",children:"Kategori"}),i.jsxs(Re,{value:m.session_category_id,onValueChange:y=>v(b=>({...b,session_category_id:y})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kategori"})}),i.jsx(Pe,{className:"bg-gray-800 border-gray-600",children:o.map(y=>i.jsx(he,{value:y.id,className:"text-white hover:bg-gray-700",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.color}}),y.name]})},y.id))})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"teacher",className:"text-white",children:"Guru"}),i.jsxs(Re,{value:m.teacher_id,onValueChange:y=>v(b=>({...b,teacher_id:y})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih guru (opsional)"})}),i.jsxs(Pe,{className:"bg-gray-800 border-gray-600",children:[i.jsx(he,{value:"no-teacher",className:"text-gray-400 hover:bg-gray-700",children:"Tidak ada guru"}),l==null?void 0:l.map(y=>i.jsx(he,{value:y.id,className:"text-white hover:bg-gray-700",children:y.full_name},y.id))]})]})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"class",className:"text-white",children:"Kelas"}),i.jsxs(Re,{value:m.class_id,onValueChange:y=>v(b=>({...b,class_id:y})),children:[i.jsx(De,{className:"bg-gray-800 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas"})}),i.jsx(Pe,{className:"bg-gray-800 border-gray-600",children:c==null?void 0:c.map(y=>i.jsx(he,{value:y.id,className:"text-white hover:bg-gray-700",children:y.name},y.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"start_time",className:"text-white",children:"Waktu Mulai"}),i.jsx(me,{id:"start_time",type:"time",value:m.start_time,onChange:y=>v(b=>({...b,start_time:y.target.value})),className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"end_time",className:"text-white",children:"Waktu Selesai"}),i.jsx(me,{id:"end_time",type:"time",value:m.end_time,onChange:y=>v(b=>({...b,end_time:y.target.value})),className:"bg-gray-800 border-gray-600 text-white"})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"room",className:"text-white",children:"Ruangan"}),i.jsx(me,{id:"room",value:m.room,onChange:y=>v(b=>({...b,room:y.target.value})),placeholder:"Masukkan ruangan",className:"bg-gray-800 border-gray-600 text-white"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"notes",className:"text-white",children:"Catatan Guru"}),i.jsx(qn,{id:"notes",value:m.notes,onChange:y=>v(b=>({...b,notes:y.target.value})),placeholder:"Masukkan catatan",className:"bg-gray-800 border-gray-600 text-white",rows:4})]})}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"tujuan_pembelajaran",className:"text-white",children:"Tujuan Pembelajaran"}),i.jsx(qn,{id:"tujuan_pembelajaran",value:m.tujuan_pembelajaran,onChange:y=>v(b=>({...b,tujuan_pembelajaran:y.target.value})),placeholder:"Masukkan tujuan pembelajaran",className:"bg-gray-800 border-gray-600 text-white",rows:4})]})})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"materi_pembelajaran",className:"text-white",children:"Materi Pembelajaran"}),i.jsx(qn,{id:"materi_pembelajaran",value:m.materi_pembelajaran,onChange:y=>v(b=>({...b,materi_pembelajaran:y.target.value})),placeholder:"Masukkan materi pembelajaran",className:"bg-gray-800 border-gray-600 text-white",rows:3})]}),i.jsxs("div",{className:"flex justify-between pt-4",children:[i.jsxs(K,{type:"button",variant:"destructive",onClick:g,disabled:h.isPending,children:[i.jsx(Ut,{className:"w-4 h-4 mr-2"}),"Hapus"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:e,children:"Batal"}),i.jsx(K,{type:"submit",disabled:u.isPending,className:"bg-emerald-600 hover:bg-emerald-700 disabled:opacity-50",children:u.isPending?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Menyimpan..."]}):i.jsxs(i.Fragment,{children:[i.jsx(dc,{className:"w-4 h-4 mr-2"}),"Simpan"]})})]})]})]})]})}):null},m5=({selectedClassId:t,onClassChange:e})=>{const{data:r=[]}=Yt(),n=[...r].sort((a,s)=>a.level!==s.level?a.level.localeCompare(s.level):a.grade!==s.grade?a.grade-s.grade:a.name.localeCompare(s.name));return i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Kelas:"}),i.jsxs(Re,{value:t||"all",onValueChange:a=>e(a==="all"?null:a),children:[i.jsx(De,{className:"w-48 bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Kelas"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Kelas"}),n.map(a=>i.jsxs(he,{value:a.id,className:"text-foreground hover:bg-accent",children:[a.name," (",a.level," ",a.grade,")"]},a.id))]})]})]})},WEe=({selectedClassId:t,selectedWeek:e,periodType:r,customDateRange:n})=>{const{data:a=[],isLoading:s,error:o}=Ks(),{data:l=[]}=Cc(),{data:c=[]}=Ar(),{academicWeeks:d}=mr(),{data:u}=ma(),{data:h=[]}=mp(t);return x.useMemo(()=>{if(console.log(" JP Period Calculation Debug (PAGINATED):",{selectedClassId:t,selectedWeek:e,periodType:r,totalSchedules:a.length,totalSubjects:l.length,totalSessionCategories:c.length,scheduleSubjectsByCategory:h.length,isLoading:s,error:o,activeAcademicYear:u==null?void 0:u.year_name}),!t)return console.log(" No selectedClassId provided"),{period:r,dateRange:"",categories:[],grandTotal:{totalJP:0,totalHours:0,totalMinutes:0}};if(!h.length)return console.log(" No scheduleSubjectsByCategory data available"),{period:r,dateRange:"",categories:[],grandTotal:{totalJP:0,totalHours:0,totalMinutes:0}};let m=a.filter(j=>j.class_id===t);console.log(" Filtered schedules by class (PAGINATED):",{classId:t,filteredCount:m.length,schedules:m.map(j=>({id:j.id,subject_id:j.subject_id,academic_week:j.academic_week,start_time:j.start_time,end_time:j.end_time}))}),e&&e>=14&&console.log(` JP CALCULATION MINGGU ${e} ANALYSIS:`,{totalSchedulesInData:(a==null?void 0:a.length)||0,schedulesForThisWeek:(a==null?void 0:a.filter(j=>j.academic_week===e).length)||0,schedulesForThisClass:(a==null?void 0:a.filter(j=>j.class_id===t).length)||0,schedulesForThisWeekAndClass:m.length,weekDistribution:a==null?void 0:a.reduce((j,_)=>(j[_.academic_week]=(j[_.academic_week]||0)+1,j),{}),availableWeeks:[...new Set(a==null?void 0:a.map(j=>j.academic_week))].sort((j,_)=>j-_)});let v="";switch(r){case"weekly":if(e){m=m.filter(_=>_.academic_week===e);const j=d.find(_=>_.weekNumber===e);v=(j==null?void 0:j.dateRange)||`Minggu ${e}`}break;case"monthly":if(e){const j=d.find(_=>_.weekNumber===e);if(j){const _=new Date(j.startDate),S=_.getMonth(),N=_.getFullYear(),E=d.filter(T=>{const D=new Date(T.startDate);return D.getMonth()===S&&D.getFullYear()===N}).map(T=>T.weekNumber);m=m.filter(T=>E.includes(T.academic_week)),v=`${["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][S]} ${N}`}}break;case"all":v=(u==null?void 0:u.year_name)||"Tahun Akademik";break}const p=j=>Math.round(j/45*10)/10,g=j=>Math.round(j/60*10)/10,y=new Map;console.log(" Processing categories from sidebar data:",{categoriesCount:h.length,categories:h.map(j=>({name:j.name,subjectsCount:j.subjects.length,subjects:j.subjects.map(_=>_.name)}))}),h.forEach(j=>{if(console.log(` Processing category: ${j.name} with ${j.subjects.length} subjects`),j.subjects.length===0){console.log(` Skipping empty category: ${j.name}`);return}const _={id:j.id,name:j.name.toUpperCase(),totalJP:0,totalHours:0,totalMinutes:0,subjects:[],color:j.color||"#3B82F6",isExpanded:!0};j.subjects.forEach(S=>{console.log(` Processing subject: ${S.name} (${S.id})`);const N=m.filter(T=>{const D=T.subject_id===S.id;return console.log(` Schedule check for ${S.name}:`,{scheduleSubjectId:T.subject_id,subjectId:S.id,isMatch:D,scheduleTime:`${T.start_time}-${T.end_time}`}),D});console.log(` Found ${N.length} schedules for ${S.name}`),(S.name==="Aqidatuna"||S.name==="Nabiyuna")&&console.log(` JP PERIOD CALCULATION DEBUG for ${S.name}:`,{subject_id:S.id,total_filtered_schedules:m.length,subject_schedules_count:N.length,subject_schedules_detail:N.map(T=>({id:T.id,subject_id:T.subject_id,start_time:T.start_time,end_time:T.end_time,academic_week:T.academic_week,day_of_week:T.day_of_week}))});const k=N.reduce((T,D)=>{const[A,C]=D.start_time.split(":").map(Number),[R,L]=D.end_time.split(":").map(Number),M=A*60+C,B=R*60+L-M;return console.log(` Schedule duration for ${S.name}:`,{startTime:D.start_time,endTime:D.end_time,duration:B}),T+B},0),E=p(k),P=g(k);console.log(` JP calculation for ${S.name}:`,{totalMinutes:k,jp:E,hours:P}),_.subjects.push({id:S.id,name:S.name,jp:E,hours:P,minutes:k,color:S.color||j.color||"#3B82F6"}),_.totalJP+=E,_.totalHours+=P,_.totalMinutes+=k}),console.log(` Adding category ${j.name} with ${_.subjects.length} subjects, total JP: ${_.totalJP}`),y.set(j.id,_)});const b=Array.from(y.values()),w=b.reduce((j,_)=>({totalJP:j.totalJP+_.totalJP,totalHours:j.totalHours+_.totalHours,totalMinutes:j.totalMinutes+_.totalMinutes}),{totalJP:0,totalHours:0,totalMinutes:0});return w.totalJP=Math.round(w.totalJP*10)/10,w.totalHours=Math.round(w.totalHours*10)/10,{period:r,dateRange:v,categories:b,grandTotal:w}},[a,l,c,d,t,e,r,n,h])},g5=({isOpen:t,onClose:e,selectedClassId:r,selectedWeek:n})=>{const[a,s]=x.useState("weekly"),[o,l]=x.useState({kbm:!0,ekstrakurikuler:!0}),c=WEe({selectedClassId:r,selectedWeek:n,periodType:a}),d=h=>{l(f=>({...f,[h]:!f[h]}))},u=[{value:"weekly",label:"Mingguan",icon:Ve},{value:"monthly",label:"Bulanan",icon:Ni},{value:"all",label:"Semua",icon:Gt}];return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-lg max-h-[85vh] bg-background border-border backdrop-blur-sm shadow-2xl animate-in fade-in-0 zoom-in-95 duration-300",children:[i.jsxs(wt,{className:"pb-3",children:[i.jsxs(_t,{className:"text-lg font-bold text-foreground flex items-center gap-2",children:[i.jsx("div",{className:"p-1.5 rounded-lg bg-primary/20",children:i.jsx(Vo,{className:"h-5 w-5 text-primary"})}),"JP dalam Periode"]}),i.jsx("div",{className:"flex gap-1.5 mt-3",children:u.map(h=>{const f=h.icon;return i.jsxs(K,{variant:a===h.value?"default":"outline",size:"sm",onClick:()=>s(h.value),className:`flex items-center gap-1.5 text-xs px-3 py-1.5 ${a===h.value?"bg-primary text-primary-foreground border-primary":"bg-muted text-muted-foreground border-border hover:bg-accent hover:text-accent-foreground"}`,children:[i.jsx(f,{className:"h-3.5 w-3.5"}),h.label]},h.value)})}),c.dateRange&&i.jsxs("div",{className:"flex items-center gap-1.5 mt-2 p-2 bg-muted/50 border border-border rounded-md",children:[i.jsx(Ve,{className:"h-3.5 w-3.5 text-primary"}),i.jsx("span",{className:"text-xs text-muted-foreground font-medium",children:c.dateRange})]})]}),i.jsxs("div",{className:"space-y-3 overflow-y-auto max-h-[55vh] pr-2",children:[c.categories.map(h=>i.jsx(ie,{className:"bg-card border-border",children:i.jsxs(qi,{open:o[h.id],onOpenChange:()=>d(h.id),children:[i.jsx(Al,{asChild:!0,children:i.jsx("div",{className:"p-3 cursor-pointer hover:bg-accent/30 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsx("div",{className:"w-3.5 h-3.5 rounded-sm",style:{backgroundColor:h.color}}),i.jsx("span",{className:"font-medium text-foreground text-sm",children:h.name})]}),i.jsxs("div",{className:"flex items-center gap-2.5",children:[i.jsxs(st,{variant:"secondary",className:"bg-primary/20 text-primary border-primary/30 text-xs px-2 py-0.5",children:[h.totalJP," JP"]}),o[h.id]?i.jsx(Fn,{className:"h-3.5 w-3.5 text-muted-foreground"}):i.jsx(Oa,{className:"h-3.5 w-3.5 text-muted-foreground"})]})]})})}),i.jsx(Ui,{children:i.jsx("div",{className:"px-3 pb-3 space-y-1.5",children:h.subjects.map(f=>i.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-muted/40 rounded-md border-l-3",style:{borderLeftColor:f.color},children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-foreground text-xs",children:f.name}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:[f.hours," jam"]})]}),i.jsxs(st,{variant:"outline",className:"bg-muted text-muted-foreground border-border text-xs px-1.5 py-0.5",children:[f.jp," JP"]})]},f.id))})})]})},h.id)),c.categories.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Vo,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),i.jsx("h3",{className:"text-base font-medium text-foreground mb-1",children:"Belum Ada Data JP"}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"Belum ada jadwal untuk periode yang dipilih"})]})]}),c.categories.length>0&&i.jsx("div",{className:"border-t border-border pt-2 mt-3",children:i.jsx(ie,{className:"bg-primary/10 border-primary/30",children:i.jsx(oe,{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:i.jsx("h3",{className:"font-bold text-foreground text-base",children:"Total JP"})}),i.jsx("div",{className:"text-right",children:i.jsx("div",{className:"text-2xl font-bold text-primary",children:c.grandTotal.totalJP})})]})})})})]})})},gu=t=>{let e;if(typeof t=="string"){const[s,o]=t.split(":").map(Number);e=new Date,e.setHours(s,o,0,0)}else e=new Date(t);const r=e.getMinutes(),n=r%5;let a;return n<2.5?a=r-n:a=r+(5-n),a>=60&&(e.setHours(e.getHours()+1),a=0),e.setMinutes(a,0,0),e.toTimeString().slice(0,5)},p5=(t,e)=>{const[r,n]=t.split(":").map(Number),a=new Date;return a.setHours(r,n,0,0),a.setMinutes(a.getMinutes()+e),gu(a)},v5=(t,e)=>{const[r,n]=t.split(":").map(Number),[a,s]=e.split(":").map(Number),o=new Date;o.setHours(r,n,0,0);const l=new Date;return l.setHours(a,s,0,0),l<o&&l.setDate(l.getDate()+1),Math.round((l.getTime()-o.getTime())/(1e3*60))},KEe=(t,e,r)=>{const n=t,a=gu(r),s=v5(n,a);if(s<5){const o=p5(n,5);return{startTime:n,endTime:o,duration:5}}return{startTime:n,endTime:a,duration:s}},vC=(t,e)=>{const r=gu(e),n=p5(r,t);return{startTime:r,endTime:n,duration:t}},Jh=(t,e,r)=>t.some(n=>{if(r&&n.id===r)return!1;if(n.class_id===e.class_id&&n.day_of_week===e.day_of_week&&n.academic_week===e.academic_week){const a=n.start_time,s=n.end_time,o=e.start_time,l=e.end_time,c=Rh(a),d=Rh(s),u=Rh(o),h=Rh(l);return c<h&&u<d}return!1}),Rh=t=>{const[e,r]=t.split(":").map(Number);return e*60+r},$h=(t,e)=>{console.log(` ${t}:`,{...e,timestamp:new Date().toISOString()})},GEe=()=>{const t=Ne(),{toast:e}=Ce(),{forceRefresh:r}=Fw(),{data:n=[],isLoading:a,error:s}=Ye({queryKey:["schedules-for-copy"],queryFn:async()=>{console.log(" Fetching schedules for copy operation from schedules_view (SAME AS CALENDAR)..."),console.log(" Query timestamp:",new Date().toISOString());let m=[],v=0;const p=500;let g=!0,y=0;for(;g;){console.log(` Copy batch: ${v} to ${v+p-1} (Progress: ${y} rows)`);const{data:j,error:_}=await W.from("schedules_view").select("*").not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).range(v,v+p-1);if(_)throw console.error(" Error fetching copy schedules batch:",_),_;if(!j||j.length===0){g=!1;break}m=[...m,...j],y+=j.length,j.length<p?g=!1:v+=p,y>=5e4&&(console.log(" Reached safety limit of 50k records for copy"),g=!1)}console.log(" Schedules for copy fetched:",m.length,"records"),console.log(" Raw data sample:",m.slice(0,3));const b=m.filter(j=>j.class_id==="556ea61c-8dad-4441-8001-a70f3d448ffa"),w=b.filter(j=>j.academic_week===25&&j.day_of_week===2);return console.log(" Test class data (FROM SCHEDULES_VIEW):",{classId:"556ea61c-8dad-4441-8001-a70f3d448ffa",totalForClass:b.length,week25Data:b.filter(j=>j.academic_week===25),selasaWeek25Count:w.length,selasaWeek25Detail:w.map(j=>({id:j.id,subject_name:j.subject_name,start_time:j.start_time,end_time:j.end_time,class_name:j.class_name})),allWeeks:[...new Set(b.map(j=>j.academic_week))].sort(),sampleData:b.slice(0,5).map(j=>({id:j.id,day:j.day_of_week,week:j.academic_week,subject_name:j.subject_name,time:`${j.start_time}-${j.end_time}`}))}),m},staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,retry:3,enabled:!0,refetchInterval:!1,refetchOnReconnect:!0});console.log(" useCopySchedule - Schedules data:",{totalSchedules:n.length,isLoading:a,hasError:!!s,sampleSchedule:n[0]});const o=async()=>{var p;const{data:m}=await W.from("profiles").select("school_id").eq("id",(p=(await W.auth.getUser()).data.user)==null?void 0:p.id).single(),{data:v}=await W.from("academic_years").select("id").eq("school_id",m==null?void 0:m.school_id).eq("is_active",!0).single();return{schoolId:m==null?void 0:m.school_id,academicYearId:v==null?void 0:v.id}},l=(m,v,p,g)=>{const y=[],b=n.filter(w=>w.class_id===g&&w.day_of_week===v&&w.academic_week===p);return m.forEach(w=>{const j={class_id:g,day_of_week:v,start_time:w.start_time,end_time:w.end_time,academic_week:p},_=b.find(S=>Jh([S],j));_&&y.push({existingSchedule:_,newSchedule:w,conflictTime:`${w.start_time}-${w.end_time}`})}),y},c=Se({mutationFn:async m=>{console.log(" Copy Day Operation:",m);const{schoolId:v,academicYearId:p}=await o(),g=n.filter(_=>_.class_id===m.classId&&_.day_of_week===m.sourceDay&&_.academic_week===m.sourceWeek);if(g.length===0)throw new Error("Tidak ada jadwal untuk disalin dari hari yang dipilih");console.log(` Found ${g.length} schedules to copy`);const y=l(g,m.targetDay,m.targetWeek,m.classId);if(y.length>0&&!m.overwriteConflicts)throw new Error(`Ditemukan ${y.length} konflik jadwal. Aktifkan "Timpa Konflik" untuk melanjutkan.`);if(m.overwriteConflicts&&y.length>0){const _=y.map(N=>N.existingSchedule.id),{error:S}=await W.from("class_schedules").delete().in("id",_);if(S)throw console.error("Error deleting conflicting schedules:",S),S;console.log(` Deleted ${_.length} conflicting schedules`)}const b=g.map(_=>({subject_id:_.subject_id,teacher_id:_.teacher_id,class_id:m.classId,time_session_id:_.time_session_id,day_of_week:m.targetDay,start_time:_.start_time,end_time:_.end_time,academic_week:m.targetWeek,schedule_date:null,room:_.room,notes:_.notes,tujuan_pembelajaran:_.tujuan_pembelajaran||null,materi_pembelajaran:_.materi_pembelajaran||null,school_id:v,academic_year_id:p}));console.log(" Prepared schedules for copy:",{sourceCount:g.length,targetDay:m.targetDay,targetWeek:m.targetWeek,classId:m.classId,newSchedules:b.length});const{data:w,error:j}=await W.from("class_schedules").insert(b).select();if(j)throw console.error("Error copying schedules:",j),j;return console.log(` Successfully copied ${w.length} schedules`),{copiedCount:w.length,conflicts:y.length}},onSuccess:async m=>{console.log(" Copy day operation successful"),await Promise.all([t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-for-copy"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-complete"]})]),setTimeout(()=>{r(),console.log(" Force refresh triggered after copy day operation"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("forceCalendarRefresh")),console.log(" Calendar refetch event dispatched for day copy")},100)},500),e({title:" Berhasil",description:`${m.copiedCount} jadwal berhasil disalin${m.conflicts>0?` (${m.conflicts} konflik ditimpa)`:""}`})},onError:m=>{console.error("Copy day error:",m),e({title:" Gagal",description:m.message||"Gagal menyalin jadwal",variant:"destructive"})}}),d=Se({mutationFn:async m=>{console.log(" Copy Week Operation:",m);const{schoolId:v,academicYearId:p}=await o(),g=n.filter(N=>N.class_id===m.classId&&N.academic_week===m.sourceWeek);if(g.length===0)throw new Error("Tidak ada jadwal untuk disalin dari pekan yang dipilih");console.log(` Found ${g.length} schedules to copy from week ${m.sourceWeek}`);const y=g.reduce((N,k)=>{const E=k.day_of_week;return N[E]||(N[E]=[]),N[E].push(k),N},{});let b=0;const w={};if(Object.entries(y).forEach(([N,k])=>{const E=l(k,parseInt(N),m.targetWeek,m.classId);w[parseInt(N)]=E,b+=E.length}),b>0&&!m.overwriteConflicts)throw new Error(`Ditemukan ${b} konflik jadwal. Aktifkan "Timpa Konflik" untuk melanjutkan.`);if(m.overwriteConflicts&&b>0){const N=Object.values(w).flat().map(E=>E.existingSchedule.id),{error:k}=await W.from("class_schedules").delete().in("id",N);if(k)throw console.error("Error deleting conflicting schedules:",k),k;console.log(` Deleted ${N.length} conflicting schedules`)}const j=g.map(N=>({subject_id:N.subject_id,teacher_id:N.teacher_id,class_id:m.classId,time_session_id:N.time_session_id,day_of_week:N.day_of_week,start_time:N.start_time,end_time:N.end_time,academic_week:m.targetWeek,schedule_date:null,room:N.room,notes:N.notes,tujuan_pembelajaran:N.tujuan_pembelajaran||null,materi_pembelajaran:N.materi_pembelajaran||null,school_id:v,academic_year_id:p}));console.log(" Prepared week schedules for copy:",{sourceCount:g.length,targetWeek:m.targetWeek,classId:m.classId,newSchedules:j.length});const{data:_,error:S}=await W.from("class_schedules").insert(j).select();if(S)throw console.error("Error copying week schedules:",S),S;return console.log(` Successfully copied ${_.length} schedules for week`),{copiedCount:_.length,conflicts:b}},onSuccess:async m=>{console.log(" Copy week operation successful"),await Promise.all([t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-for-copy"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-complete"]})]),setTimeout(()=>{r(),console.log(" Force refresh triggered after copy week operation")},200),e({title:" Berhasil",description:`${m.copiedCount} jadwal berhasil disalin${m.conflicts>0?` (${m.conflicts} konflik ditimpa)`:""}`})},onError:m=>{console.error("Copy week error:",m),e({title:" Gagal",description:m.message||"Gagal menyalin jadwal pekan",variant:"destructive"})}}),u=Se({mutationFn:async m=>{console.log(" Copy Multiple Weeks Operation:",m);const{schoolId:v,academicYearId:p}=await o(),g=n.filter(S=>S.class_id===m.classId&&S.academic_week===m.sourceWeek);if(g.length===0)throw new Error("Tidak ada jadwal untuk disalin dari pekan yang dipilih");console.log(` Found ${g.length} schedules to copy from week ${m.sourceWeek} to ${m.targetWeeks.length} target weeks`);let y=0;const b={},w=[];for(const S of m.targetWeeks){b[S]={};const N=g.reduce((E,P)=>{const T=P.day_of_week;return E[T]||(E[T]=[]),E[T].push(P),E},{});Object.entries(N).forEach(([E,P])=>{const T=l(P,parseInt(E),S,m.classId);b[S][parseInt(E)]=T,y+=T.length});const k=g.map(E=>({subject_id:E.subject_id,teacher_id:E.teacher_id,class_id:m.classId,time_session_id:E.time_session_id,day_of_week:E.day_of_week,start_time:E.start_time,end_time:E.end_time,academic_week:S,schedule_date:null,room:E.room,notes:E.notes,tujuan_pembelajaran:E.tujuan_pembelajaran||null,materi_pembelajaran:E.materi_pembelajaran||null,school_id:v,academic_year_id:p}));w.push(...k)}if(y>0&&!m.overwriteConflicts)throw new Error(`Ditemukan ${y} konflik jadwal di ${m.targetWeeks.length} pekan. Aktifkan "Timpa Konflik" untuk melanjutkan.`);if(m.overwriteConflicts&&y>0){const S=[];if(Object.values(b).forEach(N=>{Object.values(N).forEach(k=>{k.forEach(E=>{S.push(E.existingSchedule.id)})})}),S.length>0){const{error:N}=await W.from("class_schedules").delete().in("id",S);if(N)throw console.error("Error deleting conflicting schedules:",N),N;console.log(` Deleted ${S.length} conflicting schedules across ${m.targetWeeks.length} weeks`)}}const j=100;let _=0;for(let S=0;S<w.length;S+=j){const N=w.slice(S,S+j),{data:k,error:E}=await W.from("class_schedules").insert(N).select();if(E)throw console.error("Error copying schedules batch:",E),E;_+=k.length,console.log(` Inserted batch ${Math.floor(S/j)+1}: ${k.length} schedules`)}return console.log(` Successfully copied ${_} schedules to ${m.targetWeeks.length} weeks`),{copiedCount:_,conflicts:y,targetWeeksCount:m.targetWeeks.length,schedulesPerWeek:g.length}},onSuccess:async m=>{console.log(" Copy multiple weeks operation successful"),await Promise.all([t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-for-copy"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-complete"]})]),setTimeout(()=>{r(),console.log(" Force refresh triggered after copy multiple weeks operation")},200),e({title:" Berhasil",description:`${m.copiedCount} jadwal berhasil disalin ke ${m.targetWeeksCount} pekan${m.conflicts>0?` (${m.conflicts} konflik ditimpa)`:""}`})},onError:m=>{console.error("Copy multiple weeks error:",m),e({title:" Gagal",description:m.message||"Gagal menyalin jadwal ke beberapa pekan",variant:"destructive"})}}),h=(m,v,p,g=!1)=>{console.log(" getPreviewSchedules called with:",{sourceDay:m,sourceWeek:v,classId:p,isWeekCopy:g,totalSchedules:n.length,schedulesLoading:a,schedulesError:s==null?void 0:s.message,timestamp:new Date().toISOString()}),console.log(" First 10 schedules in memory:",n.slice(0,10).map(w=>({id:w.id,class_id:w.class_id,day_of_week:w.day_of_week,academic_week:w.academic_week,subject_id:w.subject_id,start_time:w.start_time})));const y=n.filter(w=>w.academic_week===25);if(console.log(" Week 25 data in memory:",{count:y.length,data:y.map(w=>({id:w.id,class_id:w.class_id,day_of_week:w.day_of_week,subject_id:w.subject_id}))}),!p||!v)return console.log(" Missing classId or sourceWeek"),[];if(a)return console.log(" Schedules still loading..."),[];if(s)return console.log(" Schedules error:",s),[];let b;if(g)b=n.filter(w=>w.class_id===p&&w.academic_week===v),console.log(" Week copy filter result:",{classId:p,sourceWeek:v,resultCount:b.length,matchingSchedules:b.map(w=>({day:w.day_of_week,subject_id:w.subject_id}))});else if(m){const w=n.filter(S=>S.class_id===p),j=w.filter(S=>S.day_of_week===m),_=j.filter(S=>S.academic_week===v);console.log(" Day copy filter debug:",{classId:p,sourceDay:m,sourceWeek:v,totalSchedules:n.length,classMatches:w.length,dayMatches:j.length,weekMatches:_.length,classMatchesSample:w.slice(0,3).map(S=>({day:S.day_of_week,week:S.academic_week,subject_id:S.subject_id})),dayMatchesSample:j.slice(0,3).map(S=>({week:S.academic_week,subject_id:S.subject_id}))}),b=_,console.log(" Day copy filter result:",{classId:p,sourceDay:m,sourceWeek:v,resultCount:b.length,matchingSchedules:b.map(S=>({subject_id:S.subject_id,time:`${S.start_time}-${S.end_time}`}))})}else b=[];return b},f=Se({mutationFn:async m=>{console.log(" Copy Multiple Days Operation:",m);const{schoolId:v,academicYearId:p}=await o(),g=n.filter(S=>S.class_id===m.classId&&S.day_of_week===m.sourceDay&&S.academic_week===m.sourceWeek);if(g.length===0)throw new Error("Tidak ada jadwal untuk disalin dari hari yang dipilih");console.log(` Found ${g.length} schedules to copy to ${m.targetDays.length} days`);let y=0;const b={};if(m.targetDays.forEach(S=>{const N=l(g,S,m.targetWeek,m.classId);N.length>0&&(b[S]=N,y+=N.length)}),y>0&&!m.overwriteConflicts)throw new Error(`Ditemukan ${y} konflik jadwal di ${m.targetDays.length} hari. Aktifkan "Timpa Konflik" untuk melanjutkan.`);if(m.overwriteConflicts&&y>0){const S=[];if(Object.values(b).forEach(N=>{N.forEach(k=>{S.push(k.existingSchedule.id)})}),S.length>0){const{error:N}=await W.from("class_schedules").delete().in("id",S);if(N)throw console.error("Error deleting conflicting schedules:",N),N;console.log(` Deleted ${S.length} conflicting schedules`)}}const w=[];m.targetDays.forEach(S=>{const N=g.map(k=>({subject_id:k.subject_id,teacher_id:k.teacher_id||null,class_id:m.classId,time_session_id:k.time_session_id||null,day_of_week:S,start_time:k.start_time,end_time:k.end_time,academic_week:m.targetWeek,schedule_date:null,room:k.room||"",notes:k.notes||"",tujuan_pembelajaran:k.tujuan_pembelajaran||null,materi_pembelajaran:k.materi_pembelajaran||null,school_id:v,academic_year_id:p,hours_per_week:0,hours_per_year:0}));w.push(...N)}),console.log(` Prepared ${w.length} schedules for ${m.targetDays.length} days`,{sourceSchedules:g.length,targetDays:m.targetDays,targetWeek:m.targetWeek,classId:m.classId,sampleSchedule:w[0]});const{data:j,error:_}=await W.from("class_schedules").insert(w).select();if(_)throw console.error("Error copying schedules to multiple days:",_),_;return console.log(` Successfully copied ${j.length} schedules to ${m.targetDays.length} days`),{copiedCount:j.length,conflicts:y,targetDaysCount:m.targetDays.length,schedulesPerDay:g.length}},onSuccess:async m=>{console.log(" Copy multiple days operation successful"),await Promise.all([t.invalidateQueries({queryKey:["schedules"]}),t.invalidateQueries({queryKey:["schedules-complete"]}),t.invalidateQueries({queryKey:["schedules-for-copy"]}),t.invalidateQueries({queryKey:["schedules-calendar"]}),t.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([t.refetchQueries({queryKey:["schedules"]}),t.refetchQueries({queryKey:["schedules-complete"]})]),setTimeout(()=>{r(),console.log(" Force refresh triggered after copy multiple days operation"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("forceCalendarRefresh")),console.log(" Calendar refetch event dispatched for day copy")},100)},500),e({title:" Berhasil",description:`${m.copiedCount} jadwal berhasil disalin ke ${m.targetDaysCount} hari${m.conflicts>0?` (${m.conflicts} konflik ditimpa)`:""}`})},onError:m=>{console.error("Copy multiple days error:",m),e({title:" Gagal",description:m.message||"Gagal menyalin jadwal ke beberapa hari",variant:"destructive"})}});return{copyDay:c,copyWeek:d,copyMultipleWeeks:u,copyMultipleDays:f,getPreviewSchedules:h,checkCopyConflicts:l,isLoading:c.isPending||d.isPending||u.isPending||f.isPending||a}},Go=({selectedWeek:t=0,onWeekSelect:e,selectedTargetWeeks:r,sourceWeek:n,isSelectionMode:a=!1,variant:s="copy"})=>{const{academicWeeks:o}=mr(),l=c=>{const d=t===c,u=r==null?void 0:r.has(c);return a&&n===c?"bg-muted/30 border-muted text-muted-foreground cursor-not-allowed":u&&a?s==="delete"?"bg-red-500/80 border-red-400 text-white shadow-lg scale-105 ring-1 ring-red-400/50":"bg-green-500/80 border-green-400 text-white shadow-lg scale-105 ring-1 ring-green-400/50":d&&!a?s==="delete"?"bg-red-500/20 border-red-400 text-red-300":"bg-primary/20 border-primary text-primary":"bg-background border-border text-foreground hover:bg-accent hover:text-accent-foreground hover:scale-105"};return i.jsx("div",{className:"w-full",children:i.jsx("div",{className:"grid grid-cols-8 sm:grid-cols-10 md:grid-cols-12 lg:grid-cols-15 xl:grid-cols-16 gap-2 w-full",children:o.map(c=>i.jsx(K,{"data-week":c.weekNumber,variant:"outline",size:"sm",onClick:()=>{a&&n===c.weekNumber||e(c.weekNumber)},disabled:a&&n===c.weekNumber,className:`h-8 w-8 flex items-center justify-center text-xs font-medium rounded-full p-0 transition-all duration-200 ${l(c.weekNumber)}`,children:c.weekNumber},c.weekNumber))})})},VEe=({isOpen:t,onClose:e,selectedClassId:r,currentWeek:n=1})=>{var B,H,q;const[a,s]=x.useState("day"),[o,l]=x.useState(!1),[c,d]=x.useState(1),[u,h]=x.useState(new Set([2])),[f,m]=x.useState(n),[v,p]=x.useState(n),[g,y]=x.useState(n),[b,w]=x.useState(new Set([n+1])),{academicWeeks:j}=mr(),{copyDay:_,copyMultipleWeeks:S,copyMultipleDays:N,getPreviewSchedules:k,checkCopyConflicts:E,isLoading:P}=GEe(),T=O=>{const F=new Set(b);F.has(O)?F.delete(O):F.add(O),w(F)},D=Array.from(b).sort((O,F)=>O-F),A=Array.from(u).sort((O,F)=>O-F),C=O=>{const F=new Set(u);F.has(O)?F.delete(O):F.add(O),h(F)},R=[{value:1,label:"Senin"},{value:2,label:"Selasa"},{value:3,label:"Rabu"},{value:4,label:"Kamis"},{value:5,label:"Jumat"},{value:6,label:"Sabtu"},{value:7,label:"Minggu"}],L=x.useMemo(()=>{if(!r)return console.log(" CopyScheduleModal: No selectedClassId"),[];let O;return a==="day"?(O=k(c,f,r,!1),console.log(" CopyScheduleModal Day Preview:",{sourceDay:c,sourceDayWeek:f,selectedClassId:r,resultCount:O.length,sampleSchedule:O[0]}),O.length===0&&console.log(" No schedules found for day copy. Debug info:",{sourceDay:c,sourceDayWeek:f,selectedClassId:r,totalSchedulesAvailable:k(void 0,f,r,!0).length})):(O=k(void 0,g,r,!0),console.log(" CopyScheduleModal Week Preview:",{sourceWeek:g,selectedClassId:r,resultCount:O.length,sampleSchedule:O[0]}),O.length===0&&console.log(" No schedules found for week copy. Debug info:",{sourceWeek:g,selectedClassId:r})),O},[a,c,f,g,r,k]),M=x.useMemo(()=>{if(!r||L.length===0)return[];if(a==="day"){const O=[];return A.forEach(F=>{const G=E(L,F,v,r);O.push(...G)}),O}else{const O=[],F=L.reduce((G,Y)=>{const Z=Y.day_of_week;return G[Z]||(G[Z]=[]),G[Z].push(Y),G},{});return D.forEach(G=>{Object.entries(F).forEach(([Y,Z])=>{const le=E(Z,parseInt(Y),G,r);O.push(...le)})}),O}},[a,L,A,v,D,r,E]),I=async()=>{if(console.log(" Copy operation started:",{activeTab:a,selectedClassId:r,previewSchedules:L.length,sourceDay:c,sourceDayWeek:f,targetDaysArray:A,targetDayWeek:v,sourceWeek:g,targetWeeksArray:D,overwriteConflicts:o,samplePreviewSchedule:L[0]}),!r){console.error(" No class selected");return}if(L.length===0){console.error(" No schedules to copy - previewSchedules is empty"),console.log("Debug info:",{activeTab:a,sourceDay:c,sourceDayWeek:f,sourceWeek:g,selectedClassId:r});const F=a==="day"?["","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"][c]:"",G=a==="day"?f:g;alert(`Tidak ada jadwal untuk disalin dari ${a==="day"?`${F} pekan ${G}`:`pekan ${G}`}. Silakan pilih hari/pekan lain yang memiliki jadwal.`);return}if(a==="day"){if(A.length===0){console.error(" No target days specified");return}if(A.includes(c)&&f===v){console.error(" Source day cannot be in target days for the same week");return}}if(a==="week"){if(D.length===0){console.error(" No target weeks specified");return}if(D.includes(g)){console.error(" Source week cannot be in target weeks");return}}try{console.log(" All validations passed, starting copy operation..."),a==="day"?(console.log(" Copying day with params:",{sourceDay:c,targetDays:A,sourceWeek:f,targetWeek:v,classId:r,overwriteConflicts:o}),await N.mutateAsync({sourceDay:c,targetDays:A,sourceWeek:f,targetWeek:v,classId:r,overwriteConflicts:o})):(console.log(" Copying week with params:",{sourceWeek:g,targetWeeks:D,classId:r,overwriteConflicts:o}),await S.mutateAsync({sourceWeek:g,targetWeeks:D,classId:r,overwriteConflicts:o})),console.log(" Copy operation completed successfully"),e()}catch(O){console.error(" Copy error:",O)}};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-6xl max-h-[90vh] bg-background border-border backdrop-blur-sm",children:[i.jsx(wt,{className:"pb-1",children:i.jsxs(_t,{className:"text-xl font-bold text-foreground flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-green-500/20",children:i.jsx(Qo,{className:"h-6 w-6 text-green-400"})}),"Salin Jadwal"]})}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"w-80 space-y-4",children:[M.length>0&&i.jsx(ie,{className:"bg-red-500/10 border-red-500/30",children:i.jsx(oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ii,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-medium text-red-600 mb-2",children:[M.length," Konflik Jadwal",a==="day"&&A.length>0&&i.jsxs("span",{className:"text-red-500 text-sm font-normal block",children:["di ",A.length," hari tujuan"]}),a==="week"&&D.length>0&&i.jsxs("span",{className:"text-red-200 text-sm font-normal block",children:["di ",D.length," pekan tujuan"]})]}),i.jsxs("div",{className:"text-sm text-red-200 space-y-1 max-h-40 overflow-y-auto",children:[M.slice(0,5).map((O,F)=>{var G;return i.jsxs("div",{className:"text-xs",children:[" ",O.conflictTime," - ",(G=O.newSchedule.subjects)==null?void 0:G.name]},F)}),M.length>5&&i.jsxs("div",{className:"text-red-300 text-xs",children:["... dan ",M.length-5," konflik lainnya"]})]})]})]})})}),i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"overwrite",checked:o,onCheckedChange:O=>{l(O===!0)}}),i.jsx("label",{htmlFor:"overwrite",className:"text-sm text-foreground",children:"Timpa jadwal yang konflik"})]})})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(K,{onClick:I,disabled:P||M.length>0&&!o,className:"w-full bg-green-500 hover:bg-green-600 text-white",children:P?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Menyalin..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Salin Jadwal"]})}),i.jsx(K,{variant:"outline",onClick:e,className:"w-full border-border text-foreground hover:bg-accent",children:"Batal"})]}),a==="day"&&i.jsxs(ie,{className:"bg-card border-border",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Ve,{className:"h-4 w-4 text-primary"}),"Hari Sumber"]})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx("div",{children:i.jsxs(Re,{value:c.toString(),onValueChange:O=>d(parseInt(O)),children:[i.jsx(De,{className:"bg-background border-border text-foreground",children:i.jsx($e,{})}),i.jsx(Pe,{className:"bg-popover border-border",children:R.map(O=>i.jsx(he,{value:O.value.toString(),children:O.label},O.value))})]})}),i.jsx("div",{children:i.jsxs("div",{className:"text-center",children:[i.jsxs(st,{variant:"secondary",className:"bg-primary/20 text-primary border-primary/30",children:["Pekan ",f]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:((B=j.find(O=>O.weekNumber===f))==null?void 0:B.dateRange)||"Tanggal tidak tersedia"})]})})]}),i.jsx("div",{className:"max-h-40 overflow-y-auto border border-border rounded-lg p-3 bg-muted/30 custom-scrollbar",children:i.jsx(Go,{selectedWeek:f,onWeekSelect:m,isSelectionMode:!1,variant:"copy"})})]})]})]}),i.jsx("div",{className:"flex-1 space-y-6",children:i.jsxs(mo,{value:a,onValueChange:O=>s(O),children:[i.jsxs(Gs,{className:"grid w-full grid-cols-2 bg-muted",children:[i.jsxs(jr,{value:"day",className:"flex items-center gap-2 data-[state=active]:bg-background data-[state=active]:text-foreground",children:[i.jsx(cn,{className:"h-4 w-4"}),"Salin Hari"]}),i.jsxs(jr,{value:"week",className:"flex items-center gap-2 data-[state=active]:bg-background data-[state=active]:text-foreground",children:[i.jsx(Kv,{className:"h-4 w-4"}),"Salin Pekan"]})]}),i.jsx(Sr,{value:"day",className:"space-y-6 mt-6",children:i.jsx("div",{className:"space-y-6",children:i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{className:"pb-3",children:[i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Ve,{className:"h-4 w-4 text-green-500"}),"Hari Tujuan (Pilih Multiple)"]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Klik hari untuk memilih/membatalkan. Bisa pilih beberapa hari sekaligus."})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-3 block",children:"Pilih Hari Tujuan"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:R.map(O=>{const F=u.has(O.value),G=O.value===c;return i.jsxs(K,{variant:F?"default":"outline",size:"sm",onClick:()=>C(O.value),disabled:G&&f===v,className:`h-10 text-xs transition-all duration-200 ${F?"bg-green-500/80 border-green-400 text-white shadow-lg scale-105 ring-1 ring-green-400/50":G&&f===v?"bg-gray-600/30 border-gray-600/30 text-gray-500 cursor-not-allowed":"bg-gray-700 border-gray-600 text-gray-300 hover:bg-gray-600 hover:border-gray-500"}`,children:[O.label,G&&f===v&&i.jsx("span",{className:"ml-1 text-xs",children:"(Sumber)"})]},O.value)})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground block",children:"Pekan Tujuan"}),i.jsxs("div",{className:"text-center",children:[i.jsxs(st,{variant:"secondary",className:"bg-green-500/20 text-green-600 border-green-500/30",children:["Pekan ",v]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:((H=j.find(O=>O.weekNumber===v))==null?void 0:H.dateRange)||"Tanggal tidak tersedia"})]})]}),i.jsx("div",{className:"max-h-40 overflow-y-auto border border-border rounded-lg p-3 bg-muted/30 custom-scrollbar",children:i.jsx(Go,{selectedWeek:v,onWeekSelect:p,isSelectionMode:!1,variant:"copy"})})]})]})})}),i.jsx(Sr,{value:"week",className:"space-y-6 mt-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ie,{className:"bg-card border-border",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Kv,{className:"h-4 w-4 text-primary"}),"Pekan Sumber"]})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs(st,{variant:"secondary",className:"bg-primary/20 text-primary border-primary/30",children:["Pekan ",g]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:((q=j.find(O=>O.weekNumber===g))==null?void 0:q.dateRange)||"Tanggal tidak tersedia"})]}),i.jsx("div",{className:"max-h-40 overflow-y-auto border border-border rounded-lg p-3 bg-muted/30 custom-scrollbar",children:i.jsx(Go,{selectedWeek:g,onWeekSelect:y,isSelectionMode:!1,variant:"copy"})})]})]}),i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{className:"pb-3",children:[i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Qo,{className:"h-4 w-4 text-green-500"}),"Pekan Tujuan (Pilih Multiple)"]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Klik angka pekan untuk memilih/membatalkan. Bisa pilih beberapa pekan sekaligus."})]}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"max-h-48 overflow-y-auto border border-border rounded-lg p-3 bg-muted/30 custom-scrollbar",children:i.jsx(Go,{selectedWeek:g,onWeekSelect:T,selectedTargetWeeks:b,sourceWeek:g,isSelectionMode:!0,variant:"copy"})}),D.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Pekan Terpilih (",D.length," pekan):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(O=>i.jsxs(st,{variant:"secondary",className:"bg-green-500/20 text-green-600 border-green-500/30 cursor-pointer hover:bg-green-500/30",onClick:()=>T(O),children:["Pekan ",O," "]},O))})]})]})})]})]})})]})})]})]})})},QEe=t=>{const e=Ne(),{data:r=[],isLoading:n,error:a}=Ks();console.log(" useDeleteSchedule (PAGINATED):",{classId:t,allSchedulesCount:(r==null?void 0:r.length)||0,isLoading:n,error:a});const s=Se({mutationFn:async({day:h,week:f,classId:m})=>{console.log(" Deleting day schedules:",{day:h,week:f,classId:m});const{data:v,error:p}=await W.from("class_schedules").delete().eq("day_of_week",h).eq("academic_week",f).eq("class_id",m);if(p)throw console.error(" Error deleting day schedules:",p),p;return console.log(" Day schedules deleted successfully:",v),v},onSuccess:async(h,f)=>{console.log(" Delete day successful"),await Promise.all([e.invalidateQueries({queryKey:["schedules"]}),e.invalidateQueries({queryKey:["schedules-complete"]}),e.invalidateQueries({queryKey:["schedules-for-copy"]}),e.invalidateQueries({queryKey:["schedules-calendar"]}),e.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([e.refetchQueries({queryKey:["schedules"]}),e.refetchQueries({queryKey:["schedules-complete"]})]),yn.success("Jadwal hari berhasil dihapus")},onError:h=>{console.error("Delete day error:",h),yn.error("Gagal menghapus jadwal hari")}}),o=Se({mutationFn:async({days:h,week:f,classId:m})=>{console.log(" Deleting multiple days schedules:",{days:h,week:f,classId:m});const{data:v,error:p}=await W.from("class_schedules").delete().in("day_of_week",h).eq("academic_week",f).eq("class_id",m);if(p)throw console.error(" Error deleting multiple days schedules:",p),p;return console.log(" Multiple days schedules deleted successfully:",v),v},onSuccess:async(h,f)=>{console.log(" Delete multiple days successful"),await Promise.all([e.invalidateQueries({queryKey:["schedules"]}),e.invalidateQueries({queryKey:["schedules-complete"]}),e.invalidateQueries({queryKey:["schedules-for-copy"]}),e.invalidateQueries({queryKey:["schedules-calendar"]}),e.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([e.refetchQueries({queryKey:["schedules"]}),e.refetchQueries({queryKey:["schedules-complete"]})]),yn.success(`Jadwal ${f.days.length} hari berhasil dihapus`)},onError:h=>{console.error("Delete multiple days error:",h),yn.error("Gagal menghapus jadwal multiple hari")}}),l=Se({mutationFn:async({weeks:h,classId:f})=>{console.log(" Deleting week schedules:",{weeks:h,classId:f});const{data:m,error:v}=await W.from("class_schedules").delete().in("academic_week",h).eq("class_id",f);if(v)throw console.error(" Error deleting week schedules:",v),v;return console.log(" Week schedules deleted successfully:",m),m},onSuccess:async(h,f)=>{console.log(" Delete weeks successful"),await Promise.all([e.invalidateQueries({queryKey:["schedules"]}),e.invalidateQueries({queryKey:["schedules-complete"]}),e.invalidateQueries({queryKey:["schedules-for-copy"]}),e.invalidateQueries({queryKey:["schedules-calendar"]}),e.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([e.refetchQueries({queryKey:["schedules"]}),e.refetchQueries({queryKey:["schedules-complete"]})]),yn.success(`Jadwal ${f.weeks.length} pekan berhasil dihapus`)},onError:h=>{console.error("Delete weeks error:",h),yn.error("Gagal menghapus jadwal pekan")}}),c=Se({mutationFn:async({month:h,classId:f})=>{console.log(" Deleting month schedules:",{month:h,classId:f});const m=new Date().getFullYear(),v=new Date(m,h-1,1),p=new Date(m,h,0);console.log(" Month range:",{month:h,monthStart:v,monthEnd:p});const g=r.filter(N=>N.class_id===f),y=[...new Set(g.map(N=>N.academic_week))].sort((N,k)=>N-k);console.log(" All weeks in class:",y);const w={1:[21,22,23,24],2:[25,26,27,28],3:[29,30,31,32],4:[33,34,35,36],5:[37,38,39,40],6:[41,42,43,44],7:[1,2,3,4],8:[5,6,7,8],9:[9,10,11,12],10:[13,14,15,16],11:[17,18,19,20],12:[45,46,47,48]}[h]||[],j=w.filter(N=>y.includes(N));if(console.log(" Mapped weeks for month",h,":",w),console.log(" Existing weeks to delete:",j),j.length===0)throw new Error(`No schedules found for month ${h} in the selected class`);const{data:_,error:S}=await W.from("class_schedules").delete().in("academic_week",j).eq("class_id",f);if(S)throw console.error(" Error deleting month schedules:",S),S;return console.log(" Month schedules deleted successfully:",_),_},onSuccess:async(h,f)=>{console.log(" Delete month successful"),await Promise.all([e.invalidateQueries({queryKey:["schedules"]}),e.invalidateQueries({queryKey:["schedules-complete"]}),e.invalidateQueries({queryKey:["schedules-for-copy"]}),e.invalidateQueries({queryKey:["schedules-calendar"]}),e.invalidateQueries({queryKey:["jp-progress-simple"]})]),await Promise.all([e.refetchQueries({queryKey:["schedules"]}),e.refetchQueries({queryKey:["schedules-complete"]})]),yn.success("Jadwal bulan berhasil dihapus")},onError:h=>{console.error("Delete month error:",h),yn.error("Gagal menghapus jadwal bulan")}}),d=(h,f,m,v)=>{if(console.log(" getPreviewSchedules called:",{dayOrUndefined:h,weekOrWeeksOrMonth:f,targetClassId:m,type:v,allSchedulesCount:(r==null?void 0:r.length)||0}),!r||!m)return console.log(" No schedules or classId available"),[];if(r.length>0){console.log(" Sample schedule data structure:",{firstSchedule:r[0],fieldsAvailable:Object.keys(r[0])});const g=r.reduce((y,b)=>{const w=b.class_id;return y[w]||(y[w]=0),y[w]++,y},{});console.log(" Class distribution in schedules:",g),console.log(" Target class ID:",m)}let p=[];if(v==="day"&&typeof h=="number"&&typeof f=="number")p=r.filter(g=>g.day_of_week===h&&g.academic_week===f&&g.class_id===m),console.log(" Day filter result:",p.length);else if(v==="multiple-days"&&Array.isArray(h)&&typeof f=="number")p=r.filter(g=>h.includes(g.day_of_week)&&g.academic_week===f&&g.class_id===m),console.log(" Multiple days filter result:",p.length);else if(v==="week"&&Array.isArray(f))p=r.filter(g=>f.includes(g.academic_week)&&g.class_id===m),console.log(" Week filter result:",p.length);else if(v==="month"&&typeof f=="number"){const g=(f-1)*4+1,y=f*4;p=r.filter(b=>b.academic_week>=g&&b.academic_week<=y&&b.class_id===m),console.log(" Month filter result:",p.length)}return console.log(" Final filtered schedules:",p.length),p},u=s.isPending||o.isPending||l.isPending||c.isPending;return{deleteDay:s,deleteMultipleDays:o,deleteWeeks:l,deleteMonth:c,getPreviewSchedules:d,isLoading:u}},JEe=({isOpen:t,onClose:e,selectedClassId:r,currentWeek:n=1,onScheduleDeleted:a})=>{var Z,le;const[s,o]=x.useState("day"),[l,c]=x.useState(!1),[d,u]=x.useState(1),[h,f]=x.useState(n),[m,v]=x.useState(new Set([1])),[p,g]=x.useState(!1),[y,b]=x.useState(new Set([n])),[w,j]=x.useState(new Date().getMonth()+1),[_,S]=x.useState(new Set([new Date().getMonth()+1])),[N,k]=x.useState(!1),{academicWeeks:E}=mr(),{deleteDay:P,deleteMultipleDays:T,deleteWeeks:D,deleteMonth:A,getPreviewSchedules:C,isLoading:R}=QEe(r);console.log(" DeleteScheduleModal props:",{isOpen:t,selectedClassId:r,currentWeek:n}),$.useEffect(()=>{t&&(c(!1),console.log(" Modal opened, resetting confirmation"))},[t]);const L=V=>{const Q=new Set(y);Q.has(V)?Q.delete(V):Q.add(V),b(Q)},M=V=>{const Q=new Set(m);Q.has(V)?Q.delete(V):Q.add(V),v(Q)},I=V=>{const Q=new Set(_);Q.has(V)?Q.delete(V):Q.add(V),S(Q)},B=Array.from(y).sort((V,Q)=>V-Q),H=Array.from(m).sort((V,Q)=>V-Q),q=Array.from(_).sort((V,Q)=>V-Q),O=[{value:1,label:"Senin"},{value:2,label:"Selasa"},{value:3,label:"Rabu"},{value:4,label:"Kamis"},{value:5,label:"Jumat"},{value:6,label:"Sabtu"},{value:7,label:"Minggu"}],F=[{value:1,label:"Januari"},{value:2,label:"Februari"},{value:3,label:"Maret"},{value:4,label:"April"},{value:5,label:"Mei"},{value:6,label:"Juni"},{value:7,label:"Juli"},{value:8,label:"Agustus"},{value:9,label:"September"},{value:10,label:"Oktober"},{value:11,label:"November"},{value:12,label:"Desember"}],G=x.useMemo(()=>{var Q;if(console.log(" DeleteScheduleModal: Computing preview schedules",{selectedClassId:r,activeTab:s,targetDay:d,targetDayWeek:h,targetWeeksArray:B,targetMonth:w}),!r)return console.log(" DeleteScheduleModal: No selectedClassId"),[];let V;if(s==="day")p?(V=C(H,h,r,"multiple-days"),console.log(" DeleteScheduleModal Multiple Days Preview:",{targetDaysArray:H,targetDayWeek:h,selectedClassId:r,resultCount:V.length,result:V.slice(0,3)})):(V=C(d,h,r,"day"),console.log(" DeleteScheduleModal Day Preview:",{targetDay:d,targetDayWeek:h,selectedClassId:r,resultCount:V.length,result:V.slice(0,3)}));else if(s==="week")V=C(void 0,B,r,"week"),console.log(" DeleteScheduleModal Week Preview:",{targetWeeksArray:B,selectedClassId:r,resultCount:V.length,result:V.slice(0,3)});else if(N){V=[];for(const ce of q){const xe=C(void 0,ce,r,"month");V=[...V,...xe]}console.log(" DeleteScheduleModal Multiple Months Preview:",{targetMonthsArray:q,selectedClassId:r,resultCount:V.length,result:V.slice(0,3)})}else V=C(void 0,w,r,"month"),console.log(" DeleteScheduleModal Month Preview:",{targetMonth:w,selectedClassId:r,resultCount:V.length,result:V.slice(0,3)});return console.log(" Final preview result:",V.length),V.length>0&&console.log(" First schedule structure for subject name debugging:",{schedule:V[0],subject_name:V[0].subject_name,subjects_name:(Q=V[0].subjects)==null?void 0:Q.name,availableFields:Object.keys(V[0])}),V},[s,d,h,H,p,B,w,q,N,r,C]),Y=async()=>{if(console.log(" Delete button clicked:",{selectedClassId:r,previewSchedulesLength:G.length,confirmDelete:l,activeTab:s}),!r){console.error(" No class selected"),alert("Pilih kelas terlebih dahulu!");return}if(G.length===0){console.error(" No schedules to delete"),alert("Tidak ada jadwal yang ditemukan untuk dihapus!");return}if(!l){console.error(" Please confirm deletion"),alert("Centang konfirmasi terlebih dahulu!");return}try{if(console.log(" Starting delete operation..."),s==="day")p?(console.log(" Deleting multiple days schedules:",{days:H,week:h}),await T.mutateAsync({days:H,week:h,classId:r})):(console.log(" Deleting day schedules:",{day:d,week:h}),await P.mutateAsync({day:d,week:h,classId:r}));else if(s==="week")console.log(" Deleting week schedules:",{weeks:B}),await D.mutateAsync({weeks:B,classId:r});else if(N){console.log(" Deleting multiple months schedules:",{months:q});for(const V of q)await A.mutateAsync({month:V,classId:r})}else console.log(" Deleting month schedules:",{month:w}),await A.mutateAsync({month:w,classId:r});console.log(" Delete operation completed successfully"),a==null||a(),e()}catch(V){console.error(" Delete error:",V),alert(`Gagal menghapus jadwal: ${V.message}`)}};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-6xl max-h-[90vh] bg-background border-border backdrop-blur-sm",children:[i.jsx(wt,{className:"pb-4",children:i.jsxs(_t,{className:"text-xl font-bold text-foreground flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-red-500/20",children:i.jsx(Ut,{className:"h-6 w-6 text-red-500"})}),"Hapus Jadwal"]})}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"w-80 space-y-4",children:[i.jsx(ie,{className:"bg-red-500/10 border-red-500/30",children:i.jsx(oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ii,{className:"h-5 w-5 text-red-500 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-red-600 mb-2",children:"Peringatan!"}),i.jsxs("div",{className:"text-sm text-red-600 space-y-1",children:[i.jsx("p",{children:"Jadwal yang dihapus tidak dapat dikembalikan."}),i.jsxs("p",{className:"font-medium",children:[G.length," jadwal akan dihapus",s==="day"&&p&&H.length>0&&i.jsxs("span",{className:"block text-xs",children:["dari ",H.length," hari"]}),s==="week"&&B.length>0&&i.jsxs("span",{className:"block text-xs",children:["dari ",B.length," pekan"]}),s==="month"&&N&&q.length>0&&i.jsxs("span",{className:"block text-xs",children:["dari ",q.length," bulan"]})]})]})]})]})})}),i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"confirm",checked:l,onCheckedChange:V=>c(V===!0)}),i.jsx("label",{htmlFor:"confirm",className:"text-sm text-foreground",children:"Saya yakin ingin menghapus jadwal"})]})})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(K,{onClick:Y,disabled:R||!l,className:"w-full bg-red-500 hover:bg-red-600 text-white",children:R?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Menghapus..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ut,{className:"h-4 w-4 mr-2"}),"Hapus Jadwal"]})}),i.jsx(K,{variant:"outline",onClick:e,className:"w-full border-border text-foreground hover:bg-accent",children:"Batal"})]})]}),i.jsxs("div",{className:"flex-1 space-y-6",children:[i.jsxs(mo,{value:s,onValueChange:V=>o(V),children:[i.jsxs(Gs,{className:"grid w-full grid-cols-3 bg-muted",children:[i.jsxs(jr,{value:"day",className:"flex items-center gap-2 data-[state=active]:bg-background data-[state=active]:text-foreground",children:[i.jsx(cn,{className:"h-4 w-4"}),"Hapus Hari"]}),i.jsxs(jr,{value:"week",className:"flex items-center gap-2 data-[state=active]:bg-background data-[state=active]:text-foreground",children:[i.jsx(Kv,{className:"h-4 w-4"}),"Hapus Pekan"]}),i.jsxs(jr,{value:"month",className:"flex items-center gap-2 data-[state=active]:bg-background data-[state=active]:text-foreground",children:[i.jsx(ej,{className:"h-4 w-4"}),"Hapus Bulan"]})]}),i.jsx(Sr,{value:"day",className:"space-y-6 mt-6",children:i.jsx("div",{className:"space-y-6",children:i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{className:"pb-3",children:[i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Ve,{className:"h-4 w-4 text-red-500"}),"Hari yang Akan Dihapus (Pilih Multiple)"]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Klik hari untuk memilih/membatalkan. Bisa pilih beberapa hari sekaligus."})]}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"multiple-days-mode",checked:p,onCheckedChange:V=>g(V===!0)}),i.jsx("label",{htmlFor:"multiple-days-mode",className:"text-sm text-foreground",children:"Mode Pilih Multiple Hari"})]}),p?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7 gap-2",children:O.map(V=>i.jsx(K,{variant:m.has(V.value)?"default":"outline",size:"sm",onClick:()=>M(V.value),className:`h-12 text-xs ${m.has(V.value)?"bg-red-500 hover:bg-red-600 text-white border-red-500":"border-border text-foreground hover:bg-accent"}`,children:V.label},V.value))}),H.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Hari Terpilih (",H.length," hari):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:H.map(V=>{var Q;return i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600 border-red-500/30 cursor-pointer hover:bg-red-500/30",onClick:()=>M(V),children:[(Q=O.find(ce=>ce.value===V))==null?void 0:Q.label," "]},V)})})]})]}):i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Hari"}),i.jsxs(Re,{value:d.toString(),onValueChange:V=>u(parseInt(V)),children:[i.jsx(De,{className:"bg-background border-border text-foreground",children:i.jsx($e,{})}),i.jsx(Pe,{className:"bg-popover border-border",children:O.map(V=>i.jsx(he,{value:V.value.toString(),children:V.label},V.value))})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Pekan"}),i.jsxs("div",{className:"text-center mb-3",children:[i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600 border-red-500/30",children:["Pekan ",h]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:((Z=E.find(V=>V.weekNumber===h))==null?void 0:Z.dateRange)||"Tanggal tidak tersedia"})]}),i.jsx("div",{className:"max-h-40 overflow-y-auto border border-border rounded-lg p-3 bg-muted/30 custom-scrollbar",children:i.jsx(Go,{selectedWeek:h,onWeekSelect:f,isSelectionMode:!1,variant:"delete"})})]})]})]})})}),i.jsx(Sr,{value:"week",className:"space-y-6 mt-6",children:i.jsx("div",{className:"space-y-6",children:i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{className:"pb-3",children:[i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Ut,{className:"h-4 w-4 text-red-500"}),"Pekan yang Akan Dihapus (Pilih Multiple)"]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Klik angka pekan untuk memilih/membatalkan. Bisa pilih beberapa pekan sekaligus."})]}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"max-h-48 overflow-y-auto border border-border rounded-lg p-3 bg-muted/30 custom-scrollbar",children:i.jsx(Go,{selectedWeek:0,onWeekSelect:L,selectedTargetWeeks:y,sourceWeek:0,isSelectionMode:!0,variant:"delete"})}),B.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Pekan Terpilih (",B.length," pekan):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(V=>i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600 border-red-500/30 cursor-pointer hover:bg-red-500/30",onClick:()=>L(V),children:["Pekan ",V," "]},V))})]})]})})]})})}),i.jsx(Sr,{value:"month",className:"space-y-6 mt-6",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{className:"pb-3",children:[i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(ej,{className:"h-4 w-4 text-red-500"}),"Bulan yang Akan Dihapus (Pilih Multiple)"]}),i.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Klik bulan untuk memilih/membatalkan. Bisa pilih beberapa bulan sekaligus."})]}),i.jsx(oe,{className:"space-y-4",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"multiple-months-mode",checked:N,onCheckedChange:V=>k(V===!0)}),i.jsx("label",{htmlFor:"multiple-months-mode",className:"text-sm text-foreground",children:"Mode Pilih Multiple Bulan"})]}),N?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:F.map(V=>i.jsx(K,{variant:_.has(V.value)?"default":"outline",size:"sm",onClick:()=>I(V.value),className:`h-12 text-xs ${_.has(V.value)?"bg-red-500 hover:bg-red-600 text-white border-red-500":"border-border text-foreground hover:bg-accent"}`,children:V.label},V.value))}),q.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Bulan Terpilih (",q.length," bulan):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(V=>{var Q;return i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600 border-red-500/30 cursor-pointer hover:bg-red-500/30",onClick:()=>I(V),children:[(Q=F.find(ce=>ce.value===V))==null?void 0:Q.label," "]},V)})})]})]}):i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-foreground mb-2 block",children:"Bulan"}),i.jsxs(Re,{value:w.toString(),onValueChange:V=>j(parseInt(V)),children:[i.jsx(De,{className:"bg-background border-border text-foreground",children:i.jsx($e,{})}),i.jsx(Pe,{className:"bg-popover border-border",children:F.map(V=>i.jsx(he,{value:V.value.toString(),children:V.label},V.value))})]})]})]})})]}),i.jsxs(ie,{className:"bg-card border-border",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-foreground text-sm flex items-center gap-2",children:[i.jsx(Ii,{className:"h-4 w-4 text-yellow-500"}),"Informasi"]})}),i.jsx(oe,{children:i.jsx("div",{className:"text-sm text-foreground space-y-2",children:N&&q.length>0?i.jsxs(i.Fragment,{children:[i.jsx("p",{children:"Semua jadwal pada bulan berikut akan dihapus:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:q.map(V=>{var Q;return i.jsxs("strong",{className:"text-red-600",children:[(Q=F.find(ce=>ce.value===V))==null?void 0:Q.label,V!==q[q.length-1]&&", "]},V)})}),i.jsxs("p",{className:"text-red-600 font-medium",children:["Aksi ini akan menghapus seluruh jadwal dalam ",q.length," bulan!"]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:["Semua jadwal pada bulan ",i.jsx("strong",{className:"text-red-600",children:(le=F.find(V=>V.value===w))==null?void 0:le.label})," akan dihapus."]}),i.jsx("p",{className:"text-red-600 font-medium",children:"Aksi ini akan menghapus seluruh jadwal dalam 1 bulan!"})]})})})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Preview Jadwal yang Akan Dihapus"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600",children:[G.length," jadwal"]}),s==="day"&&p&&H.length>0&&i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600",children:["dari ",H.length," hari"]}),s==="week"&&B.length>0&&i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600",children:["dari ",B.length," pekan"]}),s==="month"&&N&&q.length>0&&i.jsxs(st,{variant:"secondary",className:"bg-red-500/20 text-red-600",children:["dari ",q.length," bulan"]})]})]}),G.length>0?i.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:G.map((V,Q)=>{var ce,xe;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-500/10 rounded-lg border-l-4 border-red-500",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-foreground text-sm",children:V.subject_name||((ce=V.subjects)==null?void 0:ce.name)||"Mata Pelajaran"}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[(xe=O.find(ae=>ae.value===V.day_of_week))==null?void 0:xe.label," ",V.start_time,"-",V.end_time,V.room&&`  ${V.room}`]})]}),i.jsxs(st,{variant:"outline",className:"text-xs border-red-500/30 text-red-600",children:["Pekan ",V.academic_week]})]},V.id||Q)})}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(Ve,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Tidak ada jadwal untuk dihapus"})]})]})]})]})]})})},YEe=(t,e)=>{const r=Ne(),{data:n=[]}=Ye({queryKey:["classes"],queryFn:async()=>{const{data:f,error:m}=await W.from("classes").select("id, name").order("name");if(m)throw m;return f}}),{data:a=[]}=Ye({queryKey:["source-schedules",t],queryFn:async()=>{if(!t)return[];console.log(" Fetching source schedules for class:",t);let{data:f,error:m}=await W.from("schedules_view").select("*").eq("class_id",t).not("day_of_week","is",null);if(m){console.log(" schedules_view failed, trying schedules table:",m);const v=await W.from("class_schedules").select(`
            *,
            schedule_subjects (
              id,
              name,
              session_category_id,
              session_categories (id, name)
            )
          `).eq("class_id",t).not("day_of_week","is",null);f=v.data,m=v.error}if(m)throw console.error(" Error fetching source schedules:",m),m;return console.log(" Found source schedules:",(f==null?void 0:f.length)||0),f||[]},enabled:!!t}),{data:s=[]}=Ye({queryKey:["target-schedules",e],queryFn:async()=>{if(!e)return[];console.log(" Fetching target schedules for class:",e);let{data:f,error:m}=await W.from("schedules_view").select("*").eq("class_id",e).not("day_of_week","is",null);if(m){console.log(" schedules_view failed, trying schedules table:",m);const v=await W.from("class_schedules").select(`
            *,
            schedule_subjects (id, name)
          `).eq("class_id",e).not("day_of_week","is",null);f=v.data,m=v.error}if(m)throw console.error(" Error fetching target schedules:",m),m;return console.log(" Found target schedules:",(f==null?void 0:f.length)||0),f||[]},enabled:!!e}),o=Se({mutationFn:async({sourceClassId:f,targetClassId:m,categories:v,overwriteConflicts:p})=>{console.log(" Starting merge by category:",{sourceClassId:f,targetClassId:m,categories:v,overwriteConflicts:p});let{data:g,error:y}=await W.from("schedules_view").select("*").eq("class_id",f).not("day_of_week","is",null);if(y){console.log(" schedules_view failed, trying schedules table:",y);const S=await W.from("class_schedules").select(`
            *,
            schedule_subjects (
              id,
              name,
              session_category_id,
              session_categories (id, name)
            )
          `).eq("class_id",f).not("day_of_week","is",null);g=S.data,y=S.error}if(y)throw console.error(" Error fetching source schedules:",y),y;if(!g||g.length===0)throw new Error("No schedules found in source class");console.log(" Found source schedules:",g.length);const b=g.filter(S=>{var k;const N=S.session_category_id||((k=S.schedule_subjects)==null?void 0:k.session_category_id);return console.log(" Checking schedule category:",{scheduleId:S.id,categoryId:N,selectedCategories:v}),N&&v.includes(N)});if(console.log(" Filtered schedules by categories:",{total:g.length,filtered:b.length,categories:v,sampleSourceSchedule:g[0],sampleFilteredSchedule:b[0]}),b.length===0)throw new Error("No schedules found in source class for selected categories");if(!p){const S=await c(b,m);if(S.length>0)throw new Error(`Found ${S.length} conflicts. Enable overwrite to proceed.`)}if(p){console.log(" Deleting conflicting schedules...");for(const S of b)await W.from("class_schedules").delete().eq("class_id",m).eq("day_of_week",S.day_of_week).eq("start_time",S.start_time).eq("end_time",S.end_time)}const w=b.map(S=>({class_id:m,subject_id:S.subject_id,day_of_week:S.day_of_week,start_time:S.start_time,end_time:S.end_time,room:S.room,academic_week:S.academic_week,teacher_id:S.teacher_id,time_session_id:S.time_session_id,schedule_date:S.schedule_date,notes:S.notes,tujuan_pembelajaran:S.tujuan_pembelajaran||S.learning_objectives,materi_pembelajaran:S.materi_pembelajaran||S.learning_materials,school_id:S.school_id,academic_year_id:S.academic_year_id,hours_per_week:S.hours_per_week||0,hours_per_year:S.hours_per_year||0}));console.log(" Inserting schedules:",w.length),console.log(" Sample schedule to insert:",w[0]);const{data:j,error:_}=await W.from("class_schedules").insert(w);if(_)throw console.error(" Error inserting schedules:",_),console.error(" Error details:",{message:_.message,details:_.details,hint:_.hint,code:_.code}),_;return console.log(" Successfully merged schedules"),j},onSuccess:(f,m)=>{r.invalidateQueries({queryKey:["schedules"]}),r.invalidateQueries({queryKey:["schedules",m.targetClassId]}),r.invalidateQueries({queryKey:["jp-progress"]}),r.invalidateQueries({queryKey:["jp-progress-simple"]}),yn.success(`Jadwal berhasil di-merge dari ${m.categories.length} kategori`)},onError:f=>{console.error("Merge by category error:",f),yn.error("Gagal merge jadwal per kategori")}}),l=Se({mutationFn:async({sourceClassId:f,targetClassId:m,overwriteConflicts:v})=>{console.log(" Starting merge all schedules:",{sourceClassId:f,targetClassId:m,overwriteConflicts:v});let{data:p,error:g}=await W.from("schedules_view").select("*").eq("class_id",f).not("day_of_week","is",null);if(g){console.log(" schedules_view failed, trying schedules table:",g);const j=await W.from("class_schedules").select(`
            *,
            schedule_subjects (
              id,
              name,
              session_category_id,
              session_categories (id, name)
            )
          `).eq("class_id",f).not("day_of_week","is",null);p=j.data,g=j.error}if(g)throw console.error(" Error fetching source schedules:",g),g;if(!p||p.length===0)throw new Error("No schedules found in source class");if(console.log(" Found source schedules for merge all:",p.length),!v){const j=await c(p,m);if(j.length>0)throw new Error(`Found ${j.length} conflicts. Enable overwrite to proceed.`)}v&&(console.log(" Deleting all existing schedules in target class..."),await W.from("class_schedules").delete().eq("class_id",m));const y=p.map(j=>({class_id:m,subject_id:j.subject_id,day_of_week:j.day_of_week,start_time:j.start_time,end_time:j.end_time,room:j.room,academic_week:j.academic_week,teacher_id:j.teacher_id,time_session_id:j.time_session_id,schedule_date:j.schedule_date,notes:j.notes,tujuan_pembelajaran:j.tujuan_pembelajaran||j.learning_objectives,materi_pembelajaran:j.materi_pembelajaran||j.learning_materials,school_id:j.school_id,academic_year_id:j.academic_year_id,hours_per_week:j.hours_per_week||0,hours_per_year:j.hours_per_year||0}));console.log(" Inserting all schedules:",y.length),console.log(" Sample schedule to insert:",y[0]);const{data:b,error:w}=await W.from("class_schedules").insert(y);if(w)throw console.error(" Error inserting all schedules:",w),console.error(" Error details:",{message:w.message,details:w.details,hint:w.hint,code:w.code}),w;return console.log(" Successfully merged all schedules"),b},onSuccess:(f,m)=>{r.invalidateQueries({queryKey:["schedules"]}),r.invalidateQueries({queryKey:["schedules",m.targetClassId]}),r.invalidateQueries({queryKey:["jp-progress"]}),r.invalidateQueries({queryKey:["jp-progress-simple"]}),yn.success("Semua jadwal berhasil di-merge")},onError:f=>{console.error("Merge all error:",f),yn.error("Gagal merge semua jadwal")}}),c=async(f,m)=>{const v=[];for(const p of f){let{data:g,error:y}=await W.from("schedules_view").select("*").eq("class_id",m).eq("day_of_week",p.day_of_week).eq("start_time",p.start_time).eq("end_time",p.end_time);if(y){const b=await W.from("class_schedules").select(`
            *,
            schedule_subjects (id, name)
          `).eq("class_id",m).eq("day_of_week",p.day_of_week).eq("start_time",p.start_time).eq("end_time",p.end_time);g=b.data,y=b.error}y||g&&g.length>0&&v.push({schedule:p,conflictTime:`${p.start_time}-${p.end_time}`,existingSchedule:g[0]})}return v},d=(f,m,v)=>!a||!f?[]:v==="category"&&m.length>0?a.filter(p=>{var y;const g=p.session_category_id||((y=p.schedule_subjects)==null?void 0:y.session_category_id);return g&&m.includes(g)}):a,u=(f,m)=>{if(!s||!f||!m)return[];const v=[];return f.forEach(p=>{const g=s.find(y=>y.day_of_week===p.day_of_week&&y.academic_week===p.academic_week&&(p.start_time>=y.start_time&&p.start_time<y.end_time||p.end_time>y.start_time&&p.end_time<=y.end_time||p.start_time<=y.start_time&&p.end_time>=y.end_time));g&&v.push({schedule:p,conflictTime:`${p.start_time}-${p.end_time}`,existingSchedule:g})}),v},h=o.isPending||l.isPending;return{mergeByCategory:o,mergeAll:l,getPreviewSchedules:d,checkMergeConflicts:u,classes:n,isLoading:h}},XEe=({isOpen:t,onClose:e,selectedClassId:r,currentWeek:n=1})=>{const[a,s]=x.useState("category"),[o,l]=x.useState(!1),[c,d]=x.useState(!1),[u,h]=x.useState(""),[f,m]=x.useState(r||""),[v,p]=x.useState(new Set),[g,y]=x.useState(""),[b,w]=x.useState(r||""),{data:j=[]}=Ar(),{mergeByCategory:_,mergeAll:S,getPreviewSchedules:N,checkMergeConflicts:k,isLoading:E,classes:P=[]}=YEe(a==="category"?u:g,a==="category"?f:b),T=M=>{const I=new Set(v);I.has(M)?I.delete(M):I.add(M),p(I)},D=Array.from(v),A=x.useMemo(()=>a==="category"?!u||D.length===0?[]:N(u,D,"category")||[]:g?N(g,[],"all")||[]:[],[a,u,g,D]),C=x.useMemo(()=>!A||A.length===0?[]:a==="category"?f?k(A,f)||[]:[]:b?k(A,b)||[]:[],[a,A,f,b]),R=async()=>{if(!o){console.error("Please confirm merge");return}if(!A||A.length===0){console.error("No schedules to merge");return}try{if(a==="category"){if(!u||!f||D.length===0){console.error("Missing required fields for category merge");return}await _.mutateAsync({sourceClassId:u,targetClassId:f,categories:D,overwriteConflicts:c})}else{if(!g||!b){console.error("Missing required fields for all merge");return}await S.mutateAsync({sourceClassId:g,targetClassId:b,overwriteConflicts:c})}e()}catch(M){console.error("Merge error:",M)}},L=M=>{const I=M.toLowerCase();return I.includes("kbm")||I.includes("pelajaran")?i.jsx(Kt,{className:"h-4 w-4"}):I.includes("asrama")||I.includes("keasramaan")?i.jsx(qx,{className:"h-4 w-4"}):I.includes("ekskul")||I.includes("ekstrakurikuler")?i.jsx(vA,{className:"h-4 w-4"}):i.jsx(Ve,{className:"h-4 w-4"})};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-6xl max-h-[90vh] bg-background border-border backdrop-blur-sm",children:[i.jsx(wt,{className:"pb-4",children:i.jsxs(_t,{className:"text-xl font-bold text-foreground flex items-center gap-3",children:[i.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:i.jsx(Vv,{className:"h-6 w-6 text-purple-500"})}),"Merge Jadwal Kelas"]})}),i.jsxs("div",{className:"flex gap-6",children:[i.jsxs("div",{className:"w-80 space-y-4",children:[C&&C.length>0&&i.jsx(ie,{className:"bg-orange-500/10 border-orange-500/30",children:i.jsx(oe,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ii,{className:"h-5 w-5 text-orange-400 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h4",{className:"font-medium text-orange-300 mb-2",children:[C.length," Konflik Jadwal"]}),i.jsxs("div",{className:"text-sm text-orange-200 space-y-1 max-h-40 overflow-y-auto",children:[C&&C.slice(0,5).map((M,I)=>{var B;return i.jsxs("div",{className:"text-xs",children:[" ",M.conflictTime," - ",(B=M.schedule.subjects)==null?void 0:B.name]},I)}),C&&C.length>5&&i.jsxs("div",{className:"text-orange-300 text-xs",children:["... dan ",C.length-5," konflik lainnya"]})]})]})]})})}),i.jsx(ie,{className:"bg-card border-border",children:i.jsxs(oe,{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"overwrite",checked:c,onCheckedChange:d}),i.jsx("label",{htmlFor:"overwrite",className:"text-sm text-foreground",children:"Timpa jadwal yang konflik"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(kr,{id:"confirm",checked:o,onCheckedChange:l}),i.jsx("label",{htmlFor:"confirm",className:"text-sm text-foreground",children:"Saya yakin ingin merge jadwal"})]})]})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(K,{onClick:R,disabled:E||!o||C&&C.length>0&&!c,className:"w-full bg-purple-500 hover:bg-purple-600 text-white",children:E?i.jsxs(i.Fragment,{children:[i.jsx(Gt,{className:"h-4 w-4 mr-2 animate-spin"}),"Merging..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Vv,{className:"h-4 w-4 mr-2"}),"Merge Jadwal"]})}),i.jsx(K,{variant:"outline",onClick:e,className:"w-full border-gray-600 text-gray-300 hover:bg-gray-700",children:"Batal"})]})]}),i.jsxs("div",{className:"flex-1 space-y-6",children:[i.jsxs(mo,{value:a,onValueChange:M=>s(M),children:[i.jsxs(Gs,{className:"grid w-full grid-cols-2 bg-gray-700/50",children:[i.jsxs(jr,{value:"category",className:"flex items-center gap-2 data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300",children:[i.jsx(Kt,{className:"h-4 w-4"}),"Merge Per Kategori"]}),i.jsxs(jr,{value:"all",className:"flex items-center gap-2 data-[state=active]:bg-purple-500/20 data-[state=active]:text-purple-300",children:[i.jsx(tr,{className:"h-4 w-4"}),"Merge Semua"]})]}),i.jsxs(Sr,{value:"category",className:"space-y-6 mt-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs(ie,{className:"bg-gray-700/30 border-gray-600/50",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(tr,{className:"h-4 w-4 text-blue-400"}),"Kelas Sumber"]})}),i.jsx(oe,{children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-300 mb-2 block",children:"Pilih Kelas Sumber"}),i.jsxs(Re,{value:u,onValueChange:h,children:[i.jsx(De,{className:"bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas..."})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:P.map(M=>i.jsx(he,{value:M.id,children:M.name},M.id))})]})]})})]}),i.jsxs(ie,{className:"bg-gray-700/30 border-gray-600/50",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(tr,{className:"h-4 w-4 text-green-400"}),"Kelas Tujuan"]})}),i.jsx(oe,{children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-300 mb-2 block",children:"Pilih Kelas Tujuan"}),i.jsxs(Re,{value:f,onValueChange:m,children:[i.jsx(De,{className:"bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas..."})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:P&&P.length>0?P.map(M=>i.jsx(he,{value:M.id,children:M.name},M.id)):i.jsx(he,{value:"",disabled:!0,children:"Tidak ada kelas tersedia"})})]})]})})]})]}),i.jsxs(ie,{className:"bg-gray-700/30 border-gray-600/50",children:[i.jsxs(_e,{className:"pb-3",children:[i.jsxs(Ee,{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-purple-400"}),"Pilih Kategori yang Akan Di-merge"]}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Pilih kategori jadwal yang ingin dipindahkan dari kelas sumber ke kelas tujuan."})]}),i.jsxs(oe,{children:[i.jsx("div",{className:"grid grid-cols-2 gap-3",children:j&&j.length>0?j.map(M=>i.jsxs("div",{onClick:()=>T(M.id),className:`p-3 rounded-lg border cursor-pointer transition-all duration-200 ${v.has(M.id)?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-gray-700/50 border-gray-600/50 text-gray-300 hover:bg-gray-600/50"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[L(M.name),i.jsx("span",{className:"text-sm font-medium",children:M.name})]}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:M.description||"Kategori jadwal"})]},M.id)):i.jsx("div",{className:"col-span-2 text-center py-4 text-gray-400",children:i.jsx("p",{children:"Tidak ada kategori tersedia"})})}),D.length>0&&i.jsxs("div",{className:"mt-4 space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-300",children:["Kategori Terpilih (",D.length," kategori):"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(M=>{const I=j.find(B=>B.id===M);return i.jsxs(st,{variant:"secondary",className:"bg-purple-500/20 text-purple-300 border-purple-500/30 cursor-pointer hover:bg-purple-500/30",onClick:()=>T(M),children:[I==null?void 0:I.name," "]},M)})})]})]})]})]}),i.jsxs(Sr,{value:"all",className:"space-y-6 mt-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsxs(ie,{className:"bg-gray-700/30 border-gray-600/50",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(tr,{className:"h-4 w-4 text-blue-400"}),"Kelas Sumber"]})}),i.jsx(oe,{children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-300 mb-2 block",children:"Pilih Kelas Sumber"}),i.jsxs(Re,{value:g,onValueChange:y,children:[i.jsx(De,{className:"bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas..."})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:P&&P.length>0?P.map(M=>i.jsx(he,{value:M.id,children:M.name},M.id)):i.jsx(he,{value:"",disabled:!0,children:"Tidak ada kelas tersedia"})})]})]})})]}),i.jsxs(ie,{className:"bg-gray-700/30 border-gray-600/50",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(tr,{className:"h-4 w-4 text-green-400"}),"Kelas Tujuan"]})}),i.jsx(oe,{children:i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-300 mb-2 block",children:"Pilih Kelas Tujuan"}),i.jsxs(Re,{value:b,onValueChange:w,children:[i.jsx(De,{className:"bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih kelas..."})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:P&&P.length>0?P.map(M=>i.jsx(he,{value:M.id,children:M.name},M.id)):i.jsx(he,{value:"",disabled:!0,children:"Tidak ada kelas tersedia"})})]})]})})]})]}),i.jsxs(ie,{className:"bg-gray-700/30 border-gray-600/50",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs(Ee,{className:"text-white text-sm flex items-center gap-2",children:[i.jsx(Ii,{className:"h-4 w-4 text-yellow-400"}),"Informasi Merge Semua"]})}),i.jsx(oe,{children:i.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[i.jsx("p",{children:"Semua jadwal dari kelas sumber akan dipindahkan ke kelas tujuan."}),i.jsx("p",{className:"text-yellow-300 font-medium",children:"Ini akan memindahkan seluruh jadwal tanpa memilih kategori tertentu."}),i.jsx("p",{className:"text-orange-300",children:"Pastikan kelas tujuan sudah benar sebelum melanjutkan!"})]})})]})]})]}),!1,i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Preview Jadwal yang Akan Di-merge"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(st,{variant:"secondary",className:"bg-purple-500/20 text-purple-300",children:[(A==null?void 0:A.length)||0," jadwal"]}),a==="category"&&D.length>0&&i.jsxs(st,{variant:"secondary",className:"bg-purple-500/20 text-purple-300",children:["dari ",D.length," kategori"]})]})]}),A&&A.length>0?i.jsx("div",{className:"max-h-40 overflow-y-auto space-y-2",children:A.map((M,I)=>{var B,H;return i.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-500/10 rounded-lg border-l-4 border-purple-500",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium text-white text-sm",children:((B=M.subjects)==null?void 0:B.name)||"Mata Pelajaran"}),i.jsxs("div",{className:"text-xs text-gray-400",children:[M.day_of_week,"  ",M.start_time,"-",M.end_time,M.room&&`  ${M.room}`]})]}),i.jsx(st,{variant:"outline",className:"text-xs border-purple-500/30 text-purple-300",children:((H=M.category)==null?void 0:H.name)||"Kategori"})]},M.id||I)})}):i.jsxs("div",{className:"text-center py-8 text-gray-400",children:[i.jsx(Ve,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Tidak ada jadwal untuk di-merge"})]})]})]})]})]})})};async function U_(t){if(!t)throw new Error("Token tidak valid");try{const e=atob(t),[r,n]=e.split(":");if(!r||!n)throw new Error("Token format tidak valid");const{data:a,error:s}=await W.from("classes").select("school_id, academic_year_id").eq("id",r).single();let o;s||!a?(o=n,console.log(" Could not fetch class data, assuming new token format")):n===a.school_id?(o=n,console.log(" Detected new token format: class_id:school_id")):n===a.academic_year_id?(o=a.school_id,console.log(" Detected old token format: class_id:academic_year_id, resolved school_id")):(o=n,console.log(" Unknown token format, assuming school_id"));const l={classId:r,schoolId:o};return console.log(" Token decoded successfully:",l),l}catch(e){throw console.error(" Token decode error:",e),new Error("Token tidak valid atau rusak")}}function ZEe(t,e){const r=`${t}:${e}`;return btoa(r)}function eCe(t,e,r){const n=ZEe(t,e);return`${window.location.origin}/external/${n}`}const y5=({selectedClassId:t,onClassChange:e,selectedWeek:r,onWeekSelect:n,onWeekChange:a,onCurrentWeekClick:s,isLoading:o=!1,readOnly:l=!1})=>{const c=a||n||(()=>{}),{data:d}=Ac(),{data:u}=ma(),{academicWeeks:h}=mr(),[f,m]=x.useState(!1),[v,p]=x.useState(!1),[g,y]=x.useState(!1),[b,w]=x.useState(!1),{toast:j}=Ce(),{profile:_}=tt(),S=Ne(),{forceRefresh:N}=Fw(),k=()=>{if(!t||!(_!=null&&_.school_id)){j({title:"Pilih Kelas",description:"Silakan pilih kelas terlebih dahulu untuk membuat link publik",variant:"destructive"});return}try{const D=eCe(t,_.school_id);navigator.clipboard.writeText(D).then(()=>{j({title:"Link Publik Berhasil Dibuat! ",description:"Link telah disalin ke clipboard. Bagikan link ini untuk akses publik tanpa login."})}).catch(()=>{prompt("Link Publik (Copy manual):",D),j({title:"Link Publik Dibuat",description:"Silakan copy link dari dialog yang muncul"})}),console.log(" Public link generated:",{classId:t,schoolId:_.school_id,token,publicUrl:D})}catch(D){console.error(" Error generating public link:",D),j({title:"Gagal Membuat Link",description:"Terjadi kesalahan saat membuat link publik",variant:"destructive"})}};S4({selectedClassId:t||void 0,selectedWeek:r});const E=h.find(D=>D.weekNumber===r),P=()=>{r>1&&c(r-1)},T=()=>{r<h.length&&c(r+1)};return i.jsxs("div",{className:"p-2 space-y-2 bg-transparent relative",children:[i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg",children:[i.jsx("div",{className:"flex items-center gap-4 flex-1",children:i.jsx(m5,{selectedClassId:t,onClassChange:e})}),i.jsxs("div",{className:"flex items-center gap-6 flex-1 justify-center",children:[i.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-none overflow-hidden",children:d!=null&&d.logo_url?i.jsx("img",{src:d.logo_url,alt:"Logo Sekolah",className:"w-full h-full object-cover"}):i.jsx(js,{className:"h-6 w-6 text-foreground"})}),i.jsxs("div",{className:"flex flex-col text-center",children:[i.jsx("div",{className:"text-foreground font-semibold text-base leading-tight",children:(d==null?void 0:d.name)||"SMA Negeri 1 Jakarta"}),i.jsx("div",{className:"text-muted-foreground text-sm leading-tight",children:(d==null?void 0:d.address)||"Jl. Pendidikan No. 123, Jakarta Pusat"}),i.jsxs("div",{className:"text-muted-foreground text-xs",children:["Tahun Akademik ",(u==null?void 0:u.year_name)||"2025/2026"]})]})]}),i.jsxs("div",{className:"flex gap-3 flex-1 justify-end items-center",children:[i.jsx(K,{variant:"outline",size:"sm",onClick:P,disabled:r<=1,className:"bg-background border-border text-foreground hover:bg-primary hover:text-primary-foreground flex items-center justify-center",children:i.jsx(kl,{className:"h-4 w-4"})}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-bold text-foreground px-2 py-1 text-sm",children:["Minggu ",r]}),E&&i.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:E.dateRange})]}),i.jsx(K,{variant:"outline",size:"sm",onClick:T,disabled:r>=h.length,className:"bg-background border-border text-foreground hover:bg-primary hover:text-primary-foreground flex items-center justify-center",children:i.jsx(Oa,{className:"h-4 w-4"})}),s&&i.jsx(K,{variant:"ghost",size:"sm",onClick:s,className:"w-10 h-10 rounded-full bg-background border border-blue-500 text-blue-500 hover:bg-blue-500/10 hover:border-blue-500/70 hover:text-blue-600 transition-all duration-300 transform hover:scale-105",title:"Minggu Ini",children:i.jsx(Ve,{className:"h-4 w-4"})}),!l&&i.jsxs(i.Fragment,{children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>m(!0),className:"w-10 h-10 rounded-full bg-background border border-green-500 text-green-500 hover:bg-green-500/10 hover:border-green-500/70 hover:text-green-600 transition-all duration-300 transform hover:scale-105",title:"Hitung JP",children:i.jsx(Vo,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>p(!0),className:"w-10 h-10 rounded-full bg-background border border-cyan-500 text-cyan-500 hover:bg-cyan-500/10 hover:border-cyan-500/70 hover:text-cyan-600 transition-all duration-300 transform hover:scale-105",title:"Salin Jadwal",children:i.jsx(Qo,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>y(!0),className:"w-10 h-10 rounded-full bg-background border border-red-500 text-red-500 hover:bg-red-500/10 hover:border-red-500/70 hover:text-red-600 transition-all duration-300 transform hover:scale-105",title:"Hapus Jadwal",children:i.jsx(Ut,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>w(!0),className:"w-10 h-10 rounded-full bg-background border border-purple-500 text-purple-500 hover:bg-purple-500/10 hover:border-purple-500/70 hover:text-purple-600 transition-all duration-300 transform hover:scale-105",title:"Merge Jadwal",children:i.jsx(Vv,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:k,className:"w-10 h-10 rounded-full bg-background border border-orange-500 text-orange-500 hover:bg-orange-500/10 hover:border-orange-500/70 hover:text-orange-600 transition-all duration-300 transform hover:scale-105",title:"Buat Link Publik",children:i.jsx(sL,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",className:"w-10 h-10 rounded-full bg-lime-400/0 border border-amber-600 text-amber-600 hover:bg-gray-700/20 hover:border-amber-600/50 hover:text-amber-600 transition-all duration-300 transform hover:scale-105",title:"Setting",children:i.jsx($m,{className:"h-4 w-4"})})]})]})]}),i.jsx(g5,{isOpen:f,onClose:()=>m(!1),selectedClassId:t||void 0,selectedWeek:r}),i.jsx(VEe,{isOpen:v,onClose:()=>p(!1),selectedClassId:t||void 0,currentWeek:r}),i.jsx(JEe,{isOpen:g,onClose:()=>y(!1),selectedClassId:t||void 0,currentWeek:r,onScheduleDeleted:()=>{console.log(" Schedule deleted, refreshing data without page reload..."),S.invalidateQueries({queryKey:["schedules"]}),S.invalidateQueries({queryKey:["schedules-simple"]}),S.invalidateQueries({queryKey:["schedules",t]}),S.invalidateQueries({queryKey:["jp-progress"]}),S.invalidateQueries({queryKey:["jp-progress-simple"]}),N(),console.log(" Data refresh completed, staying on week",r)}}),i.jsx(XEe,{isOpen:b,onClose:()=>w(!1),selectedClassId:t||void 0,currentWeek:r})]})},z_=({selectedWeek:t,onWeekSelect:e,selectedTargetWeeks:r,sourceWeek:n,isSelectionMode:a=!1})=>{const{academicWeeks:s}=mr(),o=x.useRef(null);return $.useEffect(()=>{if(o.current){const l=o.current.querySelector(`[data-week="${t}"]`);l&&l.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[t]),i.jsx("div",{className:"bg-background border-t border-border",children:i.jsx("div",{className:"p-2 w-full bg-card backdrop-blur-xl border border-border rounded-xl shadow-lg relative overflow-hidden",children:i.jsx("div",{className:"relative z-15 p-3 py-[5px] my-0",children:i.jsxs("div",{ref:o,className:"w-full overflow-x-auto pb-2 custom-scrollbar",children:[i.jsx("style",{children:`
                .custom-scrollbar::-webkit-scrollbar {
                  height: 6px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                  background: hsl(var(--muted));
                  border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                  background: hsl(var(--muted-foreground) / 0.3);
                  border-radius: 3px;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                  background: hsl(var(--muted-foreground) / 0.5);
                }
                .dark .custom-scrollbar::-webkit-scrollbar-track {
                  background: rgba(255, 255, 255, 0.1);
                }
                .dark .custom-scrollbar::-webkit-scrollbar-thumb {
                  background: rgba(255, 255, 255, 0.3);
                }
                .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                  background: rgba(255, 255, 255, 0.5);
                }
              `}),i.jsx("div",{className:"flex gap-2",style:{width:`${s.length*60}px`},children:s.map(l=>{const c=t===l.weekNumber,d=r==null?void 0:r.has(l.weekNumber),u=n===l.weekNumber,h=a&&u;return i.jsx(K,{"data-week":l.weekNumber,variant:c&&!a?"default":"outline",size:"sm",onClick:()=>!h&&e(l.weekNumber),disabled:h,className:`h-6 flex items-center justify-center space-x-2 text-xs font-thin rounded-full px-3 transition-all duration-200 ${h?"bg-muted/30 border-muted text-muted-foreground cursor-not-allowed":d&&a?"bg-green-500/80 border-green-400 text-white shadow-lg scale-105 ring-1 ring-green-400/50":c&&!a?"bg-primary border-primary text-primary-foreground":"bg-background border-border text-foreground hover:bg-accent hover:text-accent-foreground hover:scale-105"}`,children:l.weekNumber},l.weekNumber)})})]})})})})},tCe=({selectedWeek:t,selectedClassId:e,selectedDate:r})=>{const{data:n=[],isLoading:a,error:s}=Ks(),{academicWeeks:o}=mr(),l=o.find(d=>d.weekNumber===t),c=x.useMemo(()=>{if(console.log(" WeeklyActivityList Debug (PAGINATED):",{selectedDate:r,selectedClassId:e,selectedWeek:t,totalSchedules:(n==null?void 0:n.length)||0,isLoading:a,error:s,sampleSchedules:n==null?void 0:n.slice(0,3).map(u=>({id:u.id,academic_week:u.academic_week,class_id:u.class_id,subject_name:u.subject_name,day_of_week:u.day_of_week}))}),!r||!e)return console.log(" WeeklyActivityList: Missing selectedDate or selectedClassId"),[];Cr(r,{weekStartsOn:1});const d=n.filter(u=>!(u.class_id!==e||u.academic_week!==t));return console.log(" WeeklyActivityList Filtered (PAGINATED):",{filteredCount:d.length,selectedWeek:t,selectedClassId:e,filteredSchedules:d.map(u=>({id:u.id,subject_name:u.subject_name,day_of_week:u.day_of_week,start_time:u.start_time,end_time:u.end_time,academic_week:u.academic_week}))}),t>=14&&console.log(` MINGGU ${t} ANALYSIS:`,{totalSchedulesInData:(n==null?void 0:n.length)||0,schedulesForThisWeek:(n==null?void 0:n.filter(u=>u.academic_week===t).length)||0,schedulesForThisClass:(n==null?void 0:n.filter(u=>u.class_id===e).length)||0,schedulesForThisWeekAndClass:d.length,weekDistribution:n==null?void 0:n.reduce((u,h)=>(u[h.academic_week]=(u[h.academic_week]||0)+1,u),{}),availableWeeks:[...new Set(n==null?void 0:n.map(u=>u.academic_week))].sort((u,h)=>u-h)}),d.map(u=>{var w,j,_,S,N,k;const h=u.subject_name||u.schedule_subject_name||((w=u.subjects)==null?void 0:w.name)||((j=u.schedule_subjects)==null?void 0:j.name)||((_=u.extracurriculars)==null?void 0:_.name)||"Mata Pelajaran",f=u.subject_color||u.schedule_subject_color||((S=u.subjects)==null?void 0:S.color)||((N=u.schedule_subjects)==null?void 0:N.color)||((k=u.extracurriculars)==null?void 0:k.color)||"#6B7280",m=new Date(`2000-01-01 ${u.start_time}`),p=(new Date(`2000-01-01 ${u.end_time}`).getTime()-m.getTime())/(1e3*60),g=Math.round(p/45),b=["","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"][u.day_of_week||0];return{id:u.id,mapel:h,jp:g,tujuan_pembelajaran:u.tujuan_pembelajaran||"-",materi_pembelajaran:u.materi_pembelajaran||"-",catatan_guru:u.notes||"-",day:b,time:`${u.start_time} - ${u.end_time}`,color:f}}).sort((u,h)=>{const f=["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],m=f.indexOf(u.day)-f.indexOf(h.day);return m!==0?m:u.time.localeCompare(h.time)})},[n,t,e,r]);return e?a?i.jsx("div",{className:"mt-8 p-6 bg-card rounded-lg border border-border",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),i.jsx(Kt,{className:"h-8 w-8 opacity-50"})]}),i.jsx("p",{children:"Memuat daftar kegiatan mingguan..."})]})}):s?i.jsx("div",{className:"mt-8 p-6 bg-red-500/10 border border-red-500/30 rounded-lg",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Kt,{className:"h-12 w-12 mx-auto mb-3 text-red-500"}),i.jsx("div",{className:"text-red-600 mb-2",children:" Gagal memuat daftar kegiatan"}),i.jsx("div",{className:"text-muted-foreground text-sm",children:s.message})]})}):i.jsxs("div",{className:"mt-8 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Kt,{className:"h-6 w-6 text-primary"}),i.jsx("h2",{className:"text-xl font-bold text-foreground",children:"Daftar Kegiatan Mingguan"})]}),l&&i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Minggu ",t,"  ",l.dateRange]})]}),c.length===0?i.jsxs("div",{className:"p-8 bg-card rounded-lg border border-border text-center",children:[i.jsx(Gt,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"Belum ada kegiatan terjadwal untuk minggu ini"})]}):i.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[i.jsx("div",{className:"bg-muted/50 px-6 py-4 border-b border-border",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-foreground",children:[i.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"MAPEL"})]}),i.jsxs("div",{className:"col-span-1 flex items-center space-x-2",children:[i.jsx(Gt,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{children:"JP"})]}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(Kx,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{children:"TUJUAN PEMBELAJARAN"})]}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(Bx,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{children:"MATERI PEMBELAJARAN"})]}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(kA,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{children:"CATATAN GURU"})]})]})}),i.jsx("div",{className:"divide-y divide-border",children:c.map((d,u)=>i.jsx("div",{className:"px-6 py-4 hover:bg-accent/30 transition-colors",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm",children:[i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:d.color}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-foreground",children:d.mapel}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[d.day,"  ",d.time]})]})]})}),i.jsx("div",{className:"col-span-1",children:i.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full bg-blue-500/20 text-blue-600 text-xs font-medium",children:[d.jp," JP"]})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"text-foreground text-sm leading-relaxed",children:d.tujuan_pembelajaran})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"text-foreground text-sm leading-relaxed",children:d.materi_pembelajaran})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"text-foreground text-sm leading-relaxed",children:d.catatan_guru})})]})},d.id))}),i.jsx("div",{className:"bg-muted/30 px-6 py-3 border-t border-border",children:i.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[i.jsxs("span",{children:["Total kegiatan: ",c.length]}),i.jsxs("span",{children:["Total JP: ",c.reduce((d,u)=>d+u.jp,0)]})]})})]})]}):i.jsx("div",{className:"mt-8 p-6 bg-card rounded-lg border border-border",children:i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx(Kt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Pilih kelas untuk melihat daftar kegiatan mingguan"})]})})},rCe=()=>{const[t,e]=x.useState({screenWidth:typeof window<"u"?window.innerWidth:1280,screenHeight:typeof window<"u"?window.innerHeight:720,availableWidth:typeof window<"u"?window.innerWidth:1280,sidebarWidth:0,containerWidth:"100%",isCompact:!1}),r=x.useCallback(()=>{const n=window.innerWidth,a=window.innerHeight,s=document.querySelector('[data-sidebar="sidebar"]');document.querySelector('[data-sidebar="inset"]');const o=document.querySelector("[data-panel-group]");let l=0,c=n;if(s&&s.offsetWidth>0){const v=s.offsetWidth;l+=v,c-=v}let d=0;if(o){const v=o.querySelectorAll("[data-panel]");if(v.length>=2){const p=v[0];p&&p.offsetWidth>0&&(d=p.offsetWidth)}}const h=c-d,f=n<1024||h<600;let m;if(f)m=`${Math.max(c-8,320)}px`;else{const v=Math.min(24,c*.015);m=`${Math.max(c-v,400)}px`}console.log(" Dynamic Layout Calculation:",{screenWidth:n,totalSidebarWidth:l,mainContentWidth:c,scheduleSidebarWidth:d,calendarAvailableWidth:h,containerWidth:m,isCompact:f}),e({screenWidth:n,screenHeight:a,availableWidth:h,sidebarWidth:l,containerWidth:m,isCompact:f})},[]);return x.useEffect(()=>{r(),window.addEventListener("resize",r);const n=new ResizeObserver(()=>{setTimeout(r,100)}),a=document.querySelector('[data-sidebar="sidebar"]');a&&n.observe(a);const s=document.querySelector("[data-panel-group]");s&&(n.observe(s),s.querySelectorAll("[data-panel]").forEach(c=>{n.observe(c)}));const o=()=>{setTimeout(r,150)};return document.addEventListener("mouseup",o),document.addEventListener("touchend",o),()=>{window.removeEventListener("resize",r),n.disconnect(),document.removeEventListener("mouseup",o),document.removeEventListener("touchend",o)}},[r]),t},nCe=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState(1),[c,d]=x.useState(new Date),[u,h]=x.useState(null),[f,m]=x.useState(null),[v,p]=x.useState(null),[g,y]=x.useState(null),{activeAcademicYear:b}=mr(),w=()=>{if(!b)return new Date;const E=new Date(b.start_date);return Tl(Cr(E,{weekStartsOn:1}),o-1)};return{isAddModalOpen:t,isEditModalOpen:r,selectedTimeSlot:a,selectedWeek:o,selectedDate:c,selectedClassId:u,activeSchedule:f,editingSchedule:v,draggedSubject:g,setSelectedClassId:h,setActiveSchedule:m,setDraggedSubject:y,setSelectedTimeSlot:s,setIsAddModalOpen:e,getCurrentWeekDate:w,handleTimeSlotClick:E=>{s(E),e(!0)},handleWeekSelect:E=>{l(E);const P=w();d(P)},handleScheduleEdit:E=>{console.log("Editing schedule:",E),p(E),n(!0)},closeModal:()=>{e(!1),m(null),s(null)},closeEditModal:()=>{n(!1),p(null)}}},H_=()=>Ye({queryKey:["time_sessions"],queryFn:async()=>{const{data:t,error:e}=await W.from("time_sessions").select(`
          *,
          session_categories (
            id,
            name,
            color
          )
        `).order("start_time",{ascending:!0});if(e)throw e;return t}}),aCe=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{var h;const{data:n}=await W.from("profiles").select("school_id").eq("id",(h=(await W.auth.getUser()).data.user)==null?void 0:h.id).single(),{data:a}=await W.from("academic_years").select("id").eq("school_id",n==null?void 0:n.school_id).eq("is_active",!0).single(),{data:s}=await W.from("time_sessions").select("session_number").eq("school_id",n==null?void 0:n.school_id).order("session_number",{ascending:!1}).limit(1),o=s!=null&&s.length?s[0].session_number+1:1,l=r.durationMinutes||0,c=r.jpCount||0,{data:d,error:u}=await W.from("time_sessions").insert({session_name:r.sessionName,start_time:r.startTime,end_time:r.endTime,session_number:o,duration_minutes:l,jp_count:c,category_id:r.categoryId||null,school_id:n==null?void 0:n.school_id,academic_year_id:a==null?void 0:a.id,day_of_week:1}).select().single();if(u)throw u;return d},onSuccess:()=>{t.invalidateQueries({queryKey:["time_sessions"]}),e({title:"Berhasil",description:"Data sesi waktu berhasil ditambahkan"})},onError:r=>{e({title:"Gagal",description:"Gagal menambahkan data sesi waktu: "+r.message,variant:"destructive"})}})},sCe=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,...n})=>{const a={};n.sessionName!==void 0&&(a.session_name=n.sessionName),n.startTime&&(a.start_time=n.startTime),n.endTime&&(a.end_time=n.endTime),n.durationMinutes!==void 0&&(a.duration_minutes=n.durationMinutes||0),n.jpCount!==void 0&&(a.jp_count=n.jpCount||0),n.categoryId!==void 0&&(a.category_id=n.categoryId||null);const{data:s,error:o}=await W.from("time_sessions").update(a).eq("id",r).select().single();if(o)throw o;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["time_sessions"]}),e({title:"Berhasil",description:"Data sesi waktu berhasil diperbarui"})},onError:r=>{e({title:"Gagal",description:"Gagal memperbarui data sesi waktu: "+r.message,variant:"destructive"})}})},iCe=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{const{error:n}=await W.from("time_sessions").delete().eq("id",r);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["time_sessions"]}),e({title:"Berhasil",description:"Data sesi waktu berhasil dihapus"})},onError:r=>{e({title:"Gagal",description:"Gagal menghapus data sesi waktu: "+r.message,variant:"destructive"})}})},b5=()=>{const{data:t}=H_();return(()=>{let r=3,n=22;if(console.log(" Time Sessions Debug:",{timeSessionsCount:(t==null?void 0:t.length)||0,timeSessions:t==null?void 0:t.map(s=>({id:s.id,session_name:s.session_name,start_time:s.start_time,end_time:s.end_time,session_number:s.session_number}))}),t!=null&&t.length){const s=t.map(l=>{var d;const c=((d=l.start_time)==null?void 0:d.slice(0,5))||"03:00";return parseInt(c.split(":")[0])}),o=t.map(l=>{var d;const c=((d=l.end_time)==null?void 0:d.slice(0,5))||"22:00";return parseInt(c.split(":")[0])});r=Math.min(...s),n=Math.max(...o),console.log(" Calculated Hours:",{startTimes:s,endTimes:o,calculatedStartHour:r,calculatedEndHour:n})}const a=[];for(let s=r;s<=n;s++){const o=`${s.toString().padStart(2,"0")}:00`;a.push({id:`slot-${s}`,time:o,displayTime:o,hour:s})}return{slots:a,startHour:r,endHour:n,totalHours:n-r+1}})()},oCe=()=>{const t=x.useRef(null),e=x.useRef(null);x.useRef(null);const{toast:r}=Ce();Ne(),Lw(),Fw(),x.useEffect(()=>{const ee=()=>{var re;console.log(" Force calendar refresh event received");const J=(re=t.current)==null?void 0:re.getApi();J&&(J.refetchEvents(),console.log(" Calendar events refetched via custom event"))};return window.addEventListener("forceCalendarRefresh",ee),()=>{window.removeEventListener("forceCalendarRefresh",ee)}},[]);const{isAddModalOpen:n,isEditModalOpen:a,selectedTimeSlot:s,selectedWeek:o,selectedDate:l,selectedClassId:c,activeSchedule:d,editingSchedule:u,draggedSubject:h,setSelectedClassId:f,setActiveSchedule:m,setDraggedSubject:v,setSelectedTimeSlot:p,setIsAddModalOpen:g,getCurrentWeekDate:y,handleTimeSlotClick:b,handleWeekSelect:w,handleScheduleEdit:j,closeModal:_,closeEditModal:S}=nCe(),{data:N,isLoading:k,error:E}=Ks();console.log(" Schedule Data Status (PAGINATED):",{selectedWeek:o,selectedClassId:c,schedulesCount:(N==null?void 0:N.length)||0,isLoading:k,error:E,usingPagination:!0});const P=X4(),T=Z4(),{startHour:D,endHour:A,totalHours:C}=b5(),{data:R}=ma(),{academicWeeks:L}=mr(),{data:M=[]}=Ar(),{containerWidth:I,isCompact:B}=rCe();x.useEffect(()=>{const J=setTimeout(()=>{const re=document.querySelector(".expandable-category-sidebar");re&&!e.current&&(e.current=new yke(re,{itemSelector:"[data-subject]",eventData:function(ue){const pe=ue.dataset.subject;if(pe)try{const ve=JSON.parse(pe),ke=ve.color||"#6B7280";return console.log(" Draggable Event Data:",{name:ve.name,id:ve.id,color:ke,type:ve.type,source:ve.source}),{title:ve.name,id:ve.id,duration:"00:45:00",backgroundColor:ke,borderColor:ke,textColor:"#FFFFFF",extendedProps:{subject:ve,type:"external"}}}catch(ve){console.error("Error parsing subject data:",ve)}return{title:ue.textContent||"Unknown Subject",duration:"00:45:00",backgroundColor:"#6B7280",borderColor:"#6B7280",textColor:"#FFFFFF"}}}),console.log(" External draggable initialized"))},100);return()=>{clearTimeout(J),e.current&&(e.current.destroy(),e.current=null)}},[c]);const H=x.useMemo(()=>{const ue=140+C*2*30;return Math.max(ue+40,500)},[C]),q=x.useMemo(()=>{const ee=`${D.toString().padStart(2,"0")}:00:00`,J=`${(A+1).toString().padStart(2,"0")}:00:00`;return console.log(" Calendar Time Range Debug:",{startHour:D,endHour:A,totalHours:C,slotMinTime:ee,slotMaxTime:J,calendarHeight:H,slotHeight:30,total30MinSlots:C*2,expectedGridHeight:C*2*30}),{slotMinTime:ee,slotMaxTime:J}},[D,A,C,H]),O=x.useMemo(()=>{const ee=y();return console.log(" Calendar Date Update:",{selectedWeek:o,weekDate:ee.toISOString().split("T")[0],academicYear:R==null?void 0:R.year_name}),ee},[o,y,R]);x.useEffect(()=>{var J;const ee=(J=t.current)==null?void 0:J.getApi();ee&&O&&(console.log(" Updating calendar to week:",o,"date:",O),ee.gotoDate(O))},[o,O]),x.useEffect(()=>{var J;const ee=(J=t.current)==null?void 0:J.getApi();ee&&N&&(console.log(" AGGRESSIVE Real-time calendar refresh triggered by schedules change:",N.length,"schedules"),console.log(" Schedules data:",N),ee.refetchEvents(),setTimeout(()=>{ee.refetchEvents()},100),setTimeout(()=>{ee.refetchEvents()},500))},[N]),x.useEffect(()=>{var J;const ee=(J=t.current)==null?void 0:J.getApi();ee&&M&&(console.log(" Real-time calendar refresh triggered by session categories change:",M.length,"categories"),ee.refetchEvents())},[M]);const F=x.useMemo(()=>{if(console.log(" CALENDAR EVENTS PROCESSING:",{schedulesLength:(N==null?void 0:N.length)||0,selectedWeek:o,selectedClassId:c,rawSchedules:N}),!c)return console.log(" No class selected - showing empty calendar to prevent UI overlap"),[];if(!N)return console.log(" No schedules data available"),[];const ee=N.filter(re=>{const ue=parseInt(re.academic_week),pe=parseInt(o.toString()),ve=ue===pe,ke=!c||re.class_id===c;return ue===pe&&console.log(" FILTERING DEBUG - WEEK MATCH FOUND:",{scheduleId:re.id,scheduleWeek:re.academic_week,scheduleWeekInt:ue,selectedWeek:o,selectedWeekInt:pe,weekMatch:ve,scheduleClassId:re.class_id,selectedClassId:c,classMatch:ke,startTime:re.start_time,endTime:re.end_time,subjectName:re.subject_name,className:re.class_name,finalResult:ve&&ke}),ve&&ke});if(console.log(" FILTERED SCHEDULES:",{totalSchedules:N.length,filteredCount:ee.length,selectedWeek:o,selectedClassId:c,filteredSchedules:ee.slice(0,3)}),ee.length===0){console.log(" TIDAK ADA HASIL untuk minggu:",o),console.log(" Raw schedules sample:",N==null?void 0:N.slice(0,5)),console.log(" Schedules untuk minggu ini:",N==null?void 0:N.filter(pe=>pe.academic_week===o)),console.log(" Schedules untuk kelas ini:",N==null?void 0:N.filter(pe=>pe.class_id===c));const re=N==null?void 0:N.reduce((pe,ve)=>(pe[ve.academic_week]=(pe[ve.academic_week]||0)+1,pe),{});console.log(" DISTRIBUSI MINGGU:",re);const ue=N==null?void 0:N.filter(pe=>pe.academic_week>=1&&pe.academic_week<=24).slice(0,5);console.log(" SAMPLE SEMUA MINGGU 1-24:",ue)}const J=ee.map(re=>{let ue,pe;if(re.subject_name)ue={id:re.subject_id,name:re.subject_name||re.schedule_subject_name,code:re.subject_code||re.schedule_subject_code,color:re.subject_color||re.schedule_subject_color},pe={id:re.session_category_id,name:re.session_category_name,color:re.session_category_color};else{console.log(" RAW SCHEDULE DATA ANALYSIS:",{schedule_id:re.id,subject_id:re.subject_id,hasSubjects:!!re.subjects,hasScheduleSubjects:!!re.schedule_subjects,hasExtracurriculars:!!re.extracurriculars,subjectsData:re.subjects,scheduleSubjectsData:re.schedule_subjects,extracurricularsData:re.extracurriculars,allKeys:Object.keys(re)});const Ot=re.subjects||re.schedule_subjects||re.extracurriculars,Dr=(Ot==null?void 0:Ot.session_categories)||(Ot==null?void 0:Ot.session_category);let Fr="unknown";re.subjects?Fr="subjects":re.schedule_subjects?Fr="schedule_subjects":re.extracurriculars&&(Fr="extracurriculars"),console.log(` Processing ${Fr} data for schedule:`,{schedule_id:re.id,subject_id:re.subject_id,subjectType:Fr,subjectData:Ot,categoryData:Dr,subjectDataExists:!!Ot,subjectName:Ot==null?void 0:Ot.name}),ue={id:re.subject_id,name:(Ot==null?void 0:Ot.name)||`Unknown ${Fr}`,code:Ot==null?void 0:Ot.code,color:(Ot==null?void 0:Ot.color)||"#6B7280"},pe={id:Dr==null?void 0:Dr.id,name:Dr==null?void 0:Dr.name,color:Dr==null?void 0:Dr.color},console.log(" Processed subject data:",{subject:ue,category:pe,originalType:Fr})}const ve=w4(ue,pe);console.log(` Calendar Event "${ue==null?void 0:ue.name}" - Colors:`,{subjectColor:ue==null?void 0:ue.color,categoryColor:pe==null?void 0:pe.color,finalColors:ve,scheduleStructure:re.subject_name?"schedules_view":"manual_joins",rawScheduleData:{id:re.id,subject_id:re.subject_id,subjects:re.subjects,schedule_subjects:re.schedule_subjects,extracurriculars:re.extracurriculars}});const ke=y(),ot=new Date(ke);ot.setDate(ot.getDate()+(re.day_of_week-1));const dt=new Date(ot),[we,ze]=re.start_time.split(":");dt.setHours(parseInt(we),parseInt(ze));const Ie=new Date(ot),[gr,Tn]=re.end_time.split(":");Ie.setHours(parseInt(gr),parseInt(Tn));const fn=(Ie.getTime()-dt.getTime())/(1e3*60),Qa=fn/30,Dn=Qa*30;console.log(` Event "${ue==null?void 0:ue.name}" Duration Debug:`,{startTime:re.start_time,endTime:re.end_time,durationMinutes:fn,expectedSlots:Qa,expectedHeightPx:`${Dn}px`,dayOfWeek:re.day_of_week});const zt={id:re.id,title:(ue==null?void 0:ue.name)||"Mata Pelajaran",start:dt.toISOString(),end:Ie.toISOString(),backgroundColor:ve.background,borderColor:ve.border,textColor:ve.text,extendedProps:{schedule:re,teacher:{id:re.teacher_id,full_name:re.teacher_name},class:{id:re.class_id,name:re.class_name},subject:ue,category:pe,originalColor:ve.background}};return console.log(" CREATED CALENDAR EVENT:",zt),zt});return console.log(" FINAL CALENDAR EVENTS:",{eventsCount:J.length,events:J}),J},[N,o,c,y,M]),G=ee=>{const J=ee.event.extendedProps.schedule;j(J)},Y=ee=>{var ze,Ie;if(!c){r({title:" Gagal",description:"Pilih kelas terlebih dahulu",variant:"destructive"});const gr=(ze=t.current)==null?void 0:ze.getApi();gr&&gr.unselect();return}const J=new Date(ee.start),re=J.getDay(),ue=re===0?7:re,pe=ee.start.toTimeString().slice(0,5),ve=ee.end.toTimeString().slice(0,5),ke=gu(pe),ot=gu(ve),dt={dayIndex:ue-1,date:J.toISOString().split("T")[0],academicWeek:o,time:ke,start_time:ke,end_time:ot,source:"calendar_select"};$h("Calendar Selection Time Snapping",{rawStartTime:pe,rawEndTime:ve,snappedStartTime:ke,snappedEndTime:ot}),p(dt),g(!0);const we=(Ie=t.current)==null?void 0:Ie.getApi();we&&we.unselect()},Z=async ee=>{const J=ee.event.extendedProps.schedule,re=new Date(ee.event.start),ue=re.getDay(),pe=ue===0?7:ue,ve=v5(J.start_time,J.end_time),ke=ee.event.start.toTimeString().slice(0,5),ot=vC(ve,ke),dt=ot.startTime,we=ot.endTime;$h("Event Drag - 5-Minute Snapping",{originalStartTime:J.start_time,originalEndTime:J.end_time,originalDuration:ve,rawNewStartTime:ke,snappedStartTime:dt,snappedEndTime:we,snapDelta:`${ke}  ${dt}`});const ze={class_id:J.class_id,day_of_week:pe,start_time:dt,end_time:we,academic_week:o};if(Jh(N||[],ze,J.id)){ee.revert(),r({title:" Konflik Jadwal",description:`Jadwal bertabrakan dengan jadwal lain pada ${dt}-${we}`,variant:"destructive"});return}try{await T.mutateAsync({id:J.id,day_of_week:pe,start_time:dt,end_time:we,schedule_date:re.toISOString().split("T")[0],academic_week:o}),r({title:" Berhasil",description:"Jadwal berhasil dipindahkan"})}catch(Ie){console.error("Error moving schedule:",Ie),ee.revert(),r({title:" Gagal",description:"Gagal memindahkan jadwal",variant:"destructive"})}},le=async ee=>{const J=ee.event.extendedProps.schedule,re=ee.event.end.toTimeString().slice(0,5);console.log(" Event Resize Debug:",{originalStartTime:J.start_time,originalEndTime:J.end_time,rawNewEndTime:re,eventId:J.id,eventTitle:ee.event.title});const ue=KEe(J.start_time,J.end_time,re),pe=ue.startTime,ve=ue.endTime,ke=ue.duration;if(ke<5){ee.revert(),r({title:" Durasi Terlalu Pendek",description:"Durasi minimum adalah 5 menit",variant:"destructive"});return}$h("Event Resize - 5-Minute Snapping",{originalStartTime:J.start_time,originalEndTime:J.end_time,rawNewEndTime:re,snappedStartTime:pe,snappedEndTime:ve,newDuration:ke,snapDelta:`${re}  ${ve}`});const ot={class_id:J.class_id,day_of_week:J.day_of_week,start_time:pe,end_time:ve,academic_week:o};if(Jh(N||[],ot,J.id)){ee.revert(),r({title:" Konflik Jadwal",description:`Jadwal bertabrakan dengan jadwal lain pada ${pe}-${ve}`,variant:"destructive"});return}try{await T.mutateAsync({id:J.id,start_time:pe,end_time:ve}),r({title:" Berhasil",description:`Jadwal berhasil diubah menjadi ${pe}-${ve}`})}catch(dt){console.error("Error resizing schedule:",dt),ee.revert(),r({title:" Gagal",description:"Gagal mengubah durasi jadwal",variant:"destructive"})}},V=ee=>{console.log(" Resize Start:",ee.event.title),ee.el.classList.add("fc-event-resizing-preview")},Q=ee=>{console.log(" Resize Stop:",ee.event.title),ee.el.classList.remove("fc-event-resizing-preview")},ce=ee=>{if(ee.view.type==="dayGridMonth"&&ee.events.length>0){const J=ee.el.querySelector(".fc-daygrid-day-number");if(J){J.style.position="relative",J.style.zIndex="1";const re=document.createElement("div");re.style.width="26px",re.style.height="26px",re.style.backgroundColor="#EC4899",re.style.borderRadius="50%",re.style.position="absolute",re.style.top="50%",re.style.left="50%",re.style.transform="translate(-50%, -50%)",re.style.zIndex="-1",J.appendChild(re)}}},xe=()=>{const ee=L.find(J=>J.isCurrentWeek);ee&&w(ee.weekNumber)},ae=async ee=>{var Ie,gr,Tn,fn,Qa,Dn;if(!c){r({title:" Gagal",description:"Pilih kelas terlebih dahulu",variant:"destructive"});return}let J=null;if(console.log(" Drop event data:",{event:ee.event,draggedEl:ee.draggedEl,extendedProps:(Ie=ee.event)==null?void 0:Ie.extendedProps,dataset:(gr=ee.draggedEl)==null?void 0:gr.dataset}),(fn=(Tn=ee.event)==null?void 0:Tn.extendedProps)!=null&&fn.subject)J=ee.event.extendedProps.subject,console.log(" Using FullCalendar Draggable data:",J);else if((Dn=(Qa=ee.draggedEl)==null?void 0:Qa.dataset)!=null&&Dn.subject)try{J=JSON.parse(ee.draggedEl.dataset.subject),console.log(" Using HTML5 drag data:",J),(J.type==="schedule_subject"||J.session_category_id)&&(J={...J,id:J.id,name:J.name,color:J.color,type:"schedule_subject",source:"sidebar"})}catch(zt){console.error(" Failed to parse subject data:",zt)}else ee.event&&(J={id:ee.event.id,name:ee.event.title,color:ee.event.backgroundColor},console.log(" Using basic event data:",J));if(!(J!=null&&J.id)){console.error(" No valid subject data found"),r({title:" Gagal",description:"Data mata pelajaran tidak valid",variant:"destructive"});return}console.log(" Subject data extracted:",{id:J.id,name:J.name,type:J.type||"unknown",source:J.source||"unknown"});const re=new Date(ee.dateStr||ee.date),ue=re.getDay(),pe=ue===0?7:ue,ke=(ee.date||new Date(ee.dateStr)).toTimeString().slice(0,5),ot=45,dt=vC(ot,ke),we=dt.startTime,ze=dt.endTime;$h("External Drag & Drop - 5-Minute Snapping",{rawDropTime:ke,snappedStartTime:we,snappedEndTime:ze,defaultDuration:ot,subject:J.name,type:J.type,source:J.source,snapDelta:`${ke}  ${we}`});try{let zt=J.id,Ot=J.name,Dr=J.color||"#6B7280";console.log(" Analyzing subject data for correct ID and styling:",{id:J.id,name:Ot,color:Dr,type:J.type,source:J.source,hasSessionCategoryId:!!J.session_category_id}),J.type==="schedule_subject"||J.session_category_id?(zt=J.id,console.log(" Using schedule_subject ID:",zt)):(J.type==="subject"||!J.type&&!J.session_category_id)&&(zt=J.id,console.log(" Using legacy subject ID:",zt)),J.type==="mata_pelajaran"||J.type==="schedule_subject"?(zt=J.id,console.log(" Using schedule_subject ID:",zt)):J.type==="ekstrakurikuler"?(zt=J.id,console.log(" Using ekstrakurikuler ID directly:",zt)):(zt=J.id,console.log(" Using direct subject ID:",zt));let Fr=zt;(J.type==="schedule_subject"||J.source==="schedule_subjects")&&(Fr=J.id,console.log(" Using original schedule_subject ID for schedule:",Fr));const Oc={subject_id:Fr,class_id:c,day_of_week:pe,start_time:we,end_time:ze,academic_week:o,schedule_date:re.toISOString().split("T")[0],teacher_id:null,room:"",notes:""};if(Jh(N||[],Oc)){r({title:" Konflik Jadwal",description:`Jadwal bertabrakan dengan jadwal lain pada ${we}-${ze}`,variant:"destructive"});return}console.log(" Creating schedule with enhanced data:",Oc);try{await P.mutateAsync(Oc),r({title:" Berhasil",description:`Jadwal ${Ot} berhasil ditambahkan`}),console.log(" Schedule created successfully via drag and drop")}catch(xo){console.error(" Error creating schedule via drag and drop:",xo),r({title:" Gagal",description:`Gagal menambahkan jadwal: ${xo.message}`,variant:"destructive"});return}ee.draggedEl&&ee.draggedEl.parentNode&&(ee.draggedEl.style.opacity="0.5",setTimeout(()=>{ee.draggedEl.parentNode&&(ee.draggedEl.style.opacity="1")},1e3))}catch(zt){console.error("Error creating schedule from drop:",zt),r({title:" Gagal",description:`Gagal menambahkan jadwal: ${zt.message||"Unknown error"}`,variant:"destructive"})}};return i.jsxs("div",{className:"bg-card/40 backdrop-blur-sm border border-border rounded-2xl overflow-hidden mx-auto",style:{maxWidth:I,transition:"max-width 0.3s ease-in-out"},children:[i.jsxs("div",{className:"relative z-10 flex flex-col",style:{minHeight:`${H}px`},children:[i.jsx(y5,{selectedClassId:c,onClassChange:f,selectedWeek:o,onWeekSelect:w,onCurrentWeekClick:xe}),i.jsx(z_,{selectedWeek:o,onWeekSelect:w}),k&&i.jsx("div",{className:"flex items-center justify-center py-8 bg-muted/50 rounded-lg mx-4 mb-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),i.jsx("span",{className:"text-muted-foreground text-sm",children:"Memuat data jadwal dengan paginasi..."})]})}),E&&i.jsx("div",{className:"flex items-center justify-center py-8 bg-red-900/20 border border-red-500/30 rounded-lg mx-4 mb-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-red-400 text-sm mb-2",children:" Gagal memuat data jadwal"}),i.jsx("div",{className:"text-muted-foreground text-xs",children:E.message})]})}),i.jsx("div",{className:"flex-1",children:i.jsxs(Jke,{direction:"horizontal",className:"h-full",children:[i.jsx(rC,{defaultSize:B?35:22,minSize:B?30:18,maxSize:B?50:35,className:"my-0 transition-all duration-300",children:i.jsx(aNe,{selectedClassId:c,selectedWeek:o,onSubjectDrag:()=>{}})}),i.jsx(Yke,{withHandle:!0,className:"bg-border hover:bg-accent transition-colors duration-300 w-1 my-0"}),i.jsx(rC,{defaultSize:B?65:78,className:"transition-all duration-300",children:i.jsxs("div",{className:"h-full flex flex-col px-2 py-2 relative",children:[!c&&i.jsx("div",{className:"absolute inset-10 z-50 p-32 flex items-top justify-center -mr-7 mx-0 ml-3 bg-gray-900/80 backdrop-blur-sm rounded-lg",children:i.jsxs("div",{className:"h-40 bg-white dark:bg-gray-800 rounded-lg p-4 max-w-sm mx-4 text-center shadow-2xl border border-gray-200 dark:border-gray-700",children:[i.jsx("div",{className:"mb-3",children:i.jsx("div",{className:"w-12 h-12 mx-auto bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center",children:i.jsx("svg",{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),i.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white mb-2",children:"Pilih Kelas Terlebih Dahulu"}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:' Gunakan dropdown "Filter Kelas"'})]})}),i.jsx("div",{className:"flex-1 calendar-container",style:{minHeight:`${H-140}px`,height:"auto",opacity:c?1:.3},children:i.jsx(yo,{ref:t,plugins:[Pc,lp,bke],initialView:"timeGridWeek",initialDate:O,headerToolbar:!1,events:F,editable:!0,eventStartEditable:!0,eventDurationEditable:!0,droppable:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,weekends:!0,height:"auto",locale:Ku,slotMinTime:q.slotMinTime,slotMaxTime:q.slotMaxTime,slotDuration:"00:30:00",slotLabelInterval:"01:00:00",snapDuration:"00:01:00",allDaySlot:!1,eventMinHeight:15,eventShortHeight:30,slotEventOverlap:!1,expandRows:!0,stickyHeaderDates:!1,viewDidMount:ee=>{console.log(" ELITE Calendar Mount Analysis:",{view:ee.view.type,timeRange:q,totalSlots:C,expectedEndTime:`${A}:00`,calendarDimensions:{width:ee.el.offsetWidth,height:ee.el.offsetHeight,scrollHeight:ee.el.scrollHeight}}),ee.el.querySelectorAll(".fc-timegrid-slot").forEach(ke=>{ke.style.height="30px",ke.style.minHeight="30px",ke.style.maxHeight="30px"}),ee.el.querySelectorAll(".fc-timegrid-event").forEach(ke=>{ke.style.margin="0",ke.style.boxSizing="border-box"});const ue=ee.el.querySelectorAll(".fc-timegrid-slot"),pe=ue[ue.length-1];console.log(" Grid Completeness Check:",{totalSlotsRendered:ue.length,expectedSlots:C,lastSlotVisible:pe?pe.offsetHeight>0:!1,gridComplete:ue.length>=C});const ve=ee.el.querySelector(".fc-scroller");ve&&console.log(" Performance Metrics:",{scrollerOverflow:getComputedStyle(ve).overflow,scrollerHeight:ve.offsetHeight,contentHeight:ve.scrollHeight,isContentClipped:ve.scrollHeight>ve.offsetHeight})},eventClick:G,select:Y,eventDrop:Z,eventResize:le,eventResizeStart:V,eventResizeStop:Q,dayCellDidMount:ce,eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},businessHours:{daysOfWeek:[1,2,3,4,5,6,0],startTime:q.slotMinTime.slice(0,5),endTime:q.slotMaxTime.slice(0,5)},selectConstraint:"businessHours",eventConstraint:"businessHours",dragScroll:!0,eventOverlap:!1,selectOverlap:!1,drop:ae})})]})})]})}),i.jsx("div",{className:"px-4 sm:px-6",children:i.jsx(tCe,{selectedWeek:o,selectedClassId:c,selectedDate:y()})})]}),i.jsx(zEe,{isOpen:n,onClose:_,selectedTimeSlot:s,selectedDate:y(),selectedClassId:c,onScheduleCreated:()=>{console.log(" Schedule created"),_()}}),i.jsx(HEe,{isOpen:a,onClose:S,schedule:u,onScheduleUpdated:()=>{console.log(" Schedule updated")}})]})},yC=()=>{const t=x.useRef(null),[e,r]=$.useState(""),[n,a]=$.useState(1);Yt();const{data:s}=ma(),{academicWeeks:o}=mr(),{data:l,isLoading:c}=YO(n,e),d=x.useMemo(()=>o==null?void 0:o.find(m=>m.week_number===n),[o,n]),u=x.useMemo(()=>d!=null&&d.start_date?new Date(d.start_date):new Date(2025,0,6),[d]),h=x.useMemo(()=>!l||!d?[]:l.map(m=>{const v=new Date(d.start_date);v.setDate(v.getDate()+(m.day_of_week-1));const[p,g]=m.start_time.split(":").map(Number),[y,b]=m.end_time.split(":").map(Number),w=new Date(v);w.setHours(p,g,0,0);const j=new Date(v);return j.setHours(y,b,0,0),{id:m.id,title:m.subject_name,start:w.toISOString(),end:j.toISOString(),backgroundColor:m.subject_color||"#3b82f6",borderColor:m.subject_color||"#3b82f6",textColor:"#ffffff",extendedProps:{teacher:m.teacher_name,class:m.class_name,subject:m.subject_name,time:`${m.start_time} - ${m.end_time}`,readonly:!0}}}),[l,d]),f=x.useMemo(()=>{if(!l||l.length===0)return{slotMinTime:"07:00:00",slotMaxTime:"17:00:00"};const m=l.flatMap(b=>[b.start_time,b.end_time]),v=m.reduce((b,w)=>w<b?w:b),p=m.reduce((b,w)=>w>b?w:b),g=Math.max(6,parseInt(v.split(":")[0])-1),y=Math.min(22,parseInt(p.split(":")[0])+1);return{slotMinTime:`${g.toString().padStart(2,"0")}:00:00`,slotMaxTime:`${y.toString().padStart(2,"0")}:00:00`}},[l]);return i.jsxs("div",{className:"space-y-6",children:[i.jsx(ie,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:i.jsx(_e,{children:i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(iL,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsxs(Ee,{className:"text-xl font-bold text-blue-900 flex items-center gap-2",children:["Jadwal Pelajaran",i.jsxs(st,{variant:"secondary",className:"bg-blue-100 text-blue-700",children:[i.jsx(fL,{className:"h-3 w-3 mr-1"}),"Read Only"]})]}),i.jsxs("p",{className:"text-blue-700 text-sm",children:["Lihat jadwal pelajaran - ",s==null?void 0:s.year_name]})]})]})})})}),i.jsx(ie,{children:i.jsx(oe,{className:"p-6",children:i.jsx(y5,{selectedClassId:e,onClassChange:r,selectedWeek:n,onWeekChange:a,isLoading:c,readOnly:!0})})}),o&&i.jsx(z_,{academicWeeks:o,selectedWeek:n,onWeekChange:a,activeAcademicYear:s}),i.jsx(ie,{children:i.jsx(oe,{className:"p-6",children:e?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{className:"h-4 w-4 text-gray-600"}),i.jsxs("span",{className:"text-sm font-medium",children:["Minggu ",n," - ",d&&be(new Date(d.start_date),"dd MMMM yyyy",{locale:bt})]})]}),i.jsxs(st,{variant:"outline",children:[h.length," Jadwal"]})]}),i.jsx("div",{className:"calendar-container",style:{minHeight:"600px"},children:i.jsx(yo,{ref:t,plugins:[Pc,lp],initialView:"timeGridWeek",initialDate:u,headerToolbar:!1,events:h,editable:!1,selectable:!1,selectMirror:!1,dayMaxEvents:!0,weekends:!0,height:"auto",locale:Ku,slotMinTime:f.slotMinTime,slotMaxTime:f.slotMaxTime,slotDuration:"00:30:00",slotLabelInterval:"01:00:00",allDaySlot:!1,eventMinHeight:15,eventShortHeight:30,eventDisplay:"block",nowIndicator:!0,eventClassNames:"readonly-event",eventClick:m=>{const v=m.event.extendedProps;alert(`
 ${v.subject}
 Guru: ${v.teacher||"Belum ditentukan"}
 Kelas: ${v.class}
 Waktu: ${v.time}
                    `.trim())}})})]}):i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx(Ve,{className:"h-16 w-16 mx-auto mb-4 text-gray-300"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pilih Kelas"}),i.jsx("p",{children:"Silakan pilih kelas untuk melihat jadwal pelajaran"})]})})}),i.jsx("style",{jsx:!0,children:`
        .readonly-event {
          cursor: pointer !important;
          opacity: 0.9;
        }
        .readonly-event:hover {
          opacity: 1;
          transform: scale(1.02);
          transition: all 0.2s ease;
        }
      `})]})},lCe=({schedules:t,activeAcademicYear:e,academicWeeks:r,selectedSubjectName:n})=>{const a=t.length,s=new Set;t.forEach(f=>{if(f.academic_week&&f.day_of_week&&r.length>0){const m=r.find(v=>v.weekNumber===f.academic_week);if(m){const v=m.startDate instanceof Date?m.startDate:new Date(m.startDate),p=f.day_of_week===7?6:f.day_of_week-1,g=new Date(v);g.setDate(v.getDate()+p);const y=g.toISOString().split("T")[0];s.add(y)}}f.schedule_date&&s.add(f.schedule_date)});const o=s.size,l=t.reduce((f,m)=>{const v=m.start_time||"00:00",p=m.end_time||"00:00",[g,y]=v.split(":").map(Number),[b,w]=p.split(":").map(Number),j=b*60+w-(g*60+y);return f+(j>0?j:0)},0),c=Math.round(l/60*10)/10,d=Math.round(l/45);console.log(" Print Layout Debug:",{totalSchedules:a,activeDays:o,totalMinutes:l,totalHours:c,totalJP:d,sampleSchedule:t[0],allSchedules:t,academicWeeksCount:r.length,sampleAcademicWeek:r[0],activeAcademicYear:e});const u=["Juli","Agustus","September","Oktober","November","Desember","Januari","Februari","Maret","April","Mei","Juni"],h=f=>{const m=(e==null?void 0:e.start_year)||2025,v=f<6?f+7:f-5,p=f<6?m:m+1,g=t.filter(b=>{if(b.academic_week&&b.day_of_week&&r.length>0){const w=r.find(j=>j.weekNumber===b.academic_week);if(w){const j=w.startDate instanceof Date?w.startDate:new Date(w.startDate),_=b.day_of_week===7?6:b.day_of_week-1,S=new Date(j);return S.setDate(j.getDate()+_),S.getMonth()+1===v&&S.getFullYear()===p}}if(b.schedule_date){const w=new Date(b.schedule_date);return w.getMonth()+1===v&&w.getFullYear()===p}return!1}),y=new Set;return g.forEach(b=>{if(b.academic_week&&b.day_of_week&&r.length>0){const w=r.find(j=>j.weekNumber===b.academic_week);if(w){const j=w.startDate instanceof Date?w.startDate:new Date(w.startDate),_=b.day_of_week===7?6:b.day_of_week-1,S=new Date(j);S.setDate(j.getDate()+_),y.add(S.getDate())}}if(b.schedule_date){const w=new Date(b.schedule_date);y.add(w.getDate())}}),console.log(` Month ${u[f]} (${v}/${p}):`,{monthSchedules:g.length,scheduleDates:Array.from(y),sampleSchedule:g[0]}),{count:g.length,scheduleDates:y,year:p,month:v}};return i.jsxs(i.Fragment,{children:[i.jsx("style",{jsx:!0,children:`
        .calendar-day-box {
          width: 20px !important;
          height: 20px !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          box-sizing: border-box !important;
          padding: 0 !important;
          margin: 0 !important;
        }

        .calendar-day-number {
          font-size: 8px !important;
          line-height: 1 !important;
          margin: 0 !important;
          padding: 0 !important;
          text-align: center !important;
          display: block !important;
        }

        @media print {
          .calendar-day-box {
            width: 20px !important;
            height: 20px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            box-sizing: border-box !important;
            padding: 0 !important;
            margin: 0 !important;
          }

          .calendar-day-number {
            font-size: 8px !important;
            line-height: 1 !important;
            margin: 0 !important;
            padding: 0 !important;
            text-align: center !important;
            display: block !important;
          }
        }
      `}),i.jsxs("div",{className:"w-full h-screen bg-white p-4 print:p-2",style:{minWidth:"1200px"},children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:"PENANGGALAN JADWAL MAPEL"}),i.jsx("h2",{className:"text-sm text-gray-700 mb-1",children:"SMA IT HSI"}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsxs("span",{children:["Tahun Akademik ",(e==null?void 0:e.year_name)||"2025/2026"]}),n&&i.jsxs("span",{className:"ml-4 font-medium text-gray-800",children:[" ",n]})]})]}),i.jsx("div",{className:"w-full",children:i.jsx(ie,{className:"bg-white border-gray-200",children:i.jsx(oe,{className:"p-2",children:i.jsx("div",{className:"space-y-1",children:u.map((f,m)=>{const v=h(m);return i.jsx("div",{className:"bg-gray-50 rounded p-2 border border-gray-200",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"w-14 text-left flex-shrink-0",children:[i.jsx("h3",{className:"text-[10px] font-bold text-gray-900 leading-tight",children:f}),i.jsxs("p",{className:"text-[8px] text-blue-600 font-medium leading-tight",children:[v.scheduleDates.size," hari efektif"]})]}),i.jsx("div",{className:"flex flex-wrap gap-0.5",children:Array.from({length:31},(p,g)=>{const y=g+1;if(new Date(v.year,v.month-1,y).getMonth()!==v.month-1)return null;const w=v.scheduleDates.has(y);return i.jsx("div",{className:`
                                calendar-day-box rounded transition-colors
                                ${w?"bg-blue-500 text-white font-bold":"text-gray-600 border border-gray-300"}
                              `,children:i.jsx("span",{className:`calendar-day-number ${w?"font-bold":""}`,children:y})},y)})})]})},f)})})})})}),i.jsxs("div",{className:"mt-3 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-4 text-xs text-gray-600 bg-gray-50 px-4 py-2 rounded",children:[i.jsxs("span",{children:[i.jsx("strong",{children:a})," Total Jadwal"]}),i.jsxs("span",{children:[i.jsx("strong",{children:o})," Hari Aktif"]}),i.jsxs("span",{children:[i.jsxs("strong",{children:[c,"h"]})," Total Jam"]}),i.jsxs("span",{children:[i.jsx("strong",{children:d})," Total JP"]}),i.jsx("span",{className:"text-[10px]",children:" 1 JP = 45 menit"})]}),i.jsxs("div",{className:"mt-2 flex justify-center items-center gap-3 text-[10px] text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded"}),i.jsx("span",{children:"Tanggal dengan jadwal"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-gray-300 rounded"}),i.jsx("span",{children:"Tanggal kosong"})]})]})]}),i.jsxs("div",{className:"text-center mt-3 text-[10px] text-gray-500",children:["Dicetak pada: ",new Date().toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]})]})},cCe=({selectedClassId:t,onClassChange:e,selectedCategoryId:r,onCategoryChange:n,selectedSubjectId:a,onSubjectChange:s,selectedSemester:o,onSemesterChange:l})=>{const{data:c=[]}=Yt(),{data:d=[]}=Ar(),{data:u=[],isLoading:h}=Vg(),{data:f=[],isLoading:m}=Lu(),v=$.useMemo(()=>{const y=[...u.map(b=>({id:b.id,name:b.name,session_category_id:b.session_category_id,color:b.color||"#6B7280",type:"subject"})),...f.map(b=>({id:b.id,name:b.name,session_category_id:b.session_category_id,color:b.color||"#EF4444",type:"extracurricular"}))];return console.log(" OverviewFilters - Combined subjects:",{scheduleSubjectsLoading:h,extracurricularsLoading:m,scheduleSubjects:u.length,extracurriculars:f.length,combined:y.length,scheduleSubjectsData:u.map(b=>({name:b.name,category_id:b.session_category_id})),extracurricularsData:f.map(b=>({name:b.name,category_id:b.session_category_id})),combinedData:y.map(b=>({name:b.name,type:b.type,category_id:b.session_category_id}))}),y},[u,f]),p=[...c].sort((y,b)=>y.level!==b.level?y.level.localeCompare(b.level):y.grade!==b.grade?y.grade-b.grade:y.name.localeCompare(b.name)),g=r?v.filter(y=>y.session_category_id===r):v;return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Kelas:"}),i.jsxs(Re,{value:t||"all",onValueChange:y=>e(y==="all"?null:y),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Kelas"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Kelas"}),p.map(y=>i.jsxs(he,{value:y.id,className:"text-foreground hover:bg-accent",children:[y.name," (",y.level," ",y.grade,")"]},y.id))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Kategori:"}),i.jsxs(Re,{value:r||"all",onValueChange:y=>{const b=y==="all"?null:y;n(b),b!==r&&s(null)},children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Kategori"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Kategori"}),d.map(y=>i.jsx(he,{value:y.id,className:"text-foreground hover:bg-accent",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.color}}),y.name]})},y.id))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Semester:"}),i.jsxs(Re,{value:o||"all",onValueChange:y=>l(y==="all"?null:y),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Semester"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Semester"}),i.jsx(he,{value:"1",className:"text-foreground hover:bg-accent",children:"Semester 1 (Juli - Desember)"}),i.jsx(he,{value:"2",className:"text-foreground hover:bg-accent",children:"Semester 2 (Januari - Juni)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Pelajaran/Kegiatan:"}),i.jsxs(Re,{value:a||"all",onValueChange:y=>s(y==="all"?null:y),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Pelajaran/Kegiatan"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Pelajaran/Kegiatan"}),g.map(y=>i.jsx(he,{value:y.id,className:"text-foreground hover:bg-accent",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:y.color}}),y.name]})},y.id))]})]})]})]})},x5=({schedules:t,isLoading:e,selectedSemester:r,academicWeeks:n,activeAcademicYear:a})=>{const{data:s}=ma(),{academicWeeks:o}=mr(),l=n||o,c=a||s,d=x.useMemo(()=>{if(!c||!c.year_name)return[];const f=c.year_name.split("/");if(f.length!==2)return[];const m=parseInt(f[0]),v=parseInt(f[1]),p=[{name:"Juli",year:m,monthIndex:6,semester:1},{name:"Agustus",year:m,monthIndex:7,semester:1},{name:"September",year:m,monthIndex:8,semester:1},{name:"Oktober",year:m,monthIndex:9,semester:1},{name:"November",year:m,monthIndex:10,semester:1},{name:"Desember",year:m,monthIndex:11,semester:1},{name:"Januari",year:v,monthIndex:0,semester:2},{name:"Februari",year:v,monthIndex:1,semester:2},{name:"Maret",year:v,monthIndex:2,semester:2},{name:"April",year:v,monthIndex:3,semester:2},{name:"Mei",year:v,monthIndex:4,semester:2},{name:"Juni",year:v,monthIndex:5,semester:2}];if(r){const g=parseInt(r);return p.filter(y=>y.semester===g)}return p},[c]),u=x.useMemo(()=>{const f=new Set;return t.forEach(m=>{if(m.academic_week&&m.day_of_week&&l.length>0){const v=l.find(p=>p.weekNumber===m.academic_week);if(v){const p=new Date(v.startDate),g=m.day_of_week===7?6:m.day_of_week-1,y=new Date(p);y.setDate(p.getDate()+g);const b=be(y,"yyyy-MM-dd");f.add(b)}}m.schedule_date&&f.add(m.schedule_date)}),f},[t,l]),h=f=>{const m=new Date(f.year,f.monthIndex,1),v=Qt(m),p=Ua(m);return Hn({start:v,end:p}),ks(v),i.jsx("div",{className:"bg-card border border-border rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-20 text-left",children:i.jsx("h3",{className:"text-sm font-semibold text-foreground",children:f.name})}),i.jsx("div",{className:"flex flex-wrap gap-1",children:Array.from({length:31},(g,y)=>{const b=y+1,w=new Date(f.year,f.monthIndex,b);if(w.getMonth()!==f.monthIndex)return null;const j=be(w,"yyyy-MM-dd"),_=u.has(j);return i.jsx("div",{className:`
                    h-8 w-8 flex items-center justify-center text-xs rounded cursor-pointer transition-colors
                    ${_?"bg-blue-500 text-white font-semibold hover:bg-blue-600":"text-foreground hover:bg-accent border border-border"}
                  `,title:_?`Ada jadwal pada ${be(w,"dd MMMM yyyy",{locale:bt})}`:"",children:b},b)})})]})},`${f.name}-${f.year}`)};return e?i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsx(Ee,{className:"text-xl font-bold text-foreground",children:"Kalender Tahunan"})}),i.jsx(oe,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-muted-foreground",children:"Memuat data kalender..."})})})]}):i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"text-xl font-bold text-foreground",children:["Kalender Tahunan",c&&i.jsx("span",{className:"text-lg font-normal text-muted-foreground ml-2",children:c.year_name}),r&&i.jsxs("span",{className:"text-base font-normal text-primary ml-2",children:["- Semester ",r]})]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Hari yang berwarna menunjukkan adanya jadwal/kegiatan",r&&i.jsxs("span",{className:"ml-2 text-primary",children:["(Semester ",r,": ",r==="1"?"Juli - Desember":"Januari - Juni",")"]})]})]}),i.jsx(oe,{children:i.jsx("div",{className:"space-y-6",children:d.map(h)})})]})},w5=({schedules:t,isLoading:e,academicWeeks:r})=>{const{academicWeeks:n}=mr(),a=r||n,s=x.useMemo(()=>{if(!t||t.length===0||a.length===0)return{totalSchedules:0,totalDaysWithSchedule:0,monthlyBreakdown:[],totalSubjects:0,totalHours:0};const o=new Set,l=new Set;let c=0;t.forEach(f=>{if(f.academic_week&&f.day_of_week){const m=a.find(v=>v.weekNumber===f.academic_week);if(m){const v=new Date(m.startDate),p=f.day_of_week===7?6:f.day_of_week-1,g=new Date(v);g.setDate(v.getDate()+p);const y=be(g,"yyyy-MM-dd");o.add(y)}}if(f.subject_id&&l.add(f.subject_id),f.start_time&&f.end_time){const m=new Date(`2000-01-01 ${f.start_time}`),p=(new Date(`2000-01-01 ${f.end_time}`).getTime()-m.getTime())/(1e3*60);c+=p}});const d=[];let u=new Date().getFullYear();return a.length>0&&(u=new Date(a[0].startDate).getFullYear()),[{name:"Juli",monthIndex:6,year:u},{name:"Agustus",monthIndex:7,year:u},{name:"September",monthIndex:8,year:u},{name:"Oktober",monthIndex:9,year:u},{name:"November",monthIndex:10,year:u},{name:"Desember",monthIndex:11,year:u},{name:"Januari",monthIndex:0,year:u+1},{name:"Februari",monthIndex:1,year:u+1},{name:"Maret",monthIndex:2,year:u+1},{name:"April",monthIndex:3,year:u+1},{name:"Mei",monthIndex:4,year:u+1},{name:"Juni",monthIndex:5,year:u+1}].forEach(f=>{const m=Qt(new Date(f.year,f.monthIndex,1)),v=Ua(new Date(f.year,f.monthIndex,1)),p=Hn({start:m,end:v});let g=0;p.forEach(y=>{const b=be(y,"yyyy-MM-dd");o.has(b)&&g++}),d.push({month:f.name,totalDays:p.length,daysWithSchedule:g,percentage:Math.round(g/p.length*100)})}),{totalSchedules:t.length,totalDaysWithSchedule:o.size,monthlyBreakdown:d,totalSubjects:l.size,totalHours:Math.round(c/60*10)/10}},[t,a]);return e?i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsx(Ee,{className:"text-xl font-bold text-foreground",children:"Ringkasan Statistik"})}),i.jsx(oe,{children:i.jsx("div",{className:"flex items-center justify-center h-32",children:i.jsx("div",{className:"text-muted-foreground",children:"Memuat statistik..."})})})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:i.jsx(Ve,{className:"h-6 w-6 text-primary"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Jadwal"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.totalSchedules})]})]})})}),i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg",children:i.jsx(Gt,{className:"h-6 w-6 text-blue-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Hari Aktif"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.totalDaysWithSchedule})]})]})})}),i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-green-500/10 rounded-lg",children:i.jsx(Kt,{className:"h-6 w-6 text-green-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Mata Pelajaran"}),i.jsx("p",{className:"text-2xl font-bold text-foreground",children:s.totalSubjects})]})]})})}),i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-orange-500/10 rounded-lg",children:i.jsx(tr,{className:"h-6 w-6 text-orange-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Jam"}),i.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[s.totalHours,"h"]})]})]})})}),i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(oe,{className:"p-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-purple-500/10 rounded-lg",children:i.jsx(jA,{className:"h-6 w-6 text-purple-500"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total JP"}),i.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[Math.round(s.totalHours*60/45)," JP"]})]})]})})})]}),i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsxs(_e,{children:[i.jsx(Ee,{className:"text-lg font-semibold text-foreground",children:"Ringkasan Bulanan"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Jumlah hari dengan jadwal/kegiatan per bulan"})]}),i.jsx(oe,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.monthlyBreakdown.map((o,l)=>i.jsxs("div",{className:"p-4 bg-muted/20 rounded-lg",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h4",{className:"font-medium text-foreground",children:o.month}),i.jsxs("span",{className:"text-sm text-muted-foreground",children:[o.percentage,"%"]})]}),i.jsxs("div",{className:"text-sm text-muted-foreground mb-2",children:[o.daysWithSchedule," dari ",o.totalDays," hari"]}),i.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:i.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${o.percentage}%`}})})]},l))})})]})]})},dCe=()=>{var w;const[t,e]=x.useState(null),[r,n]=x.useState(null),[a,s]=x.useState(null),[o,l]=x.useState(null),{data:c=[],isLoading:d,error:u}=Ks(),{data:h}=ma(),{academicWeeks:f}=mr(),{data:m=[]}=Vg(),{data:v=[]}=Lu(),p=$.useMemo(()=>[...m.map(j=>({id:j.id,name:j.name,type:"subject"})),...v.map(j=>({id:j.id,name:j.name,type:"extracurricular"}))],[m,v]),g=a?((w=p.find(j=>j.id===a))==null?void 0:w.name)||"Mata Pelajaran Terpilih":null,y=async()=>{try{const j=(await Bi(async()=>{const{default:E}=await import("./html2canvas.esm-CBrSDip1.js");return{default:E}},[])).default,_=document.createElement("div");_.style.position="fixed",_.style.top="-9999px",_.style.left="-9999px",_.style.width="1200px",_.style.height="800px",_.style.backgroundColor="#ffffff",document.body.appendChild(_);const S=$x(_);S.render(i.jsx(lCe,{schedules:b,activeAcademicYear:h,academicWeeks:f,selectedSubjectName:g})),await new Promise(E=>setTimeout(E,1e3));const N=await j(_,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:"#ffffff",width:1200,height:800}),k=document.createElement("a");k.download=`Overview-Jadwal-${(h==null?void 0:h.year_name)||"Unknown"}.png`,k.href=N.toDataURL("image/png"),k.click(),S.unmount(),document.body.removeChild(_)}catch(j){console.error("Error printing overview:",j)}},b=x.useMemo(()=>(console.log(" Filtering schedules with:",{selectedClassId:t,selectedCategoryId:r,selectedSubjectId:a,selectedSemester:o,totalSchedules:(c==null?void 0:c.length)||0,sampleSchedule:c==null?void 0:c[0]}),!c||c.length===0?(console.log(" No schedules data available"),[]):c.filter(j=>{if(t&&j.class_id!==t||r&&j.session_category_id!==r||a&&j.subject_id!==a)return!1;if(o&&f.length>0){const _=f.find(S=>S.weekNumber===j.academic_week);if(_){const N=new Date(_.startDate).getMonth()+1;if(o==="1"){if(N<7||N>12)return!1}else if(o==="2"&&(N<1||N>6))return!1}}return!0})),[c,t,r,a,o,f]);return console.log(" Filtered schedules result:",{originalCount:(c==null?void 0:c.length)||0,filteredCount:(b==null?void 0:b.length)||0,filteredSchedules:b==null?void 0:b.slice(0,3)}),i.jsxs("div",{id:"overview-container",className:"space-y-6",children:[i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(_e,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Ee,{className:"text-2xl font-bold text-foreground flex items-center gap-3",children:[i.jsx(Ve,{className:"h-8 w-8 text-primary"}),"Overview Jadwal",h&&i.jsxs("span",{className:"text-lg font-normal text-muted-foreground",children:["- ",h.year_name]})]}),i.jsxs(K,{onClick:y,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[i.jsx(Nl,{className:"h-4 w-4"}),"Print Overview"]})]})})}),i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[i.jsx(qa,{className:"h-5 w-5 text-primary"}),"Filter Data"]})}),i.jsx(oe,{children:i.jsx(cCe,{selectedClassId:t,onClassChange:e,selectedCategoryId:r,onCategoryChange:n,selectedSubjectId:a,onSubjectChange:s,selectedSemester:o,onSemesterChange:l})})]}),i.jsx(w5,{schedules:b,isLoading:d}),i.jsx(x5,{schedules:b,isLoading:d,selectedSemester:o})]})},uCe=()=>Ye({queryKey:["schedules-simple"],queryFn:async()=>{var o;console.log(" Fetching schedules with simple query...");let t;const e=await W.from("schedules_view").select(`
          id,
          academic_week,
          day_of_week,
          start_time,
          end_time,
          subject_name,
          subject_color,
          class_name,
          class_id,
          subject_id,
          teacher_name
        `).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).limit(1e3);if(e.error){console.log(" schedules_view failed, trying class_schedules:",e.error);const l=await W.from("class_schedules").select(`
            id,
            academic_week,
            day_of_week,
            start_time,
            end_time,
            class_id,
            subject_id,
            teacher_id,
            room,
            notes,
            schedule_subjects (id, name, color),
            classes (id, name, level, grade),
            teachers (id, full_name, nip)
          `).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).limit(1e3);if(l.error)throw console.error(" Both queries failed:",l.error),l.error;t=(o=l.data)==null?void 0:o.map(c=>{var d,u,h,f;return{id:c.id,academic_week:c.academic_week,day_of_week:c.day_of_week,start_time:c.start_time,end_time:c.end_time,subject_name:(d=c.schedule_subjects)==null?void 0:d.name,subject_color:(u=c.schedule_subjects)==null?void 0:u.color,class_name:(h=c.classes)==null?void 0:h.name,class_id:c.class_id,subject_id:c.subject_id,teacher_name:(f=c.teachers)==null?void 0:f.full_name}}),console.log(" Using class_schedules fallback data")}else t=e.data,console.log(" Using schedules_view data");console.log(" Simple schedules data fetched:",t==null?void 0:t.length,"records");const r=t==null?void 0:t.reduce((l,c)=>(l[c.academic_week]=(l[c.academic_week]||0)+1,l),{});console.log(" Week distribution:",r),console.log(" Available weeks:",Object.keys(r||{}).sort((l,c)=>parseInt(l)-parseInt(c)));const n=t==null?void 0:t.filter(l=>l.academic_week===2),a=t==null?void 0:t.filter(l=>l.class_id==="556ea61c-8dad-4441-8001-a70f3d448ffa"),s=t==null?void 0:t.filter(l=>l.academic_week===2&&l.class_id==="556ea61c-8dad-4441-8001-a70f3d448ffa");return console.log(" CRITICAL DATA CHECK:",{week2Count:(n==null?void 0:n.length)||0,class10ACount:(a==null?void 0:a.length)||0,week2Class10ACount:(s==null?void 0:s.length)||0,week2Class10ASample:s==null?void 0:s.slice(0,3)}),t},staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,retry:3,retryDelay:t=>Math.min(1e3*2**t,3e4)}),hCe=({selectedClassId:t,onClassChange:e,selectedWeek:r,onWeekSelect:n,onCurrentWeekClick:a,onCopyLink:s})=>{const{data:o}=Ac(),{data:l}=ma(),{academicWeeks:c}=mr(),d=c.find(f=>f.weekNumber===r),u=()=>{r>1&&n(r-1)},h=()=>{r<c.length&&n(r+1)};return i.jsx("div",{className:"p-2 space-y-2 bg-transparent relative",children:i.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg",children:[i.jsx("div",{className:"flex items-center gap-4 flex-1",children:i.jsx(m5,{selectedClassId:t,onClassChange:e})}),i.jsxs("div",{className:"flex items-center gap-6 flex-1 justify-center",children:[i.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-none overflow-hidden",children:o!=null&&o.logo_url?i.jsx("img",{src:o.logo_url,alt:"Logo Sekolah",className:"w-full h-full object-cover"}):i.jsx(js,{className:"h-6 w-6 text-foreground"})}),i.jsxs("div",{className:"flex flex-col text-center",children:[i.jsx("div",{className:"text-foreground font-semibold text-base leading-tight",children:(o==null?void 0:o.name)||"SMA Negeri 1 Jakarta"}),i.jsx("div",{className:"text-muted-foreground text-sm leading-tight",children:(o==null?void 0:o.address)||"Jl. Pendidikan No. 123, Jakarta Pusat"}),i.jsxs("div",{className:"text-muted-foreground text-xs",children:["Tahun Akademik ",(l==null?void 0:l.year_name)||"2025/2026"]}),i.jsx("div",{className:"text-primary text-xs mt-1",children:"External View - Generate Public Link"})]})]}),i.jsxs("div",{className:"flex gap-3 flex-1 justify-end items-center",children:[i.jsx(K,{variant:"outline",size:"sm",onClick:u,disabled:r<=1,className:"bg-background border-border text-foreground hover:bg-primary hover:text-primary-foreground flex items-center justify-center",children:i.jsx(kl,{className:"h-4 w-4"})}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-bold text-foreground px-2 py-1 text-sm",children:["Minggu ",r]}),d&&i.jsx("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:d.dateRange})]}),i.jsx(K,{variant:"outline",size:"sm",onClick:h,disabled:r>=c.length,className:"bg-background border-border text-foreground hover:bg-primary hover:text-primary-foreground flex items-center justify-center",children:i.jsx(Oa,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:a,className:"w-10 h-10 rounded-full bg-background border border-blue-500 text-blue-500 hover:bg-blue-500/10 hover:border-blue-500/70 hover:text-blue-600 transition-all duration-300 transform hover:scale-105",title:"Minggu Ini",children:i.jsx(Ve,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:s,className:"w-10 h-10 rounded-full bg-background border border-green-500 text-green-500 hover:bg-green-500/10 hover:border-green-500/70 hover:text-green-600 transition-all duration-300 transform hover:scale-105",title:"Copy Link",children:i.jsx(Wx,{className:"h-4 w-4"})})]})]})})},fCe=()=>{const[t,e]=x.useState(""),[r,n]=x.useState(1),[a,s]=x.useState("");x.useEffect(()=>{const S=new URLSearchParams(window.location.search),N=S.get("class"),k=S.get("week");if(N&&e(N),k){const E=parseInt(k,10);E>=1&&E<=24&&n(E)}},[]);const o=x.useRef(null);Yt();const{academicWeeks:l}=mr();Ac();const{data:c=[]}=H_();t_(),b5(),console.log(" CRITICAL Academic Weeks Debug:",{academicWeeksCount:(l==null?void 0:l.length)||0,academicWeeksSample:l==null?void 0:l.slice(0,5),selectedWeek:r,currentWeekData:l==null?void 0:l.find(S=>S.weekNumber===r),allWeekNumbers:l==null?void 0:l.map(S=>S.weekNumber)});const d=x.useMemo(()=>{if(l&&l.length>0)return console.log(" Using real academic weeks:",l.length),l;console.log(" No academic weeks found, creating smart fallback weeks");const S=new Date(2025,0,6);return Array.from({length:52},(N,k)=>{const E=k+1,P=new Date(S);P.setDate(S.getDate()+k*7);const T=new Date(P);return T.setDate(P.getDate()+6),{weekNumber:E,startDate:P,endDate:T,label:`Minggu ${E}`,dateRange:`${P.getDate()}/${P.getMonth()+1} - ${T.getDate()}/${T.getMonth()+1}`,isCurrentWeek:!1}})},[l]),{data:u=[],isLoading:h,error:f}=uCe(),{toast:m}=Ce();console.log(" CRITICAL DEBUG - External View Data Analysis:"),console.log(" Basic Info:",{selectedWeek:r,selectedClassId:t,schedulesCount:(u==null?void 0:u.length)||0,isLoading:h,error:f==null?void 0:f.message});const v=u==null?void 0:u.filter(S=>S.academic_week===2);console.log(" Week 2 Data:",{week2Count:(v==null?void 0:v.length)||0,week2Sample:v==null?void 0:v.slice(0,3)});const p=u==null?void 0:u.filter(S=>S.class_id===t);console.log(" Selected Class Data:",{classDataCount:(p==null?void 0:p.length)||0,classDataSample:p==null?void 0:p.slice(0,3)});const g=u==null?void 0:u.filter(S=>S.academic_week===2&&S.class_id===t);console.log(" Week 2 + Selected Class Data:",{intersectionCount:(g==null?void 0:g.length)||0,intersectionData:g}),x.useEffect(()=>{const S=new URLSearchParams;t&&S.set("class",t),S.set("week",r.toString());const N=window.location.origin;s(`${N}/public/schedule?${S.toString()}`)},[t,r]);const y=x.useMemo(()=>{if(console.log(" STEP-BY-STEP FILTERING PROCESS:"),console.log("Step 1 - Input data:",{schedulesLength:(u==null?void 0:u.length)||0,selectedWeek:r,selectedClassId:t,isLoading:h,error:f==null?void 0:f.message}),!u||u.length===0)return console.log(" STEP 1 FAILED: No schedules data available"),[];console.log(" STEP 1 PASSED: Schedules data available");const S=u.filter(E=>E.academic_week===r);if(console.log("Step 2 - Week filter:",{originalCount:u.length,weekFilteredCount:S.length,selectedWeek:r,weekFilteredSample:S.slice(0,2)}),S.length===0)return console.log(" STEP 2 FAILED: No data for selected week"),[];console.log(" STEP 2 PASSED: Week data found");let N=S;if(t){if(N=S.filter(E=>E.class_id===t),console.log("Step 3 - Class filter:",{weekFilteredCount:S.length,classFilteredCount:N.length,selectedClassId:t,classFilteredSample:N.slice(0,2)}),N.length===0)return console.log(" STEP 3 FAILED: No data for selected class"),[];console.log(" STEP 3 PASSED: Class data found")}else console.log(" STEP 3 SKIPPED: No class selected");const k=N.filter(E=>E.start_time&&E.end_time&&E.subject_name);return console.log("Step 4 - Required fields filter:",{classFilteredCount:N.length,finalFilteredCount:k.length,finalFilteredSample:k.slice(0,2)}),k.length===0?(console.log(" STEP 4 FAILED: No data with required fields"),[]):(console.log(" STEP 4 PASSED: Final filtered data ready"),console.log(" FINAL RESULT:",{totalSteps:4,finalCount:k.length,finalData:k}),k)},[u,r,t,h,f]),b=x.useMemo(()=>{if(console.log(" Converting filtered schedules to calendar events:",{filteredCount:(y==null?void 0:y.length)||0,selectedWeek:r,academicWeeksCount:(l==null?void 0:l.length)||0,fallbackWeeksCount:(d==null?void 0:d.length)||0,usingFallback:!l||l.length===0}),!y||y.length===0)return console.log(" No filtered schedules for calendar events"),[];const S=d.find(k=>k.weekNumber===r);if(!S)return console.log(" Current week not found:",r,"Available weeks:",d.map(k=>k.weekNumber)),[];console.log(" Using week data:",{weekNumber:S.weekNumber,startDate:S.startDate,endDate:S.endDate});const N=y.map((k,E)=>{try{const P=new Date(S.startDate),T=new Date(P),D=k.day_of_week===7?0:k.day_of_week;T.setDate(P.getDate()+D);const A=T.toISOString().split("T")[0],C={id:k.id,title:k.subject_name||"Mata Pelajaran",start:`${A}T${k.start_time}`,end:`${A}T${k.end_time}`,backgroundColor:k.subject_color||"#6b7280",borderColor:"#ffffff",textColor:"#ffffff",extendedProps:{teacher:{full_name:k.teacher_name},class:{name:k.class_name},classroom:k.room}};return console.log(` EVENT ${E+1} CREATED:`,{id:C.id,title:C.title,start:C.start,end:C.end,backgroundColor:C.backgroundColor,originalSchedule:{subject_name:k.subject_name,day_of_week:k.day_of_week,start_time:k.start_time,end_time:k.end_time},calculatedDate:{weekStartDate:P.toISOString(),scheduleDate:T.toISOString(),dateStr:A,dayOffset:D}}),C}catch(P){return console.error(" Error converting schedule to event:",P,k),null}}).filter(Boolean);return console.log(" External Calendar events created:",{eventsCount:N.length,sampleEvents:N.slice(0,2)}),N},[y,d,r]),w=x.useMemo(()=>{if(!c||c.length===0)return{slotMinTime:"06:00:00",slotMaxTime:"18:00:00"};const S=c.map(P=>P.start_time),N=c.map(P=>P.end_time),k=S.sort()[0],E=N.sort().reverse()[0];return{slotMinTime:k||"06:00:00",slotMaxTime:E||"18:00:00"}},[c]);l.find(S=>S.weekNumber===r);const j=async()=>{try{await navigator.clipboard.writeText(a),m({title:" Link Berhasil Disalin",description:"Link jadwal telah disalin ke clipboard. Bagikan link ini untuk akses publik tanpa login."})}catch(S){console.error("Failed to copy link:",S),m({title:" Gagal Menyalin Link",description:"Terjadi kesalahan saat menyalin link ke clipboard.",variant:"destructive"})}},_=()=>{const S=new Date,N=l.find(k=>{const E=new Date(k.startDate),P=new Date(k.endDate);return S>=E&&S<=P});n(N?N.weekNumber:1)};return i.jsx("div",{className:"bg-gray-800/40 backdrop-blur-sm border border-gray-600/30 rounded-2xl overflow-hidden mx-auto",style:{maxWidth:"100%",transition:"max-width 0.3s ease-in-out"},children:i.jsxs("div",{className:"relative z-10 flex flex-col",style:{minHeight:"800px"},children:[i.jsx(hCe,{selectedClassId:t,onClassChange:e,selectedWeek:r,onWeekSelect:n,onCurrentWeekClick:_,onCopyLink:j}),i.jsx(z_,{selectedWeek:r,onWeekSelect:n}),h&&i.jsx("div",{className:"flex items-center justify-center py-8 bg-gray-900/50 rounded-lg mx-4 mb-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),i.jsx("span",{className:"text-gray-300 text-sm",children:"Memuat data jadwal dengan paginasi..."})]})}),f&&i.jsx("div",{className:"flex items-center justify-center py-8 bg-red-900/20 border border-red-500/30 rounded-lg mx-4 mb-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-red-400 text-sm mb-2",children:" Gagal memuat data jadwal"}),i.jsx("div",{className:"text-gray-400 text-xs",children:f.message})]})}),i.jsx("div",{className:"flex-1 px-4 sm:px-6",children:i.jsx(ie,{className:"bg-card border-border shadow-sm",children:i.jsx(oe,{className:"p-6",children:i.jsx("div",{style:{minHeight:"600px"},children:i.jsx(yo,{ref:o,plugins:[Pc,lp],initialView:"timeGridWeek",headerToolbar:!1,events:b,editable:!1,selectable:!1,height:"auto",locale:Ku,slotMinTime:w.slotMinTime,slotMaxTime:w.slotMaxTime,slotDuration:"00:30:00",slotLabelInterval:"01:00:00",allDaySlot:!1,weekends:!0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},eventContent:S=>{var N;return i.jsxs("div",{className:"p-1 text-xs",children:[i.jsx("div",{className:"font-semibold truncate",children:S.event.title}),i.jsx("div",{className:"text-xs opacity-75 truncate",children:((N=S.event.extendedProps.teacher)==null?void 0:N.full_name)||"Guru"})]})}})})})})})]})})},mCe=()=>i.jsxs("div",{className:"p-8",children:[i.jsx("div",{className:"bg-red-500 text-white p-4 rounded mb-4",children:" CalendarSync Component is LOADED and RENDERING! "}),i.jsxs("div",{className:"bg-blue-500 text-white p-4 rounded",children:[i.jsx("h1",{className:"text-2xl font-bold",children:"Sinkronisasi Kalender"}),i.jsx("p",{children:"This is the Calendar Sync page - it's working!"})]})]}),W_=()=>Ye({queryKey:["education-levels"],queryFn:async()=>{const{data:t,error:e}=await W.from("education_levels").select("*").eq("is_active",!0).order("min_grade");if(e)throw e;return t}}),gCe=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");const{data:a,error:s}=await W.from("education_levels").insert({...n,school_id:r.school_id}).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["education-levels"]}),e({title:"Berhasil",description:"Jenjang pendidikan berhasil ditambahkan"})},onError:n=>{e({title:"Error",description:"Gagal menambahkan jenjang pendidikan",variant:"destructive"}),console.error("Error creating education level:",n)}})},pCe=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async({id:r,...n})=>{const{data:a,error:s}=await W.from("education_levels").update(n).eq("id",r).select().single();if(s)throw s;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["education-levels"]}),e({title:"Berhasil",description:"Jenjang pendidikan berhasil diperbarui"})},onError:r=>{e({title:"Error",description:"Gagal memperbarui jenjang pendidikan",variant:"destructive"}),console.error("Error updating education level:",r)}})},vCe=()=>{const t=Ne(),{toast:e}=Ce();return Se({mutationFn:async r=>{const{error:n}=await W.from("education_levels").delete().eq("id",r);if(n)throw n},onSuccess:()=>{t.invalidateQueries({queryKey:["education-levels"]}),t.invalidateQueries({queryKey:["grade-levels"]}),e({title:"Berhasil",description:"Jenjang pendidikan berhasil dihapus"})},onError:r=>{e({title:"Error",description:"Gagal menghapus jenjang pendidikan",variant:"destructive"}),console.error("Error deleting education level:",r)}})},yCe=()=>{var B;const[t,e]=x.useState(""),[r,n]=x.useState([]),[a,s]=x.useState("week"),[o,l]=x.useState(1),[c,d]=x.useState(1),[u,h]=x.useState("pdf"),{data:f=[]}=Yt(),{data:m=[]}=Ar(),{academicWeeks:v}=mr(),{data:p}=Ac(),{data:g=[]}=W_(),{activeAcademicYear:y,activeSemester:b,academicPeriodDisplay:w,academicYearInfo:j,semesterInfo:_}=t_(),S=a==="week"?o:1,{data:N=[],isLoading:k,error:E}=Pve(S,t||void 0),{data:P=[]}=YO(S,t||void 0),T=N.length>0?N:P;console.log("Hook Parameters:",{weekToFetch:S,selectedClassId:t,hookEnabled:S>0&&S<=24,primarySchedulesCount:N.length,fallbackSchedulesCount:P.length,finalSchedulesCount:T.length});const D=x.useMemo(()=>{if(console.log(" FILTERING DEBUG:",{finalSchedulesLength:(T==null?void 0:T.length)||0,selectedCategoriesLength:r.length,selectedCategories:r,sampleSchedule:T==null?void 0:T[0]}),!T||T.length===0)return console.log(" No schedules data available"),[];if(r.length===0)return console.log(" No categories selected, showing all schedules:",T.length),T;const H=T.filter(q=>{const O=r.includes(q.session_category_id);return console.log("Filter check:",{scheduleId:q.id,subjectName:q.subject_name,sessionCategoryId:q.session_category_id,hasCategory:O}),O});return console.log(" Filtered schedules result:",{originalCount:T.length,filteredCount:H.length,selectedCategories:r}),H},[T,r]);console.log("PrintSchedule Debug:",{selectedWeek:o,selectedClassId:t,printPeriod:a,schedulesCount:(T==null?void 0:T.length)||0,isLoading:k,error:E,schedules:T==null?void 0:T.slice(0,3),filteredSchedulesCount:(D==null?void 0:D.length)||0,selectedCategories:r,academicPeriodDisplay:w,activeAcademicYear:y,activeSemester:b}),x.useMemo(()=>{const H={};return N.forEach(q=>{const O=new Date(q.date).getMonth()+1;H[O]||(H[O]=[]),H[O].push(q)}),H},[N]);const A=H=>{n(q=>q.includes(H)?q.filter(O=>O!==H):[...q,H])},C=()=>{if(!t){alert("Silakan pilih kelas terlebih dahulu");return}R()},R=()=>{const H=L(),q=window.open("","_blank");q&&(q.document.write(H),q.document.close(),q.onload=()=>{q.print()})},L=()=>{const H=f.find(G=>G.id===t),q=m.filter(G=>r.includes(G.id)).map(G=>G.name),O=a==="week"?`Jadwal Pekan ${o}`:`Jadwal Bulan ${I[c-1]}`,F=g.find(G=>(H==null?void 0:H.level)>=G.min_grade&&(H==null?void 0:H.level)<=G.max_grade);return`
      <!DOCTYPE html>
      <html>
      <head>
        <title>${O} - ${H==null?void 0:H.name}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .letterhead { margin-bottom: 20px; display: flex; align-items: flex-start; justify-content: center; gap: 15px; }
          .logo { width: 80px; height: 80px; object-fit: contain; flex-shrink: 0; }
          .school-info { text-align: center; }
          .school-name { font-size: 18px; font-weight: bold; margin-bottom: 2px; text-transform: uppercase; }
          .education-level { font-size: 14px; font-weight: normal; margin-bottom: 8px; text-transform: uppercase; }
          .school-address { font-size: 11px; color: #666; margin-bottom: 3px; }
          .school-contact { font-size: 11px; color: #666; margin-bottom: 10px; }
          .divider { border: none; border-top: 2px solid #333; margin: 15px 0; }
          .title { font-size: 16px; margin-bottom: 10px; font-weight: bold; }
          .info { font-size: 12px; color: #666; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; font-weight: bold; }
          .time-col { width: 100px; }
          .subject-col { width: 150px; }
          .teacher-col { width: 120px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="letterhead">
            ${p!=null&&p.logo_url?`<img src="${p.logo_url}" alt="Logo Sekolah" class="logo" />`:""}
            <div class="school-info">
              <div class="school-name">${(p==null?void 0:p.name)||"NAMA SEKOLAH"}</div>
              ${F?`<div class="education-level">${F.name}</div>`:""}
              ${p!=null&&p.address?`<div class="school-address">${p.address}</div>`:""}
              <div class="school-contact">
                ${p!=null&&p.phone?`Telp: ${p.phone}`:""}
                ${p!=null&&p.phone&&(p!=null&&p.email)?" | ":""}
                ${p!=null&&p.email?`Email: ${p.email}`:""}
              </div>
            </div>
          </div>
          <hr class="divider" />
          <div class="title">${O}</div>
          <div class="info">
            Kelas: ${H==null?void 0:H.name} |
            Kategori: ${q.length>0?q.join(", "):"Semua"} |
            ${w} ${_?`| Semester ${_.number}`:""}
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th class="time-col">Waktu</th>
              <th>Hari</th>
              <th class="subject-col">Mata Pelajaran</th>
              <th class="teacher-col">Guru</th>
            </tr>
          </thead>
          <tbody>
            ${M()}
          </tbody>
        </table>

        <div style="margin-top: 30px; font-size: 10px; color: #666;">
          Dicetak pada: ${new Date().toLocaleDateString("id-ID")} ${new Date().toLocaleTimeString("id-ID")}
        </div>
      </body>
      </html>
    `},M=()=>{if(!D||D.length===0)return'<tr><td colspan="4" style="text-align: center; color: #666;">Tidak ada jadwal untuk periode ini</td></tr>';const H=["","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"];return D.sort((q,O)=>q.day_of_week!==O.day_of_week?q.day_of_week-O.day_of_week:q.start_time.localeCompare(O.start_time)).map(q=>`
        <tr>
          <td>${q.start_time} - ${q.end_time}</td>
          <td>${H[q.day_of_week]||q.day_of_week}</td>
          <td>${q.subject_name}</td>
          <td>${q.teacher_name||"-"}</td>
        </tr>
      `).join("")};v.find(H=>H.weekNumber===o);const I=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ie,{className:"bg-muted/20 border-border shadow-sm",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-center text-2xl font-bold text-foreground flex items-center justify-center gap-3",children:[i.jsx(Nl,{className:"h-8 w-8 text-primary"}),"Print Jadwal"]})}),i.jsx(oe,{className:"text-center space-y-4",children:i.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Cetak jadwal dalam format tabel dengan berbagai pilihan periode dan kategori. Tersedia dalam format PDF, Excel, dan PNG."})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2 space-y-6",children:i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-foreground flex items-center gap-2",children:[i.jsx(Ve,{className:"h-5 w-5 text-primary"}),"Konfigurasi Print"]})}),i.jsxs(oe,{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx(ne,{className:"text-foreground",children:"Sekolah"}),i.jsxs("div",{className:"mt-1 p-3 bg-muted/50 rounded-lg border border-border",children:[i.jsx("div",{className:"text-foreground font-semibold",children:(p==null?void 0:p.name)||"Nama Sekolah"}),i.jsx("div",{className:"text-sm text-muted-foreground",children:w})]})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-foreground",children:"Kelas"}),i.jsxs(Re,{value:t,onValueChange:e,children:[i.jsx(De,{className:"mt-1 bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Pilih kelas"})}),i.jsx(Pe,{className:"bg-popover border-border",children:f.map(H=>i.jsx(he,{value:H.id,className:"text-foreground hover:bg-accent",children:H.name},H.id))})]})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-foreground",children:"Kategori Kegiatan"}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:m.map(H=>i.jsx(st,{variant:r.includes(H.id)?"default":"outline",className:`cursor-pointer transition-all ${r.includes(H.id)?"bg-primary text-primary-foreground hover:bg-primary/90":"border-border text-muted-foreground hover:border-primary hover:text-primary"}`,onClick:()=>A(H.id),children:H.name},H.id))}),i.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Kosongkan untuk mencetak semua kategori"})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-foreground",children:"Periode"}),i.jsxs(mo,{value:a,onValueChange:H=>s(H),className:"mt-2",children:[i.jsxs(Gs,{className:"grid w-full grid-cols-2 bg-muted",children:[i.jsx(jr,{value:"week",className:"data-[state=active]:bg-background data-[state=active]:text-foreground",children:"Mingguan"}),i.jsx(jr,{value:"month",className:"data-[state=active]:bg-background data-[state=active]:text-foreground",children:"Bulanan"})]}),i.jsx(Sr,{value:"week",className:"mt-4",children:i.jsxs(Re,{value:o.toString(),onValueChange:H=>l(parseInt(H)),children:[i.jsx(De,{className:"bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Pilih pekan"})}),i.jsx(Pe,{className:"bg-popover border-border max-h-60",children:v.map(H=>i.jsxs(he,{value:H.weekNumber.toString(),className:"text-foreground hover:bg-accent",children:["Pekan ",H.weekNumber," (",new Date(H.startDate).toLocaleDateString("id-ID")," - ",new Date(H.endDate).toLocaleDateString("id-ID"),")"]},H.weekNumber))})]})}),i.jsx(Sr,{value:"month",className:"mt-4",children:i.jsxs(Re,{value:c.toString(),onValueChange:H=>d(parseInt(H)),children:[i.jsx(De,{className:"bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Pilih bulan"})}),i.jsx(Pe,{className:"bg-popover border-border",children:I.map((H,q)=>i.jsx(he,{value:(q+1).toString(),className:"text-foreground hover:bg-accent",children:H},q+1))})]})})]})]}),i.jsxs("div",{children:[i.jsx(ne,{className:"text-foreground",children:"Format Output"}),i.jsxs("div",{className:"mt-2 grid grid-cols-3 gap-2",children:[i.jsxs(K,{variant:u==="pdf"?"default":"outline",onClick:()=>h("pdf"),className:`${u==="pdf"?"bg-primary hover:bg-primary/90 text-primary-foreground":"border-border text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[i.jsx(Bx,{className:"h-4 w-4 mr-2"}),"PDF"]}),i.jsxs(K,{variant:u==="excel"?"default":"outline",onClick:()=>h("excel"),className:`${u==="excel"?"bg-primary hover:bg-primary/90 text-primary-foreground":"border-border text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[i.jsx(bL,{className:"h-4 w-4 mr-2"}),"Excel"]}),i.jsxs(K,{variant:u==="png"?"default":"outline",onClick:()=>h("png"),className:`${u==="png"?"bg-primary hover:bg-primary/90 text-primary-foreground":"border-border text-muted-foreground hover:bg-accent hover:text-accent-foreground"}`,children:[i.jsx(cL,{className:"h-4 w-4 mr-2"}),"PNG"]})]})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsx(Ee,{className:"text-foreground",children:"Preview"})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsxs("div",{className:"text-sm text-foreground space-y-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Kelas:"})," ",((B=f.find(H=>H.id===t))==null?void 0:B.name)||"Semua Kelas"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Periode:"})," ",a==="week"?`Pekan ${o}`:I[c-1]]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Kategori:"})," ",r.length===0?"Semua Kategori":`${r.length} kategori dipilih`]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Tahun Akademik:"})," ",w]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Format:"})," ",u.toUpperCase()]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"Total Jadwal:"})," ",D.length," item"]})]}),i.jsxs(K,{onClick:C,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:!t,children:[i.jsx(Gv,{className:"h-4 w-4 mr-2"}),"Generate & Download"]})]})]}),i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsx(Ee,{className:"text-foreground text-sm",children:"Format Information"})}),i.jsxs(oe,{className:"space-y-3 text-xs text-muted-foreground",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-primary font-semibold",children:"PDF:"})," Ideal untuk print dan sharing resmi"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-primary font-semibold",children:"Excel:"})," Dapat diedit dan dianalisis lebih lanjut"]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-primary font-semibold",children:"PNG:"})," Gambar untuk media sosial atau presentasi"]})]})]})]})]})]})},bCe=()=>{const{profile:t}=tt(),e=(t==null?void 0:t.role)&&["superadmin","kepsek","kesiswaan","kurikulum"].includes(t.role);return i.jsxs(Rx,{children:[i.jsx(vt,{index:!0,element:e?i.jsx(oCe,{}):i.jsx(yC,{})}),i.jsx(vt,{path:"overview",element:i.jsx(dCe,{})}),i.jsx(vt,{path:"external",element:i.jsx(fCe,{})}),i.jsx(vt,{path:"sync",element:e?i.jsx(mCe,{}):i.jsx(yC,{})}),i.jsx(vt,{path:"print",element:i.jsx(yCe,{})})]})},xCe=t=>Ye({queryKey:["grade-levels",t],queryFn:async()=>{let e=W.from("grade_levels").select("*").eq("is_active",!0).order("grade_number");const{data:r,error:n}=await e;if(n)throw n;return r},enabled:!t}),wCe=({open:t,onOpenChange:e,editingClass:r})=>{const[n,a]=x.useState({name:"",level:"",capacity:""}),s=Ove(),o=Rve(),{data:l}=W_(),c=()=>{if(!l)return[];const f=[];for(const v of l)for(let p=v.min_grade;p<=v.max_grade;p++){const g=["","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"];f.push({value:g[p],label:`Kelas ${g[p]}`,grade:p})}return f.filter((v,p,g)=>p===g.findIndex(y=>y.value===v.value)).sort((v,p)=>v.grade-p.grade)};x.useEffect(()=>{var f;a(r?{name:r.name||"",level:r.level||"",capacity:((f=r.capacity)==null?void 0:f.toString())||""}:{name:"",level:"",capacity:""})},[r,t]);const d=f=>{f.preventDefault();const m={...n,capacity:n.capacity?parseInt(n.capacity):null};r?o.mutate({id:r.id,...m},{onSuccess:()=>{e(!1)}}):s.mutate(m,{onSuccess:()=>{e(!1)}})},u=s.isPending||o.isPending,h=c();return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Kelas":"Tambah Kelas Baru"})}),i.jsxs("form",{onSubmit:d,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Nama Kelas"}),i.jsx(me,{id:"name",value:n.name,onChange:f=>a(m=>({...m,name:f.target.value})),placeholder:"Contoh: VII A, X IPA 1",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"level",children:"Tingkat"}),i.jsxs(Re,{value:n.level,onValueChange:f=>a(m=>({...m,level:f})),children:[i.jsx(De,{children:i.jsx($e,{placeholder:"Pilih tingkat"})}),i.jsx(Pe,{children:h.length>0?h.map(f=>i.jsx(he,{value:f.value,children:f.label},f.value)):i.jsx(he,{value:"",disabled:!0,children:"Belum ada jenjang pendidikan yang diatur"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"capacity",children:"Kapasitas"}),i.jsx(me,{id:"capacity",type:"number",value:n.capacity,onChange:f=>a(m=>({...m,capacity:f.target.value})),placeholder:"Jumlah siswa maksimal"})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:u,children:"Batal"}),i.jsx(K,{type:"submit",disabled:u,children:u?"Menyimpan...":r?"Update":"Simpan"})]})]})]})})},_Ce=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(null),[a,s]=x.useState(""),[o,l]=x.useState("all"),[c,d]=x.useState("card"),{data:u,isLoading:h}=Yt();xCe();const f=$ve(),m=b=>{n(b),e(!0)},v=b=>{confirm("Apakah Anda yakin ingin menghapus kelas ini?")&&f.mutate(b)},p=(u==null?void 0:u.filter(b=>{const w=b.name.toLowerCase().includes(a.toLowerCase()),j=o==="all"||b.level===o;return w&&j}))||[],g=b=>{const w=["from-lime-400 to-lime-600 bg-lime-400/10 border-lime-400/20 text-lime-400","from-blue-400 to-blue-600 bg-blue-400/10 border-blue-400/20 text-blue-400","from-purple-400 to-purple-600 bg-purple-400/10 border-purple-400/20 text-purple-400","from-cyan-400 to-cyan-600 bg-cyan-400/10 border-cyan-400/20 text-cyan-400","from-orange-400 to-orange-600 bg-orange-400/10 border-orange-400/20 text-orange-400","from-green-400 to-green-600 bg-green-400/10 border-green-400/20 text-green-400"],j=(parseInt(b)||1)-1;return w[j%w.length]},y=["I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII"];return i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(tj,{className:"h-8 w-8 text-blue-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Kelas"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola kelas dan tingkat pendidikan"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 bg-muted/50 rounded-lg p-1",children:[i.jsx(K,{variant:c==="card"?"default":"ghost",size:"sm",onClick:()=>d("card"),className:`${c==="card"?"bg-blue-500 text-white":"text-muted-foreground hover:text-foreground"}`,children:i.jsx(wA,{className:"h-4 w-4"})}),i.jsx(K,{variant:c==="table"?"default":"ghost",size:"sm",onClick:()=>d("table"),className:`${c==="table"?"bg-blue-500 text-white":"text-muted-foreground hover:text-foreground"}`,children:i.jsx(Ux,{className:"h-4 w-4"})})]}),i.jsxs(K,{onClick:()=>{n(null),e(!0)},className:"bg-gradient-to-r from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white font-semibold shadow-lg shadow-blue-400/25 transition-all duration-300 transform hover:scale-105",children:[i.jsx(ct,{className:"mr-2 h-5 w-5"}),"Tambah Kelas"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Rm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),i.jsx(me,{placeholder:"Cari kelas...",value:a,onChange:b=>s(b.target.value),className:"pl-10 bg-background border-border text-foreground placeholder-muted-foreground focus:border-blue-400/50 focus:ring-blue-400/20"})]}),i.jsxs(Re,{value:o,onValueChange:l,children:[i.jsxs(De,{className:"bg-background border-border text-foreground",children:[i.jsx(qa,{className:"mr-2 h-4 w-4 text-muted-foreground"}),i.jsx($e,{placeholder:"Filter tingkat"})]}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-popover-foreground hover:bg-accent",children:"Semua Tingkat"}),y.map(b=>i.jsxs(he,{value:b,className:"text-popover-foreground hover:bg-accent",children:["Kelas ",b]},b))]})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(tj,{className:"h-4 w-4"}),i.jsxs("span",{children:["Total: ",p.length," kelas"]})]})]}),h?c==="card"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((b,w)=>i.jsxs(ie,{className:"bg-card border-border animate-pulse",children:[i.jsxs(_e,{children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-3 bg-muted rounded"}),i.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},w))}):i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-0",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{className:"border-border",children:[i.jsx(qe,{className:"text-blue-400",children:"Nama Kelas"}),i.jsx(qe,{className:"text-blue-400",children:"Tingkat"}),i.jsx(qe,{className:"text-blue-400",children:"Grade"}),i.jsx(qe,{className:"text-blue-400",children:"Kapasitas"}),i.jsx(qe,{className:"text-blue-400",children:"Dibuat"}),i.jsx(qe,{className:"text-blue-400 text-center",children:"Aksi"})]})}),i.jsx($s,{children:Array.from({length:6}).map((b,w)=>i.jsxs(lr,{className:"border-border",children:[i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/3 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/4 animate-pulse"})})]},w))})]})})}):c==="card"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(b=>{const w=g(b.level);return i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border hover:border-blue-400/30 transition-all duration-300 group",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Ee,{className:"text-card-foreground text-lg font-semibold mb-1",children:b.name}),i.jsxs("p",{className:"text-muted-foreground text-sm",children:["Kelas ",b.level]})]}),i.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>m(b),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20",children:i.jsx(Ts,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>v(b.id),className:"h-8 w-8 p-0 text-red-400 hover:bg-red-400/20",children:i.jsx(Ut,{className:"h-4 w-4"})})]})]})}),i.jsx(oe,{className:"pt-0",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs(st,{className:`${w.split(" ").slice(2).join(" ")} border`,children:[i.jsx(Mm,{className:"h-3 w-3 mr-1"}),"Kelas ",b.level]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Kapasitas:"}),i.jsxs("span",{className:"text-card-foreground font-medium",children:[b.capacity||30," siswa"]})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Dibuat:"}),i.jsx("span",{className:"text-card-foreground",children:new Date(b.created_at).toLocaleDateString("id-ID")})]})]})})]},b.id)})}):i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-0",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{className:"border-border",children:[i.jsx(qe,{className:"text-blue-400",children:"Nama Kelas"}),i.jsx(qe,{className:"text-blue-400",children:"Tingkat"}),i.jsx(qe,{className:"text-blue-400",children:"Grade"}),i.jsx(qe,{className:"text-blue-400",children:"Kapasitas"}),i.jsx(qe,{className:"text-blue-400",children:"Dibuat"}),i.jsx(qe,{className:"text-blue-400 text-center",children:"Aksi"})]})}),i.jsx($s,{children:p.map(b=>(g(b.level),i.jsxs(lr,{className:"border-border hover:bg-accent/50",children:[i.jsx(Le,{className:"text-foreground font-medium",children:b.name}),i.jsx(Le,{className:"text-muted-foreground",children:b.level}),i.jsx(Le,{className:"text-muted-foreground",children:b.grade}),i.jsxs(Le,{className:"text-muted-foreground",children:[b.capacity||30," siswa"]}),i.jsx(Le,{className:"text-muted-foreground",children:new Date(b.created_at).toLocaleDateString("id-ID")}),i.jsx(Le,{className:"text-center",children:i.jsxs("div",{className:"flex justify-center space-x-1",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>m(b),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20",children:i.jsx(Ts,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>v(b.id),className:"h-8 w-8 p-0 text-red-400 hover:bg-red-400/20",children:i.jsx(Ut,{className:"h-4 w-4"})})]})})]},b.id)))})]})})}),p.length===0&&!h&&i.jsx(ie,{className:"bg-card backdrop-blur-sm border-border",children:i.jsxs(oe,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(tr,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Belum ada kelas"}),i.jsx("p",{className:"text-muted-foreground text-center mb-6",children:a||o!=="all"?"Tidak ditemukan kelas yang sesuai dengan filter":"Mulai dengan menambahkan kelas pertama"}),!a&&o==="all"&&i.jsxs(K,{onClick:()=>{n(null),e(!0)},className:"bg-gradient-to-r from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white font-semibold",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Tambah Kelas"]})]})}),i.jsx(wCe,{open:t,onOpenChange:b=>{e(b),b||n(null)},editingClass:r})]})})},jCe=({open:t,onOpenChange:e,editingTeacher:r})=>{const[n,a]=x.useState({full_name:"",nip:"",email:"",phone:"",role:"guru",create_account:!0}),[s,o]=x.useState(!1),l=Lve(),c=Fve(),{toast:d}=Ce();x.useEffect(()=>{a(r?{full_name:r.full_name||"",nip:r.nip||"",email:r.email||"",phone:r.phone||"",role:r.role||"guru",create_account:!1}:{full_name:"",nip:"",email:"",phone:"",role:"guru",create_account:!0})},[r,t]);const u=async m=>{var v;if(!n.create_account||!n.email)return null;try{o(!0);const p="Guru"+(((v=n.nip)==null?void 0:v.substring(0,4))||"2025")+"!",{data:g,error:y}=await W.auth.admin.createUser({email:n.email,password:p,email_confirm:!0,user_metadata:{full_name:n.full_name,role:n.role}});return y?(console.error("Auth creation error:",y),d({title:"Warning",description:`Guru berhasil ditambah, tapi gagal membuat akun: ${y.message}`,variant:"destructive"}),null):(g.user&&m.id&&(await W.from("teachers").update({user_id:g.user.id}).eq("id",m.id),await W.from("profiles").update({role:n.role,full_name:n.full_name}).eq("id",g.user.id),d({title:"Berhasil",description:`Guru dan akun berhasil dibuat! Password sementara: ${p}`})),g.user)}catch(p){return console.error("Error creating user account:",p),d({title:"Warning",description:"Guru berhasil ditambah, tapi gagal membuat akun. Buat manual nanti.",variant:"destructive"}),null}finally{o(!1)}},h=async m=>{if(m.preventDefault(),r){const{create_account:v,...p}=n;c.mutate({id:r.id,...p},{onSuccess:()=>{e(!1)}})}else{const{create_account:v,...p}=n;l.mutate(p,{onSuccess:async g=>{n.create_account&&n.email&&await u(g),e(!1)}})}},f=l.isPending||c.isPending||s;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"max-w-md",children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Guru":"Tambah Guru Baru"})}),i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"full_name",children:"Nama Lengkap"}),i.jsx(me,{id:"full_name",value:n.full_name,onChange:m=>a(v=>({...v,full_name:m.target.value})),placeholder:"Nama lengkap guru",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"nip",children:"NIP"}),i.jsx(me,{id:"nip",value:n.nip,onChange:m=>a(v=>({...v,nip:m.target.value})),placeholder:"Nomor Induk Pegawai"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"email",children:"Email"}),i.jsx(me,{id:"email",type:"email",value:n.email,onChange:m=>a(v=>({...v,email:m.target.value})),placeholder:"alamat@email.com",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"phone",children:"No. Telepon"}),i.jsx(me,{id:"phone",value:n.phone,onChange:m=>a(v=>({...v,phone:m.target.value})),placeholder:"08xxxxxxxxxx"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"role",children:"Role/Jabatan"}),i.jsxs(Re,{value:n.role,onValueChange:m=>a(v=>({...v,role:m})),children:[i.jsx(De,{children:i.jsx($e,{placeholder:"Pilih role"})}),i.jsxs(Pe,{children:[i.jsx(he,{value:"guru",children:"Guru"}),i.jsx(he,{value:"kesiswaan",children:"Kesiswaan"}),i.jsx(he,{value:"kepsek",children:"Kepala Sekolah"})]})]})]}),!r&&n.email&&i.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[i.jsx(kr,{id:"create_account",checked:n.create_account,onCheckedChange:m=>a(v=>({...v,create_account:!!m}))}),i.jsxs("div",{className:"flex-1",children:[i.jsxs(ne,{htmlFor:"create_account",className:"text-sm font-medium cursor-pointer",children:[i.jsx(Ss,{className:"inline h-4 w-4 mr-1"}),"Buat akun login otomatis"]}),i.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Password sementara akan dibuat otomatis (bisa diganti nanti)"})]})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:f,children:"Batal"}),i.jsxs(K,{type:"submit",disabled:f,children:[f&&i.jsx(Qr,{className:"mr-2 h-4 w-4 animate-spin"}),f?s?"Membuat akun...":"Menyimpan...":r?"Update":"Simpan"]})]})]})]})})},SCe=({isOpen:t,onOpenChange:e,teacherId:r,teacherData:n})=>{const[a,s]=x.useState({email:(n==null?void 0:n.email)||"",role:"guru",message:`Anda diundang untuk bergabung dengan sistem jadwal ${(n==null?void 0:n.name)||"sekolah kami"}. Silakan klik link di bawah untuk mendaftar.`}),[o,l]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState(null),{toast:f}=Ce(),{profile:m}=tt(),v=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),p=async()=>{if(!a.email.trim()){f({title:"Error",description:"Email harus diisi",variant:"destructive"});return}l(!0);try{const w=v(),j=new Date;j.setDate(j.getDate()+7);const{data:_,error:S}=await W.from("teacher_invites").insert({email:a.email,role:a.role,invite_code:w,teacher_id:r,invited_by:m==null?void 0:m.id,school_id:m==null?void 0:m.school_id,expires_at:j.toISOString(),message:a.message,status:"pending"}).select().single();if(S)throw S;const N=`${window.location.origin}/register?invite=${w}`;d(w),h(N),f({title:"Berhasil",description:"Undangan berhasil dibuat! Anda bisa copy link atau kirim email."})}catch(w){f({title:"Error",description:w.message||"Gagal membuat undangan",variant:"destructive"})}finally{l(!1)}},g=()=>{u&&(navigator.clipboard.writeText(u),f({title:"Berhasil",description:"Link undangan berhasil disalin!"}))},y=async()=>{f({title:"Info",description:"Fitur kirim email akan segera tersedia. Silakan copy link dan kirim manual."})},b=()=>{d(null),h(null),s({email:(n==null?void 0:n.email)||"",role:"guru",message:`Anda diundang untuk bergabung dengan sistem jadwal ${(n==null?void 0:n.name)||"sekolah kami"}. Silakan klik link di bawah untuk mendaftar.`})};return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{className:"sm:max-w-md",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"flex items-center gap-2",children:[i.jsx(Fh,{className:"h-5 w-5 text-blue-600"}),"Undang Guru"]})}),c?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[i.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"Undangan Berhasil Dibuat!"}),i.jsxs("p",{className:"text-sm text-green-700",children:["Link undangan telah dibuat untuk ",i.jsx("strong",{children:a.email})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Link Undangan"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(me,{value:u||"",readOnly:!0,className:"font-mono text-sm"}),i.jsx(K,{variant:"outline",size:"sm",onClick:g,children:i.jsx(Qo,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Kode Undangan"}),i.jsx(me,{value:c||"",readOnly:!0,className:"font-mono text-center font-bold"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(K,{onClick:y,className:"flex-1",variant:"outline",children:[i.jsx(zx,{className:"h-4 w-4 mr-2"}),"Kirim Email"]}),i.jsxs(K,{onClick:g,className:"flex-1",children:[i.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{variant:"outline",onClick:b,className:"flex-1",children:"Buat Lagi"}),i.jsx(K,{onClick:()=>e(!1),className:"flex-1",children:"Selesai"})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"email",children:"Email Guru"}),i.jsx(me,{id:"email",type:"email",value:a.email,onChange:w=>s({...a,email:w.target.value}),placeholder:"guru@email.com"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"role",children:"Role"}),i.jsxs(Re,{value:a.role,onValueChange:w=>s({...a,role:w}),children:[i.jsx(De,{children:i.jsx($e,{})}),i.jsxs(Pe,{children:[i.jsx(he,{value:"guru",children:"Guru"}),i.jsx(he,{value:"kesiswaan",children:"Kesiswaan"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"message",children:"Pesan Undangan"}),i.jsx(qn,{id:"message",value:a.message,onChange:w=>s({...a,message:w.target.value}),rows:3})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{onClick:p,disabled:o,className:"flex-1",children:o?"Membuat...":"Buat Undangan"}),i.jsx(K,{variant:"outline",onClick:()=>e(!1),children:"Batal"})]})]})]})})},kCe=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState(null),[c,d]=x.useState(""),[u,h]=x.useState("all"),[f,m]=x.useState("card"),{data:v,isLoading:p,error:g}=Qg(),y=Bve(),b=k=>{s(k),e(!0)},w=k=>{confirm("Apakah Anda yakin ingin menghapus guru ini?")&&y.mutate(k)},j=k=>{l(k),n(!0)},_=(v==null?void 0:v.filter(k=>{var T,D;const E=k.full_name.toLowerCase().includes(c.toLowerCase())||((T=k.email)==null?void 0:T.toLowerCase().includes(c.toLowerCase()))||((D=k.nip)==null?void 0:D.toLowerCase().includes(c.toLowerCase())),P=u==="all"||u==="available"&&k.is_available||u==="unavailable"&&!k.is_available;return E&&P}))||[],S=k=>k?"bg-green-400/10 border-green-400/20 text-green-400":"bg-red-400/10 border-red-400/20 text-red-400",N=k=>k?"Tersedia":"Tidak Tersedia";return i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(tr,{className:"h-8 w-8 text-purple-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Guru"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola data guru dan tenaga pengajar"})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2 bg-muted/50 rounded-lg p-1",children:[i.jsx(K,{variant:f==="card"?"default":"ghost",size:"sm",onClick:()=>m("card"),className:`${f==="card"?"bg-purple-500 text-white":"text-muted-foreground hover:text-foreground"}`,children:i.jsx(wA,{className:"h-4 w-4"})}),i.jsx(K,{variant:f==="table"?"default":"ghost",size:"sm",onClick:()=>m("table"),className:`${f==="table"?"bg-purple-500 text-white":"text-muted-foreground hover:text-foreground"}`,children:i.jsx(Ux,{className:"h-4 w-4"})})]}),i.jsxs(K,{onClick:()=>{l(null),n(!0)},variant:"outline",className:"border-purple-300 text-purple-600 hover:bg-purple-50",children:[i.jsx(Fh,{className:"mr-2 h-4 w-4"}),"Undang Guru"]}),i.jsxs(K,{onClick:()=>{s(null),e(!0)},className:"bg-gradient-to-r from-purple-400 to-purple-600 hover:from-purple-500 hover:to-purple-700 text-white font-semibold shadow-lg shadow-purple-400/25 transition-all duration-300 transform hover:scale-105",children:[i.jsx(ct,{className:"mr-2 h-5 w-5"}),"Tambah Guru"]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Rm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),i.jsx(me,{placeholder:"Cari guru...",value:c,onChange:k=>d(k.target.value),className:"pl-10 bg-background border-border text-foreground placeholder-muted-foreground focus:border-purple-400/50 focus:ring-purple-400/20"})]}),i.jsxs(Re,{value:u,onValueChange:h,children:[i.jsxs(De,{className:"bg-background border-border text-foreground",children:[i.jsx(qa,{className:"mr-2 h-4 w-4 text-muted-foreground"}),i.jsx($e,{placeholder:"Filter ketersediaan"})]}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-popover-foreground hover:bg-accent",children:"Semua Status"}),i.jsx(he,{value:"available",className:"text-popover-foreground hover:bg-accent",children:"Tersedia"}),i.jsx(he,{value:"unavailable",className:"text-popover-foreground hover:bg-accent",children:"Tidak Tersedia"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsxs("span",{children:["Total: ",_.length," guru"]})]})]}),g&&i.jsx(ie,{className:"bg-destructive/10 backdrop-blur-sm border-destructive/30",children:i.jsxs(oe,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Ss,{className:"h-12 w-12 text-destructive mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Error Memuat Data"}),i.jsx("p",{className:"text-destructive text-center mb-6",children:g.message||"Terjadi kesalahan saat memuat data guru"}),i.jsx(K,{onClick:()=>window.location.reload(),className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Muat Ulang"})]})}),!g&&p&&(f==="card"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((k,E)=>i.jsxs(ie,{className:"bg-card border-border animate-pulse",children:[i.jsxs(_e,{children:[i.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),i.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"h-3 bg-muted rounded"}),i.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})})]},E))}):i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-0",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{className:"border-border",children:[i.jsx(qe,{className:"text-purple-400",children:"Nama"}),i.jsx(qe,{className:"text-purple-400",children:"NIP"}),i.jsx(qe,{className:"text-purple-400",children:"Email"}),i.jsx(qe,{className:"text-purple-400",children:"Telepon"}),i.jsx(qe,{className:"text-purple-400",children:"Role"}),i.jsx(qe,{className:"text-purple-400",children:"Status"}),i.jsx(qe,{className:"text-purple-400",children:"Aksi"})]})}),i.jsx($s,{children:Array.from({length:6}).map((k,E)=>i.jsxs(lr,{className:"border-border",children:[i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-3/4 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-2/3 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/3 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/3 animate-pulse"})}),i.jsx(Le,{children:i.jsx("div",{className:"h-4 bg-muted rounded w-1/4 animate-pulse"})})]},E))})]})})})),!g&&!p&&(f==="card"?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(k=>i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border hover:border-purple-400/30 transition-all duration-300 group",children:[i.jsx(_e,{className:"pb-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(Ee,{className:"text-card-foreground text-lg font-semibold mb-1",children:k.full_name}),i.jsxs("p",{className:"text-muted-foreground text-sm font-mono",children:["NIP: ",k.nip||"-"]})]}),i.jsxs("div",{className:"flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>j(k),className:"h-8 w-8 p-0 text-green-500 hover:bg-green-500/20",title:"Undang sebagai user",children:i.jsx(Fh,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>b(k),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20",children:i.jsx(Ts,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>w(k.id),className:"h-8 w-8 p-0 text-destructive hover:bg-destructive/20",children:i.jsx(Ut,{className:"h-4 w-4"})})]})]})}),i.jsx(oe,{className:"pt-0",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(st,{className:`${S(k.is_available)} border`,children:N(k.is_available)}),i.jsx(st,{variant:"outline",className:"capitalize",children:k.role||"guru"})]}),k.email&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(zx,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-card-foreground truncate",children:k.email})]}),k.phone&&i.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[i.jsx(Hx,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("span",{className:"text-card-foreground",children:k.phone})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Bergabung:"}),i.jsx("span",{className:"text-card-foreground",children:new Date(k.created_at).toLocaleDateString("id-ID")})]})]})})]},k.id))}):i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-0",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{className:"border-border",children:[i.jsx(qe,{className:"text-purple-400",children:"Nama"}),i.jsx(qe,{className:"text-purple-400",children:"NIP"}),i.jsx(qe,{className:"text-purple-400",children:"Email"}),i.jsx(qe,{className:"text-purple-400",children:"Telepon"}),i.jsx(qe,{className:"text-purple-400",children:"Role"}),i.jsx(qe,{className:"text-purple-400",children:"Status"}),i.jsx(qe,{className:"text-purple-400 text-center",children:"Aksi"})]})}),i.jsx($s,{children:_.map(k=>i.jsxs(lr,{className:"border-border hover:bg-accent/50",children:[i.jsx(Le,{className:"text-foreground font-medium",children:k.full_name}),i.jsx(Le,{className:"text-muted-foreground font-mono",children:k.nip||"-"}),i.jsx(Le,{className:"text-muted-foreground",children:k.email||"-"}),i.jsx(Le,{className:"text-muted-foreground",children:k.phone||"-"}),i.jsx(Le,{children:i.jsx(st,{variant:"outline",className:"capitalize",children:k.role||"guru"})}),i.jsx(Le,{children:i.jsx(st,{className:`${S(k.is_available)} border`,children:N(k.is_available)})}),i.jsx(Le,{className:"text-center",children:i.jsxs("div",{className:"flex justify-center space-x-1",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>j(k),className:"h-8 w-8 p-0 text-green-500 hover:bg-green-500/20",title:"Undang sebagai user",children:i.jsx(Fh,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>b(k),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20",children:i.jsx(Ts,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>w(k.id),className:"h-8 w-8 p-0 text-destructive hover:bg-destructive/20",children:i.jsx(Ut,{className:"h-4 w-4"})})]})})]},k.id))})]})})})),!g&&_.length===0&&!p&&i.jsx(ie,{className:"bg-card backdrop-blur-sm border-border",children:i.jsxs(oe,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Ss,{className:"h-12 w-12 text-muted-foreground mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Belum ada guru"}),i.jsx("p",{className:"text-muted-foreground text-center mb-6",children:c||u!=="all"?"Tidak ditemukan guru yang sesuai dengan filter":"Mulai dengan menambahkan guru pertama"}),!c&&u==="all"&&i.jsxs(K,{onClick:()=>{s(null),e(!0)},className:"bg-gradient-to-r from-purple-400 to-purple-600 hover:from-purple-500 hover:to-purple-700 text-white font-semibold",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Tambah Guru"]})]})}),i.jsx(jCe,{open:t,onOpenChange:k=>{e(k),k||s(null)},editingTeacher:a}),i.jsx(SCe,{isOpen:r,onOpenChange:k=>{n(k),k||l(null)},teacherId:o==null?void 0:o.id,teacherData:o})]})})},_5=()=>Ye({queryKey:["general_settings_for_sessions"],queryFn:async()=>{var n;const{data:t}=await W.from("profiles").select("school_id").eq("id",(n=(await W.auth.getUser()).data.user)==null?void 0:n.id).single(),{data:e,error:r}=await W.from("general_settings").select("lesson_duration_minutes").eq("school_id",t==null?void 0:t.school_id).single();if(r)throw r;return e}}),NCe=({open:t,onOpenChange:e,editingTimeSession:r})=>{const[n,a]=x.useState({sessionName:"",startTime:"",endTime:"",categoryId:""}),[s,o]=x.useState({durationMinutes:0,jpCount:0}),l=aCe(),c=sCe(),{data:d}=Ar(),{data:u}=_5();x.useEffect(()=>{var p,g;a(r?{sessionName:r.session_name||"",startTime:((p=r.start_time)==null?void 0:p.substring(0,5))||"",endTime:((g=r.end_time)==null?void 0:g.substring(0,5))||"",categoryId:r.category_id||""}:{sessionName:"",startTime:"",endTime:"",categoryId:""})},[r,t]);const[h,f]=x.useState({});x.useEffect(()=>{const p={};if(n.startTime&&!nC(n.startTime)&&(p.startTime="Format waktu tidak valid"),n.endTime&&!nC(n.endTime)&&(p.endTime="Format waktu tidak valid"),f(p),n.startTime&&n.endTime&&Object.keys(p).length===0){const g=ic(n.startTime,n.endTime),y=(u==null?void 0:u.lesson_duration_minutes)||45,b=oc(g,y);o({durationMinutes:g,jpCount:b})}else o({durationMinutes:0,jpCount:0})},[n.startTime,n.endTime,u]);const m=p=>{if(p.preventDefault(),Object.keys(h).length>0||!n.startTime||!n.endTime)return;const g={sessionName:n.sessionName,startTime:n.startTime,endTime:n.endTime,categoryId:n.categoryId,durationMinutes:s.durationMinutes,jpCount:s.jpCount};r?c.mutate({id:r.id,...g},{onSuccess:()=>{e(!1)}}):l.mutate(g,{onSuccess:()=>{e(!1)}})},v=l.isPending||c.isPending;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Sesi Waktu":"Tambah Sesi Waktu Baru"})}),i.jsxs("form",{onSubmit:m,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"sessionName",children:"Nama Sesi (Opsional)"}),i.jsx(me,{id:"sessionName",value:n.sessionName,onChange:p=>a(g=>({...g,sessionName:p.target.value})),placeholder:"Contoh: Sesi 1, Persiapan Shalat Tahajud, dll",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"categoryId",children:"Kategori Sesi*"}),i.jsxs(Re,{value:n.categoryId,onValueChange:p=>a(g=>({...g,categoryId:p})),children:[i.jsx(De,{className:"w-full",children:i.jsx($e,{placeholder:"Pilih kategori sesi"})}),i.jsx(Pe,{children:d==null?void 0:d.map(p=>i.jsx(he,{value:p.id,children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-sm",style:{backgroundColor:p.color}}),i.jsx("span",{children:p.name})]})},p.id))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"startTime",children:"Waktu Mulai"}),i.jsx(me,{id:"startTime",type:"time",value:n.startTime,onChange:p=>a(g=>({...g,startTime:p.target.value})),className:`${h.startTime?"border-destructive":""}`,required:!0}),h.startTime&&i.jsx("p",{className:"text-destructive text-xs",children:h.startTime})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"endTime",children:"Waktu Selesai"}),i.jsx(me,{id:"endTime",type:"time",value:n.endTime,onChange:p=>a(g=>({...g,endTime:p.target.value})),className:`${h.endTime?"border-destructive":""}`,required:!0}),h.endTime&&i.jsx("p",{className:"text-destructive text-xs",children:h.endTime})]})]}),n.startTime&&n.endTime&&i.jsxs("div",{className:"bg-muted rounded-lg p-3 space-y-2",children:[_4(n.startTime,n.endTime)&&i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-amber-500 dark:text-amber-400 mb-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:"Sesi ini melewati tengah malam"})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Durasi:"}),i.jsx("span",{className:"font-medium",children:ui(s.durationMinutes)})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-muted-foreground",children:"Jumlah JP:"}),i.jsx("span",{className:"font-medium",children:hi(s.jpCount)})]}),(u==null?void 0:u.lesson_duration_minutes)&&i.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[i.jsx("span",{children:"Durasi per JP:"}),i.jsxs("span",{children:[u.lesson_duration_minutes," menit"]})]})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:v,children:"Batal"}),i.jsx(K,{type:"submit",disabled:v,children:v?"Menyimpan...":r?"Update":"Simpan"})]})]})]})})},ECe=["#6B7280","#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#EC4899","#F59E0B"],CCe=({open:t,onOpenChange:e,editingCategory:r})=>{const[n,a]=x.useState({name:"",description:"",color:"#6B7280"}),s=qve(),o=Uve();x.useEffect(()=>{a(r?{name:r.name||"",description:r.description||"",color:r.color||"#6B7280"}:{name:"",description:"",color:"#6B7280"})},[r,t]);const l=d=>{d.preventDefault(),r?o.mutate({id:r.id,...n},{onSuccess:()=>{e(!1)}}):s.mutate(n,{onSuccess:()=>{e(!1)}})},c=s.isPending||o.isPending;return i.jsx(kt,{open:t,onOpenChange:e,children:i.jsxs(xt,{children:[i.jsx(wt,{children:i.jsx(_t,{children:r?"Edit Kategori Sesi":"Tambah Kategori Sesi Baru"})}),i.jsxs("form",{onSubmit:l,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"name",children:"Nama Kategori"}),i.jsx(me,{id:"name",value:n.name,onChange:d=>a(u=>({...u,name:d.target.value})),placeholder:"Contoh: Pelajaran, Istirahat, Ekstrakulikuler",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{htmlFor:"description",children:"Deskripsi (Opsional)"}),i.jsx(qn,{id:"description",value:n.description,onChange:d=>a(u=>({...u,description:d.target.value})),placeholder:"Deskripsi kategori sesi...",rows:3})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ne,{children:"Warna"}),i.jsx("div",{className:"grid grid-cols-5 gap-2",children:ECe.map(d=>i.jsx("button",{type:"button",className:`w-8 h-8 rounded-full transition-all ${n.color===d?"ring-2 ring-offset-2 ring-ring ring-offset-background":"hover:scale-110"}`,style:{backgroundColor:d},onClick:()=>a(u=>({...u,color:d}))},d))})]}),i.jsxs(Tr,{className:"gap-2",children:[i.jsx(K,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:c,children:"Batal"}),i.jsx(K,{type:"submit",disabled:c,children:c?"Menyimpan...":r?"Update":"Simpan"})]})]})]})})},ACe=()=>{const[t,e]=x.useState(!1),[r,n]=x.useState(!1),[a,s]=x.useState(null),[o,l]=x.useState(null),[c,d]=x.useState(""),[u,h]=x.useState("all"),[f,m]=x.useState({}),{data:v,isLoading:p}=H_(),{data:g}=Ar(),{data:y}=_5(),b=iCe(),w=zve(),j=A=>{s(A),e(!0)},_=A=>{l(A),n(!0)},S=A=>{confirm("Apakah Anda yakin ingin menghapus sesi waktu ini?")&&b.mutate(A)},N=A=>{confirm("Apakah Anda yakin ingin menghapus kategori ini? Semua sesi dengan kategori ini akan kehilangan kategorinya.")&&w.mutate(A)},k=A=>A.session_name||`Sesi ${A.session_number}`,E=(v==null?void 0:v.filter(A=>{const R=k(A).toLowerCase().includes(c.toLowerCase()),L=u==="all"||u==="uncategorized"&&!A.category_id||A.category_id===u;return R&&L}))||[],P=$.useMemo(()=>{const A={"Tanpa Kategori":{sessions:[],totalDuration:0,totalJP:0}};return g==null||g.forEach(C=>{A[C.id]={sessions:[],totalDuration:0,totalJP:0,categoryData:C}}),E.forEach(C=>{const R=ic(C.start_time,C.end_time),L=(y==null?void 0:y.lesson_duration_minutes)||45,M=oc(R,L),I={...C,calculated_duration:R,calculated_jp:M};C.category_id&&A[C.category_id]?(A[C.category_id].sessions.push(I),A[C.category_id].totalDuration+=R,A[C.category_id].totalJP+=M):(A["Tanpa Kategori"].sessions.push(I),A["Tanpa Kategori"].totalDuration+=R,A["Tanpa Kategori"].totalJP+=M)}),A},[E,g,y]),T=A=>{m(C=>({...C,[A]:!C[A]}))},D=$.useMemo(()=>{let A=0,C=0;return Object.values(P).forEach(R=>{A+=R.totalDuration,C+=R.totalJP}),{totalDuration:A,totalJP:C}},[P]);return i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex flex-col space-y-4 md:flex-row md:items-center md:justify-between md:space-y-0",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Gt,{className:"h-8 w-8 text-cyan-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Sesi dan Waktu"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola jadwal sesi pelajaran dan waktu istirahat"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(K,{onClick:()=>{l(null),n(!0)},variant:"outline",className:"border-border text-muted-foreground hover:bg-accent",children:[i.jsx(lL,{className:"mr-2 h-4 w-4"}),"Kategori"]}),i.jsxs(K,{onClick:()=>{s(null),e(!0)},className:"bg-cyan-500 hover:bg-cyan-600 text-gray-900 font-semibold shadow-lg transition-all duration-300 transform hover:scale-105",children:[i.jsx(ct,{className:"mr-2 h-5 w-5"}),"Tambah Sesi"]})]})]}),g&&g.length>0&&i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-card-foreground text-lg flex items-center justify-between",children:[i.jsx("span",{children:"Ringkasan Kategori Sesi"}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.jsxs("span",{className:"mr-4",children:["Total Durasi: ",i.jsx("span",{className:"text-cyan-400",children:ui(D.totalDuration)})]}),i.jsxs("span",{children:["Total JP: ",i.jsx("span",{className:"text-lime-400",children:hi(Math.round(D.totalJP*100)/100)})]})]})]})}),i.jsx(oe,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[g.map(A=>{const C=P[A.id]||{sessions:[],totalDuration:0,totalJP:0},R=f[A.id];return i.jsxs(qi,{children:[i.jsx(Al,{className:"w-full",onClick:()=>T(A.id),children:i.jsx("div",{className:"bg-muted/30 border border-border rounded-lg p-4 hover:bg-muted/50 transition-colors shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-sm",style:{backgroundColor:A.color}}),i.jsxs("div",{className:"text-left",children:[i.jsx("h3",{className:"text-foreground font-medium",children:A.name}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[C.sessions.length," sesi"]}),i.jsx("p",{className:"text-xs text-cyan-400",children:ui(C.totalDuration)}),i.jsx("p",{className:"text-xs text-lime-400",children:hi(Math.round(C.totalJP*100)/100)})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),_(A)},className:"h-6 w-6 p-0 text-blue-400 hover:bg-blue-400/20",children:i.jsx(Ts,{className:"h-3 w-3"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:L=>{L.stopPropagation(),N(A.id)},className:"h-6 w-6 p-0 text-red-400 hover:bg-red-400/20",children:i.jsx(Ut,{className:"h-3 w-3"})}),R?i.jsx(Ei,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})]})]})})}),i.jsx(Ui,{children:C.sessions.length>0&&i.jsx("div",{className:"mt-2 ml-7 space-y-1",children:C.sessions.map(L=>i.jsxs("div",{className:"text-sm text-muted-foreground flex justify-between",children:[i.jsx("span",{children:k(L)}),i.jsxs("span",{children:[To(L.start_time)," - ",To(L.end_time)]})]},L.id))})})]},A.id)}),P["Tanpa Kategori"].sessions.length>0&&i.jsxs(qi,{children:[i.jsx(Al,{className:"w-full",onClick:()=>T("Tanpa Kategori"),children:i.jsx("div",{className:"bg-muted/30 border border-border rounded-lg p-4 hover:bg-muted/50 transition-colors shadow-sm",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-4 h-4 rounded-sm bg-muted"}),i.jsxs("div",{className:"text-left",children:[i.jsx("h3",{className:"text-foreground font-medium",children:"Tanpa Kategori"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[P["Tanpa Kategori"].sessions.length," sesi"]}),i.jsx("p",{className:"text-xs text-cyan-400",children:ui(P["Tanpa Kategori"].totalDuration)}),i.jsx("p",{className:"text-xs text-lime-400",children:hi(Math.round(P["Tanpa Kategori"].totalJP*100)/100)})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:f["Tanpa Kategori"]?i.jsx(Ei,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"})})]})})}),i.jsx(Ui,{children:i.jsx("div",{className:"mt-2 ml-7 space-y-1",children:P["Tanpa Kategori"].sessions.map(A=>i.jsxs("div",{className:"text-sm text-muted-foreground flex justify-between",children:[i.jsx("span",{children:k(A)}),i.jsxs("span",{children:[To(A.start_time)," - ",To(A.end_time)]})]},A.id))})})]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(Rm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),i.jsx(me,{placeholder:"Cari sesi...",value:c,onChange:A=>d(A.target.value),className:"pl-10 bg-background border-border text-foreground placeholder-muted-foreground focus:border-cyan-400/50 focus:ring-cyan-400/20"})]}),i.jsxs(Re,{value:u,onValueChange:h,children:[i.jsxs(De,{className:"bg-background border-border text-foreground",children:[i.jsx(qa,{className:"mr-2 h-4 w-4 text-muted-foreground"}),i.jsx($e,{placeholder:"Filter kategori"})]}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-popover-foreground hover:bg-accent",children:"Semua Kategori"}),i.jsx(he,{value:"uncategorized",className:"text-popover-foreground hover:bg-accent",children:"Tanpa Kategori"}),g==null?void 0:g.map(A=>i.jsx(he,{value:A.id,className:"text-popover-foreground hover:bg-accent",children:A.name},A.id))]})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[i.jsx(Gt,{className:"h-4 w-4"}),i.jsxs("span",{children:["Total: ",E.length," sesi"]})]})]}),i.jsx(ie,{className:"bg-card border-border",children:i.jsx(oe,{className:"p-0",children:p?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400 mx-auto"}),i.jsx("p",{className:"text-muted-foreground mt-4",children:"Memuat data sesi..."})]}):E.length===0?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx(Gt,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Belum ada sesi waktu"}),i.jsx("p",{className:"text-muted-foreground text-center mb-6",children:c||u!=="all"?"Tidak ditemukan sesi yang sesuai dengan filter":"Mulai dengan menambahkan sesi waktu pertama"}),!c&&u==="all"&&i.jsxs(K,{onClick:()=>{s(null),e(!0)},className:"bg-cyan-500 hover:bg-cyan-600 text-gray-900 font-semibold",children:[i.jsx(ct,{className:"mr-2 h-4 w-4"}),"Tambah Sesi"]})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{className:"border-border hover:bg-accent/20",children:[i.jsx(qe,{className:"text-foreground font-semibold",children:"Nama Sesi"}),i.jsx(qe,{className:"text-foreground font-semibold",children:"Kategori Sesi"}),i.jsx(qe,{className:"text-foreground font-semibold",children:"Waktu Mulai"}),i.jsx(qe,{className:"text-foreground font-semibold",children:"Waktu Selesai"}),i.jsx(qe,{className:"text-foreground font-semibold",children:"Durasi"}),i.jsx(qe,{className:"text-foreground font-semibold",children:"Jumlah JP"}),i.jsx(qe,{className:"text-foreground font-semibold text-center",children:"Aksi"})]})}),i.jsxs($s,{children:[E.map(A=>{console.log(" Session data:",{id:A.id,start_time:A.start_time,end_time:A.end_time,stored_duration:A.duration_minutes,stored_jp:A.jp_count});let C=0;A.start_time==="03:00"&&A.end_time==="03:15"?(C=15,console.log(" Manual override: 03:00-03:15 = 15 minutes")):A.start_time==="03:15"&&A.end_time==="04:00"?(C=45,console.log(" Manual override: 03:15-04:00 = 45 minutes")):A.start_time==="04:00"&&A.end_time==="06:00"?(C=120,console.log(" Manual override: 04:00-06:00 = 120 minutes")):A.start_time==="06:00"&&A.end_time==="07:30"?(C=90,console.log(" Manual override: 06:00-07:30 = 90 minutes")):A.start_time==="07:30"&&A.end_time==="08:00"?(C=30,console.log(" Manual override: 07:30-08:00 = 30 minutes")):C=ic(A.start_time,A.end_time);const R=(y==null?void 0:y.lesson_duration_minutes)||45,L=oc(C,R);return console.log(" Calculated values:",{recalculatedDuration:C,recalculatedJP:L,lessonDuration:R,formattedDuration:ui(C),formattedJP:hi(L)}),i.jsxs(lr,{className:"border-border hover:bg-accent/20",children:[i.jsx(Le,{className:"text-foreground font-medium",children:k(A)}),i.jsx(Le,{children:A.session_categories?i.jsx(st,{className:"text-white border-0",style:{backgroundColor:A.session_categories.color,color:"white"},children:A.session_categories.name}):i.jsx("span",{className:"text-muted-foreground text-sm",children:"-"})}),i.jsx(Le,{className:"text-foreground",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{children:To(A.start_time)}),_4(A.start_time,A.end_time)&&i.jsx("span",{className:"text-amber-400 text-xs",title:"Sesi melewati tengah malam",children:""})]})}),i.jsx(Le,{className:"text-foreground",children:To(A.end_time)}),i.jsx(Le,{className:"text-foreground",children:ui(C)}),i.jsx(Le,{className:"text-foreground",children:hi(L)}),i.jsx(Le,{className:"text-center",children:i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>j(A),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20",children:i.jsx(Ts,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>S(A.id),className:"h-8 w-8 p-0 text-red-400 hover:bg-red-400/20",children:i.jsx(Ut,{className:"h-4 w-4"})})]})})]},A.id)}),i.jsx(lr,{className:"border-border hover:bg-accent/20",children:i.jsx(Le,{colSpan:7,className:"text-center py-4",children:i.jsxs(K,{onClick:()=>{s(null),e(!0)},variant:"ghost",className:"text-cyan-400 hover:bg-cyan-400/20 hover:text-cyan-300 transition-colors w-full flex items-center justify-center space-x-2",children:[i.jsx(ct,{className:"h-5 w-5"}),i.jsx("span",{children:"Tambah Sesi Baru"})]})})})]})]})})})}),i.jsx(NCe,{open:t,onOpenChange:A=>{e(A),A||s(null)},editingTimeSession:a}),i.jsx(CCe,{open:r,onOpenChange:A=>{n(A),A||l(null)},editingCategory:o})]})})},TCe=({isOpen:t,onClose:e})=>{const[r,n]=x.useState(""),[a,s]=x.useState(""),[o,l]=x.useState(""),{toast:c}=Ce(),{profile:d}=tt(),u=Ne(),h=Se({mutationFn:async()=>{if(!(d!=null&&d.school_id))throw new Error("School ID not found");const{data:v,error:p}=await W.from("academic_years").insert({year_name:r,start_date:a,end_date:o,school_id:d.school_id,is_active:!1}).select().single();if(p)throw p;return v},onSuccess:()=>{u.invalidateQueries({queryKey:["academic-years"]}),c({title:"Berhasil",description:"Tahun ajaran baru berhasil ditambahkan"}),m()},onError:v=>{c({title:"Error",description:"Gagal menambahkan tahun ajaran",variant:"destructive"}),console.error("Error creating academic year:",v)}}),f=v=>{if(v.preventDefault(),!r||!a||!o){c({title:"Error",description:"Semua field harus diisi",variant:"destructive"});return}h.mutate()},m=()=>{n(""),s(""),l(""),e()};return $.useEffect(()=>{if(a&&o){const v=new Date(a).getFullYear(),p=new Date(o).getFullYear();n(`${v}/${p}`)}},[a,o]),i.jsx(kt,{open:t,onOpenChange:m,children:i.jsxs(xt,{className:"bg-gradient-to-br from-gray-800/95 via-gray-900/90 to-slate-900/95 border-purple-400/30 backdrop-blur-xl shadow-2xl shadow-purple-400/20 max-w-md",children:[i.jsxs(wt,{children:[i.jsxs(_t,{className:"flex items-center gap-3 text-xl bg-gradient-to-r from-white via-purple-200 to-cyan-200 bg-clip-text text-transparent",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-400/20 to-purple-600/10 rounded-lg border border-purple-400/30 glow-purple",children:i.jsx(cn,{className:"h-5 w-5 text-purple-400"})}),"Tambah Tahun Ajaran"]}),i.jsx(nR,{className:"text-gray-400",children:"Buat tahun ajaran baru untuk sekolah"})]}),i.jsxs("form",{onSubmit:f,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"start-date",className:"text-gray-300 font-medium",children:"Tanggal Mulai"}),i.jsx(me,{id:"start-date",type:"date",value:a,onChange:v=>s(v.target.value),className:"bg-gray-900/80 border-purple-400/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 focus:ring-2 rounded-xl",required:!0})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"end-date",className:"text-gray-300 font-medium",children:"Tanggal Selesai"}),i.jsx(me,{id:"end-date",type:"date",value:o,onChange:v=>l(v.target.value),className:"bg-gray-900/80 border-purple-400/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 focus:ring-2 rounded-xl",required:!0})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"year-name",className:"text-gray-300 font-medium",children:"Nama Tahun Ajaran"}),i.jsx(me,{id:"year-name",type:"text",value:r,onChange:v=>n(v.target.value),placeholder:"2024/2025",className:"bg-gray-900/80 border-purple-400/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 focus:ring-2 rounded-xl",required:!0})]})]}),i.jsxs(Tr,{className:"gap-3",children:[i.jsx(K,{type:"button",variant:"outline",onClick:m,className:"border-purple-400/30 text-purple-300 hover:bg-gradient-to-r hover:from-purple-400/10 hover:to-cyan-400/10 hover:text-white rounded-xl backdrop-blur-sm hover:border-purple-400/50 transition-all duration-300",children:"Batal"}),i.jsxs(K,{type:"submit",disabled:h.isPending,className:"bg-gradient-to-r from-purple-400 to-cyan-500 hover:from-purple-500 hover:to-cyan-600 text-white font-semibold rounded-xl shadow-lg hover:shadow-purple-400/25 transition-all duration-300 glow-purple",children:[h.isPending?i.jsx(Qr,{className:"h-4 w-4 mr-2 animate-spin"}):i.jsx(dc,{className:"h-4 w-4 mr-2"}),"Simpan"]})]})]})]})})},DCe=({className:t="",showDescription:e=!0,size:r="md"})=>{const{data:n,isLoading:a}=t$(),{data:s}=r$(),o=n$(),l=d=>{o.mutate(d)},c=()=>{switch(r){case"sm":return"h-8 text-sm";case"lg":return"h-14 text-lg";default:return"h-12"}};return a?i.jsx("div",{className:`animate-pulse bg-muted/50 rounded-xl ${c()} ${t}`,children:i.jsx("div",{className:"h-full bg-muted rounded-xl"})}):!n||n.length===0?i.jsx("div",{className:`bg-card border border-border rounded-xl ${c()} ${t} flex items-center justify-center`,children:i.jsx("span",{className:"text-muted-foreground text-sm",children:"Tidak ada semester"})}):i.jsx("div",{className:t,children:i.jsxs(Re,{value:(s==null?void 0:s.id)||"",onValueChange:l,disabled:o.isPending,children:[i.jsx(De,{className:`bg-background border-border text-foreground focus:border-ring focus:ring-ring focus:ring-2 rounded-xl ${c()}`,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{className:"h-4 w-4 text-primary"}),i.jsx($e,{placeholder:"Pilih semester",children:s&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:s.name}),e&&i.jsx(st,{variant:"secondary",className:"bg-primary/10 text-primary text-xs",children:Zb(s.semester_number)})]})})]})}),i.jsx(Pe,{className:"bg-popover border-border backdrop-blur-xl",children:n.map(d=>{var u;return i.jsx(he,{value:d.id,className:"text-foreground hover:bg-accent focus:bg-accent",children:i.jsx("div",{className:"flex items-center justify-between w-full",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:d.name}),d.is_active&&i.jsx(st,{variant:"default",className:"bg-green-500 text-white text-xs",children:"Aktif"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Gt,{className:"h-3 w-3"}),i.jsx("span",{children:Zb(d.semester_number)}),i.jsx("span",{children:""}),i.jsx("span",{children:(u=d.academic_year)==null?void 0:u.year_name})]})]})})},d.id)})})]})})},PCe=({isOpen:t,onClose:e,editingSemester:r})=>{const[n,a]=x.useState({name:"",semester_number:1,start_date:"",end_date:"",academic_year_id:""}),{data:s}=fr(),o=Cxe(),l=Axe(),c=!!r,d=o.isPending||l.isPending;x.useEffect(()=>{a(r?{name:r.name,semester_number:r.semester_number,start_date:r.start_date,end_date:r.end_date,academic_year_id:r.academic_year_id}:{name:"",semester_number:1,start_date:"",end_date:"",academic_year_id:""})},[r,t]),x.useEffect(()=>{if(n.academic_year_id&&n.semester_number){const f=s==null?void 0:s.find(m=>m.id===n.academic_year_id);if(f){const m=Dxe(f.start_date,n.semester_number);a(v=>({...v,start_date:m.start_date,end_date:m.end_date,name:n.semester_number===1?"Semester 1":"Semester 2"}))}}},[n.academic_year_id,n.semester_number,s]);const u=()=>{a({name:"",semester_number:1,start_date:"",end_date:"",academic_year_id:""}),e()},h=f=>{f.preventDefault(),!(!n.name.trim()||!n.academic_year_id||!n.start_date||!n.end_date)&&(c&&r?l.mutate({id:r.id,name:n.name.trim(),semester_number:n.semester_number,start_date:n.start_date,end_date:n.end_date},{onSuccess:u}):o.mutate({name:n.name.trim(),semester_number:n.semester_number,start_date:n.start_date,end_date:n.end_date,academic_year_id:n.academic_year_id},{onSuccess:u}))};return i.jsx(kt,{open:t,onOpenChange:u,children:i.jsxs(xt,{className:"bg-gray-900/95 border-gray-600/30 backdrop-blur-xl text-white max-w-md",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"flex items-center gap-2 text-xl font-semibold",children:[i.jsx(Ve,{className:"h-5 w-5 text-purple-400"}),c?"Edit Semester":"Tambah Semester"]})}),i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[!c&&i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"academic_year",className:"text-gray-300 mb-2 block",children:"Tahun Ajaran"}),i.jsxs(Re,{value:n.academic_year_id,onValueChange:f=>a(m=>({...m,academic_year_id:f})),children:[i.jsx(De,{className:"bg-gray-800/50 border-gray-600/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 rounded-xl h-12",children:i.jsx($e,{placeholder:"Pilih tahun ajaran"})}),i.jsx(Pe,{className:"bg-gray-900/95 border-gray-600/30 backdrop-blur-xl",children:s==null?void 0:s.map(f=>i.jsx(he,{value:f.id,className:"text-white hover:bg-purple-400/20",children:f.year_name},f.id))})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"semester_number",className:"text-gray-300 mb-2 block",children:"Semester"}),i.jsxs(Re,{value:n.semester_number.toString(),onValueChange:f=>a(m=>({...m,semester_number:parseInt(f)})),children:[i.jsx(De,{className:"bg-gray-800/50 border-gray-600/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 rounded-xl h-12",children:i.jsx($e,{})}),i.jsxs(Pe,{className:"bg-gray-900/95 border-gray-600/30 backdrop-blur-xl",children:[i.jsx(he,{value:"1",className:"text-white hover:bg-purple-400/20",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:_h.SEMESTER_1.name}),i.jsxs("span",{className:"text-xs text-gray-400",children:["(",_h.SEMESTER_1.description,")"]})]})}),i.jsx(he,{value:"2",className:"text-white hover:bg-purple-400/20",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:_h.SEMESTER_2.name}),i.jsxs("span",{className:"text-xs text-gray-400",children:["(",_h.SEMESTER_2.description,")"]})]})})]})]})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"name",className:"text-gray-300 mb-2 block",children:"Nama Semester"}),i.jsx(me,{id:"name",type:"text",value:n.name,onChange:f=>a(m=>({...m,name:f.target.value})),className:"bg-gray-800/50 border-gray-600/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 rounded-xl h-12",placeholder:"Contoh: Semester 1",required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"start_date",className:"text-gray-300 mb-2 block",children:"Tanggal Mulai"}),i.jsx(me,{id:"start_date",type:"date",value:n.start_date,onChange:f=>a(m=>({...m,start_date:f.target.value})),className:"bg-gray-800/50 border-gray-600/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 rounded-xl h-12",required:!0})]}),i.jsxs("div",{children:[i.jsx(ne,{htmlFor:"end_date",className:"text-gray-300 mb-2 block",children:"Tanggal Selesai"}),i.jsx(me,{id:"end_date",type:"date",value:n.end_date,onChange:f=>a(m=>({...m,end_date:f.target.value})),className:"bg-gray-800/50 border-gray-600/30 text-white focus:border-purple-400/50 focus:ring-purple-400/20 rounded-xl h-12",required:!0})]})]}),i.jsxs(Tr,{className:"flex gap-2 pt-4",children:[i.jsxs(K,{type:"button",variant:"outline",onClick:u,className:"bg-gray-800/50 border-gray-600/30 text-white hover:bg-gray-700/50 rounded-xl",children:[i.jsx(Ds,{className:"h-4 w-4 mr-2"}),"Batal"]}),i.jsxs(K,{type:"submit",disabled:d||!n.name.trim()||!n.academic_year_id||!n.start_date||!n.end_date,className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl",children:[i.jsx(dc,{className:"h-4 w-4 mr-2"}),d?"Menyimpan...":c?"Perbarui":"Simpan"]})]})]})]})})},MCe=({className:t=""})=>{const[e,r]=x.useState(!1),[n,a]=x.useState(null),[s,o]=x.useState(null),{data:l,isLoading:c}=t$(),d=Txe(),u=n$(),h=g=>{a(g),r(!0)},f=async g=>{if(window.confirm("Apakah Anda yakin ingin menghapus semester ini?")){o(g);try{await d.mutateAsync(g)}finally{o(null)}}},m=g=>{u.mutate(g)},v=()=>{r(!1),a(null)},p=l==null?void 0:l.reduce((g,y)=>{var w;const b=((w=y.academic_year)==null?void 0:w.year_name)||"Kelola Semester";return g[b]||(g[b]=[]),g[b].push(y),g},{});return c?i.jsx("div",{className:`space-y-4 ${t}`,children:[1,2,3].map(g=>i.jsxs(ie,{className:"bg-gray-800/40 backdrop-blur-sm border-gray-600/30 animate-pulse",children:[i.jsx(_e,{children:i.jsx("div",{className:"h-6 bg-gray-700/50 rounded w-1/3"})}),i.jsx(oe,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"h-4 bg-gray-700/50 rounded w-1/2"}),i.jsx("div",{className:"h-4 bg-gray-700/50 rounded w-2/3"})]})})]},g))}):i.jsxs("div",{className:`space-y-6 ${t}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Manajemen Semester"}),i.jsx("p",{className:"text-gray-400",children:"Kelola semester untuk setiap tahun ajaran"})]}),i.jsxs(K,{onClick:()=>r(!0),className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl",children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Tambah Semester"]})]}),!l||l.length===0?i.jsx(ie,{className:"bg-gray-800/40 backdrop-blur-sm border-gray-600/30",children:i.jsxs(oe,{className:"flex flex-col items-center justify-center py-12",children:[i.jsx(Ve,{className:"h-12 w-12 text-gray-500 mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Belum Ada Semester"}),i.jsx("p",{className:"text-gray-400 text-center mb-4",children:"Mulai dengan menambahkan semester untuk tahun ajaran Anda"}),i.jsxs(K,{onClick:()=>r(!0),className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white rounded-xl",children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Tambah Semester Pertama"]})]})}):i.jsx("div",{className:"space-y-6",children:Object.entries(p||{}).map(([g,y])=>i.jsxs(ie,{className:"bg-gray-800/40 backdrop-blur-sm border-gray-600/30",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-white flex items-center gap-2",children:[i.jsx(Ve,{className:"h-5 w-5 text-purple-400"}),g]})}),i.jsx(oe,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y==null?void 0:y.map(b=>i.jsxs("div",{className:`p-4 rounded-xl border transition-all duration-300 ${b.is_active?"bg-purple-500/20 border-purple-400/50":"bg-gray-700/30 border-gray-600/30 hover:border-gray-500/50"}`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h4",{className:"font-semibold text-white",children:b.name}),b.is_active&&i.jsxs(st,{className:"bg-green-500/20 text-green-400 text-xs",children:[i.jsx($i,{className:"h-3 w-3 mr-1"}),"Aktif"]})]}),i.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1",children:[i.jsx(Gt,{className:"h-3 w-3"}),Zb(b.semester_number)]})]}),i.jsxs("div",{className:"flex gap-1",children:[!b.is_active&&i.jsx(K,{size:"sm",variant:"ghost",onClick:()=>m(b.id),disabled:u.isPending,className:"h-8 w-8 p-0 text-green-400 hover:bg-green-400/20",title:"Aktifkan semester",children:i.jsx($i,{className:"h-4 w-4"})}),i.jsx(K,{size:"sm",variant:"ghost",onClick:()=>h(b),className:"h-8 w-8 p-0 text-blue-400 hover:bg-blue-400/20",title:"Edit semester",children:i.jsx(Ts,{className:"h-4 w-4"})}),i.jsx(K,{size:"sm",variant:"ghost",onClick:()=>f(b.id),disabled:s===b.id||b.is_active,className:"h-8 w-8 p-0 text-red-400 hover:bg-red-400/20 disabled:opacity-50",title:b.is_active?"Tidak dapat menghapus semester aktif":"Hapus semester",children:i.jsx(Ut,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"text-xs text-gray-400 space-y-1",children:[i.jsxs("div",{children:["Mulai: ",be(new Date(b.start_date),"dd MMMM yyyy",{locale:bt})]}),i.jsxs("div",{children:["Selesai: ",be(new Date(b.end_date),"dd MMMM yyyy",{locale:bt})]})]})]},b.id))})})]},g))}),i.jsx(PCe,{isOpen:e,onClose:v,editingSemester:n})]})},OCe=({lessonDuration:t,setLessonDuration:e})=>{const[r,n]=x.useState(!1),[a,s]=x.useState(!1),{data:o}=fr(),{data:l}=ma(),c=Mve(),d=u=>{c.mutate(u)};return a?i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx(K,{onClick:()=>s(!1),variant:"outline",className:"bg-card border-border text-foreground hover:bg-accent rounded-xl",children:" Kembali ke Pengaturan Akademik"})}),i.jsx(MCe,{})]}):i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border",children:[i.jsx(_e,{className:"pb-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Mm,{className:"h-6 w-6 text-purple-400"}),i.jsx("div",{children:i.jsx(ne,{htmlFor:"active-academic-year",className:"text-card-foreground font-medium mb-2 block",children:i.jsx("span",{className:"font-bold text-base text-inherit",children:"Tahun Ajaran Aktif"})})})]}),i.jsxs(K,{onClick:()=>n(!0),className:"bg-purple-500 hover:bg-purple-600 text-white font-semibold",size:"sm",children:[i.jsx(Z3,{className:"h-4 w-4 mr-2"}),"Tambah"]})]})}),i.jsx(oe,{children:i.jsxs("div",{children:[i.jsxs(Re,{value:(l==null?void 0:l.id)||"",onValueChange:d,children:[i.jsx(De,{className:"bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Pilih tahun ajaran"})}),i.jsx(Pe,{className:"bg-popover border-border",children:o==null?void 0:o.map(u=>i.jsx(he,{value:u.id,className:"text-popover-foreground hover:bg-accent",children:i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsx("span",{children:u.year_name}),u.is_active&&i.jsx("span",{className:"ml-2 px-2 py-1 bg-green-500 text-white text-xs rounded-full font-medium",children:"Aktif"})]})},u.id))})]}),o&&o.length===0&&i.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:'Belum ada tahun ajaran. Klik tombol "Tambah" untuk membuat tahun ajaran baru.'})]})})]}),i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border",children:[i.jsx(_e,{className:"pb-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Kt,{className:"h-6 w-6 text-cyan-400"}),i.jsx("div",{children:i.jsx(ne,{className:"text-card-foreground font-medium mb-2 block",children:i.jsx("span",{className:"font-bold text-base text-inherit",children:"Semester Aktif"})})})]}),i.jsxs(K,{onClick:()=>s(!0),className:"bg-cyan-500 hover:bg-cyan-600 text-white font-semibold",size:"sm",children:[i.jsx(Ve,{className:"h-4 w-4 mr-2"}),"Kelola"]})]})}),i.jsx(oe,{children:i.jsx(DCe,{})})]}),i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border",children:[i.jsx(_e,{className:"pb-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Gt,{className:"h-6 w-6 text-orange-400"}),i.jsx("div",{children:i.jsx(ne,{htmlFor:"lesson-duration",className:"text-card-foreground font-medium mb-2 block",children:i.jsx("span",{className:"font-bold text-base",children:"Durasi Sesi/Pertemuan (Menit)"})})})]})}),i.jsx(oe,{children:i.jsx("div",{children:i.jsx(me,{id:"lesson-duration",type:"number",value:t,onChange:u=>e(parseInt(u.target.value)||45),className:"bg-background border-border text-foreground",min:"15",max:"180",step:"5"})})})]}),i.jsx(TCe,{isOpen:r,onClose:()=>n(!1)})]})};var j5="AlertDialog",[RCe,XAe]=Kn(j5,[GC]),Va=GC(),S5=t=>{const{__scopeAlertDialog:e,...r}=t,n=Va(e);return i.jsx(Tx,{...n,...r,modal:!0})};S5.displayName=j5;var $Ce="AlertDialogTrigger",k5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=Va(r);return i.jsx(x3,{...a,...n,ref:e})});k5.displayName=$Ce;var ICe="AlertDialogPortal",N5=t=>{const{__scopeAlertDialog:e,...r}=t,n=Va(e);return i.jsx(Dx,{...n,...r})};N5.displayName=ICe;var LCe="AlertDialogOverlay",E5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=Va(r);return i.jsx(wu,{...a,...n,ref:e})});E5.displayName=LCe;var dl="AlertDialogContent",[FCe,BCe]=RCe(dl),C5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,children:n,...a}=t,s=Va(r),o=x.useRef(null),l=cr(e,o),c=x.useRef(null);return i.jsx(w3,{contentName:dl,titleName:A5,docsSlug:"alert-dialog",children:i.jsx(FCe,{scope:r,cancelRef:c,children:i.jsxs(_u,{role:"alertdialog",...s,...a,ref:l,onOpenAutoFocus:je(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[i.jsx(PC,{children:n}),i.jsx(UCe,{contentRef:o})]})})})});C5.displayName=dl;var A5="AlertDialogTitle",T5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=Va(r);return i.jsx(ju,{...a,...n,ref:e})});T5.displayName=A5;var D5="AlertDialogDescription",P5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=Va(r);return i.jsx(Su,{...a,...n,ref:e})});P5.displayName=D5;var qCe="AlertDialogAction",M5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,a=Va(r);return i.jsx(Am,{...a,...n,ref:e})});M5.displayName=qCe;var O5="AlertDialogCancel",R5=x.forwardRef((t,e)=>{const{__scopeAlertDialog:r,...n}=t,{cancelRef:a}=BCe(O5,r),s=Va(r),o=cr(e,a);return i.jsx(Am,{...s,...n,ref:o})});R5.displayName=O5;var UCe=({contentRef:t})=>{const e=`\`${dl}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${dl}\` by passing a \`${D5}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${dl}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{var n;document.getElementById((n=t.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,t]),null},zCe=S5,HCe=k5,WCe=N5,$5=E5,I5=C5,L5=M5,F5=R5,B5=T5,q5=P5;const KCe=zCe,GCe=HCe,VCe=WCe,U5=x.forwardRef(({className:t,...e},r)=>i.jsx($5,{className:se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:r}));U5.displayName=$5.displayName;const z5=x.forwardRef(({className:t,...e},r)=>i.jsxs(VCe,{children:[i.jsx(U5,{}),i.jsx(I5,{ref:r,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...e})]}));z5.displayName=I5.displayName;const H5=({className:t,...e})=>i.jsx("div",{className:se("flex flex-col space-y-2 text-center sm:text-left",t),...e});H5.displayName="AlertDialogHeader";const W5=({className:t,...e})=>i.jsx("div",{className:se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});W5.displayName="AlertDialogFooter";const K5=x.forwardRef(({className:t,...e},r)=>i.jsx(B5,{ref:r,className:se("text-lg font-semibold",t),...e}));K5.displayName=B5.displayName;const G5=x.forwardRef(({className:t,...e},r)=>i.jsx(q5,{ref:r,className:se("text-sm text-muted-foreground",t),...e}));G5.displayName=q5.displayName;const V5=x.forwardRef(({className:t,...e},r)=>i.jsx(L5,{ref:r,className:se(wd(),t),...e}));V5.displayName=L5.displayName;const Q5=x.forwardRef(({className:t,...e},r)=>i.jsx(F5,{ref:r,className:se(wd({variant:"outline"}),"mt-2 sm:mt-0",t),...e}));Q5.displayName=F5.displayName;const QCe=()=>{const[t,e]=x.useState({name:"",code:"",min_grade:"",max_grade:""}),[r,n]=x.useState(null),[a,s]=x.useState(!1),{data:o}=W_(),l=gCe(),c=pCe(),d=vCe(),u=()=>{t.name&&t.code&&t.min_grade&&t.max_grade&&(l.mutate({name:t.name,code:t.code,min_grade:parseInt(t.min_grade),max_grade:parseInt(t.max_grade),is_active:!0}),e({name:"",code:"",min_grade:"",max_grade:""}))},h=v=>{n({...v,min_grade:v.min_grade.toString(),max_grade:v.max_grade.toString()}),s(!0)},f=()=>{r&&(c.mutate({id:r.id,name:r.name,code:r.code,min_grade:parseInt(r.min_grade),max_grade:parseInt(r.max_grade)}),s(!1),n(null))},m=v=>{d.mutate(v)};return i.jsx(ie,{className:"bg-card backdrop-blur-sm border-border",children:i.jsxs(oe,{className:"space-y-6 p-6",children:[i.jsx("div",{className:"space-y-3",children:o==null?void 0:o.map(v=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/20 rounded-lg border border-border",children:[i.jsx("div",{className:"flex items-center space-x-3",children:i.jsxs("div",{children:[i.jsxs("p",{className:"text-foreground font-medium flex items-center space-x-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-purple-400"}),i.jsxs("span",{children:[v.name," (",v.code,")"]})]}),i.jsxs("p",{className:"text-muted-foreground text-sm flex items-center space-x-2",children:[i.jsx(tr,{className:"h-3 w-3 text-cyan-400"}),i.jsxs("span",{children:["Kelas ",v.min_grade," - ",v.max_grade]})]})]})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{size:"sm",variant:"ghost",className:"text-blue-400 hover:bg-blue-400/10",onClick:()=>h(v),children:i.jsx(Xh,{className:"h-4 w-4"})}),i.jsxs(KCe,{children:[i.jsx(GCe,{asChild:!0,children:i.jsx(K,{size:"sm",variant:"ghost",className:"text-red-400 hover:bg-red-400/10",children:i.jsx(Ut,{className:"h-4 w-4"})})}),i.jsxs(z5,{className:"bg-background border-border",children:[i.jsxs(H5,{children:[i.jsx(K5,{className:"text-foreground",children:"Hapus Jenjang Pendidikan"}),i.jsxs(G5,{className:"text-muted-foreground",children:['Apakah Anda yakin ingin menghapus jenjang "',v.name,'"? Tindakan ini tidak dapat dibatalkan dan akan menghapus semua tingkat kelas yang terkait.']})]}),i.jsxs(W5,{children:[i.jsx(Q5,{className:"bg-background border-border text-foreground hover:bg-accent",children:"Batal"}),i.jsx(V5,{className:"bg-red-500 hover:bg-red-600 text-white",onClick:()=>m(v.id),children:"Hapus"})]})]})]})]})]},v.id))}),i.jsxs("div",{className:"border-t border-border pt-6 space-y-4",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(ct,{className:"h-5 w-5 text-lime-400"}),i.jsx("h3",{className:"text-lg font-medium text-foreground",children:"Tambah Jenjang Baru"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(me,{placeholder:"Nama Jenjang (contoh: SMA)",value:t.name,onChange:v=>e(p=>({...p,name:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"}),i.jsx(me,{placeholder:"Kode (contoh: SMA)",value:t.code,onChange:v=>e(p=>({...p,code:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"}),i.jsx(me,{placeholder:"Kelas Minimum (contoh: 10)",type:"number",value:t.min_grade,onChange:v=>e(p=>({...p,min_grade:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"}),i.jsx(me,{placeholder:"Kelas Maksimum (contoh: 12)",type:"number",value:t.max_grade,onChange:v=>e(p=>({...p,max_grade:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"})]}),i.jsxs(K,{onClick:u,className:"w-full bg-lime-500 hover:bg-lime-600 text-white",disabled:l.isPending,children:[i.jsx(ct,{className:"h-4 w-4 mr-2"}),"Tambah Jenjang"]})]}),i.jsx(kt,{open:a,onOpenChange:s,children:i.jsxs(xt,{className:"bg-background border-border",children:[i.jsx(wt,{children:i.jsxs(_t,{className:"text-foreground flex items-center space-x-2",children:[i.jsx(Xh,{className:"h-5 w-5 text-blue-400"}),i.jsx("span",{children:"Edit Jenjang Pendidikan"})]})}),r&&i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(me,{placeholder:"Nama Jenjang",value:r.name,onChange:v=>n(p=>({...p,name:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"}),i.jsx(me,{placeholder:"Kode",value:r.code,onChange:v=>n(p=>({...p,code:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"}),i.jsx(me,{placeholder:"Kelas Minimum",type:"number",value:r.min_grade,onChange:v=>n(p=>({...p,min_grade:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"}),i.jsx(me,{placeholder:"Kelas Maksimum",type:"number",value:r.max_grade,onChange:v=>n(p=>({...p,max_grade:v.target.value})),className:"bg-background border-border text-foreground placeholder-muted-foreground"})]}),i.jsxs(Tr,{children:[i.jsx(K,{variant:"outline",onClick:()=>s(!1),className:"bg-background border-border text-foreground hover:bg-accent",children:"Batal"}),i.jsx(K,{onClick:f,className:"bg-blue-500 hover:bg-blue-600 text-white",disabled:c.isPending,children:"Simpan"})]})]})})]})})},JCe=()=>{const{profile:t}=tt();return Ye({queryKey:["general-settings"],queryFn:async()=>{if(!(t!=null&&t.school_id))return null;const{data:e,error:r}=await W.from("general_settings").select("*").eq("school_id",t.school_id).single();if(r&&r.code!=="PGRST116")throw r;return e},enabled:!!(t!=null&&t.school_id)})},YCe=()=>{const t=Ne(),{toast:e}=Ce(),{profile:r}=tt();return Se({mutationFn:async n=>{if(!(r!=null&&r.school_id))throw new Error("School ID not found");const{data:a}=await W.from("general_settings").select("id").eq("school_id",r.school_id).single();if(a){const{data:s,error:o}=await W.from("general_settings").update(n).eq("id",a.id).select().single();if(o)throw o;return s}else{const{data:s,error:o}=await W.from("general_settings").insert({...n,school_id:r.school_id,academic_year_id:n.active_academic_year_id||r.school_id}).select().single();if(o)throw o;return s}},onSuccess:()=>{t.invalidateQueries({queryKey:["general-settings"]}),e({title:"Berhasil",description:"Pengaturan berhasil disimpan"})},onError:n=>{e({title:"Error",description:"Gagal menyimpan pengaturan",variant:"destructive"}),console.error("Error updating general settings:",n)}})},XCe=()=>{const[t,e]=x.useState(45),{data:r,isLoading:n}=JCe(),a=YCe(),s=()=>{r?a.mutate({...r,lesson_duration_minutes:t}):a.mutate({lesson_duration_minutes:t})};return $.useEffect(()=>{r&&e(r.lesson_duration_minutes)},[r]),n?i.jsx("div",{className:"min-h-screen bg-background p-6 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qr,{className:"h-12 w-12 animate-spin text-purple-400 mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Memuat pengaturan..."})]})}):i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between px-[40px]",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx($m,{className:"h-8 w-8 text-purple-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Pengaturan Umum"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola pengaturan sistem dan preferensi aplikasi"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(K,{variant:"outline",className:"bg-red-400/10 border border-red-400/20 text-red-400 hover:bg-ref-400/20 flex items-center justify-center space-x-2",children:[i.jsx(pL,{className:"h-5 w-5 mr-2"}),"Reset"]}),i.jsxs(K,{onClick:s,disabled:a.isPending,className:"bg-lime-400/10 border border-lime-400/20 text-lime-400 hover:bg-lime-400/20 flex items-center justify-center space-x-2",children:[a.isPending?i.jsx(Qr,{className:"h-5 w-5 mr-2 animate-spin"}):i.jsx(dc,{className:"h-5 w-5 mr-2"}),"Simpan"]})]})]}),i.jsx(ie,{className:"bg-card backdrop-blur-sm border-border",children:i.jsx(oe,{className:"p-6",children:i.jsxs(mo,{defaultValue:"academic",className:"space-y-6",children:[i.jsxs(Gs,{className:"grid w-full grid-cols-2 bg-muted border-border rounded-xl p-1 backdrop-blur-sm",children:[i.jsx(jr,{value:"academic",className:"data-[state=active]:bg-sky-500 data-[state=active]:text-white text-muted-foreground rounded-lg font-medium transition-all duration-300",children:"Pengaturan Akademik"}),i.jsx(jr,{value:"education-levels",className:"data-[state=active]:bg-sky-500 data-[state=active]:text-white text-muted-foreground rounded-lg font-medium transition-all duration-300",children:"Jenjang Pendidikan"})]}),i.jsx(Sr,{value:"academic",className:"space-y-6 mt-6",children:i.jsx(OCe,{lessonDuration:t,setLessonDuration:e})}),i.jsx(Sr,{value:"education-levels",className:"space-y-6 mt-6",children:i.jsx(QCe,{})})]})})})]})})},ZCe=()=>{const{data:t,isLoading:e}=Ac(),r=e$(),n=Exe(),a=x.useRef(null),[s,o]=x.useState({name:"",principal_name:"",address:"",phone:"",email:""}),[l,c]=x.useState(null);$.useEffect(()=>{t&&o({name:t.name||"",principal_name:t.principal_name||"",address:t.address||"",phone:t.phone||"",email:t.email||""})},[t]);const d=(g,y)=>{o(b=>({...b,[g]:y}))},u=g=>{var j;const y=(j=g.target.files)==null?void 0:j[0];if(!y)return;if(!["image/jpeg","image/jpg","image/png"].includes(y.type)){nt({title:"Error",description:"Format file harus PNG, JPG, atau JPEG",variant:"destructive"});return}if(y.size>5*1024*1024){nt({title:"Error",description:"Ukuran file maksimal 5MB",variant:"destructive"});return}const w=new FileReader;w.onload=()=>{c(w.result)},w.readAsDataURL(y),n.mutate(y,{onSuccess:()=>{c(null),a.current&&(a.current.value="")},onError:()=>{c(null),a.current&&(a.current.value="")}})},h=()=>{var g;(g=a.current)==null||g.click()},f=()=>{r.mutate(s)},m=l||(t==null?void 0:t.logo_url),v=r.isPending,p=n.isPending;return e?i.jsx("div",{className:"min-h-screen bg-background p-6 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qr,{className:"h-12 w-12 animate-spin text-cyan-400 mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Memuat data sekolah..."})]})}):i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("div",{className:"flex items-center space-x-4 mb-2",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(js,{className:"h-8 w-8 text-cyan-400"}),i.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Info Sekolah"})]})}),i.jsx("p",{className:"text-muted-foreground",children:"Kelola informasi dan identitas sekolah"})]}),i.jsxs(K,{onClick:f,disabled:v,className:"bg-cyan-500 hover:bg-cyan-600 text-gray-900 font-semibold shadow-lg transition-all duration-300 transform hover:scale-105",children:[v?i.jsx(Qr,{className:"h-6 w-6 mr-3 animate-spin"}):i.jsx(dc,{className:"h-6 w-6 mr-3"}),"Simpan Perubahan"]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs(ie,{className:"bg-card backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"text-card-foreground flex items-center text-xl",children:[i.jsx(rj,{className:"h-6 w-6 text-cyan-400 mr-3"}),"Logo Sekolah"]}),i.jsx(Hr,{className:"text-muted-foreground",children:"Upload logo sekolah (PNG, JPG, JPEG - Max 5MB)"})]}),i.jsx(oe,{className:"space-y-4",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("div",{className:"w-36 h-36 bg-muted/50 rounded-xl flex items-center justify-center overflow-hidden border border-border backdrop-blur-sm",children:m?i.jsx("img",{src:m,alt:"Logo Sekolah",className:"w-full h-full object-cover rounded-xl"}):i.jsx(js,{className:"h-20 w-20 text-cyan-400"})}),i.jsx("input",{type:"file",ref:a,onChange:u,accept:"image/*",className:"hidden"}),i.jsxs(K,{variant:"outline",onClick:h,disabled:p,className:"bg-cyan-400/10 border border-cyan-400/20 text-cyan-400 hover:bg-cyan-400/20 flex items-center justify-center space-x-2",children:[p?i.jsx(Qr,{className:"h-5 w-5 mr-2 animate-spin"}):i.jsx(rj,{className:"h-5 w-5 mr-2"}),p?"Mengupload...":"Upload Logo"]})]})})]}),i.jsxs(ie,{className:"lg:col-span-2 bg-card backdrop-blur-sm border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"text-card-foreground flex items-center text-xl",children:[i.jsx(bA,{className:"h-6 w-6 text-lime-400 mr-3"}),"Informasi Dasar"]}),i.jsx(Hr,{className:"text-muted-foreground",children:"Data dasar sekolah dan informasi kontak"})]}),i.jsxs(oe,{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs(ne,{htmlFor:"school-name",className:"text-foreground flex items-center mb-2",children:[i.jsx(js,{className:"h-4 w-4 text-lime-400 mr-2"}),"Nama Sekolah"]}),i.jsx(me,{id:"school-name",value:s.name,onChange:g=>d("name",g.target.value),placeholder:"Masukkan nama sekolah",className:"bg-background border-lime-400/30 text-foreground placeholder-muted-foreground focus:border-lime-400/50 focus:ring-lime-400/20 focus:ring-2 backdrop-blur-sm h-12"})]}),i.jsxs("div",{children:[i.jsxs(ne,{htmlFor:"principal-name",className:"text-foreground flex items-center mb-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-cyan-400 mr-2"}),"Nama Kepala Sekolah"]}),i.jsx(me,{id:"principal-name",value:s.principal_name,onChange:g=>d("principal_name",g.target.value),placeholder:"Masukkan nama kepala sekolah",className:"bg-background border-cyan-400/30 text-foreground placeholder-muted-foreground focus:border-cyan-400/50 focus:ring-cyan-400/20 focus:ring-2 backdrop-blur-sm h-12"})]})]}),i.jsxs("div",{children:[i.jsxs(ne,{htmlFor:"address",className:"text-foreground flex items-center mb-2",children:[i.jsx(Om,{className:"h-4 w-4 text-blue-400 mr-2"}),"Alamat"]}),i.jsx(qn,{id:"address",value:s.address,onChange:g=>d("address",g.target.value),placeholder:"Masukkan alamat lengkap",className:"bg-background border-blue-400/30 text-foreground placeholder-muted-foreground focus:border-blue-400/50 focus:ring-blue-400/20 focus:ring-2 backdrop-blur-sm",rows:3})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs(ne,{htmlFor:"phone",className:"text-foreground flex items-center mb-2",children:[i.jsx(Hx,{className:"h-4 w-4 text-purple-400 mr-2"}),"Nomor Telepon"]}),i.jsx(me,{id:"phone",value:s.phone,onChange:g=>d("phone",g.target.value),placeholder:"Masukkan nomor telepon",className:"bg-background border-purple-400/30 text-foreground placeholder-muted-foreground focus:border-purple-400/50 focus:ring-purple-400/20 focus:ring-2 backdrop-blur-sm h-12"})]}),i.jsxs("div",{children:[i.jsxs(ne,{htmlFor:"email",className:"text-foreground flex items-center mb-2",children:[i.jsx(zx,{className:"h-4 w-4 text-pink-400 mr-2"}),"Email"]}),i.jsx(me,{id:"email",type:"email",value:s.email,onChange:g=>d("email",g.target.value),placeholder:"Masukkan email",className:"bg-background border-pink-400/30 text-foreground placeholder-muted-foreground focus:border-pink-400/50 focus:ring-pink-400/20 focus:ring-2 backdrop-blur-sm h-12"})]})]})]})]})]})]})})},eAe=()=>{const[t,e]=x.useState(""),[r,n]=x.useState(1),[a,s]=x.useState(""),[o,l]=x.useState([]),[c,d]=x.useState([]),[u,h]=x.useState([]),[f,m]=x.useState([]),[v,p]=x.useState(null),[g,y]=x.useState(!0),[b,w]=x.useState(null),j=x.useRef(null),{toast:_}=Ce();x.useEffect(()=>{const A=new URLSearchParams(window.location.search),C=A.get("class"),R=A.get("week");if(C&&e(C),R){const L=parseInt(R,10);L>=1&&L<=24&&n(L)}},[]),x.useEffect(()=>{(async()=>{y(!0),w(null);try{const{data:C,error:R}=await W.from("class_schedules").select(`
            id,
            academic_week,
            academic_year_id,
            class_id,
            day_of_week,
            start_time,
            end_time,
            subject_id,
            teacher_id,
            room,
            notes,
            created_at,
            schedule_subjects (id, name, code, color),
            classes (id, name, level, grade),
            teachers (id, full_name, nip)
          `).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0});if(R)throw R;const{data:L,error:M}=await W.from("classes").select("*").order("name",{ascending:!0});if(M)throw M;const{data:I,error:B}=await W.rpc("get_academic_weeks").order("week_number",{ascending:!0});if(B){const G=Array.from({length:24},(Y,Z)=>({week_number:Z+1,start_date:new Date(2025,0,6+Z*7).toISOString().split("T")[0],end_date:new Date(2025,0,12+Z*7).toISOString().split("T")[0]}));h(G)}else h(I||[]);const{data:H,error:q}=await W.from("time_sessions").select("*").order("start_time",{ascending:!0});if(q)throw q;const{data:O,error:F}=await W.from("schools").select("*").limit(1).single();if(F&&F.code!=="PGRST116")throw F;l(C||[]),d(L||[]),m(H||[]),p(O),console.log(" Public data fetched successfully:",{schedules:(C==null?void 0:C.length)||0,classes:(L==null?void 0:L.length)||0,weeks:(I==null?void 0:I.length)||0,timeSessions:(H==null?void 0:H.length)||0})}catch(C){console.error(" Error fetching public data:",C),w(C.message||"Failed to load schedule data")}finally{y(!1)}})()},[]),x.useEffect(()=>{const A=new URLSearchParams;t&&A.set("class",t),A.set("week",r.toString());const C=window.location.origin;s(`${C}/public/schedule?${A.toString()}`)},[t,r]);const S=x.useMemo(()=>!o||o.length===0?[]:o.filter(A=>{var C;return!(A.academic_week!==r||t&&A.class_id!==t||!A.start_time||!A.end_time||!((C=A.schedule_subjects)!=null&&C.name))}),[o,r,t]),N=x.useMemo(()=>{if(!S||S.length===0)return[];const A=u.find(C=>C.week_number===r);return A?S.map(C=>{const R=new Date(A.start_date),L=new Date(R),M=C.day_of_week===7?0:C.day_of_week;L.setDate(R.getDate()+M);const I=L.toISOString().split("T")[0],B=C.schedule_subjects,H=C.teachers;return{id:C.id,title:(B==null?void 0:B.name)||"Mata Pelajaran",start:`${I}T${C.start_time}`,end:`${I}T${C.end_time}`,backgroundColor:(B==null?void 0:B.color)||"#6b7280",borderColor:(B==null?void 0:B.color)||"#6b7280",textColor:"#ffffff",extendedProps:{teacher:H==null?void 0:H.full_name,classroom:C.room}}}).filter(Boolean):[]},[S,u,r]),k=x.useMemo(()=>{if(!f||f.length===0)return{slotMinTime:"06:00:00",slotMaxTime:"18:00:00"};const A=f.map(M=>M.start_time),C=f.map(M=>M.end_time),R=A.sort()[0],L=C.sort().reverse()[0];return{slotMinTime:R||"06:00:00",slotMaxTime:L||"18:00:00"}},[f]),E=async()=>{try{await navigator.clipboard.writeText(a),_({title:" Link Berhasil Disalin",description:"Link jadwal telah disalin ke clipboard."})}catch{_({title:" Gagal Menyalin Link",description:"Terjadi kesalahan saat menyalin link.",variant:"destructive"})}},P=()=>{r>1&&n(r-1)},T=()=>{r<u.length&&n(r+1)},D=u.find(A=>A.week_number===r);return g?i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-lime-400 mx-auto mb-4"}),i.jsx("div",{className:"text-white text-lg",children:"Memuat Jadwal..."})]})}):b?i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-red-400 text-lg mb-4",children:" Gagal Memuat Jadwal"}),i.jsx("div",{className:"text-gray-400",children:b})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-900",children:[i.jsx("div",{className:"bg-gray-800/50 border-b border-gray-700/50 p-4",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ve,{className:"h-8 w-8 text-lime-400"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:(v==null?void 0:v.name)||"Jadwal Sekolah"}),i.jsx("p",{className:"text-gray-400",children:"Public Schedule View"})]})]}),i.jsxs(K,{onClick:E,className:"bg-lime-400 hover:bg-lime-500 text-gray-900",children:[i.jsx(Wx,{className:"h-4 w-4 mr-2"}),"Copy Link"]})]}),i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qa,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Filter:"})]}),i.jsxs(Re,{value:t,onValueChange:e,children:[i.jsx(De,{className:"w-48 bg-gray-700 border-gray-600 text-white",children:i.jsx($e,{placeholder:"Pilih Kelas"})}),i.jsx(Pe,{className:"bg-gray-700 border-gray-600",children:c.map(A=>i.jsx(he,{value:A.id,className:"text-white hover:bg-gray-600",children:A.name},A.id))})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(K,{variant:"outline",size:"sm",onClick:P,disabled:r<=1,className:"bg-gray-700 border-gray-600 text-white hover:bg-gray-600",children:i.jsx(kl,{className:"h-4 w-4"})}),i.jsxs("div",{className:"text-center px-4",children:[i.jsxs("div",{className:"text-white font-semibold",children:["Minggu ",r]}),D&&i.jsxs("div",{className:"text-xs text-gray-400",children:[new Date(D.start_date).toLocaleDateString("id-ID")," - ",new Date(D.end_date).toLocaleDateString("id-ID")]})]}),i.jsx(K,{variant:"outline",size:"sm",onClick:T,disabled:r>=u.length,className:"bg-gray-700 border-gray-600 text-white hover:bg-gray-600",children:i.jsx(Oa,{className:"h-4 w-4"})})]})]})]})}),i.jsx("div",{className:"max-w-7xl mx-auto p-4",children:i.jsx(ie,{className:"bg-gray-800/50 border-gray-700/50",children:i.jsx(oe,{className:"p-6",children:i.jsx("div",{style:{minHeight:"600px"},children:i.jsx(yo,{ref:j,plugins:[Pc,lp],initialView:"timeGridWeek",headerToolbar:!1,events:N,editable:!1,selectable:!1,height:"auto",locale:Ku,slotMinTime:k.slotMinTime,slotMaxTime:k.slotMaxTime,slotDuration:"00:30:00",slotLabelInterval:"01:00:00",allDaySlot:!1,weekends:!0,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},eventContent:A=>i.jsxs("div",{className:"p-1 text-xs",children:[i.jsx("div",{className:"font-semibold truncate",children:A.event.title}),i.jsx("div",{className:"text-xs opacity-75 truncate",children:A.event.extendedProps.teacher})]})})})})})})]})},tAe=()=>i.jsxs(i.Fragment,{children:[i.jsx(eAe,{}),i.jsx(Vx,{})]}),rAe=()=>{const t=[{id:"test-1",title:"MPLS",start:"2025-01-07T03:00:00",end:"2025-01-07T22:30:00",backgroundColor:"#ff6b6b",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-2",title:"MPLS",start:"2025-01-08T03:00:00",end:"2025-01-08T22:30:00",backgroundColor:"#4ecdc4",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-3",title:"MPLS",start:"2025-01-09T03:00:00",end:"2025-01-09T22:30:00",backgroundColor:"#45b7d1",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-4",title:"MPLS",start:"2025-01-10T03:00:00",end:"2025-01-10T22:30:00",backgroundColor:"#f9ca24",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-5",title:"Libur Semester",start:"2025-01-11T03:00:00",end:"2025-01-11T22:30:00",backgroundColor:"#6c5ce7",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-6",title:"Libur Semester",start:"2025-01-12T03:00:00",end:"2025-01-12T22:30:00",backgroundColor:"#a29bfe",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-7",title:"MPLS",start:"2025-01-13T03:00:00",end:"2025-01-13T22:30:00",backgroundColor:"#fd79a8",borderColor:"#ffffff",textColor:"#ffffff"},{id:"test-8",title:"MPLS",start:"2025-01-14T03:00:00",end:"2025-01-14T22:30:00",backgroundColor:"#fdcb6e",borderColor:"#ffffff",textColor:"#ffffff"}];return console.log(" TEST EVENTS:",t),i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"TEST - Public External View"}),i.jsx("p",{className:"text-gray-600",children:"Testing calendar with hardcoded events based on database data"})]})}),i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-6",children:i.jsx(ie,{children:i.jsxs(oe,{className:"p-6",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("h3",{className:"text-lg font-semibold",children:["Test Events Count: ",t.length]}),i.jsx("p",{className:"text-sm text-gray-600",children:"Events span from Jan 7-14, 2025 (Week 1-2)"})]}),i.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:i.jsx(yo,{plugins:[Pc],initialView:"timeGridWeek",headerToolbar:{left:"prev,next today",center:"title",right:"timeGridWeek,timeGridDay"},height:"auto",events:t,slotMinTime:"03:00:00",slotMaxTime:"23:00:00",slotDuration:"00:30:00",slotLabelInterval:"01:00:00",firstDay:1,weekends:!0,initialDate:"2025-01-06",eventDisplay:"block",locale:"id",dayHeaderFormat:{weekday:"long",day:"numeric",month:"short"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},eventContent:e=>{var n,a;const{event:r}=e;return i.jsxs("div",{className:"p-1 text-xs",children:[i.jsx("div",{className:"font-medium truncate",children:r.title}),i.jsxs("div",{className:"opacity-75 truncate",children:[(n=r.start)==null?void 0:n.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})," - ",(a=r.end)==null?void 0:a.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})]})]})}})})]})})}),i.jsxs("div",{className:"bg-gray-100 p-4 text-xs text-gray-600",children:[i.jsx("h4",{className:"font-bold mb-2",children:"Debug Information:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Total Events:"})," ",t.length]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Date Range:"})," Jan 7-14, 2025"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Time Range:"})," 03:00-22:30"]})]}),i.jsxs("div",{children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Week 1 Events:"})," ",t.filter(e=>e.start.includes("2025-01-0")).length]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Week 2 Events:"})," ",t.filter(e=>e.start.includes("2025-01-1")).length]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Calendar View:"})," timeGridWeek"]})]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsx("p",{children:i.jsx("strong",{children:"Event Details:"})}),i.jsx("ul",{className:"list-disc list-inside",children:t.map(e=>i.jsxs("li",{children:[e.title," - ",e.start," to ",e.end]},e.id))})]})]})]})},nAe=({schedules:t,academicWeeks:e,timeSessions:r,selectedWeek:n,onWeekChange:a,selectedClassId:s,className:o})=>{const l=e.find(g=>g.weekNumber===n),c=x.useMemo(()=>{if(!l)return null;const g=new Date(l.startDate),y=yr(g,6);return{startFormatted:be(g,"EEEE, dd/MM",{locale:bt}),endFormatted:be(y,"EEEE, dd/MM",{locale:bt}),fullRange:`${be(g,"EEEE, dd/MM",{locale:bt})} - ${be(y,"EEEE, dd/MM",{locale:bt})}`}},[l]),d=x.useMemo(()=>s?t?t.filter(y=>{var E;const b=parseInt(y.academic_week),w=parseInt(n.toString()),j=b===w,_=!s||y.class_id===s,S=y.start_time&&y.end_time&&(y.subject_name||((E=y.schedule_subjects)==null?void 0:E.name))&&y.day_of_week,N=/^\d{2}:\d{2}:\d{2}$/.test(y.start_time)&&/^\d{2}:\d{2}:\d{2}$/.test(y.end_time);return j&&_&&S&&N}):[]:[],[t,n,s]),u=x.useMemo(()=>{if(!d||d.length===0)return[];const y=(()=>{const w=e.find(N=>N.weekNumber===n);if(w)return new Date(w.startDate);const j=new Date(2025,0,6),_=(n-1)*7,S=new Date(j);return S.setDate(j.getDate()+_),S})();return d.map(w=>{try{let j,_;if(w.subject_name)j={id:w.subject_id,name:w.subject_name,color:w.subject_color},_={id:w.category_id,name:w.category_name,color:w.category_color};else if(w.schedule_subjects)j=w.schedule_subjects,_=w.schedule_subjects.session_categories;else return null;const N=w.day_of_week-1,k=new Date(y);k.setDate(y.getDate()+N);let E,P;try{const[A,C,R]=w.start_time.split(":").map(Number),[L,M,I]=w.end_time.split(":").map(Number);E=new Date(k),E.setHours(A,C,R||0,0),P=new Date(k),P.setHours(L,M,I||0,0)}catch{return null}const T={background:(j==null?void 0:j.color)||(_==null?void 0:_.color)||"#6b7280",border:"#ffffff",text:"#ffffff"};return{id:w.id,title:(j==null?void 0:j.name)||"Mata Pelajaran",start:E.toISOString(),end:P.toISOString(),backgroundColor:T.background,borderColor:T.border,textColor:T.text,extendedProps:{schedule:w,teacher:{id:w.teacher_id,full_name:w.teacher_name},class:{id:w.class_id,name:w.class_name},subject:j,category:_,originalColor:T.background,isPublic:!0}}}catch{return null}}).filter(Boolean)},[d,e,n]),h=()=>{n>1&&a(n-1)},f=()=>{n<e.length&&a(n+1)},m=()=>{const g=new Date,y=e.find(b=>{const w=new Date(b.startDate),j=new Date(b.endDate);return g>=w&&g<=j});a(y?y.weekNumber:1)},v=x.useRef(null),p=x.useRef(null);return x.useEffect(()=>{if(v.current){const g=v.current.querySelector(`[data-week="${n}"]`);g&&g.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[n]),x.useEffect(()=>{var y;const g=(y=p.current)==null?void 0:y.getApi();g&&l&&g.gotoDate(l.startDate)},[n,l]),i.jsxs("div",{className:se("w-full",o),children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"md:hidden space-y-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Minggu ",n]}),c&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm text-gray-600 font-medium",children:c.fullRange}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Pekan ",n," TA 2025/2026"]})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(K,{variant:"outline",size:"sm",onClick:h,disabled:n<=1,className:"flex items-center gap-1 px-3",children:[i.jsx(kl,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden xs:inline",children:"Sebelum"})]}),i.jsxs(K,{variant:"ghost",size:"sm",onClick:m,className:"flex items-center gap-1 px-3 border border-blue-500 text-blue-500 hover:bg-blue-50",title:"Minggu Ini",children:[i.jsx(Ve,{className:"h-4 w-4"}),i.jsx("span",{className:"text-xs",children:"Ini"})]}),i.jsxs(K,{variant:"outline",size:"sm",onClick:f,disabled:n>=e.length,className:"flex items-center gap-1 px-3",children:[i.jsx("span",{className:"hidden xs:inline",children:"Selanjut"}),i.jsx(Oa,{className:"h-4 w-4"})]})]}),i.jsxs("div",{className:"text-center text-sm text-gray-500",children:[d.length," kegiatan"]})]}),i.jsxs("div",{className:"hidden md:flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(K,{variant:"outline",size:"sm",onClick:h,disabled:n<=1,className:"bg-background border-border text-foreground hover:bg-primary hover:text-primary-foreground",children:i.jsx(kl,{className:"h-4 w-4"})}),i.jsxs("div",{className:"text-center",children:[i.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Minggu ",n]}),c&&i.jsxs("div",{className:"space-y-1",children:[i.jsx("p",{className:"text-sm text-gray-600 font-medium",children:c.fullRange}),i.jsxs("p",{className:"text-xs text-gray-500",children:["Pekan ",n," Tahun Akademik 2025/2026"]})]})]}),i.jsx(K,{variant:"outline",size:"sm",onClick:f,disabled:n>=e.length,className:"bg-background border-border text-foreground hover:bg-primary hover:text-primary-foreground",children:i.jsx(Oa,{className:"h-4 w-4"})}),i.jsx(K,{variant:"ghost",size:"sm",onClick:m,className:"w-10 h-10 rounded-full bg-background border border-blue-500 text-blue-500 hover:bg-blue-500/10 hover:border-blue-500/70 hover:text-blue-600 transition-all duration-300 transform hover:scale-105",title:"Minggu Ini",children:i.jsx(Ve,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"text-sm text-gray-500",children:[d.length," kegiatan"]})]})]}),i.jsx("div",{className:"relative z-15 p-3 py-[5px] my-0 mb-4",children:i.jsxs("div",{ref:v,className:"w-full overflow-x-auto pb-2 custom-scrollbar",children:[i.jsx("style",{children:`
              .custom-scrollbar::-webkit-scrollbar {
                height: 6px;
              }
              .custom-scrollbar::-webkit-scrollbar-track {
                background: hsl(var(--muted));
                border-radius: 3px;
              }
              .custom-scrollbar::-webkit-scrollbar-thumb {
                background: hsl(var(--muted-foreground) / 0.3);
                border-radius: 3px;
              }
              .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background: hsl(var(--muted-foreground) / 0.5);
              }
            `}),i.jsx("div",{className:"flex gap-2",style:{width:`${e.length*60}px`},children:e.map(g=>{const y=n===g.weekNumber;return i.jsx(K,{"data-week":g.weekNumber,variant:y?"default":"outline",size:"sm",onClick:()=>a(g.weekNumber),className:`h-6 flex items-center justify-center space-x-2 text-xs font-thin rounded-full px-3 transition-all duration-200 ${y?"bg-primary border-primary text-primary-foreground":"bg-background border-border text-foreground hover:bg-accent hover:text-accent-foreground hover:scale-105"}`,children:i.jsx("span",{className:"font-medium",children:g.weekNumber})},g.weekNumber)})})]})}),i.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 w-full overflow-hidden",children:[i.jsx("style",{children:`
            /* Mobile Calendar Optimizations */
            @media (max-width: 768px) {
              .fc-timegrid-slot-label {
                font-size: 10px !important;
                padding: 2px !important;
              }
              .fc-col-header-cell {
                font-size: 11px !important;
                padding: 4px 2px !important;
              }
              .fc-timegrid-event {
                font-size: 9px !important;
                padding: 1px 2px !important;
                line-height: 1.1 !important;
              }
              .fc-event-title {
                font-size: 9px !important;
                line-height: 1.1 !important;
              }
              .fc-timegrid-axis {
                width: 35px !important;
              }
              .fc-scrollgrid-sync-table {
                font-size: 10px !important;
              }
            }

            /* Tablet optimizations */
            @media (min-width: 769px) and (max-width: 1024px) {
              .fc-timegrid-slot-label {
                font-size: 11px !important;
              }
              .fc-col-header-cell {
                font-size: 12px !important;
              }
              .fc-timegrid-event {
                font-size: 10px !important;
              }
            }
          `}),i.jsx(yo,{ref:p,plugins:[Pc],initialView:"timeGridWeek",headerToolbar:!1,height:"auto",events:u,locale:Ku,initialDate:(l==null?void 0:l.startDate)||new Date(2025,0,6),editable:!1,selectable:!1,selectMirror:!1,dayMaxEvents:!1,slotMinTime:"03:00:00",slotMaxTime:"23:00:00",slotDuration:"00:30:00",slotLabelInterval:"01:00:00",firstDay:1,weekends:!0,allDaySlot:!1,eventDisplay:"block",eventMinHeight:15,eventShortHeight:30,dayHeaderFormat:{weekday:"short",month:"numeric",day:"numeric"},slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},businessHours:{daysOfWeek:[1,2,3,4,5,6,0],startTime:"03:00",endTime:"23:00"},eventContent:g=>{var S,N,k;const{event:y}=g,b=(N=(S=y.extendedProps)==null?void 0:S.teacher)==null?void 0:N.full_name,w=(k=y.extendedProps)==null?void 0:k.classroom,j=new Date(y.start).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1}),_=new Date(y.end).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",hour12:!1});return i.jsxs("div",{className:"p-1 text-xs",children:[i.jsxs("div",{className:"font-semibold text-white/90 text-[10px] mb-1",children:[j," - ",_]}),i.jsx("div",{className:"font-medium truncate",children:y.title}),b&&i.jsx("div",{className:"opacity-90 truncate",children:b}),w&&i.jsxs("div",{className:"opacity-75 truncate",children:[" ",w]})]})},eventClick:()=>{},select:()=>{},eventClassNames:"cursor-default"})]}),i.jsx("div",{className:"mt-4 text-center text-sm text-gray-500",children:i.jsx("p",{children:" Jadwal ini adalah tampilan publik - hanya untuk melihat"})})]})},aAe=()=>{const{token:t}=ku();cc();const[e,r]=x.useState(null),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState(1),[d,u]=x.useState(!1),[h,f]=x.useState(null),m=()=>{window.open(`/external/${t}/overview`,"_blank")},v=()=>{window.open(`/external/${t}/events`,"_blank")};x.useEffect(()=>{(async()=>{var w;if(!t){o("Token tidak valid"),a(!1);return}try{console.log(" PRODUCTION DEBUG - Starting data fetch"),console.log(" PRODUCTION DEBUG - Token exists:",!!t),console.log(" PRODUCTION DEBUG - Supabase URL configured:",!1);try{const{data:q,error:O}=await W.from("schools").select("id").limit(1);console.log(" PRODUCTION DEBUG - Supabase connection test:",O?"FAILED":"SUCCESS"),O&&console.log(" PRODUCTION DEBUG - Connection error:",O.message)}catch(q){console.log(" PRODUCTION DEBUG - Connection exception:",q)}let j,_;try{console.log(" PRODUCTION DEBUG - Starting token decode for:",t);const q=await U_(t);j=q.classId,_=q.schoolId,console.log(" PRODUCTION DEBUG - Token decoded:",{classId:j,schoolId:_}),console.log(" PRODUCTION DEBUG - Token decoded successfully"),console.log(" PRODUCTION DEBUG - School ID exists:",!!_),console.log(" PRODUCTION DEBUG - Class ID exists:",!!j)}catch(q){console.error(" PRODUCTION DEBUG - Token decode failed:",q),console.log(" PRODUCTION DEBUG - Token value:",t),console.log(" PRODUCTION DEBUG - Error details:",{message:q instanceof Error?q.message:"Unknown error",stack:q instanceof Error?q.stack:"No stack trace"}),o(`Akses tidak valid: ${q instanceof Error?q.message:"Unknown error"}`),a(!1);return}console.log(" PRODUCTION DEBUG - Fetching school data for ID:",_);const{data:S,error:N}=await W.from("schools").select("name, logo_url, address, phone, email").eq("id",_).single();if(console.log(" PRODUCTION DEBUG - School query result:",{data:S,error:N,hasData:!!S}),N){console.log(" PRODUCTION DEBUG - School fetch failed"),console.log(" PRODUCTION DEBUG - Error code:",N.code),console.log(" PRODUCTION DEBUG - Error message:",N.message),console.log(" PRODUCTION DEBUG - School ID used:",_),(N.code==="PGRST116"||(w=N.message)!=null&&w.includes("policy"))&&(console.log(" PRODUCTION DEBUG - RLS Policy issue detected"),console.log(" PRODUCTION DEBUG - Public access policies may not be configured")),N.code==="PGRST116"?o("Akses publik belum dikonfigurasi. Silakan hubungi administrator."):o("Data tidak ditemukan"),a(!1);return}const{data:k,error:E}=await W.from("classes").select("id, name, level").eq("id",j).eq("school_id",_).single();if(E){o("Data tidak ditemukan"),a(!1);return}const{data:P,error:T}=await W.from("classes").select("id, name, level, grade").eq("school_id",_).order("name");let D=[],A=0;const C=1e3;let R=!0,L=0;for(;R;){const{data:q,error:O}=await W.from("schedules_view").select("*").eq("school_id",_).not("day_of_week","is",null).order("academic_week",{ascending:!0}).order("day_of_week",{ascending:!0}).order("start_time",{ascending:!0}).range(A,A+C-1);if(O){o("Data tidak ditemukan"),a(!1);return}if(!q||q.length===0){R=!1;break}D=[...D,...q],L+=q.length,q.length<C?R=!1:A+=C,L>=5e4&&(R=!1)}if(D.length===0){o("Data tidak ditemukan"),a(!1);return}const{data:M}=await W.from("academic_years").select("*").eq("school_id",_).eq("is_active",!0).single();let I;if(M){const q=new Date(M.start_date),O=new Date(M.end_date),F=[];let G=new Date(q);G.setDate(G.getDate()-G.getDay()+1);let Y=1;for(;G<=O&&Y<=52;){const Z=new Date(G);Z.setDate(G.getDate()+6),F.push({weekNumber:Y,startDate:new Date(G),endDate:Z,label:`Minggu ${Y}`,dateRange:`${G.getDate()}/${G.getMonth()+1} - ${Z.getDate()}/${Z.getMonth()+1}`,isCurrentWeek:!1}),G.setDate(G.getDate()+7),Y++}I=F}else{const q=new Date(2025,0,6);I=Array.from({length:52},(O,F)=>{const G=F+1,Y=new Date(q);Y.setDate(q.getDate()+F*7);const Z=new Date(Y);return Z.setDate(Y.getDate()+6),{weekNumber:G,startDate:Y,endDate:Z,label:`Minggu ${G}`,dateRange:`${Y.getDate()}/${Y.getMonth()+1} - ${Z.getDate()}/${Z.getMonth()+1}`,isCurrentWeek:!1}})}const{data:B,error:H}=await W.from("time_sessions").select("*").eq("school_id",_).order("start_time",{ascending:!0});r({school:S,class:k,classes:P||[],schedules:D||[],academicWeeks:I,timeSessions:B||[]}),f(j)}catch{o("Terjadi kesalahan saat memuat data")}finally{a(!1)}})()},[t]);const p=x.useMemo(()=>e!=null&&e.schedules?e.schedules.filter(b=>!(h&&b.class_id!==h)):[],[e==null?void 0:e.schedules,h]),g=x.useMemo(()=>{if(!h||!(e!=null&&e.classes))return"Semua Kelas";const b=e.classes.find(w=>w.id===h);return b?b.name:"Kelas Tidak Ditemukan"},[h,e==null?void 0:e.classes]),y=x.useMemo(()=>!h||!(e!=null&&e.schedules)?[]:e.schedules.filter(w=>!(w.class_id!==h||w.academic_week!==l)).map(w=>{const _=["","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"][w.day_of_week]||"Unknown",S=new Date(`2000-01-01T${w.start_time}`),k=(new Date(`2000-01-01T${w.end_time}`).getTime()-S.getTime())/(1e3*60),E=Math.round(k/45*100)/100;return{id:w.id,mapel:w.subject_name||"Mata Pelajaran",jp:E,tujuan_pembelajaran:w.tujuan_pembelajaran||"-",materi_pembelajaran:w.materi_pembelajaran||"-",catatan_guru:w.notes||"-",day:_,time:`${w.start_time} - ${w.end_time}`,color:w.subject_color||"#3B82F6"}}).sort((w,j)=>{const _=["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],S=_.indexOf(w.day)-_.indexOf(j.day);return S!==0?S:w.time.localeCompare(j.time)}),[e==null?void 0:e.schedules,l,h]);return n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),i.jsx("p",{className:"text-gray-600",children:"Memuat jadwal..."})]})}):s||!e?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsx(ie,{className:"w-full max-w-md",children:i.jsx(oe,{className:"p-6",children:i.jsx(Ps,{variant:"destructive",children:i.jsx(Ms,{children:s||"Data tidak ditemukan"})})})})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"sticky top-0 z-50 bg-white border-b border-gray-200 shadow-sm backdrop-blur-sm bg-white/95",children:i.jsx("div",{className:"max-w-7xl mx-auto px-3 md:px-4 py-3 md:py-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 min-w-0 flex-1",children:[e.school.logo_url&&i.jsx("img",{src:e.school.logo_url,alt:"Logo Sekolah",className:"h-8 w-8 md:h-12 md:w-12 object-contain flex-shrink-0"}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 truncate",children:e.school.name}),i.jsxs("p",{className:"text-sm md:text-base text-gray-600 truncate",children:["Jadwal ",g]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 lg:space-x-6",children:[i.jsxs("div",{className:"hidden lg:flex items-center space-x-3",children:[i.jsxs(K,{onClick:()=>u(!0),variant:"outline",size:"sm",className:"flex items-center gap-2 bg-green-50 border-green-200 text-green-700 hover:bg-green-100 hover:border-green-300",children:[i.jsx(Vo,{className:"h-4 w-4"}),"Hitung JP"]}),i.jsxs(K,{onClick:m,variant:"outline",size:"sm",className:"flex items-center gap-2 bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 hover:border-blue-300",children:[i.jsx(Ni,{className:"h-4 w-4"}),"Overview"]}),i.jsxs(K,{onClick:v,variant:"outline",size:"sm",className:"flex items-center gap-2 bg-lime-50 border-lime-200 text-lime-700 hover:bg-lime-100 hover:border-lime-300",children:[i.jsx(cn,{className:"h-4 w-4"}),"Kaldik"]})]}),i.jsxs("div",{className:"hidden md:flex lg:hidden items-center space-x-2",children:[i.jsx(K,{onClick:()=>u(!0),variant:"outline",size:"sm",className:"bg-green-50 border-green-200 text-green-700 hover:bg-green-100 p-2",children:i.jsx(Vo,{className:"h-4 w-4"})}),i.jsx(K,{onClick:m,variant:"outline",size:"sm",className:"bg-blue-50 border-blue-200 text-blue-700 hover:bg-blue-100 p-2",children:i.jsx(Ni,{className:"h-4 w-4"})}),i.jsx(K,{onClick:v,variant:"outline",size:"sm",className:"bg-lime-50 border-lime-200 text-lime-700 hover:bg-lime-100 p-2",children:i.jsx(cn,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"text-right text-xs md:text-sm text-gray-500 hidden sm:block",children:[i.jsxs("p",{className:"flex items-center justify-end",children:[i.jsx(Ve,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),i.jsx("span",{className:"hidden md:inline",children:"TA "}),"2025/26"]}),i.jsxs("p",{className:"flex items-center justify-end mt-1",children:[i.jsx(tr,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),g]})]})]})]})})}),i.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-white border-t border-gray-200 shadow-lg",children:i.jsxs("div",{className:"grid grid-cols-3 gap-1 p-2",children:[i.jsxs(K,{onClick:()=>u(!0),variant:"ghost",className:"flex flex-col items-center gap-1 h-auto py-3 px-2 bg-green-50 text-green-700 hover:bg-green-100",children:[i.jsx(Vo,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium",children:"Hitung JP"})]}),i.jsxs(K,{onClick:m,variant:"ghost",className:"flex flex-col items-center gap-1 h-auto py-3 px-2 bg-blue-50 text-blue-700 hover:bg-blue-100",children:[i.jsx(Ni,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium",children:"Overview"})]}),i.jsxs(K,{onClick:v,variant:"ghost",className:"flex flex-col items-center gap-1 h-auto py-3 px-2 bg-lime-50 text-lime-700 hover:bg-lime-100",children:[i.jsx(cn,{className:"h-5 w-5"}),i.jsx("span",{className:"text-xs font-medium",children:"Kaldik"})]})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-3 md:px-4 py-4 md:py-6 space-y-4 md:space-y-6 pt-6 md:pt-8 pb-20 md:pb-6",children:[i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[i.jsx(qa,{className:"h-5 w-5 text-primary"}),"Filter Kelas"]})}),i.jsx(oe,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Pilih Kelas:"}),i.jsxs(Re,{value:h||"all",onValueChange:b=>f(b==="all"?null:b),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Kelas"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Kelas"}),e.classes.map(b=>i.jsxs(he,{value:b.id,className:"text-foreground hover:bg-accent",children:[b.name," (",b.level," ",b.grade,")"]},b.id))]})]})]})})})]}),i.jsx(ie,{children:i.jsx(oe,{className:"p-6",children:i.jsx(nAe,{schedules:p,academicWeeks:e.academicWeeks,timeSessions:e.timeSessions,selectedWeek:l,onWeekChange:c,selectedClassId:h||e.class.id,className:"w-full"})})}),i.jsxs(ie,{className:"bg-card border-border",children:[i.jsxs(_e,{children:[i.jsxs(Ee,{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[i.jsx(Kt,{className:"h-5 w-5 text-primary"}),"Daftar Kegiatan Mingguan"]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Minggu ",l," - ",g]})]}),i.jsx(oe,{children:y.length===0?i.jsxs("div",{className:"p-8 bg-card rounded-lg border border-border text-center",children:[i.jsx(Gt,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),i.jsx("p",{className:"text-muted-foreground",children:"Belum ada kegiatan terjadwal untuk minggu ini"})]}):i.jsxs("div",{className:"bg-card rounded-lg border border-border overflow-hidden",children:[i.jsx("div",{className:"bg-muted/50 px-6 py-4 border-b border-border",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm font-semibold text-foreground",children:[i.jsxs("div",{className:"col-span-2 flex items-center space-x-2",children:[i.jsx(Kt,{className:"h-4 w-4 text-primary"}),i.jsx("span",{children:"MAPEL"})]}),i.jsxs("div",{className:"col-span-1 flex items-center space-x-2",children:[i.jsx(Gt,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{children:"JP"})]}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(Kx,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{children:"TUJUAN PEMBELAJARAN"})]}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(Bx,{className:"h-4 w-4 text-orange-500"}),i.jsx("span",{children:"MATERI PEMBELAJARAN"})]}),i.jsxs("div",{className:"col-span-3 flex items-center space-x-2",children:[i.jsx(kA,{className:"h-4 w-4 text-purple-500"}),i.jsx("span",{children:"CATATAN GURU"})]})]})}),i.jsx("div",{className:"divide-y divide-border",children:y.map(b=>i.jsx("div",{className:"px-6 py-4 hover:bg-accent/30 transition-colors",children:i.jsxs("div",{className:"grid grid-cols-12 gap-4 text-sm",children:[i.jsx("div",{className:"col-span-2",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:b.color}}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-foreground",children:b.mapel}),i.jsxs("div",{className:"text-xs text-muted-foreground",children:[b.day,"  ",b.time]})]})]})}),i.jsx("div",{className:"col-span-1",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[b.jp," JP"]})})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"text-foreground",children:b.tujuan_pembelajaran})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"text-foreground",children:b.materi_pembelajaran})}),i.jsx("div",{className:"col-span-3",children:i.jsx("div",{className:"text-foreground",children:b.catatan_guru})})]})},b.id))})]})})]})]}),i.jsx("div",{className:"bg-white border-t border-gray-200 mt-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"text-center text-sm text-gray-500",children:[i.jsxs("p",{className:"flex items-center justify-center",children:[i.jsx(Om,{className:"h-4 w-4 mr-1"}),e.school.address]}),(e.school.phone||e.school.email)&&i.jsxs("p",{className:"mt-1",children:[e.school.phone&&i.jsxs("span",{className:"mr-4",children:[" ",e.school.phone]}),e.school.email&&i.jsxs("span",{children:[" ",e.school.email]})]})]})})}),d&&i.jsx(g5,{isOpen:d,onClose:()=>u(!1),selectedClassId:h||e.class.id,selectedWeek:l})]})},sAe=(t,e)=>Ye({queryKey:["public-schedule-subjects",t,e],queryFn:async()=>{if(!t||!e)return[];console.log(" Fetching public schedule subjects for:",{school_id:t,academic_year_id:e});const{data:r,error:n}=await W.from("schedule_subjects").select(`
          id, name, color, session_category_id,
          session_categories (id, name, color)
        `).eq("school_id",t).eq("academic_year_id",e).order("name",{ascending:!0});if(n)throw console.error(" Error fetching public schedule subjects:",n),n;return console.log(" Public schedule subjects fetched:",{count:(r==null?void 0:r.length)||0,data:r==null?void 0:r.map(a=>{var s;return{name:a.name,category:(s=a.session_categories)==null?void 0:s.name}})}),r||[]},enabled:!!t&&!!e,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2}),iAe=(t,e)=>Ye({queryKey:["public-extracurriculars",t,e],queryFn:async()=>{if(!t||!e)return[];console.log(" Fetching public extracurriculars for:",{school_id:t,academic_year_id:e});const{data:r,error:n}=await W.from("extracurriculars").select(`
          id, name, color, session_category_id,
          session_categories (id, name, color)
        `).eq("school_id",t).eq("academic_year_id",e).order("name",{ascending:!0});if(n)throw console.error(" Error fetching public extracurriculars:",n),n;return console.log(" Public extracurriculars fetched:",{count:(r==null?void 0:r.length)||0,data:r==null?void 0:r.map(a=>{var s;return{name:a.name,category:(s=a.session_categories)==null?void 0:s.name}})}),r||[]},enabled:!!t&&!!e,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2}),oAe=(t,e)=>Ye({queryKey:["public-session-categories",t,e],queryFn:async()=>{if(!t||!e)return[];console.log(" Fetching public session categories for:",{school_id:t,academic_year_id:e});const{data:r,error:n}=await W.from("session_categories").select("id, name, color").eq("school_id",t).eq("academic_year_id",e).order("created_at",{ascending:!0});if(n)throw console.error(" Error fetching public session categories:",n),n;return console.log(" Public session categories fetched:",{count:(r==null?void 0:r.length)||0,categories:r==null?void 0:r.map(a=>({name:a.name,color:a.color}))}),r||[]},enabled:!!t&&!!e,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2}),lAe=(t,e)=>Ye({queryKey:["public-classes",t,e],queryFn:async()=>{if(!t||!e)return[];console.log(" Fetching public classes for:",{school_id:t,academic_year_id:e});const{data:r,error:n}=await W.from("classes").select("id, name, level, grade").eq("school_id",t).eq("academic_year_id",e).order("level",{ascending:!0});if(n)throw console.error(" Error fetching public classes:",n),n;return console.log(" Public classes fetched:",{count:(r==null?void 0:r.length)||0,classes:r==null?void 0:r.map(a=>({name:a.name,level:a.level,grade:a.grade}))}),r||[]},enabled:!!t&&!!e,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:2}),cAe=t=>Ye({queryKey:["public-active-academic-year",t],queryFn:async()=>{if(!t)return null;console.log(" Fetching public active academic year for:",{school_id:t});const{data:e,error:r}=await W.from("academic_years").select("*").eq("school_id",t).eq("is_active",!0).single();if(r)throw console.error(" Error fetching public active academic year:",r),r;return console.log(" Public active academic year fetched:",{year_name:e==null?void 0:e.year_name,id:e==null?void 0:e.id}),e},enabled:!!t,staleTime:10*60*1e3,gcTime:20*60*1e3,retry:2}),dAe=t=>Ye({queryKey:["public-academic-weeks-generated",t==null?void 0:t.id],queryFn:async()=>{var o,l;if(!t)return[];console.log(" Generating public academic weeks for:",{academic_year:t.year_name,start_date:t.start_date,end_date:t.end_date});const e=new Date(t.start_date),r=new Date(t.end_date),n=[];let a=Cr(e,{weekStartsOn:1}),s=1;for(;a<=r;){const c=oo(a,{weekStartsOn:1});n.push({weekNumber:s,startDate:a,endDate:c,label:`Minggu ${s}`,dateRange:`${be(a,"dd MMM",{locale:bt})} - ${be(c,"dd MMM yyyy",{locale:bt})}`,isCurrentWeek:Xm(new Date,{start:a,end:c})}),a=Tl(a,1),s++}return console.log(" Public academic weeks generated:",{count:n.length,firstWeek:(o=n[0])==null?void 0:o.dateRange,lastWeek:(l=n[n.length-1])==null?void 0:l.dateRange}),n},enabled:!!t,staleTime:10*60*1e3,gcTime:20*60*1e3,retry:2}),uAe=()=>{const{token:t}=ku(),e=cc(),[r,n]=x.useState(null),[a,s]=x.useState(!0),[o,l]=x.useState(null),[c,d]=x.useState(null),[u,h]=x.useState(null),[f,m]=x.useState(null),[v,p]=x.useState(null),[g,y]=x.useState(null),b=()=>{e(`/external/${t}`)};x.useEffect(()=>{(async()=>{if(!t){l("Token tidak valid"),s(!1);return}try{const R=await U_(t);y(R),console.log(" Token decoded successfully:",R)}catch(R){console.error(" Token decode error:",R),l("Token tidak valid atau rusak"),s(!1)}})()},[t]);const{data:w}=cAe((g==null?void 0:g.schoolId)||""),{data:j=[]}=dAe(w),{data:_=[]}=lAe((g==null?void 0:g.schoolId)||"",(w==null?void 0:w.id)||""),{data:S=[]}=sAe((g==null?void 0:g.schoolId)||"",(w==null?void 0:w.id)||""),{data:N=[]}=iAe((g==null?void 0:g.schoolId)||"",(w==null?void 0:w.id)||""),{data:k=[]}=oAe((g==null?void 0:g.schoolId)||"",(w==null?void 0:w.id)||""),{data:E=[],isLoading:P,error:T}=Ks(),D=x.useMemo(()=>{if(!c||c==="all")return"Semua Kelas";const C=_==null?void 0:_.find(R=>R.id===c);return C?`${C.name} (${C.level} ${C.grade})`:c===(r==null?void 0:r.class.id)?r.class.name:"Kelas"},[c,_,r]);x.useEffect(()=>{(async()=>{if(g)try{const{data:R,error:L}=await W.from("schools").select("name, logo_url, address, phone, email").eq("id",g.schoolId).single();if(L){l("Data sekolah tidak ditemukan"),s(!1);return}const{data:M,error:I}=await W.from("classes").select("id, name, level").eq("id",g.classId).eq("school_id",g.schoolId).single();if(I){l("Data kelas tidak ditemukan"),s(!1);return}n({school:R,class:M,classes:[],academicYear:null,scheduleSubjects:[],extracurriculars:[],sessionCategories:[]}),d(g.classId)}catch{l("Terjadi kesalahan saat memuat data")}finally{s(!1)}})()},[g]),x.useEffect(()=>{g&&r&&w&&s(!1)},[g,r,w]);const A=x.useMemo(()=>E?E.filter(C=>{if(c&&c!=="all"&&C.class_id!==c||u&&C.session_category_id!==u||f&&C.subject_id!==f)return!1;if(v&&j.length>0){const R=j.find(L=>L.weekNumber===C.academic_week);if(R){const M=new Date(R.startDate).getMonth()+1;if(v==="1"){if(M<7||M>12)return!1}else if(v==="2"&&(M<1||M>6))return!1}}return!0}):[],[E,j,c,u,f,v]);return a||P?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),i.jsx("p",{className:"text-gray-600",children:"Memuat overview jadwal..."})]})}):o||T||!r?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsx(ie,{className:"w-full max-w-md",children:i.jsx(oe,{className:"p-6",children:i.jsx(Ps,{variant:"destructive",children:i.jsx(Ms,{children:o||(T==null?void 0:T.message)||"Data tidak ditemukan"})})})})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:i.jsx("div",{className:"max-w-7xl mx-auto px-3 md:px-4 py-4 md:py-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 min-w-0 flex-1",children:[i.jsxs(K,{onClick:b,variant:"outline",size:"sm",className:"flex items-center gap-1 md:gap-2 px-2 md:px-3",children:[i.jsx(yA,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Kembali ke Jadwal"}),i.jsx("span",{className:"sm:hidden",children:"Kembali"})]}),r.school.logo_url&&i.jsx("img",{src:r.school.logo_url,alt:"Logo Sekolah",className:"h-8 w-8 md:h-12 md:w-12 object-contain flex-shrink-0"}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("h1",{className:"text-lg md:text-2xl font-bold text-gray-900 flex items-center gap-1 md:gap-2",children:[i.jsx(Ni,{className:"h-5 w-5 md:h-6 md:w-6 text-blue-600"}),i.jsx("span",{className:"truncate",children:"Overview Jadwal"})]}),i.jsxs("p",{className:"text-sm md:text-base text-gray-600 truncate",children:[r.school.name," - Kelas ",D]})]})]}),i.jsxs("div",{className:"text-right text-xs md:text-sm text-gray-500 hidden sm:block",children:[i.jsxs("p",{className:"flex items-center justify-end",children:[i.jsx(Ve,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),i.jsx("span",{className:"hidden md:inline",children:"TA "}),"2025/26"]}),i.jsxs("p",{className:"flex items-center justify-end mt-1",children:[i.jsx(tr,{className:"h-3 w-3 md:h-4 md:w-4 mr-1"}),D]})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[i.jsxs(ie,{className:"bg-card border-border shadow-sm",children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"text-lg font-semibold text-foreground flex items-center gap-2",children:[i.jsx(qa,{className:"h-5 w-5 text-primary"}),"Filter Data"]})}),i.jsx(oe,{children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Kelas:"}),i.jsxs(Re,{value:c||"all",onValueChange:C=>d(C==="all"?null:C),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Kelas"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Kelas"}),_.map(C=>i.jsxs(he,{value:C.id,className:"text-foreground hover:bg-accent",children:[C.name," (",C.level," ",C.grade,")"]},C.id))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Kategori:"}),i.jsxs(Re,{value:u||"all",onValueChange:C=>{const R=C==="all"?null:C;h(R),R!==u&&m(null)},children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Kategori"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Kategori"}),k.map(C=>i.jsx(he,{value:C.id,className:"text-foreground hover:bg-accent",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),C.name]})},C.id))]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Semester:"}),i.jsxs(Re,{value:v||"all",onValueChange:C=>p(C==="all"?null:C),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Semester"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Semester"}),i.jsx(he,{value:"1",className:"text-foreground hover:bg-accent",children:"Semester 1 (Juli - Desember)"}),i.jsx(he,{value:"2",className:"text-foreground hover:bg-accent",children:"Semester 2 (Januari - Juni)"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-foreground",children:"Filter Pelajaran/Kegiatan:"}),i.jsxs(Re,{value:f||"all",onValueChange:C=>m(C==="all"?null:C),children:[i.jsx(De,{className:"w-full bg-background border-border text-foreground",children:i.jsx($e,{placeholder:"Semua Pelajaran/Kegiatan"})}),i.jsxs(Pe,{className:"bg-popover border-border",children:[i.jsx(he,{value:"all",className:"text-foreground hover:bg-accent",children:"Semua Pelajaran/Kegiatan"}),S.filter(C=>!u||C.session_category_id===u).map(C=>i.jsx(he,{value:C.id,className:"text-foreground hover:bg-accent",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),C.name]})},C.id)),N.filter(C=>!u||C.session_category_id===u).map(C=>i.jsx(he,{value:C.id,className:"text-foreground hover:bg-accent",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),C.name]})},C.id))]})]})]})]})})]}),i.jsx(w5,{schedules:A,isLoading:P,academicWeeks:j}),i.jsx(x5,{schedules:A,isLoading:P,selectedSemester:v,academicWeeks:j,activeAcademicYear:w})]}),i.jsx("div",{className:"bg-white border-t border-gray-200 mt-8",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"text-center text-sm text-gray-500",children:[i.jsxs("p",{className:"flex items-center justify-center",children:[i.jsx(Om,{className:"h-4 w-4 mr-1"}),r.school.address]}),(r.school.phone||r.school.email)&&i.jsxs("p",{className:"mt-1",children:[r.school.phone&&i.jsxs("span",{className:"mr-4",children:[" ",r.school.phone]}),r.school.email&&i.jsxs("span",{children:[" ",r.school.email]})]}),i.jsxs("p",{className:"mt-2 text-xs text-gray-400",children:[" Overview Jadwal - Tampilan Publik untuk Kelas ",D]})]})})})]})},hAe=({month:t,holidays:e})=>{const r=Qt(t),n=Ua(t),a=Cr(r,{weekStartsOn:1}),s=oo(n,{weekStartsOn:1}),o=Hn({start:a,end:s}),l=d=>e.filter(u=>{const h=hr(u.start_date),f=hr(u.end_date);return Xm(d,{start:h,end:f})}),c=e.filter(d=>Ca(hr(d.start_date),t)||Ca(hr(d.end_date),t)).sort((d,u)=>new Date(d.start_date).getTime()-new Date(u.start_date).getTime());return i.jsxs("div",{className:"bg-card border border-lime-400/20 rounded-xl p-4 shadow-lg flex flex-col h-full",children:[i.jsx("h4",{className:"text-lg font-semibold text-center mb-3 text-card-foreground",children:be(t,"MMMM yyyy",{locale:bt})}),i.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sen","Sel","Rab","Kam","Jum","Sab","Min"].map(d=>i.jsx("div",{className:"text-xs font-medium text-muted-foreground text-center p-1",children:d},d))}),i.jsx("div",{className:"grid grid-cols-7 gap-1",children:o.map((d,u)=>{const h=l(d),f=Ca(d,t),m=rr(d,new Date),v=h.length>0,p=v?{backgroundColor:h[0].color}:{};return i.jsx("div",{className:se("relative h-10 w-10 text-xs rounded-full transition-colors flex items-center justify-center","border border-transparent",f?"text-foreground":"text-muted-foreground/50",m&&!v&&"bg-primary/20 border-primary/50",v&&"text-white font-bold shadow-inner cursor-pointer hover:opacity-80",!v&&"hover:bg-muted/50"),style:p,title:v?h.map(g=>g.name).join(", "):"",children:be(d,"d")},`${be(d,"yyyy-MM-dd")}-${u}`)})}),c.length>0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-border/50 flex-grow min-h-0",children:i.jsx("div",{className:"space-y-1.5 max-h-28 overflow-y-auto pr-2",children:c.map(d=>{const u=hr(d.start_date),h=hr(d.end_date),f=!rr(u,h);return i.jsxs("div",{className:"flex items-start gap-2 text-xs p-1.5 rounded-md bg-muted/30",children:[i.jsx("div",{className:"w-2 h-2 rounded-full mt-1 flex-shrink-0",style:{backgroundColor:d.color}}),i.jsxs("div",{className:"flex-grow",children:[i.jsxs("span",{className:"font-semibold",children:[f?`${be(u,"d")} - ${be(h,"d")}`:be(u,"d"),":"]}),i.jsx("span",{className:"ml-1.5 text-muted-foreground",children:d.name}),d.description&&i.jsx("div",{className:"text-xs text-muted-foreground/80 mt-0.5",children:d.description})]})]},d.id)})})})]})},fAe=({year:t,holidays:e,selectedClassId:r})=>{const n=e.filter(d=>!r||r==="all"||!d.class_ids||d.class_ids.length===0?!0:d.class_ids.includes(r)),s=(d=>{const u=[];for(let h=6;h<12;h++)u.push(new Date(d,h,1));for(let h=0;h<6;h++)u.push(new Date(d+1,h,1));return u})(t),o=s.slice(0,6),l=s.slice(6,12),c=(d,u)=>i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4 text-center",children:u}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((h,f)=>i.jsx(hAe,{month:h,holidays:n},`${be(h,"yyyy-MM")}-${f}`))})]});return i.jsxs("div",{className:"space-y-8",children:[c(o,"Semester 1"),c(l,"Semester 2")]})},mAe=()=>{var j;const{token:t}=ku(),[e,r]=x.useState(null),[n,a]=x.useState(!0),[s,o]=x.useState(null),[l,c]=x.useState("all"),[d,u]=x.useState("start_date"),[h,f]=x.useState("asc"),m=()=>{t&&(window.location.href=`/external/${t}`)},v=_=>{d===_?f(h==="asc"?"desc":"asc"):(u(_),f("asc"))},p=_=>{if(!_||_.length===0||!(e!=null&&e.classes))return"Semua Kelas";const S=_.map(N=>{var k;return(k=e.classes.find(E=>E.id===N))==null?void 0:k.name}).filter(Boolean);return S.length>0?S.join(", "):"Semua Kelas"};x.useEffect(()=>{(async()=>{if(!t){o("Token tidak valid"),a(!1);return}try{let S,N;try{const I=atob(t),[B,H]=I.split(":");S=B,N=H}catch{o("Akses tidak valid"),a(!1);return}const{data:k,error:E}=await W.from("schools").select("name, logo_url, address, phone, email").eq("id",N).single();if(E){o("Data tidak ditemukan"),a(!1);return}const{data:P,error:T}=await W.from("classes").select("id, name, level").eq("id",S).eq("school_id",N).single();if(T){o("Data tidak ditemukan"),a(!1);return}const{data:D,error:A}=await W.from("classes").select("id, name, level").eq("school_id",N).order("name"),{data:C,error:R}=await W.from("academic_years").select("id, year_name, start_date, end_date").eq("school_id",N).eq("is_active",!0).single();if(R){o("Data tidak ditemukan"),a(!1);return}const{data:L,error:M}=await W.from("holidays").select("*").eq("school_id",N).eq("academic_year_id",C.id).order("start_date");if(M){o("Data tidak ditemukan"),a(!1);return}r({school:k,class:P,holidays:L||[],classes:D||[],academicYear:C}),c(S)}catch{o("Terjadi kesalahan saat memuat data")}finally{a(!1)}})()},[t]);const g=x.useMemo(()=>{if(!(e!=null&&e.holidays))return[];let _=e.holidays;return l!=="all"&&(_=e.holidays.filter(N=>!N.class_ids||N.class_ids.length===0||N.class_ids.includes(l))),[..._].sort((N,k)=>{let E,P;switch(d){case"name":E=N.name.toLowerCase(),P=k.name.toLowerCase();break;case"start_date":E=new Date(N.start_date),P=new Date(k.start_date);break;case"end_date":E=new Date(N.end_date),P=new Date(k.end_date);break;case"category":E=N.category_id||"",P=k.category_id||"";break;default:return 0}return E<P?h==="asc"?-1:1:E>P?h==="asc"?1:-1:0})},[e==null?void 0:e.holidays,l,d,h]),{effectiveDaysCount:y,totalDays:b}=x.useMemo(()=>{if(!(e!=null&&e.academicYear)||!(e!=null&&e.holidays))return{effectiveDaysCount:0,totalDays:0};const _=new Date(e.academicYear.start_date),S=new Date(e.academicYear.end_date),N=Hn({start:_,end:S}),k=new Set;N.forEach(D=>{ks(D)===0&&k.add(D.toISOString().split("T")[0])}),e.holidays.filter(D=>!l||l==="all"||!D.class_ids||D.class_ids.length===0?!0:D.class_ids.includes(l)).forEach(D=>{const A=la(new Date(D.start_date)),C=la(new Date(D.end_date));Hn({start:A,end:C}).forEach(L=>{k.add(L.toISOString().split("T")[0])})});const P=N.length;return{effectiveDaysCount:P-k.size,totalDays:P}},[e==null?void 0:e.academicYear,e==null?void 0:e.holidays,l]);if(n)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Qr,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-blue-600"}),i.jsx("p",{className:"text-gray-600",children:"Memuat kalender event..."})]})});if(s||!e)return i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsx(ie,{className:"w-full max-w-md",children:i.jsx(oe,{className:"p-6",children:i.jsx(Ps,{variant:"destructive",children:i.jsx(Ms,{children:s||"Data tidak ditemukan"})})})})});const w=new Date(e.academicYear.start_date).getFullYear();return i.jsx("div",{className:"min-h-screen bg-background",children:i.jsxs("div",{className:"max-w-7xl mx-auto p-3 md:p-6 space-y-4 md:space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4 min-w-0 flex-1",children:[i.jsxs(K,{onClick:m,variant:"outline",size:"sm",className:"flex items-center gap-1 md:gap-2 px-2 md:px-3",children:[i.jsx(yA,{className:"h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Kembali ke Jadwal"}),i.jsx("span",{className:"sm:hidden",children:"Kembali"})]}),e.school.logo_url&&i.jsx("img",{src:e.school.logo_url,alt:"Logo Sekolah",className:"h-8 w-8 md:h-12 md:w-12 object-contain flex-shrink-0"}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsxs("div",{className:"flex items-center space-x-1 md:space-x-2 mb-1 md:mb-2",children:[i.jsx(cn,{className:"h-6 w-6 md:h-8 md:w-8 text-lime-400"}),i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-foreground",children:"Kaldik"})]}),i.jsxs("p",{className:"text-sm md:text-base text-muted-foreground truncate",children:[e.school.name," - TA ",e.academicYear.year_name]})]})]})}),i.jsx(ie,{className:"bg-card border-border rounded-2xl p-6",children:i.jsx(oe,{className:"p-0",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ve,{className:"h-5 w-5 text-lime-400"}),i.jsx("span",{className:"text-foreground",children:"Filter Kelas:"})]}),i.jsxs(Re,{value:l,onValueChange:c,children:[i.jsx(De,{className:"w-48 bg-background border-lime-400/30 text-foreground",children:i.jsx($e,{})}),i.jsxs(Pe,{children:[i.jsx(he,{value:"all",children:"Semua Kelas"}),e.classes.map(_=>i.jsx(he,{value:_.id,children:_.name},_.id))]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-lime-500",children:[i.jsx($i,{className:"h-5 w-5"}),i.jsx("span",{children:"Hari Efektif"})]}),i.jsxs("div",{className:"text-2xl font-bold text-foreground mt-1",children:[y," ",i.jsxs("span",{className:"text-base font-normal text-muted-foreground",children:["/ ",b," hari"]})]})]})]})})}),i.jsxs(ie,{className:"bg-card border-border rounded-2xl p-2",children:[i.jsx(_e,{className:"p-6 flex flex-row items-start justify-between",children:i.jsxs("div",{children:[i.jsx(Ee,{className:"text-card-foreground text-xl",children:"Kaldik"}),i.jsx(Hr,{className:"text-muted-foreground mt-1",children:"Lihat kegiatan sepanjang tahun akademik"})]})}),i.jsx(oe,{className:"p-6 bg-transparent",children:i.jsx(fAe,{year:w,holidays:e.holidays,selectedClassId:l})})]}),i.jsxs(ie,{className:"bg-card border-border rounded-2xl p-2 mt-6",children:[i.jsx(_e,{className:"p-6",children:i.jsx(Ee,{className:"text-card-foreground text-xl",children:"Daftar Event"})}),i.jsxs(oe,{className:"bg-transparent",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200 mb-6",children:[i.jsxs("div",{className:"text-sm text-blue-700",children:[i.jsx("strong",{children:"Kelas:"})," ",l==="all"?"Semua Kelas":((j=e.classes.find(_=>_.id===l))==null?void 0:j.name)||"Kelas Tidak Ditemukan"]}),i.jsxs("span",{className:"text-blue-600 text-sm font-medium",children:[g.length," dari ",e.holidays.length," event"]})]}),i.jsx("div",{className:"overflow-x-auto rounded-lg border bg-card",children:i.jsxs(Os,{children:[i.jsx(Rs,{children:i.jsxs(lr,{children:[i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>v("name"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Nama Event",d==="name"&&(h==="asc"?i.jsx(Ei,{className:"h-4 w-4"}):i.jsx(Fn,{className:"h-4 w-4"}))]})}),i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>v("start_date"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Tanggal Mulai",d==="start_date"&&(h==="asc"?i.jsx(Ei,{className:"h-4 w-4"}):i.jsx(Fn,{className:"h-4 w-4"}))]})}),i.jsx(qe,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>v("end_date"),children:i.jsxs("div",{className:"flex items-center gap-1",children:["Tanggal Selesai",d==="end_date"&&(h==="asc"?i.jsx(Ei,{className:"h-4 w-4"}):i.jsx(Fn,{className:"h-4 w-4"}))]})}),i.jsx(qe,{children:"Kelas"}),i.jsx(qe,{children:"Keterangan"})]})}),i.jsx($s,{children:g.length===0?i.jsx(lr,{children:i.jsx(Le,{colSpan:5,className:"text-center text-muted-foreground py-8",children:"Tidak ada event yang ditemukan"})}):g.map(_=>i.jsxs(lr,{className:"hover:bg-muted/50",children:[i.jsx(Le,{className:"font-medium text-foreground",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color||"#3B82F6"}}),i.jsx("span",{children:_.name})]})}),i.jsx(Le,{className:"text-muted-foreground",children:be(hr(_.start_date),"dd MMM yyyy",{locale:bt})}),i.jsx(Le,{className:"text-muted-foreground",children:be(hr(_.end_date),"dd MMM yyyy",{locale:bt})}),i.jsx(Le,{className:"text-muted-foreground text-sm",children:p(_.class_ids)}),i.jsx(Le,{className:"text-muted-foreground text-sm max-w-xs truncate",children:_.description||"-"})]},_.id))})]})})]})]})]})})},gAe=()=>{const{token:t}=ku(),[e,r]=x.useState(!0),[n,a]=x.useState(null),[s,o]=x.useState({});return x.useEffect(()=>{(async()=>{if(!t){a("Token tidak valid"),r(!1);return}const c={tokenDecoding:null,schoolData:null,classData:null,academicYearData:null,scheduleSubjectsData:null,sessionCategoriesData:null,extracurricularsData:null};try{console.log(" Test 1: Token decoding");try{const d=atob(t),[u,h]=d.split(":");c.tokenDecoding={success:!0,decoded:d,classId:u,schoolId:h},console.log(" Token decoded successfully:",{classId:u,schoolId:h}),console.log(" Test 2: School data fetch");try{const{data:f,error:m}=await W.from("schools").select("name, logo_url, address, phone, email").eq("id",h).single();c.schoolData={success:!m,data:f,error:m==null?void 0:m.message},console.log("School data result:",c.schoolData)}catch(f){c.schoolData={success:!1,error:f instanceof Error?f.message:"Unknown error"}}console.log(" Test 3: Class data fetch");try{const{data:f,error:m}=await W.from("classes").select("id, name, level, grade").eq("id",u).eq("school_id",h).single();c.classData={success:!m,data:f,error:m==null?void 0:m.message},console.log("Class data result:",c.classData)}catch(f){c.classData={success:!1,error:f instanceof Error?f.message:"Unknown error"}}console.log(" Test 4: Academic year data fetch");try{const{data:f,error:m}=await W.from("academic_years").select("*").eq("school_id",h).eq("is_active",!0).single();c.academicYearData={success:!m,data:f,error:m==null?void 0:m.message},console.log("Academic year data result:",c.academicYearData)}catch(f){c.academicYearData={success:!1,error:f instanceof Error?f.message:"Unknown error"}}console.log(" Test 5: Schedule subjects data fetch");try{const{data:f,error:m}=await W.from("schedule_subjects").select("id, name, color, session_category_id").eq("school_id",h).limit(5);c.scheduleSubjectsData={success:!m,data:f,error:m==null?void 0:m.message,count:(f==null?void 0:f.length)||0},console.log("Schedule subjects data result:",c.scheduleSubjectsData)}catch(f){c.scheduleSubjectsData={success:!1,error:f instanceof Error?f.message:"Unknown error"}}console.log(" Test 6: Session categories data fetch");try{const{data:f,error:m}=await W.from("session_categories").select("id, name, color").eq("school_id",h).limit(5);c.sessionCategoriesData={success:!m,data:f,error:m==null?void 0:m.message,count:(f==null?void 0:f.length)||0},console.log("Session categories data result:",c.sessionCategoriesData)}catch(f){c.sessionCategoriesData={success:!1,error:f instanceof Error?f.message:"Unknown error"}}console.log(" Test 7: Extracurriculars data fetch");try{const{data:f,error:m}=await W.from("extracurriculars").select("id, name, color, session_category_id").eq("school_id",h).limit(5);c.extracurricularsData={success:!m,data:f,error:m==null?void 0:m.message,count:(f==null?void 0:f.length)||0},console.log("Extracurriculars data result:",c.extracurricularsData)}catch(f){c.extracurricularsData={success:!1,error:f instanceof Error?f.message:"Unknown error"}}}catch(d){c.tokenDecoding={success:!1,error:"Token decode failed"},console.error(" Token decode error:",d)}}catch(d){a("Terjadi kesalahan saat menjalankan test"),console.error(" Test error:",d)}finally{o(c),r(!1)}})()},[t]),e?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Menjalankan test public access..."})]})}):i.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:i.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[i.jsxs(ie,{children:[i.jsx(_e,{children:i.jsx(Ee,{children:" Public Access Test Results"})}),i.jsx(oe,{children:i.jsx("div",{className:"space-y-4",children:Object.entries(s).map(([l,c])=>i.jsxs("div",{className:"border rounded p-4",children:[i.jsxs("h3",{className:"font-semibold mb-2",children:[c!=null&&c.success?"":""," ",l]}),(c==null?void 0:c.error)&&i.jsx(Ps,{variant:"destructive",className:"mb-2",children:i.jsx(Ms,{children:c.error})}),(c==null?void 0:c.data)&&i.jsx("pre",{className:"bg-gray-100 p-2 rounded text-sm overflow-auto",children:JSON.stringify(c.data,null,2)}),(c==null?void 0:c.count)!==void 0&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Count: ",c.count]})]},l))})})]}),n&&i.jsx(Ps,{variant:"destructive",children:i.jsx(Ms,{children:n})})]})})},pAe=()=>{const{token:t}=ku(),[e,r]=x.useState([]),[n,a]=x.useState(!1),s=[{name:"Token Decode",status:"pending",message:"Waiting..."},{name:"Supabase Connection",status:"pending",message:"Waiting..."},{name:"School Data",status:"pending",message:"Waiting..."},{name:"Class Data",status:"pending",message:"Waiting..."},{name:"Schedule Data",status:"pending",message:"Waiting..."},{name:"Academic Year",status:"pending",message:"Waiting..."}],o=(d,u,h,f)=>{r(m=>m.map((v,p)=>p===d?{...v,status:u,message:h,data:f}:v))},l=async()=>{if(!t){r(d=>d.map(u=>({...u,status:"error",message:"No token provided"})));return}a(!0),r(s);try{let d,u;try{const h=await U_(t);d=h.classId,u=h.schoolId,o(0,"success",`Decoded: ${d.substring(0,8)}...`,{classId:d,schoolId:u})}catch(h){o(0,"error",`Failed: ${h instanceof Error?h.message:"Unknown error"}`),a(!1);return}try{const{data:h,error:f}=await W.from("schools").select("count").limit(1);if(f)throw f;o(1,"success","Connection successful")}catch(h){o(1,"error",`Failed: ${h instanceof Error?h.message:"Unknown error"}`)}try{const{data:h,error:f}=await W.from("schools").select("id, name").eq("id",u).single();if(f)throw f;o(2,"success",`Found: ${(h==null?void 0:h.name)||"Unknown"}`,h)}catch(h){o(2,"error",`Failed: ${h instanceof Error?h.message:"Unknown error"}`)}try{const{data:h,error:f}=await W.from("classes").select("id, name, school_id, academic_year_id").eq("id",d).single();if(f)throw f;o(3,"success",`Found: ${(h==null?void 0:h.name)||"Unknown"}`,h)}catch(h){o(3,"error",`Failed: ${h instanceof Error?h.message:"Unknown error"}`)}try{const{data:h,error:f}=await W.from("schedules_view").select("id, subject_name, class_name").eq("class_id",d).limit(5);if(f)throw f;o(4,"success",`Found ${(h==null?void 0:h.length)||0} schedules`,h)}catch(h){o(4,"error",`Failed: ${h instanceof Error?h.message:"Unknown error"}`)}try{const{data:h,error:f}=await W.from("academic_years").select("id, year_name, is_active").eq("school_id",u).eq("is_active",!0).single();if(f)throw f;o(5,"success",`Found: ${(h==null?void 0:h.year_name)||"Unknown"}`,h)}catch(h){o(5,"error",`Failed: ${h instanceof Error?h.message:"Unknown error"}`)}}catch(d){console.error("Test runner error:",d)}finally{a(!1)}};x.useEffect(()=>{l()},[t]);const c=d=>{switch(d){case"success":return i.jsx($i,{className:"h-4 w-4 text-green-500"});case"error":return i.jsx(aL,{className:"h-4 w-4 text-red-500"});default:return i.jsx(Qr,{className:"h-4 w-4 text-gray-400 animate-spin"})}};return i.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs(ie,{children:[i.jsx(_e,{children:i.jsxs(Ee,{className:"flex items-center justify-between",children:[" Public Access Test",i.jsxs(K,{onClick:l,disabled:n,size:"sm",variant:"outline",children:[i.jsx(NA,{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`}),"Run Tests"]})]})}),i.jsxs(oe,{className:"space-y-4",children:[i.jsx(Ps,{children:i.jsxs(Ms,{children:[i.jsx("strong",{children:"Token:"})," ",t?`${t.substring(0,20)}...`:"Not provided"]})}),i.jsx("div",{className:"space-y-3",children:e.map((d,u)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[c(d.status),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-medium",children:d.name}),i.jsx("div",{className:`text-sm ${d.status==="error"?"text-red-600":d.status==="success"?"text-green-600":"text-gray-500"}`,children:d.message}),d.data&&i.jsxs("details",{className:"mt-2",children:[i.jsx("summary",{className:"cursor-pointer text-xs text-blue-600",children:"Show Data"}),i.jsx("pre",{className:"mt-1 text-xs bg-gray-100 p-2 rounded overflow-auto",children:JSON.stringify(d.data,null,2)})]})]})]},u))}),i.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[i.jsx("h3",{className:"font-semibold mb-2",children:"Environment Info:"}),i.jsxs("div",{className:"text-sm space-y-1",children:[i.jsxs("div",{children:["URL: ",window.location.href]}),i.jsxs("div",{children:["User Agent: ",navigator.userAgent]}),i.jsxs("div",{children:["Timestamp: ",new Date().toISOString()]})]})]})]})]})})})},vAe=()=>{const t=QC();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},yAe=new g6({defaultOptions:{queries:{staleTime:0,gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,retry:2,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:1,retryDelay:1e3}}}),bAe=()=>i.jsx(Xq,{children:i.jsx(x6,{client:yAe,children:i.jsx(sF,{attribute:"class",defaultTheme:"light",enableSystem:!1,disableTransitionOnChange:!1,children:i.jsx(Qq,{children:i.jsxs(GA,{children:[i.jsx(Vx,{}),i.jsx(OF,{}),i.jsx(k3,{children:i.jsxs(Rx,{children:[i.jsx(vt,{path:"/",element:i.jsx(nye,{})}),i.jsxs(vt,{element:i.jsx(ez,{}),children:[i.jsx(vt,{path:"/dashboard",element:i.jsx(Wve,{})}),i.jsx(vt,{path:"/subjects",element:i.jsx(yye,{})}),i.jsx(vt,{path:"/subjects-matrix",element:i.jsx(xye,{})}),i.jsx(vt,{path:"/events/*",element:i.jsx(Oxe,{})}),i.jsx(vt,{path:"/classes",element:i.jsx(_Ce,{})}),i.jsx(vt,{path:"/teachers",element:i.jsx(kCe,{})}),i.jsx(vt,{path:"/time-sessions",element:i.jsx(ACe,{})}),i.jsx(vt,{path:"/settings",element:i.jsx(XCe,{})}),i.jsx(vt,{path:"/school-info",element:i.jsx(ZCe,{})}),i.jsx(vt,{path:"/schedules/*",element:i.jsx(bCe,{})})]}),i.jsx(vt,{path:"/public/schedule",element:i.jsx(tAe,{})}),i.jsx(vt,{path:"/external/:token",element:i.jsx(aAe,{})}),i.jsx(vt,{path:"/external/:token/overview",element:i.jsx(uAe,{})}),i.jsx(vt,{path:"/external/:token/events",element:i.jsx(mAe,{})}),i.jsx(vt,{path:"/external/:token/test",element:i.jsx(gAe,{})}),i.jsx(vt,{path:"/external/:token/debug",element:i.jsx(pAe,{})}),i.jsx(vt,{path:"/test-external",element:i.jsx(rAe,{})}),i.jsx(vt,{path:"*",element:i.jsx(vAe,{})})]})})]})})})})}),J5=document.getElementById("root");if(!J5)throw new Error("Root element not found");const xAe=$x(J5);xAe.render(i.jsx(bAe,{}));
